!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.editIt=e():"undefined"!=typeof global?global.editIt=e():"undefined"!=typeof self&&(self.editIt=e())}(function(){var define,module,exports;
return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var common;

module.exports = common = {
  /*
  	Checks to see if o is an object, and it isn't an instance
  	of some class.
  */

  isBareObject: function(o) {
    if ((o != null) && o.constructor === Object) {
      return true;
    }
    return false;
  },
  /*
  	Returns type of an object, including:
  	undefined, null, string, number, array,
  	arguments, element, textnode, whitespace, and object
  */

  typeOf: function(item) {
    var _ref;
    if (item === null) {
      return 'null';
    }
    if (typeof item !== 'object') {
      return typeof item;
    }
    if (Array.isArray(item)) {
      return 'array';
    }
    if (item.nodeName) {
      if (item.nodeType === 1) {
        return 'element';
      }
      if (item.nodeType === 3) {
        return (_ref = /\S/.test(item.nodeValue)) != null ? _ref : {
          'textnode': 'whitespace'
        };
      }
    } else if (typeof item.length === 'number') {
      if (item.callee) {
        return 'arguments';
      }
    }
    return typeof item;
  },
  clone: function(item, includePrototype) {
    if (includePrototype == null) {
      includePrototype = false;
    }
    switch (common.typeOf(item)) {
      case 'array':
        return common._cloneArray(item, includePrototype);
      case 'object':
        return common._cloneObject(item, includePrototype);
      default:
        return item;
    }
  },
  /*
  	Deep clone of an object.
  	From MooTools
  */

  _cloneObject: function(o, includePrototype) {
    var clone, key;
    if (includePrototype == null) {
      includePrototype = false;
    }
    if (common.isBareObject(o)) {
      clone = {};
      for (key in o) {
        clone[key] = common.clone(o[key], includePrototype);
      }
      return clone;
    } else {
      if (!includePrototype) {
        return o;
      }
      if (o instanceof Function) {
        return o;
      }
      clone = Object.create(o.constructor.prototype);
      for (key in o) {
        if (o.hasOwnProperty(key)) {
          clone[key] = common.clone(o[key], includePrototype);
        }
      }
      return clone;
    }
  },
  /*
  	Deep clone of an array.
  	From MooTools
  */

  _cloneArray: function(a, includePrototype) {
    var clone, i;
    if (includePrototype == null) {
      includePrototype = false;
    }
    i = a.length;
    clone = new Array(i);
    while (i--) {
      clone[i] = common.clone(a[i], includePrototype);
    }
    return clone;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX2NvbW1vbi5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcbGliXFxfY29tbW9uLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLEVBQUE7O0FBQUEsQ0FBQSxFQUFpQixHQUFYLENBQU47Q0FFQzs7OztDQUFBO0NBQUEsQ0FJQSxDQUFjLE1BQUMsR0FBZjtDQUVDLEdBQUEsQ0FBMkIsQ0FBM0IsS0FBRztDQUVGLEdBQUEsU0FBTztNQUZSO0NBRmEsVUFNYjtDQVZELEVBSWM7Q0FRZDs7Ozs7Q0FaQTtDQUFBLENBaUJBLENBQVEsQ0FBQSxFQUFSLEdBQVM7Q0FFUixHQUFBLElBQUE7Q0FBQSxHQUFBLENBQXlCO0NBQXpCLEtBQUEsT0FBTztNQUFQO0FBRXNCLENBQXRCLEdBQUEsQ0FBdUMsQ0FBakIsRUFBdEI7QUFBTyxDQUFQLEdBQUEsRUFBTyxPQUFBO01BRlA7Q0FJQSxHQUFBLENBQXVCLEVBQUw7Q0FBbEIsTUFBQSxNQUFPO01BSlA7Q0FRQSxHQUFBLElBQUE7Q0FFQyxHQUFHLENBQWlCLENBQXBCLEVBQUc7Q0FBd0IsUUFBQSxNQUFPO1FBQWxDO0NBQ0EsR0FBRyxDQUFpQixDQUFwQixFQUFHO0NBQXdCLEVBQXFDO0NBQUEsQ0FBYSxRQUFiLEVBQUE7Q0FBaEUsU0FBMkI7UUFINUI7QUFLUSxDQUFBLEdBQUEsQ0FBc0IsQ0FMOUIsRUFBQTtDQU9DLEdBQUcsRUFBSDtDQUFvQixVQUFBLElBQU87UUFQNUI7TUFSQTtBQWlCTyxDQUFQLEdBQUEsRUFBTyxLQUFBO0NBcENSLEVBaUJRO0NBakJSLENBd0NBLENBQU8sQ0FBQSxDQUFQLElBQVEsT0FBRDs7R0FBMEIsR0FBbkI7TUFFYjtDQUFBLEdBQU8sRUFBTSxNQUFOO0NBQVAsTUFBQSxJQUVNO0NBQWEsQ0FBZ0MsRUFBekIsRUFBTSxLQUFOLElBQUEsQ0FBQTtDQUYxQixPQUFBLEdBSU07Q0FBYyxDQUFpQyxFQUExQixFQUFNLE1BQU4sR0FBQSxDQUFBO0NBSjNCO0NBTU0sR0FBQSxXQUFPO0NBTmIsSUFGTTtDQXhDUCxFQXdDTztDQVVQOzs7O0NBbERBO0NBQUEsQ0FzREEsQ0FBYyxNQUFDLEdBQWYsSUFBYztDQUViLE9BQUEsRUFBQTs7R0FGb0MsR0FBbkI7TUFFakI7Q0FBQSxHQUFBLEVBQVMsTUFBTjtDQUVGLENBQUEsQ0FBUSxFQUFSLENBQUE7QUFFQSxDQUFBLEVBQUEsS0FBQSxHQUFBO0NBRUMsQ0FBa0MsQ0FBNUIsRUFBQSxDQUFhLEVBQW5CLFFBQWE7Q0FGZCxNQUZBO0NBTUEsSUFBQSxRQUFPO01BUlI7QUFZaUIsQ0FBaEIsR0FBQSxFQUFBLFVBQUE7Q0FBQSxjQUFPO1FBQVA7Q0FFQSxHQUFZLEVBQVosRUFBQSxJQUF5QjtDQUF6QixjQUFPO1FBRlA7Q0FBQSxFQUlRLEVBQVIsQ0FBQSxHQUFRLEVBQTJCO0FBRW5DLENBQUEsRUFBQSxLQUFBLEdBQUE7Q0FFQyxFQUFHLENBQUEsSUFBSCxNQUFHO0NBRUYsQ0FBa0MsQ0FBNUIsRUFBQSxDQUFhLElBQW5CLE1BQWE7VUFKZjtDQUFBLE1BTkE7Q0FaRCxZQXdCQztNQTFCWTtDQXREZCxFQXNEYztDQTRCZDs7OztDQWxGQTtDQUFBLENBc0ZBLENBQWEsTUFBQyxFQUFkLEtBQWE7Q0FFWixPQUFBOztHQUZtQyxHQUFuQjtNQUVoQjtDQUFBLEVBQUksQ0FBSixFQUFBO0NBQUEsRUFFWSxDQUFaLENBQUE7QUFFTSxDQUFOLENBQUEsQ0FBQSxRQUFNO0NBRUwsQ0FBOEIsQ0FBbkIsRUFBTCxDQUFOLFVBQVc7Q0FOWixJQUlBO0NBTlksVUFVWjtDQWhHRCxFQXNGYTtDQXhGZCxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBjb21tb24gPVxuXG5cdCMjI1xuXHRDaGVja3MgdG8gc2VlIGlmIG8gaXMgYW4gb2JqZWN0LCBhbmQgaXQgaXNuJ3QgYW4gaW5zdGFuY2Vcblx0b2Ygc29tZSBjbGFzcy5cblx0IyMjXG5cdGlzQmFyZU9iamVjdDogKG8pIC0+XG5cblx0XHRpZiBvPyBhbmQgby5jb25zdHJ1Y3RvciBpcyBPYmplY3RcblxuXHRcdFx0cmV0dXJuIHRydWVcblxuXHRcdGZhbHNlXG5cblx0IyMjXG5cdFJldHVybnMgdHlwZSBvZiBhbiBvYmplY3QsIGluY2x1ZGluZzpcblx0dW5kZWZpbmVkLCBudWxsLCBzdHJpbmcsIG51bWJlciwgYXJyYXksXG5cdGFyZ3VtZW50cywgZWxlbWVudCwgdGV4dG5vZGUsIHdoaXRlc3BhY2UsIGFuZCBvYmplY3Rcblx0IyMjXG5cdHR5cGVPZjogKGl0ZW0pIC0+XG5cblx0XHRyZXR1cm4gJ251bGwnIGlmIGl0ZW0gaXMgbnVsbFxuXG5cdFx0cmV0dXJuIHR5cGVvZiBpdGVtIGlmIHR5cGVvZiBpdGVtIGlzbnQgJ29iamVjdCdcblxuXHRcdHJldHVybiAnYXJyYXknIGlmIEFycmF5LmlzQXJyYXkgaXRlbVxuXG5cdFx0IyBGcm9tIE1vb1Rvb2xzXG5cdFx0IyAtIGRvIHdlIGV2ZW4gbmVlZCB0aGlzP1xuXHRcdGlmIGl0ZW0ubm9kZU5hbWVcblxuXHRcdFx0aWYgaXRlbS5ub2RlVHlwZSBpcyAxIHRoZW4gcmV0dXJuICdlbGVtZW50J1xuXHRcdFx0aWYgaXRlbS5ub2RlVHlwZSBpcyAzIHRoZW4gcmV0dXJuICgvXFxTLykudGVzdChpdGVtLm5vZGVWYWx1ZSkgPyAndGV4dG5vZGUnIDogJ3doaXRlc3BhY2UnXG5cblx0XHRlbHNlIGlmIHR5cGVvZiBpdGVtLmxlbmd0aCBpcyAnbnVtYmVyJ1xuXG5cdFx0XHRpZiBpdGVtLmNhbGxlZSB0aGVuIHJldHVybiAnYXJndW1lbnRzJ1xuXG5cdFx0cmV0dXJuIHR5cGVvZiBpdGVtXG5cblx0IyBEZWVwIGNsb25lIG9mIGFueSB2YXJpYWJsZS5cblx0IyBGcm9tIE1vb1Rvb2xzXG5cdGNsb25lOiAoaXRlbSwgaW5jbHVkZVByb3RvdHlwZSA9IGZhbHNlKSAtPlxuXG5cdFx0c3dpdGNoIGNvbW1vbi50eXBlT2YgaXRlbVxuXG5cdFx0XHR3aGVuICdhcnJheScgdGhlbiByZXR1cm4gY29tbW9uLl9jbG9uZUFycmF5IGl0ZW0sIGluY2x1ZGVQcm90b3R5cGVcblxuXHRcdFx0d2hlbiAnb2JqZWN0JyB0aGVuIHJldHVybiBjb21tb24uX2Nsb25lT2JqZWN0IGl0ZW0sIGluY2x1ZGVQcm90b3R5cGVcblxuXHRcdFx0ZWxzZSByZXR1cm4gaXRlbVxuXG5cdCMjI1xuXHREZWVwIGNsb25lIG9mIGFuIG9iamVjdC5cblx0RnJvbSBNb29Ub29sc1xuXHQjIyNcblx0X2Nsb25lT2JqZWN0OiAobywgaW5jbHVkZVByb3RvdHlwZSA9IGZhbHNlKSAtPlxuXG5cdFx0aWYgY29tbW9uLmlzQmFyZU9iamVjdCBvXG5cblx0XHRcdGNsb25lID0ge31cblxuXHRcdFx0Zm9yIGtleSBvZiBvXG5cblx0XHRcdFx0Y2xvbmVba2V5XSA9IGNvbW1vbi5jbG9uZSBvW2tleV0sIGluY2x1ZGVQcm90b3R5cGVcblxuXHRcdFx0cmV0dXJuIGNsb25lXG5cblx0XHRlbHNlXG5cblx0XHRcdHJldHVybiBvIHVubGVzcyBpbmNsdWRlUHJvdG90eXBlXG5cblx0XHRcdHJldHVybiBvIGlmIG8gaW5zdGFuY2VvZiBGdW5jdGlvblxuXG5cdFx0XHRjbG9uZSA9IE9iamVjdC5jcmVhdGUgby5jb25zdHJ1Y3Rvci5wcm90b3R5cGVcblxuXHRcdFx0Zm9yIGtleSBvZiBvXG5cblx0XHRcdFx0aWYgby5oYXNPd25Qcm9wZXJ0eSBrZXlcblxuXHRcdFx0XHRcdGNsb25lW2tleV0gPSBjb21tb24uY2xvbmUgb1trZXldLCBpbmNsdWRlUHJvdG90eXBlXG5cblx0XHRcdGNsb25lXG5cblx0IyMjXG5cdERlZXAgY2xvbmUgb2YgYW4gYXJyYXkuXG5cdEZyb20gTW9vVG9vbHNcblx0IyMjXG5cdF9jbG9uZUFycmF5OiAoYSwgaW5jbHVkZVByb3RvdHlwZSA9IGZhbHNlKSAtPlxuXG5cdFx0aSA9IGEubGVuZ3RoXG5cblx0XHRjbG9uZSA9IG5ldyBBcnJheSBpXG5cblx0XHR3aGlsZSBpLS1cblxuXHRcdFx0Y2xvbmVbaV0gPSBjb21tb24uY2xvbmUgYVtpXSwgaW5jbHVkZVByb3RvdHlwZVxuXG5cdFx0Y2xvbmUiXX0=
},{}],2:[function(require,module,exports){
var object, _common,
  __hasProp = {}.hasOwnProperty;

_common = require('./_common');

module.exports = object = {
  isBareObject: _common.isBareObject.bind(_common),
  /*
  	if object is an instance of a class
  */

  isInstance: function(what) {
    return !this.isBareObject(what);
  },
  /*
  	Alias to _common.typeOf
  */

  typeOf: _common.typeOf.bind(_common),
  /*
  	Alias to _common.clone
  */

  clone: _common.clone.bind(_common),
  /*
  	Empties an object of its properties.
  */

  empty: function(o) {
    var prop;
    for (prop in o) {
      if (o.hasOwnProperty(prop)) {
        delete o[prop];
      }
    }
    return o;
  },
  /*
  	Empties an object. Doesn't check for hasOwnProperty, so it's a tiny
  	bit faster. Use it for plain objects.
  */

  fastEmpty: function(o) {
    var property;
    for (property in o) {
      delete o[property];
    }
    return o;
  },
  /*
  	Overrides values fomr `newValues` on `base`, as long as they
  	already exist in base.
  */

  overrideOnto: function(base, newValues) {
    var key, newVal, oldVal;
    if (!this.isBareObject(newValues) || !this.isBareObject(base)) {
      return base;
    }
    for (key in base) {
      oldVal = base[key];
      newVal = newValues[key];
      if (newVal === void 0) {
        continue;
      }
      if (typeof newVal !== 'object' || this.isInstance(newVal)) {
        base[key] = this.clone(newVal);
      } else {
        if (typeof oldVal !== 'object' || this.isInstance(oldVal)) {
          base[key] = this.clone(newVal);
        } else {
          this.overrideOnto(oldVal, newVal);
        }
      }
    }
    return base;
  },
  /*
  	Takes a clone of 'base' and runs #overrideOnto on it
  */

  override: function(base, newValues) {
    return this.overrideOnto(this.clone(base), newValues);
  },
  append: function(base, toAppend) {
    return this.appendOnto(this.clone(base), toAppend);
  },
  appendOnto: function(base, toAppend) {
    var key, newVal, oldVal;
    if (!this.isBareObject(toAppend) || !this.isBareObject(base)) {
      return base;
    }
    for (key in toAppend) {
      if (!__hasProp.call(toAppend, key)) continue;
      newVal = toAppend[key];
      if (newVal === void 0) {
        continue;
      }
      if (typeof newVal !== 'object' || this.isInstance(newVal)) {
        base[key] = newVal;
      } else {
        oldVal = base[key];
        if (typeof oldVal !== 'object' || this.isInstance(oldVal)) {
          base[key] = this.clone(newVal);
        } else {
          this.appendOnto(oldVal, newVal);
        }
      }
    }
    return base;
  },
  groupProps: function(obj, groups) {
    var def, defs, grouped, key, name, shouldAdd, val, _i, _len;
    grouped = {};
    for (name in groups) {
      defs = groups[name];
      grouped[name] = {};
    }
    grouped['rest'] = {};
    top: //;
    for (key in obj) {
      val = obj[key];
      shouldAdd = false;
      for (name in groups) {
        defs = groups[name];
        if (!Array.isArray(defs)) {
          defs = [defs];
        }
        for (_i = 0, _len = defs.length; _i < _len; _i++) {
          def = defs[_i];
          if (typeof def === 'string') {
            if (key === def) {
              shouldAdd = true;
            }
          } else if (def instanceof RegExp) {
            if (def.test(key)) {
              shouldAdd = true;
            }
          } else if (def instanceof Function) {
            if (def(key)) {
              shouldAdd = true;
            }
          } else {
            throw Error('Group definitions must either\
						be strings, regexes, or functions.');
          }
          if (shouldAdd) {
            grouped[name][key] = val;
            continue top;
          }
        }
      }
      grouped['rest'][key] = val;
    }
    return grouped;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2JqZWN0LmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXG9iamVjdC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxXQUFBO0dBQUEsMEJBQUE7O0FBQUEsQ0FBQSxFQUFVLElBQVYsSUFBVTs7QUFFVixDQUZBLEVBRWlCLEdBQVgsQ0FBTjtDQUVDLENBQUEsRUFBYyxHQUFPLEtBQXJCO0NBRUE7OztDQUZBO0NBQUEsQ0FLQSxDQUFZLENBQUEsS0FBQyxDQUFiO0FBRUssQ0FBSixHQUFLLE9BQUwsQ0FBSTtDQVBMLEVBS1k7Q0FJWjs7O0NBVEE7Q0FBQSxDQVlBLEVBQVEsRUFBUixDQUFlO0NBRWY7OztDQWRBO0NBQUEsQ0FpQkEsRUFBTyxDQUFQLEVBQWM7Q0FFZDs7O0NBbkJBO0NBQUEsQ0FzQkEsQ0FBTyxFQUFQLElBQVE7Q0FFUCxHQUFBLElBQUE7QUFBQSxDQUFBLEVBQUEsTUFBQTtDQUVDLEdBQWtCLEVBQWxCLFFBQWtCO0FBQWxCLENBQUEsR0FBUyxFQUFULEVBQUE7UUFGRDtDQUFBLElBQUE7Q0FGTSxVQU1OO0NBNUJELEVBc0JPO0NBUVA7Ozs7Q0E5QkE7Q0FBQSxDQWtDQSxDQUFXLE1BQVg7Q0FFQyxPQUFBO0FBQUEsQ0FBQSxFQUFBLE1BQUEsSUFBQTtBQUFBLENBQUEsS0FBQSxFQUFTO0NBQVQsSUFBQTtDQUZVLFVBSVY7Q0F0Q0QsRUFrQ1c7Q0FNWDs7OztDQXhDQTtDQUFBLENBNENBLENBQWMsQ0FBQSxLQUFDLEdBQWY7Q0FFQyxPQUFBLFdBQUE7QUFBbUIsQ0FBbkIsR0FBQSxLQUFtQixHQUFBO0NBQW5CLEdBQUEsU0FBTztNQUFQO0FBRUEsQ0FBQSxRQUFBLEVBQUE7MEJBQUE7Q0FFQyxFQUFTLEdBQVQsR0FBbUI7Q0FFbkIsR0FBWSxDQUFVLENBQXRCO0NBQUEsZ0JBQUE7UUFGQTtBQUlHLENBQUgsR0FBRyxDQUFtQixDQUF0QixFQUFHLEVBQStCO0NBRWpDLEVBQUssQ0FBQSxDQUFPLENBQUEsRUFBWjtNQUZELEVBQUE7QUFPSSxDQUFILEdBQUcsQ0FBbUIsQ0FBbkIsRUFBSCxFQUFrQztDQUVqQyxFQUFLLENBQUEsQ0FBTyxDQUFBLElBQVo7TUFGRCxJQUFBO0NBTUMsQ0FBc0IsRUFBckIsRUFBRCxJQUFBLEVBQUE7VUFiRjtRQU5EO0NBQUEsSUFGQTtDQUZhLFVBd0JiO0NBcEVELEVBNENjO0NBMEJkOzs7Q0F0RUE7Q0FBQSxDQXlFQSxDQUFVLENBQUEsSUFBVixDQUFXO0NBRVQsQ0FBMkIsRUFBM0IsQ0FBYSxJQUFkLEVBQUEsQ0FBQTtDQTNFRCxFQXlFVTtDQXpFVixDQTZFQSxDQUFRLENBQUEsRUFBUixFQUFRLENBQUM7Q0FFUCxDQUF5QixFQUF6QixDQUFXLEdBQVosRUFBQSxDQUFBO0NBL0VELEVBNkVRO0NBN0VSLENBa0ZBLENBQVksQ0FBQSxJQUFBLENBQUMsQ0FBYjtDQUVDLE9BQUEsV0FBQTtBQUFtQixDQUFuQixHQUFBLElBQW1CLElBQUE7Q0FBbkIsR0FBQSxTQUFPO01BQVA7QUFFQSxDQUFBLFFBQUEsTUFBQTs7OEJBQUE7Q0FFQyxHQUFnQixDQUFZLENBQTVCO0NBQUEsZ0JBQUE7UUFBQTtBQUVHLENBQUgsR0FBRyxDQUFtQixDQUF0QixFQUFHLEVBQStCO0NBRWpDLEVBQUssQ0FBQSxFQUFMLEVBQUE7TUFGRCxFQUFBO0NBUUMsRUFBUyxDQUFLLEVBQWQsRUFBQTtBQUVHLENBQUgsR0FBRyxDQUFtQixDQUFuQixFQUFILEVBQWtDO0NBRWpDLEVBQUssQ0FBQSxDQUFPLENBQUEsSUFBWjtNQUZELElBQUE7Q0FNQyxDQUFvQixFQUFuQixFQUFELElBQUE7VUFoQkY7UUFKRDtDQUFBLElBRkE7Q0FGVyxVQTBCWDtDQTVHRCxFQWtGWTtDQWxGWixDQStHQSxDQUFZLEdBQUEsR0FBQyxDQUFiO0NBRUMsT0FBQSwrQ0FBQTtDQUFBLENBQUEsQ0FBVSxDQUFWLEdBQUE7QUFFQSxDQUFBLFFBQUEsS0FBQTsyQkFBQTtDQUVDLENBQUEsQ0FBZ0IsQ0FBUixFQUFSLENBQVE7Q0FGVCxJQUZBO0NBQUEsQ0FBQSxDQU1rQixDQUFsQixFQUFRLENBQUE7Q0FOUixHQVFBLEdBUkE7QUFTQSxDQUFBLFFBQUEsQ0FBQTtzQkFBQTtDQUVDLEVBQVksRUFBWixDQUFBLEdBQUE7QUFFQSxDQUFBLFVBQUEsR0FBQTs2QkFBQTtBQUVRLENBQVAsR0FBQSxDQUFZLEVBQUwsQ0FBUDtDQUVDLEVBQU8sQ0FBUCxNQUFBO1VBRkQ7QUFJQSxDQUFBLFlBQUEsOEJBQUE7MEJBQUE7QUFFSSxDQUFILEVBQUcsQ0FBQSxDQUFjLENBQWQsRUFBSCxFQUFBO0NBRUMsRUFBRyxDQUFBLENBQU8sT0FBVjtDQUVDLEVBQVksQ0FBWixLQUFBLEtBQUE7Y0FKRjtHQU1RLENBQUEsRUFOUixNQUFBO0NBUUMsRUFBTSxDQUFILFFBQUg7Q0FFQyxFQUFZLENBQVosS0FBQSxLQUFBO2NBVkY7R0FZUSxDQUFBLEVBWlIsRUFBQSxJQUFBO0NBY0MsRUFBRyxDQUFBLFFBQUg7Q0FFQyxFQUFZLENBQVosS0FBQSxLQUFBO2NBaEJGO01BQUEsTUFBQTtDQW9CQyxJQUFNLGFBQUE7Q0FBTix5Q0FBTTtZQXBCUDtDQXVCQSxHQUFHLEtBQUgsQ0FBQTtDQUVDLEVBQWMsQ0FBTixHQUFBLEtBQVI7Q0FBQSxXQUVBO1lBN0JGO0NBQUEsUUFORDtDQUFBLE1BRkE7Q0FBQSxFQXVDZ0IsR0FBaEIsQ0FBUTtDQXpDVCxJQVRBO0NBRlcsVUFzRFg7Q0FyS0QsRUErR1k7Q0FuSGIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIl9jb21tb24gPSByZXF1aXJlICcuL19jb21tb24nXG5cbm1vZHVsZS5leHBvcnRzID0gb2JqZWN0ID1cblxuXHRpc0JhcmVPYmplY3Q6IF9jb21tb24uaXNCYXJlT2JqZWN0LmJpbmQgX2NvbW1vblxuXG5cdCMjI1xuXHRpZiBvYmplY3QgaXMgYW4gaW5zdGFuY2Ugb2YgYSBjbGFzc1xuXHQjIyNcblx0aXNJbnN0YW5jZTogKHdoYXQpIC0+XG5cblx0XHRub3QgQGlzQmFyZU9iamVjdCB3aGF0XG5cblx0IyMjXG5cdEFsaWFzIHRvIF9jb21tb24udHlwZU9mXG5cdCMjI1xuXHR0eXBlT2Y6IF9jb21tb24udHlwZU9mLmJpbmQgX2NvbW1vblxuXG5cdCMjI1xuXHRBbGlhcyB0byBfY29tbW9uLmNsb25lXG5cdCMjI1xuXHRjbG9uZTogX2NvbW1vbi5jbG9uZS5iaW5kIF9jb21tb25cblxuXHQjIyNcblx0RW1wdGllcyBhbiBvYmplY3Qgb2YgaXRzIHByb3BlcnRpZXMuXG5cdCMjI1xuXHRlbXB0eTogKG8pIC0+XG5cblx0XHRmb3IgcHJvcCBvZiBvXG5cblx0XHRcdGRlbGV0ZSBvW3Byb3BdIGlmIG8uaGFzT3duUHJvcGVydHkgcHJvcFxuXG5cdFx0b1xuXG5cdCMjI1xuXHRFbXB0aWVzIGFuIG9iamVjdC4gRG9lc24ndCBjaGVjayBmb3IgaGFzT3duUHJvcGVydHksIHNvIGl0J3MgYSB0aW55XG5cdGJpdCBmYXN0ZXIuIFVzZSBpdCBmb3IgcGxhaW4gb2JqZWN0cy5cblx0IyMjXG5cdGZhc3RFbXB0eTogKG8pIC0+XG5cblx0XHRkZWxldGUgb1twcm9wZXJ0eV0gZm9yIHByb3BlcnR5IG9mIG9cblxuXHRcdG9cblxuXHQjIyNcblx0T3ZlcnJpZGVzIHZhbHVlcyBmb21yIGBuZXdWYWx1ZXNgIG9uIGBiYXNlYCwgYXMgbG9uZyBhcyB0aGV5XG5cdGFscmVhZHkgZXhpc3QgaW4gYmFzZS5cblx0IyMjXG5cdG92ZXJyaWRlT250bzogKGJhc2UsIG5ld1ZhbHVlcykgLT5cblxuXHRcdHJldHVybiBiYXNlIGlmIG5vdCBAaXNCYXJlT2JqZWN0KG5ld1ZhbHVlcykgb3Igbm90IEBpc0JhcmVPYmplY3QoYmFzZSlcblxuXHRcdGZvciBrZXksIG9sZFZhbCBvZiBiYXNlXG5cblx0XHRcdG5ld1ZhbCA9IG5ld1ZhbHVlc1trZXldXG5cblx0XHRcdGNvbnRpbnVlIGlmIG5ld1ZhbCBpcyB1bmRlZmluZWRcblxuXHRcdFx0aWYgdHlwZW9mIG5ld1ZhbCBpc250ICdvYmplY3QnIG9yIEBpc0luc3RhbmNlIG5ld1ZhbFxuXG5cdFx0XHRcdGJhc2Vba2V5XSA9IEBjbG9uZSBuZXdWYWxcblxuXHRcdFx0IyBuZXdWYWwgaXMgYSBwbGFpbiBvYmplY3Rcblx0XHRcdGVsc2VcblxuXHRcdFx0XHRpZiB0eXBlb2Ygb2xkVmFsIGlzbnQgJ29iamVjdCcgb3IgQGlzSW5zdGFuY2Ugb2xkVmFsXG5cblx0XHRcdFx0XHRiYXNlW2tleV0gPSBAY2xvbmUgbmV3VmFsXG5cblx0XHRcdFx0ZWxzZVxuXG5cdFx0XHRcdFx0QG92ZXJyaWRlT250byBvbGRWYWwsIG5ld1ZhbFxuXHRcdGJhc2VcblxuXHQjIyNcblx0VGFrZXMgYSBjbG9uZSBvZiAnYmFzZScgYW5kIHJ1bnMgI292ZXJyaWRlT250byBvbiBpdFxuXHQjIyNcblx0b3ZlcnJpZGU6IChiYXNlLCBuZXdWYWx1ZXMpIC0+XG5cblx0XHRAb3ZlcnJpZGVPbnRvIEBjbG9uZShiYXNlKSwgbmV3VmFsdWVzXG5cblx0YXBwZW5kOiAoYmFzZSwgdG9BcHBlbmQpIC0+XG5cblx0XHRAYXBwZW5kT250byBAY2xvbmUoYmFzZSksIHRvQXBwZW5kXG5cblx0IyBEZWVwIGFwcGVuZHMgdmFsdWVzIGZyb20gYHRvQXBwZW5kYCB0byBgYmFzZWBcblx0YXBwZW5kT250bzogKGJhc2UsIHRvQXBwZW5kKSAtPlxuXG5cdFx0cmV0dXJuIGJhc2UgaWYgbm90IEBpc0JhcmVPYmplY3QodG9BcHBlbmQpIG9yIG5vdCBAaXNCYXJlT2JqZWN0KGJhc2UpXG5cblx0XHRmb3Igb3duIGtleSwgbmV3VmFsIG9mIHRvQXBwZW5kXG5cblx0XHRcdGNvbnRpbnVlIHVubGVzcyBuZXdWYWwgaXNudCB1bmRlZmluZWRcblxuXHRcdFx0aWYgdHlwZW9mIG5ld1ZhbCBpc250ICdvYmplY3QnIG9yIEBpc0luc3RhbmNlIG5ld1ZhbFxuXG5cdFx0XHRcdGJhc2Vba2V5XSA9IG5ld1ZhbFxuXG5cdFx0XHRlbHNlXG5cblx0XHRcdFx0IyBuZXdWYWwgaXMgYSBiYXJlIG9iamVjdFxuXG5cdFx0XHRcdG9sZFZhbCA9IGJhc2Vba2V5XVxuXG5cdFx0XHRcdGlmIHR5cGVvZiBvbGRWYWwgaXNudCAnb2JqZWN0JyBvciBAaXNJbnN0YW5jZSBvbGRWYWxcblxuXHRcdFx0XHRcdGJhc2Vba2V5XSA9IEBjbG9uZSBuZXdWYWxcblxuXHRcdFx0XHRlbHNlXG5cblx0XHRcdFx0XHRAYXBwZW5kT250byBvbGRWYWwsIG5ld1ZhbFxuXG5cdFx0YmFzZVxuXG5cdCMgR3JvdXBzXG5cdGdyb3VwUHJvcHM6IChvYmosIGdyb3VwcykgLT5cblxuXHRcdGdyb3VwZWQgPSB7fVxuXG5cdFx0Zm9yIG5hbWUsIGRlZnMgb2YgZ3JvdXBzXG5cblx0XHRcdGdyb3VwZWRbbmFtZV0gPSB7fVxuXG5cdFx0Z3JvdXBlZFsncmVzdCddID0ge31cblxuXHRcdGB0b3A6IC8vYFxuXHRcdGZvciBrZXksIHZhbCBvZiBvYmpcblxuXHRcdFx0c2hvdWxkQWRkID0gbm9cblxuXHRcdFx0Zm9yIG5hbWUsIGRlZnMgb2YgZ3JvdXBzXG5cblx0XHRcdFx0dW5sZXNzIEFycmF5LmlzQXJyYXkgZGVmc1xuXG5cdFx0XHRcdFx0ZGVmcyA9IFtkZWZzXVxuXG5cdFx0XHRcdGZvciBkZWYgaW4gZGVmc1xuXG5cdFx0XHRcdFx0aWYgdHlwZW9mIGRlZiBpcyAnc3RyaW5nJ1xuXG5cdFx0XHRcdFx0XHRpZiBrZXkgaXMgZGVmXG5cblx0XHRcdFx0XHRcdFx0c2hvdWxkQWRkID0geWVzXG5cblx0XHRcdFx0XHRlbHNlIGlmIGRlZiBpbnN0YW5jZW9mIFJlZ0V4cFxuXG5cdFx0XHRcdFx0XHRpZiBkZWYudGVzdCBrZXlcblxuXHRcdFx0XHRcdFx0XHRzaG91bGRBZGQgPSB5ZXNcblxuXHRcdFx0XHRcdGVsc2UgaWYgZGVmIGluc3RhbmNlb2YgRnVuY3Rpb25cblxuXHRcdFx0XHRcdFx0aWYgZGVmIGtleVxuXG5cdFx0XHRcdFx0XHRcdHNob3VsZEFkZCA9IHllc1xuXG5cdFx0XHRcdFx0ZWxzZVxuXG5cdFx0XHRcdFx0XHR0aHJvdyBFcnJvciAnR3JvdXAgZGVmaW5pdGlvbnMgbXVzdCBlaXRoZXJcblx0XHRcdFx0XHRcdGJlIHN0cmluZ3MsIHJlZ2V4ZXMsIG9yIGZ1bmN0aW9ucy4nXG5cblx0XHRcdFx0XHRpZiBzaG91bGRBZGRcblxuXHRcdFx0XHRcdFx0Z3JvdXBlZFtuYW1lXVtrZXldID0gdmFsXG5cblx0XHRcdFx0XHRcdGBjb250aW51ZSB0b3BgXG5cblx0XHRcdGdyb3VwZWRbJ3Jlc3QnXVtrZXldID0gdmFsXG5cblx0XHRncm91cGVkIl19
},{"./_common":1}],3:[function(require,module,exports){
var OptionsToIndex, object;

object = require('utila/scripts/js/lib/object');

module.exports = OptionsToIndex = (function() {
  function OptionsToIndex(template) {
    var name, val;
    if (!object.isBareObject(template)) {
      throw Error("template must only be a bare object");
    }
    this._possibleOptions = {};
    for (name in template) {
      val = template[name];
      if (Array.isArray(val)) {
        this._possibleOptions[name] = val;
      } else {
        this._possibleOptions[name] = [false, true];
      }
    }
  }

  OptionsToIndex.prototype.getIndex = function(options) {
    var choices, cur, i, index, name, val, _ref;
    index = 0;
    cur = 1;
    _ref = this._possibleOptions;
    for (name in _ref) {
      choices = _ref[name];
      val = options[name];
      i = choices.indexOf(val);
      if ((val != null) && i !== -1) {
        index += cur * i;
      }
      cur *= 10;
    }
    return index;
  };

  return OptionsToIndex;

})();

},{"utila/scripts/js/lib/object":2}],4:[function(require,module,exports){
var array;

module.exports = array = {

  /*
  	Tries to turn anything into an array.
   */
  from: function(r) {
    return Array.prototype.slice.call(r);
  },

  /*
  	Clone of an array. Properties will be shallow copies.
   */
  simpleClone: function(a) {
    return a.slice(0);
  },
  shallowEqual: function(a1, a2) {
    var i, val, _i, _len;
    if (!(Array.isArray(a1) && Array.isArray(a2) && a1.length === a2.length)) {
      return false;
    }
    for (i = _i = 0, _len = a1.length; _i < _len; i = ++_i) {
      val = a1[i];
      if (a2[i] !== val) {
        return false;
      }
    }
    return true;
  },
  pluck: function(a, i) {
    var index, value, _i, _len;
    if (a.length < 1) {
      return a;
    }
    for (index = _i = 0, _len = a.length; _i < _len; index = ++_i) {
      value = a[index];
      if (index > i) {
        a[index - 1] = a[index];
      }
    }
    a.length = a.length - 1;
    return a;
  },
  pluckItem: function(a, item) {
    var index, removed, value, _i, _len;
    if (a.length < 1) {
      return a;
    }
    removed = 0;
    for (index = _i = 0, _len = a.length; _i < _len; index = ++_i) {
      value = a[index];
      if (value === item) {
        removed++;
        continue;
      }
      if (removed !== 0) {
        a[index - removed] = a[index];
      }
    }
    if (removed > 0) {
      a.length = a.length - removed;
    }
    return a;
  },
  pluckOneItem: function(a, item) {
    var index, reached, value, _i, _len;
    if (a.length < 1) {
      return a;
    }
    reached = false;
    for (index = _i = 0, _len = a.length; _i < _len; index = ++_i) {
      value = a[index];
      if (!reached) {
        if (value === item) {
          reached = true;
          continue;
        }
      } else {
        a[index - 1] = a[index];
      }
    }
    if (reached) {
      a.length = a.length - 1;
    }
    return a;
  },
  pluckByCallback: function(a, cb) {
    var index, removed, value, _i, _len;
    if (a.length < 1) {
      return a;
    }
    removed = 0;
    for (index = _i = 0, _len = a.length; _i < _len; index = ++_i) {
      value = a[index];
      if (cb(value, index)) {
        removed++;
        continue;
      }
      if (removed !== 0) {
        a[index - removed] = a[index];
      }
    }
    if (removed > 0) {
      a.length = a.length - removed;
    }
    return a;
  },
  pluckMultiple: function(array, indexesToRemove) {
    var i, removedSoFar, _i, _len;
    if (array.length < 1) {
      return array;
    }
    removedSoFar = 0;
    indexesToRemove.sort();
    for (_i = 0, _len = indexesToRemove.length; _i < _len; _i++) {
      i = indexesToRemove[_i];
      this.pluck(array, i - removedSoFar);
      removedSoFar++;
    }
    return array;
  },
  injectByCallback: function(a, toInject, shouldInject) {
    var i, len, val, valA, valB, _i, _len;
    valA = null;
    valB = null;
    len = a.length;
    if (len < 1) {
      a.push(toInject);
      return a;
    }
    for (i = _i = 0, _len = a.length; _i < _len; i = ++_i) {
      val = a[i];
      valA = valB;
      valB = val;
      if (shouldInject(valA, valB, toInject)) {
        return a.splice(i, 0, toInject);
      }
    }
    a.push(toInject);
    return a;
  },
  injectInIndex: function(a, index, toInject) {
    var i, len, toPut, toPutNext;
    len = a.length;
    i = index;
    if (len < 1) {
      a.push(toInject);
      return a;
    }
    toPut = toInject;
    toPutNext = null;
    for(; i <= len; i++){

			toPutNext = a[i];

			a[i] = toPut;

			toPut = toPutNext;

		};
    return null;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJyYXkuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcYXJyYXkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsS0FBQTs7QUFBQSxNQUFNLENBQUMsT0FBUCxHQUFpQixLQUFBLEdBRWhCO0FBQUE7QUFBQTs7S0FBQTtBQUFBLEVBR0EsSUFBQSxFQUFNLFNBQUMsQ0FBRCxHQUFBO1dBRUwsS0FBSyxDQUFBLFNBQUUsQ0FBQSxLQUFLLENBQUMsSUFBYixDQUFrQixDQUFsQixFQUZLO0VBQUEsQ0FITjtBQU9BO0FBQUE7O0tBUEE7QUFBQSxFQVVBLFdBQUEsRUFBYSxTQUFDLENBQUQsR0FBQTtXQUVaLENBQUMsQ0FBQyxLQUFGLENBQVEsQ0FBUixFQUZZO0VBQUEsQ0FWYjtBQUFBLEVBY0EsWUFBQSxFQUFjLFNBQUMsRUFBRCxFQUFLLEVBQUwsR0FBQTtBQUViLFFBQUEsZ0JBQUE7QUFBQSxJQUFBLElBQUEsQ0FBQSxDQUFpQixLQUFLLENBQUMsT0FBTixDQUFjLEVBQWQsQ0FBQSxJQUFzQixLQUFLLENBQUMsT0FBTixDQUFjLEVBQWQsQ0FBdEIsSUFBNEMsRUFBRSxDQUFDLE1BQUgsS0FBYSxFQUFFLENBQUMsTUFBN0UsQ0FBQTtBQUFBLGFBQU8sS0FBUCxDQUFBO0tBQUE7QUFFQSxTQUFBLGlEQUFBO2tCQUFBO0FBRUMsTUFBQSxJQUFpQixFQUFHLENBQUEsQ0FBQSxDQUFILEtBQVMsR0FBMUI7QUFBQSxlQUFPLEtBQVAsQ0FBQTtPQUZEO0FBQUEsS0FGQTtXQU1BLEtBUmE7RUFBQSxDQWRkO0FBQUEsRUF3QkEsS0FBQSxFQUFPLFNBQUMsQ0FBRCxFQUFJLENBQUosR0FBQTtBQUVOLFFBQUEsc0JBQUE7QUFBQSxJQUFBLElBQVksQ0FBQyxDQUFDLE1BQUYsR0FBVyxDQUF2QjtBQUFBLGFBQU8sQ0FBUCxDQUFBO0tBQUE7QUFHQSxTQUFBLHdEQUFBO3VCQUFBO0FBRUMsTUFBQSxJQUFHLEtB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LElBRUEsQ0FBQSxHQUFJLEtBRkosQ0FBQTtBQUlBLElBQUEsSUFBRyxHQUFBLEdBQU0sQ0FBVDtBQUVDLE1BQUEsQ0FBQyxDQUFDLElBQUYsQ0FBTyxRQUFQLENBQUEsQ0FBQTtBQUVBLGFBQU8sQ0FBUCxDQUpEO0tBSkE7QUFBQSxJQVVBLEtBQUEsR0FBUSxRQVZSLENBQUE7QUFBQSxJQVlBLFNBQUEsR0FBWSxJQVpaLENBQUE7QUFBQSxJQWNBOzs7Ozs7OztHQWRBLENBQUE7V0EwQkEsS0E1QmM7RUFBQSxDQTNKZjtDQUZELENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGFycmF5ID1cblxuXHQjIyNcblx0VHJpZXMgdG8gdHVybiBhbnl0aGluZyBpbnRvIGFuIGFycmF5LlxuXHQjIyNcblx0ZnJvbTogKHIpIC0+XG5cblx0XHRBcnJheTo6c2xpY2UuY2FsbCByXG5cblx0IyMjXG5cdENsb25lIG9mIGFuIGFycmF5LiBQcm9wZXJ0aWVzIHdpbGwgYmUgc2hhbGxvdyBjb3BpZXMuXG5cdCMjI1xuXHRzaW1wbGVDbG9uZTogKGEpIC0+XG5cblx0XHRhLnNsaWNlIDBcblxuXHRzaGFsbG93RXF1YWw6IChhMSwgYTIpIC0+XG5cblx0XHRyZXR1cm4gbm8gdW5sZXNzIEFycmF5LmlzQXJyYXkoYTEpIGFuZCBBcnJheS5pc0FycmF5KGEyKSBhbmQgYTEubGVuZ3RoIGlzIGEyLmxlbmd0aFxuXG5cdFx0Zm9yIHZhbCwgaSBpbiBhMVxuXG5cdFx0XHRyZXR1cm4gbm8gdW5sZXNzIGEyW2ldIGlzIHZhbFxuXG5cdFx0eWVzXG5cblx0cGx1Y2s6IChhLCBpKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBpbmRleCA+IGlcblxuXHRcdFx0XHRhW2luZGV4IC0gMV0gPSBhW2luZGV4XVxuXG5cdFx0YS5sZW5ndGggPSBhLmxlbmd0aCAtIDFcblxuXHRcdGFcblxuXHRwbHVja0l0ZW06IChhLCBpdGVtKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblxuXHRcdHJlbW92ZWQgPSAwXG5cblx0XHRmb3IgdmFsdWUsIGluZGV4IGluIGFcblxuXHRcdFx0aWYgdmFsdWUgaXMgaXRlbVxuXG5cdFx0XHRcdHJlbW92ZWQrK1xuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGlmIHJlbW92ZWQgaXNudCAwXG5cblx0XHRcdFx0YVtpbmRleCAtIHJlbW92ZWRdID0gYVtpbmRleF1cblxuXHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSByZW1vdmVkIGlmIHJlbW92ZWQgPiAwXG5cblx0XHRhXG5cblx0cGx1Y2tPbmVJdGVtOiAoYSwgaXRlbSkgLT5cblxuXHRcdHJldHVybiBhIGlmIGEubGVuZ3RoIDwgMVxuXG5cdFx0cmVhY2hlZCA9IG5vXG5cblx0XHRmb3IgdmFsdWUsIGluZGV4IGluIGFcblxuXHRcdFx0aWYgbm90IHJlYWNoZWRcblxuXHRcdFx0XHRpZiB2YWx1ZSBpcyBpdGVtXG5cblx0XHRcdFx0XHRyZWFjaGVkID0geWVzXG5cblx0XHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRlbHNlXG5cblx0XHRcdFx0YVtpbmRleCAtIDFdID0gYVtpbmRleF1cblxuXHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSAxIGlmIHJlYWNoZWRcblxuXHRcdGFcblxuXHRwbHVja0J5Q2FsbGJhY2s6IChhLCBjYikgLT5cblxuXHRcdHJldHVybiBhIGlmIGEubGVuZ3RoIDwgMVxuXG5cdFx0cmVtb3ZlZCA9IDBcblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBjYiB2YWx1ZSwgaW5kZXhcblxuXHRcdFx0XHRyZW1vdmVkKytcblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRpZiByZW1vdmVkIGlzbnQgMFxuXG5cdFx0XHRcdGFbaW5kZXggLSByZW1vdmVkXSA9IGFbaW5kZXhdXG5cblx0XHRpZiByZW1vdmVkID4gMFxuXG5cdFx0XHRhLmxlbmd0aCA9IGEubGVuZ3RoIC0gcmVtb3ZlZFxuXG5cdFx0YVxuXG5cdHBsdWNrTXVsdGlwbGU6IChhcnJheSwgaW5kZXhlc1RvUmVtb3ZlKSAtPlxuXG5cdFx0cmV0dXJuIGFycmF5IGlmIGFycmF5Lmxlbmd0aCA8IDFcblxuXHRcdHJlbW92ZWRTb0ZhciA9IDBcblxuXHRcdGluZGV4ZXNUb1JlbW92ZS5zb3J0KClcblxuXHRcdGZvciBpIGluIGluZGV4ZXNUb1JlbW92ZVxuXG5cdFx0XHRAcGx1Y2sgYXJyYXksIGkgLSByZW1vdmVkU29GYXJcblxuXHRcdFx0cmVtb3ZlZFNvRmFyKytcblxuXHRcdGFycmF5XG5cblx0aW5qZWN0QnlDYWxsYmFjazogKGEsIHRvSW5qZWN0LCBzaG91bGRJbmplY3QpIC0+XG5cblx0XHR2YWxBID0gbnVsbFxuXG5cdFx0dmFsQiA9IG51bGxcblxuXHRcdGxlbiA9IGEubGVuZ3RoXG5cblx0XHRpZiBsZW4gPCAxXG5cblx0XHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0XHRyZXR1cm4gYVxuXG5cblx0XHRmb3IgdmFsLCBpIGluIGFcblxuXHRcdFx0dmFsQSA9IHZhbEJcblxuXHRcdFx0dmFsQiA9IHZhbFxuXG5cdFx0XHRpZiBzaG91bGRJbmplY3QgdmFsQSwgdmFsQiwgdG9JbmplY3RcblxuXHRcdFx0XHRyZXR1cm4gYS5zcGxpY2UgaSwgMCwgdG9JbmplY3RcblxuXHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0YVxuXG5cdGluamVjdEluSW5kZXg6IChhLCBpbmRleCwgdG9JbmplY3QpIC0+XG5cblx0XHRsZW4gPSBhLmxlbmd0aFxuXG5cdFx0aSA9IGluZGV4XG5cblx0XHRpZiBsZW4gPCAxXG5cblx0XHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0XHRyZXR1cm4gYVxuXG5cdFx0dG9QdXQgPSB0b0luamVjdFxuXG5cdFx0dG9QdXROZXh0ID0gbnVsbFxuXG5cdFx0YGZvcig7IGkgPD0gbGVuOyBpKyspe1xuXG5cdFx0XHR0b1B1dE5leHQgPSBhW2ldO1xuXG5cdFx0XHRhW2ldID0gdG9QdXQ7XG5cblx0XHRcdHRvUHV0ID0gdG9QdXROZXh0O1xuXG5cdFx0fWBcblxuXHRcdCMgYVtpXSA9IHRvUHV0XG5cblx0XHRudWxsIl19
},{}],5:[function(require,module,exports){
var BufferManager, DrawingManager, ExtensionManager, FrameBufferManager, GetParameterShortcut, Gila, ProgramManager, RenderBufferManager, ShaderManager, Texture2DManager, TextureManager, WebGLDebugUtils, exposeApi;

GetParameterShortcut = require('./gila/GetParameterShortcut');

RenderBufferManager = require('./gila/RenderBufferManager');

FrameBufferManager = require('./gila/FrameBufferManager');

Texture2DManager = require('./gila/Texture2DManager');

ExtensionManager = require('./gila/ExtensionManager');

WebGLDebugUtils = require('../../../vendor/webgl-debug/webgl-debug.js');

DrawingManager = require('./gila/DrawingManager');

ProgramManager = require('./gila/ProgramManager');

TextureManager = require('./gila/TextureManager');

ShaderManager = require('./gila/ShaderManager');

BufferManager = require('./gila/BufferManager');

exposeApi = require('./gila/utility/exposeApi');

module.exports = Gila = (function() {
  var self;

  self = Gila;

  function Gila(canvasElOrId, debug) {
    var canvas;
    if (debug == null) {
      debug = false;
    }
    if (typeof canvasElOrId === 'string') {
      canvas = document.getElementById(canvasElOrId);
      if (canvas == null) {
        throw Error("Can't find canvas with id `" + canvasElOrId + "`");
      }
    } else {
      canvas = canvasElOrId;
    }
    this.debug = Boolean(debug);
    this._setCanvas(canvas);
    this.viewportSize = new Uint16Array(2);
    this._setGl();
    this._initParam();
    this._initExtensionManager();
    this._initFrameBufferManager();
    this._initRenderBufferManager();
    this._initBufferManager();
    this._initShaderManager();
    this._initProgramManager();
    this._initTextureManager();
    this._initTexture2DManager();
    this._initDrawingManager();
  }

  Gila.prototype._setCanvas = function(c) {
    if (!(c instanceof HTMLCanvasElement)) {
      throw Error("Supplied element is not a canvas");
    }
    return this.canvas = c;
  };

  Gila.prototype._setGl = function() {
    var context;
    try {
      context = this.canvas.getContext("webgl");
    } catch (_error) {}
    if (context == null) {
      throw Error("Could not initialize webgl context");
    }
    if (this.debug) {
      this.gl = WebGLDebugUtils.makeDebugContext(context);
    } else {
      this.gl = context;
    }
    this.fitViewportSize();
  };

  Gila.prototype._initExtensionManager = function() {
    return this.extensions = new ExtensionManager(this);
  };

  Gila.prototype._initParam = function() {
    return this.param = new GetParameterShortcut(this);
  };

  Gila.prototype._initDrawingManager = function() {
    this._drawingManager = new DrawingManager(this);
  };

  Gila.prototype._initShaderManager = function() {
    return this._shaderManager = new ShaderManager(this);
  };

  Gila.prototype.getFragmentShader = function(id, source, variation) {
    return this._shaderManager.getFragmentShader(id, source, variation);
  };

  Gila.prototype.getVertexShader = function(id, source, variation) {
    return this._shaderManager.getVertexShader(id, source, variation);
  };

  Gila.prototype._initProgramManager = function() {
    this._programManager = new ProgramManager(this);
  };

  Gila.prototype.getProgram = function(vertex, fragment, id, unique) {
    return this._programManager.getProgram(vertex, fragment, id, unique);
  };

  Gila.prototype._initFrameBufferManager = function() {
    this._frameBufferManager = new FrameBufferManager(this);
  };

  Gila.prototype.makeFrameBuffer = function() {
    return this._frameBufferManager.make();
  };

  Gila.prototype._initRenderBufferManager = function() {
    this._renderBufferManager = new RenderBufferManager(this);
  };

  Gila.prototype.makeRenderBuffer = function() {
    return this._renderBufferManager.make();
  };

  Gila.prototype._initBufferManager = function() {
    this._bufferManager = new BufferManager(this);
  };

  Gila.prototype.makeArrayBuffer = function() {
    return this._bufferManager.makeArrayBuffer();
  };

  Gila.prototype.makeElementArrayBuffer = function() {
    return this._bufferManager.makeElementArrayBuffer();
  };

  Gila.prototype.getBoundArrayBuffer = function() {
    return this._bufferManager.getBoundArrayBuffer();
  };

  Gila.prototype.getBoundElementArrayBuffer = function() {
    return this._bufferManager.getBoundElementArrayBuffer();
  };

  Gila.prototype._initTextureManager = function() {
    this.textures = new TextureManager(this);
  };

  Gila.prototype._initTexture2DManager = function() {
    this._texture2DManager = new Texture2DManager(this);
  };

  Gila.prototype.makeImageTexture = function(source) {
    return this._texture2DManager.makeImageTexture(source);
  };

  Gila.prototype.makeEmptyTexture = function() {
    return this._texture2DManager.makeEmptyTexture();
  };

  Gila.prototype.fitViewportSize = function() {
    return this.setViewportSize(this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);
  };

  Gila.prototype.setViewportSize = function(w, h) {
    if (this.debug) {
      if (typeof w !== 'number' || w < 0) {
        throw Error("w must be a number greater than zero");
      }
      if (typeof h !== 'number' || h < 0) {
        throw Error("h must be a number greater than zero");
      }
    }
    this.viewportSize[0] = w;
    this.viewportSize[1] = h;
    this.gl.viewport(0, 0, w, h);
    return this;
  };

  return Gila;

})();

exposeApi(DrawingManager, Gila);

},{"../../../vendor/webgl-debug/webgl-debug.js":55,"./gila/BufferManager":6,"./gila/DrawingManager":7,"./gila/ExtensionManager":8,"./gila/FrameBufferManager":9,"./gila/GetParameterShortcut":10,"./gila/ProgramManager":11,"./gila/RenderBufferManager":12,"./gila/ShaderManager":13,"./gila/Texture2DManager":14,"./gila/TextureManager":15,"./gila/utility/exposeApi":53}],6:[function(require,module,exports){
var ArrayBufferType, BufferManager, ElementArrayBufferType;

ElementArrayBufferType = require('./bufferManager/buffer/ElementArrayBufferType');

ArrayBufferType = require('./bufferManager/buffer/ArrayBufferType');

module.exports = BufferManager = (function() {
  function BufferManager(_gila) {
    this._gila = _gila;
    this._boundArrayBuffer = null;
    this._boundElementArrayBuffer = null;
  }

  BufferManager.prototype.makeArrayBuffer = function(usage) {
    return new ArrayBufferType(this, usage);
  };

  BufferManager.prototype.makeElementArrayBuffer = function(usage) {
    return new ElementArrayBufferType(this, usage);
  };

  BufferManager.prototype.getBoundArrayBuffer = function() {
    return this._boundArrayBuffer;
  };

  BufferManager.prototype.getBoundElementArrayBuffer = function() {
    return this._boundElementArrayBuffer;
  };

  return BufferManager;

})();

},{"./bufferManager/buffer/ArrayBufferType":17,"./bufferManager/buffer/ElementArrayBufferType":18}],7:[function(require,module,exports){
var BOTH_BUFFER_BITS, BlendManager, COLOR_BUFFER_BIT, CapabilityManager, DEPTH_BUFFER_BIT, DrawingManager, LINES, LINE_STRIP, POINTS, TRIANGLES, TRIANGLE_STRIP, exposeApi;

exposeApi = require('./utility/exposeApi');

BlendManager = require('./drawingManager/BlendManager');

CapabilityManager = require('./drawingManager/CapabilityManager');

module.exports = DrawingManager = (function() {
  function DrawingManager(_gila) {
    this._gila = _gila;
    this._gl = this._gila.gl;
    this.blend = new BlendManager(this);
    this._flags = {
      faceCulling: null,
      depthBufferWritable: true
    };
    this._capabilityManager = new CapabilityManager(this);
  }

  DrawingManager.prototype.cullFront = function(enable) {
    if (enable == null) {
      enable = true;
    }
    if (enable) {
      this.enableFaceCulling();
    }
    if (this._flags.faceCulling !== FRONT) {
      this._gl.cullFace(FRONT);
      this._flags.faceCulling = FRONT;
    }
    return this;
  };

  DrawingManager.prototype.cullBack = function(enable) {
    if (enable == null) {
      enable = true;
    }
    if (enable) {
      this.enableFaceCulling();
    }
    if (this._flags.faceCulling !== BACK) {
      this._gl.cullFace(BACK);
      this._flags.faceCulling = BACK;
    }
    return this;
  };

  DrawingManager.prototype.cullFrontAndBack = function(enable) {
    if (enable == null) {
      enable = true;
    }
    if (enable) {
      this.enableFaceCulling();
    }
    if (this._faceCulling !== FRONT_AND_BACK) {
      this._gl.cullFace(FRONT_AND_BACK);
      this._faceCulling = FRONT_AND_BACK;
    }
    return this;
  };

  DrawingManager.prototype.unlockDepthBuffer = function() {
    if (!this._flags.depthBufferWritable) {
      this._flags.depthBufferWritable = true;
      this._gl.depthMask(true);
    }
    return this;
  };

  DrawingManager.prototype.lockDepthBuffer = function() {
    if (this._flags.depthBufferWritable) {
      this._flags.depthBufferWritable = false;
      this._gl.depthMask(false);
    }
    return this;
  };

  DrawingManager.prototype._drawArrays = function(mode, first, count) {
    this.blend._apply();
    if (this.debug) {
      if (parseInt(first) !== first) {
        throw Error("`first` must be an integer");
      }
      if (count < 1 || parseInt(count) !== count) {
        throw Error("`count` must be an integer above 0");
      }
    }
    this._gl.drawArrays(mode, first, count);
    return this;
  };

  DrawingManager.prototype.drawTriangles = function(first, count) {
    return this._drawArrays(TRIANGLES, first, count);
  };

  DrawingManager.prototype.drawTriangleStrip = function(first, count) {
    return this._drawArrays(TRIANGLE_STRIP, first, count);
  };

  DrawingManager.prototype.drawLines = function(first, count) {
    return this._drawArrays(LINES, first, count);
  };

  DrawingManager.prototype.drawLineStrip = function(first, count) {
    return this._drawArrays(LINE_STRIP, first, count);
  };

  DrawingManager.prototype.drawPoints = function(first, count) {
    return this._drawArrays(POINTS, first, count);
  };

  DrawingManager.prototype.setClearColor = function(r, g, b, a) {
    var args, val, _i, _len, _ref;
    if (a == null) {
      a = 1;
    }
    if (this.debug) {
      args = [];
      _ref = [r, g, b, a];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        val = _ref[_i];
        if (!((0 <= val && val <= 1))) {
          throw Error("You have a color component out of range: " + val);
        }
        args.push(parseFloat(val));
      }
      this._gl.clearColor.apply(this._gl, args);
    } else {
      this._gl.clearColor(parseFloat(r), parseFloat(g), parseFloat(b), parseFloat(a));
    }
    return this;
  };

  DrawingManager.prototype.clearColorBuffer = function() {
    this._gl.clear(COLOR_BUFFER_BIT);
  };

  DrawingManager.prototype.clearDepthBuffer = function() {
    this._gl.clear(DEPTH_BUFFER_BIT);
  };

  DrawingManager.prototype.clear = function() {
    this._gl.clear(BOTH_BUFFER_BITS);
  };

  DrawingManager._methodsToExpose = '*';

  DrawingManager._propsToExpose = ['blend'].concat(CapabilityManager._propsToExpose);

  DrawingManager._memberName = '_drawingManager';

  return DrawingManager;

})();

exposeApi(CapabilityManager, DrawingManager);

TRIANGLES = WebGLRenderingContext.TRIANGLES, TRIANGLE_STRIP = WebGLRenderingContext.TRIANGLE_STRIP, LINES = WebGLRenderingContext.LINES, LINE_STRIP = WebGLRenderingContext.LINE_STRIP, POINTS = WebGLRenderingContext.POINTS;

COLOR_BUFFER_BIT = WebGLRenderingContext.COLOR_BUFFER_BIT, DEPTH_BUFFER_BIT = WebGLRenderingContext.DEPTH_BUFFER_BIT;

BOTH_BUFFER_BITS = COLOR_BUFFER_BIT | DEPTH_BUFFER_BIT;

},{"./drawingManager/BlendManager":19,"./drawingManager/CapabilityManager":20,"./utility/exposeApi":53}],8:[function(require,module,exports){
var ExtensionManager, VAOExtension;

VAOExtension = require('./extensionManager/VAOExtension');

module.exports = ExtensionManager = (function() {
  function ExtensionManager(_gila) {
    this._gila = _gila;
    this._gl = this._gila.gl;
    this.vao = new VAOExtension(this);
  }

  return ExtensionManager;

})();

},{"./extensionManager/VAOExtension":23}],9:[function(require,module,exports){
var FrameBuffer, FrameBufferManager;

FrameBuffer = require('./frameBufferManager/FrameBuffer');

module.exports = FrameBufferManager = (function() {
  function FrameBufferManager(_gila) {
    this._gila = _gila;
    this._bound = null;
  }

  FrameBufferManager.prototype.make = function() {
    return new FrameBuffer(this);
  };

  return FrameBufferManager;

})();

},{"./frameBufferManager/FrameBuffer":25}],10:[function(require,module,exports){
var GetParameterShortcut, funcName, pname, pnames, string, _fn, _i, _len;

module.exports = GetParameterShortcut = (function() {
  function GetParameterShortcut(_gila) {
    this._gila = _gila;
    this._gl = this._gila.gl;
  }

  return GetParameterShortcut;

})();

pnames = ['ACTIVE_TEXTURE', 'ALIASED_LINE_WIDTH_RANGE', 'ALIASED_POINT_SIZE_RANGE', 'ALPHA_BITS', 'ARRAY_BUFFER_BINDING', 'BLEND', 'BLEND_COLOR', 'BLEND_DST_ALPHA', 'BLEND_DST_RGB', 'BLEND_EQUATION_ALPHA', 'BLEND_EQUATION_RGB', 'BLEND_SRC_ALPHA', 'BLEND_SRC_RGB', 'BLUE_BITS', 'COLOR_CLEAR_VALUE', 'COLOR_WRITEMASK', 'COMPRESSED_TEXTURE_FORMATS', 'CULL_FACE', 'CULL_FACE_MODE', 'CURRENT_PROGRAM', 'DEPTH_BITS', 'DEPTH_CLEAR_VALUE', 'DEPTH_FUNC', 'DEPTH_RANGE', 'DEPTH_TEST', 'DEPTH_WRITEMASK', 'DITHER', 'ELEMENT_ARRAY_BUFFER_BINDING', 'FRAMEBUFFER_BINDING', 'FRONT_FACE', 'GENERATE_MIPMAP_HINT', 'GREEN_BITS', 'LINE_WIDTH', 'MAX_TEXTURE_MAX_ANISOTROPY_EXT', 'MAX_COMBINED_TEXTURE_IMAGE_UNITS', 'MAX_CUBE_MAP_TEXTURE_SIZE', 'MAX_FRAGMENT_UNIFORM_VECTORS', 'MAX_RENDERBUFFER_SIZE', 'MAX_TEXTURE_IMAGE_UNITS', 'MAX_TEXTURE_SIZE', 'MAX_VARYING_VECTORS', 'MAX_VERTEX_ATTRIBS', 'MAX_VERTEX_TEXTURE_IMAGE_UNITS', 'MAX_VERTEX_UNIFORM_VECTORS', 'MAX_VIEWPORT_DIMS', 'PACK_ALIGNMENT', 'POLYGON_OFFSET_FACTOR', 'POLYGON_OFFSET_FILL', 'POLYGON_OFFSET_UNITS', 'RED_BITS', 'RENDERBUFFER_BINDING', 'RENDERER', 'SAMPLE_BUFFERS', 'SAMPLE_COVERAGE_INVERT', 'SAMPLE_COVERAGE_VALUE', 'SAMPLES', 'SCISSOR_BOX', 'SCISSOR_TEST', 'SHADING_LANGUAGE_VERSION', 'STENCIL_BACK_FAIL', 'STENCIL_BACK_FUNC', 'STENCIL_BACK_PASS_DEPTH_FAIL', 'STENCIL_BACK_PASS_DEPTH_PASS', 'STENCIL_BACK_REF', 'STENCIL_BACK_VALUE_MASK', 'STENCIL_BACK_WRITEMASK', 'STENCIL_BITS', 'STENCIL_CLEAR_VALUE', 'STENCIL_FAIL', 'STENCIL_FUNC', 'STENCIL_PASS_DEPTH_FAIL', 'STENCIL_PASS_DEPTH_PASS', 'STENCIL_REF', 'STENCIL_TEST', 'STENCIL_VALUE_MASK', 'STENCIL_WRITEMASK', 'SUBPIXEL_BITS', 'TEXTURE_BINDING_2D', 'TEXTURE_BINDING_CUBE_MAP', 'UNPACK_ALIGNMENT', 'UNPACK_COLORSPACE_CONVERSION_WEBGL', 'UNPACK_FLIP_Y_WEBGL', 'UNPACK_PREMULTIPLY_ALPHA_WEBGL', 'VENDOR', 'VERSION', 'VIEWPORT'];

string = require('./utility/string');

_fn = function() {
  var enm;
  enm = WebGLRenderingContext[pname];
  return Object.defineProperty(GetParameterShortcut.prototype, funcName, {
    get: function() {
      return this._gl.getParameter(enm);
    },
    enumerable: true
  });
};
for (_i = 0, _len = pnames.length; _i < _len; _i++) {
  pname = pnames[_i];
  funcName = string.allUpperCaseToCamelCase(pname);
  funcName = funcName[0].toLowerCase() + funcName.substr(1, funcName.length);
  _fn();
}

},{"./utility/string":54}],11:[function(require,module,exports){
var ProgramManager, ShaderProgram;

ShaderProgram = require('./programManager/ShaderProgram');

module.exports = ProgramManager = (function() {
  function ProgramManager(_gila) {
    this._gila = _gila;
    this._shaderManager = this._gila._shaderManager;
    this._active = null;
    this._programs = {};
  }

  ProgramManager.prototype._getVariationOfProgram = function(program, flags) {
    var frag, vertex;
    vertex = program.vertex.getVariation(flags);
    frag = program.frag.getVariation(flags);
    return this._getProgram(vertex, frag);
  };

  ProgramManager.prototype.getProgram = function(vertex, frag, id, unique) {
    if (unique == null) {
      unique = false;
    }
    if (this._gila.debug && (typeof vertex === 'string' || typeof frag === 'string') && (id == null)) {
      throw Error("If you're specifying the shaders with their source, you need to specify an id to be used as the id of those shaders");
    }
    if (typeof vertex === 'string') {
      vertex = this._shaderManager.getVertexShader(id, vertex);
    }
    if (typeof frag === 'string') {
      frag = this._shaderManager.getFragmentShader(id, frag);
    }
    return this._getProgram(vertex, frag, unique);
  };

  ProgramManager.prototype._getProgram = function(vertex, frag, unique) {
    var combinedIndex;
    combinedIndex = "" + vertex.index + "/" + frag.index;
    if (unique) {
      return new ShaderProgram(this, combinedIndex, vertex, frag);
    }
    if (this._programs[combinedIndex] == null) {
      this._programs[combinedIndex] = new ShaderProgram(this, combinedIndex, vertex, frag);
    }
    return this._programs[combinedIndex];
  };

  return ProgramManager;

})();

},{"./programManager/ShaderProgram":26}],12:[function(require,module,exports){
var RenderBuffer, RenderBufferManager;

RenderBuffer = require('./renderBufferManager/RenderBuffer');

module.exports = RenderBufferManager = (function() {
  function RenderBufferManager(_gila) {
    this._gila = _gila;
    this._bound = null;
  }

  RenderBufferManager.prototype.make = function() {
    return new RenderBuffer(this);
  };

  return RenderBufferManager;

})();

},{"./renderBufferManager/RenderBuffer":45}],13:[function(require,module,exports){
var FRAG, ShaderManager, ShaderSource, VERT;

ShaderSource = require('./shaderManager/ShaderSource');

FRAG = WebGLRenderingContext.FRAGMENT_SHADER;

VERT = WebGLRenderingContext.VERTEX_SHADER;

module.exports = ShaderManager = (function() {
  function ShaderManager(_gila) {
    this._gila = _gila;
    this._frags = {};
    this._verts = {};
  }

  ShaderManager.prototype.getFragmentShader = function(id, source, flags) {
    if (this._frags[id] == null) {
      this._makeSource(FRAG, id, source);
    }
    return this._frags[id].getVariation(flags);
  };

  ShaderManager.prototype.getVertexShader = function(id, source, flags) {
    if (this._verts[id] == null) {
      this._makeSource(VERT, id, source);
    }
    return this._verts[id].getVariation(flags);
  };

  ShaderManager.prototype._makeSource = function(type, id, source) {
    var shaderSource;
    shaderSource = new ShaderSource(this, type, id, source);
    if (type === FRAG) {
      this._frags[id] = shaderSource;
    } else {
      this._verts[id] = shaderSource;
    }
    return shaderSource;
  };

  return ShaderManager;

})();

},{"./shaderManager/ShaderSource":47}],14:[function(require,module,exports){
var EmptyTexture, ImageTexture, Texture2DManager;

ImageTexture = require('./texture2DManager/ImageTexture');

EmptyTexture = require('./texture2DManager/EmptyTexture');

module.exports = Texture2DManager = (function() {
  function Texture2DManager(_gila) {
    this._gila = _gila;
    this._bound = null;
  }

  Texture2DManager.prototype.makeImageTexture = function(source) {
    return new ImageTexture(this, source);
  };

  Texture2DManager.prototype.makeEmptyTexture = function(source) {
    return new EmptyTexture(this, source);
  };

  return Texture2DManager;

})();

},{"./texture2DManager/EmptyTexture":48,"./texture2DManager/ImageTexture":49}],15:[function(require,module,exports){
var TextureManager, array, i, stupidCounter, unitEnums, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Emitter = require('./utility/_Emitter');

array = require('utila/scripts/js/lib/array');

stupidCounter = -1;

unitEnums = (function() {
  var _i, _results;
  _results = [];
  for (i = _i = 0; _i < 32; i = ++_i) {
    _results.push(WebGLRenderingContext['TEXTURE' + i]);
  }
  return _results;
})();

module.exports = TextureManager = (function(_super) {
  __extends(TextureManager, _super);

  function TextureManager(_gila) {
    var _i, _ref;
    this._gila = _gila;
    TextureManager.__super__.constructor.apply(this, arguments);
    this._gl = this._gila.gl;
    this._maxUnits = this._gila.param.maxCombinedTextureImageUnits;
    this._units = [];
    for (i = _i = 0, _ref = this._maxUnits; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
      this._units.push({
        texture: null,
        assignTime: -1
      });
    }
    this.activeUnit = 0;
    this._texturesQueuedForUpload = 0;
    this.isReady = true;
  }

  TextureManager.prototype._assignTextureToUnit = function(texture, n) {
    var oldTexture, prevUnit, unit;
    if (texture._unit === n) {
      return;
    }
    if (this._gila.debug) {
      if (n !== parseInt(n)) {
        throw Error("n must be an integer");
      }
      if (!((0 <= n && n < this._maxUnits))) {
        throw Error("n out of range: `" + n + "`");
      }
    }
    unit = this._units[n];
    if (oldTexture = unit.texture && (oldTexture != null)) {
      if (this._gila.debug && oldTexture.isUnitLocked()) {
        throw Error("Cannot assign texture to unit `" + n + "` because this unit is locked on another texture");
      }
      oldTexture._unit = -1;
    }
    if (prevUnit = texture.getUnit()) {
      this._units[prevUnit].texture = null;
    }
    this._units[n].texture = texture;
    this._units[n].assignTime = stupidCounter++;
    texture._unit = n;
    return this;
  };

  TextureManager.prototype._assignTextureToAUnit = function(texture) {
    var candidateUnit, n, smallestAssignTime, unit, _i, _len, _ref;
    if (texture.isAssignedToUnit()) {
      return;
    }
    smallestAssignTime = -1;
    candidateUnit = -1;
    _ref = this._units;
    for (n = _i = 0, _len = _ref.length; _i < _len; n = ++_i) {
      unit = _ref[n];
      if (unit.texture == null) {
        candidateUnit = n;
        break;
      } else if (unit.texture.isUnitLocked()) {
        continue;
      } else {
        if (smallestAssignTime === -1 || unit.assignTime < smallestAssignTime) {
          smallestAssignTime = unit.assignTime;
          candidateUnit = n;
        }
      }
    }
    if (candidateUnit === -1) {
      throw Error("All texture units are assigned and locked");
    }
    this._assignTextureToUnit(texture, candidateUnit);
  };

  TextureManager.prototype._activateUnit = function(n) {
    if (this.activeUnit === n) {
      return;
    }
    this.activeUnit = n;
    this._gl.activeTexture(unitEnums[n]);
  };

  TextureManager.prototype._waitForTexture = function(t) {
    this._texturesQueuedForUpload++;
    this.isReady = false;
    this._emit('not-ready');
    this._emit('ready-state-change');
  };

  TextureManager.prototype._textureIsDoneLoading = function(t) {
    this._texturesQueuedForUpload--;
    if (this._texturesQueuedForUpload === 0) {
      this.isReady = true;
      this._emit('ready');
      this._emit('ready-state-change');
    }
  };

  return TextureManager;

})(_Emitter);

},{"./utility/_Emitter":52,"utila/scripts/js/lib/array":4}],16:[function(require,module,exports){
var DYNAMIC_DRAW, STATIC_DRAW, STREAM_DRAW, _Buffer;

module.exports = _Buffer = (function() {
  var self;

  self = _Buffer;

  function _Buffer(_manager) {
    this._manager = _manager;
    this._gila = this._manager._gila;
    this._gl = this._gila.gl;
    this.buffer = this._gl.createBuffer();
  }

  _Buffer.prototype._data = function(data, usage) {
    this.bind();
    this._gl.bufferData(this._type, data, usage);
    return this;
  };

  _Buffer.prototype.staticData = function(data) {
    return this._data(data, STATIC_DRAW);
  };

  _Buffer.prototype.dynamicData = function(data) {
    return this._data(data, DYNAMIC_DRAW);
  };

  _Buffer.prototype.streamData = function(data) {
    return this._data(data, STREAM_DRAW);
  };

  _Buffer.prototype.data = function(data) {
    return this.staticData(data);
  };

  return _Buffer;

})();

STATIC_DRAW = WebGLRenderingContext.STATIC_DRAW, DYNAMIC_DRAW = WebGLRenderingContext.DYNAMIC_DRAW, STREAM_DRAW = WebGLRenderingContext.STREAM_DRAW;

},{}],17:[function(require,module,exports){
var ARRAY_BUFFER, ArrayBufferType, _Buffer,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Buffer = require('../_Buffer');

ARRAY_BUFFER = WebGLRenderingContext.ARRAY_BUFFER;

module.exports = ArrayBufferType = (function(_super) {
  __extends(ArrayBufferType, _super);

  function ArrayBufferType() {
    ArrayBufferType.__super__.constructor.apply(this, arguments);
    this._type = ARRAY_BUFFER;
  }

  ArrayBufferType.prototype.bind = function() {
    if (this._manager._boundArrayBuffer !== this) {
      this._gl.bindBuffer(ARRAY_BUFFER, this.buffer);
      this._manager._boundArrayBuffer = this;
    }
    return this;
  };

  return ArrayBufferType;

})(_Buffer);

},{"../_Buffer":16}],18:[function(require,module,exports){
var ELEMENT_ARRAY_BUFFER, ElementArrayBufferType, _Buffer,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Buffer = require('../_Buffer');

ELEMENT_ARRAY_BUFFER = WebGLRenderingContext.ELEMENT_ARRAY_BUFFER;

module.exports = ElementArrayBufferType = (function(_super) {
  __extends(ElementArrayBufferType, _super);

  function ElementArrayBufferType() {
    ElementArrayBufferType.__super__.constructor.apply(this, arguments);
    this._type = ELEMENT_ARRAY_BUFFER;
  }

  ElementArrayBufferType.prototype.bind = function() {
    if (this._manager._boundElementArrayBuffer !== this) {
      this._gl.bindBuffer(ELEMENT_ARRAY_BUFFER, this.buffer);
      this._manager._boundElementArrayBuffer = this;
    }
    return this;
  };

  return ElementArrayBufferType;

})(_Buffer);

},{"../_Buffer":16}],19:[function(require,module,exports){
var BlendManager, BlendShortcutList, ONE, SEPARATE, TOGETHER, ZERO, _ref;

BlendShortcutList = require('./blendManager/BlendShortcutList');

module.exports = BlendManager = (function() {
  function BlendManager(_drawingManager) {
    this._drawingManager = _drawingManager;
    this._gila = this._drawingManager._gila;
    this._gl = this._gila.gl;
    this._shouldUpdate = false;
    this._type = TOGETHER;
    this.src = new BlendShortcutList(this, TOGETHER);
    this.dst = new BlendShortcutList(this, TOGETHER);
    this.srcRgb = new BlendShortcutList(this, SEPARATE);
    this.dstRgb = new BlendShortcutList(this, SEPARATE);
    this.srcAlpha = new BlendShortcutList(this, SEPARATE);
    this.dstAlpha = new BlendShortcutList(this, SEPARATE);
    this._reset();
  }

  BlendManager.prototype._reset = function() {
    this.src._factor = ONE;
    this.dst._factor = ZERO;
    this.srcRgb._factor = ONE;
    this.srcAlpha._factor = ONE;
    this.dstRgb._factor = ZERO;
    this.dstAlpha._factor = ZERO;
  };

  BlendManager.prototype.reset = function() {
    this._reset();
    this._shouldUpdate = true;
    return this;
  };

  BlendManager.prototype._setType = function(type) {
    if (this._type !== type) {
      this._type = type;
      this.reset();
    }
  };

  BlendManager.prototype.update = function() {
    return this._apply();
  };

  BlendManager.prototype._apply = function() {
    if (!this._shouldUpdate) {
      return;
    }
    this._shouldUpdate = false;
    if (this._type === TOGETHER) {
      this._gl.blendFunc(this.src._factor, this.dst._factor);
    } else {
      this._gl.blendFuncSeparate(this.srcRgb._factor, this.dstRgb._factor, this.srcAlpha._factor, this.dstAlpha._factor);
    }
  };

  return BlendManager;

})();

_ref = [0, 1], TOGETHER = _ref[0], SEPARATE = _ref[1];

ZERO = WebGLRenderingContext.ZERO, ONE = WebGLRenderingContext.ONE;

},{"./blendManager/BlendShortcutList":21}],20:[function(require,module,exports){
var BLEND, CULL_FACE, Capability, CapabilityManager, DEPTH_TEST, POLYGON_OFFSET_FILL, SCISSOR_TEST;

Capability = require('./capabilityManager/Capability');

module.exports = CapabilityManager = (function() {
  function CapabilityManager(_drawingManager) {
    this._drawingManager = _drawingManager;
    this._gl = this._drawingManager._gila.gl;
    this.blending = new Capability(this, BLEND, 0);
    this.faceCulling = new Capability(this, CULL_FACE, 0);
    this.depthTesting = new Capability(this, DEPTH_TEST, 0);
    this.scissorTesting = new Capability(this, SCISSOR_TEST, 0);
    this.polygonOffsetFilling = new Capability(this, POLYGON_OFFSET_FILL, 0);
  }

  CapabilityManager.prototype._enable = function(capability) {
    this._gl.enable(capability);
  };

  CapabilityManager.prototype._disable = function(capability) {
    this._gl.disable(capability);
  };

  CapabilityManager._propsToExpose = ['blending', 'faceCulling', 'depthTesting', 'scissorTesting', 'polygonOffsetFilling'];

  CapabilityManager._memberName = '_capabilityManager';

  return CapabilityManager;

})();

BLEND = WebGLRenderingContext.BLEND, CULL_FACE = WebGLRenderingContext.CULL_FACE, DEPTH_TEST = WebGLRenderingContext.DEPTH_TEST, SCISSOR_TEST = WebGLRenderingContext.SCISSOR_TEST, POLYGON_OFFSET_FILL = WebGLRenderingContext.POLYGON_OFFSET_FILL;

},{"./capabilityManager/Capability":22}],21:[function(require,module,exports){
var BlendShortcutList, factorNames, funcName, name, string, _fn, _i, _len;

string = require('../../utility/string');

module.exports = BlendShortcutList = (function() {
  function BlendShortcutList(_manager, _type, _factor) {
    this._manager = _manager;
    this._type = _type;
    this._factor = _factor;
  }

  return BlendShortcutList;

})();

factorNames = ['ZERO', 'ONE', 'SRC_COLOR', 'ONE_MINUS_SRC_COLOR', 'DST_COLOR', 'ONE_MINUS_DST_COLOR', 'SRC_ALPHA', 'ONE_MINUS_SRC_ALPHA', 'DST_ALPHA', 'ONE_MINUS_DST_ALPHA', 'SRC_ALPHA_SATURATE'];

_fn = function() {
  var factor;
  factor = WebGLRenderingContext[name];
  return BlendShortcutList.prototype[funcName] = function() {
    this._manager._setType(this._type);
    if (this._factor !== factor) {
      this._factor = factor;
      this._manager._shouldUpdate = true;
    }
    return this._manager;
  };
};
for (_i = 0, _len = factorNames.length; _i < _len; _i++) {
  name = factorNames[_i];
  funcName = string.allUpperCaseToCamelCase(name);
  funcName = funcName[0].toLowerCase() + funcName.substr(1, funcName.length);
  _fn();
}

},{"../../utility/string":54}],22:[function(require,module,exports){
var Capability;

module.exports = Capability = (function() {
  function Capability(_manager, _prop, _default) {
    this._manager = _manager;
    this._prop = _prop;
    this._default = _default;
    this._current = this._default;
  }

  Capability.prototype.get = function() {
    return this._current;
  };

  Capability.prototype.enable = function() {
    if (this._current === 0) {
      this._manager._enable(this._prop);
      this._current = 1;
    }
    return 1;
  };

  Capability.prototype.disable = function() {
    if (this._current === 1) {
      this._manager._disable(this._prop);
      this._current = 0;
    }
    return 0;
  };

  Capability.prototype.reset = function() {
    if (this._current === this._default) {
      return;
    }
    if (this._default === 1) {
      return this.enable();
    } else {
      return this.disable();
    }
  };

  return Capability;

})();

},{}],23:[function(require,module,exports){
var VAOExtension, VAOObject;

VAOObject = require('./vaoExtension/VAOObject');

module.exports = VAOExtension = (function() {
  function VAOExtension(_manager) {
    this._manager = _manager;
    this._gila = this._manager._gila;
    this._gl = this._gila.gl;
    this._ext = this._gl.getExtension('OES_vertex_array_object');
    this._available = this._ext != null;
    this._bound = null;
  }

  VAOExtension.prototype.isAvailable = function() {
    return this._available;
  };

  VAOExtension.prototype.unbind = function() {
    this._bound = null;
    this._ext.bindVertexArrayOES(null);
    return this;
  };

  VAOExtension.prototype.create = function() {
    return new VAOObject(this, this._ext.createVertexArrayOES());
  };

  VAOExtension.prototype._bind = function(obj) {
    if (obj === this._bound) {
      return;
    }
    this._bound = obj;
    this._ext.bindVertexArrayOES(obj._obj);
  };

  return VAOExtension;

})();

},{"./vaoExtension/VAOObject":24}],24:[function(require,module,exports){
var VAOObject;

module.exports = VAOObject = (function() {
  function VAOObject(_extension, _obj) {
    this._extension = _extension;
    this._obj = _obj;
  }

  VAOObject.prototype.isBound = function() {
    return this._extension._bound === this;
  };

  VAOObject.prototype.bind = function() {
    this._extension._bind(this);
    return this;
  };

  VAOObject.prototype.unbind = function() {
    this._extension.unbind();
    return this;
  };

  return VAOObject;

})();

},{}],25:[function(require,module,exports){
var FrameBuffer;

module.exports = FrameBuffer = (function() {
  function FrameBuffer(manager) {
    this.manager = manager;
    this._gila = this.manager._gila;
    this._gl = this._gila.gl;
    this._fb = this._gl.createFramebuffer();
    this.dims = new Float32Array(this._gila.viewportSize);
    this._colorTexture = null;
    this._depthRenderBuffer = null;
  }

  FrameBuffer.prototype.isBound = function() {
    return this.manager._bound === this;
  };

  FrameBuffer.prototype.bind = function() {
    this.manager._bound = this;
    this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, this._fb);
    return this;
  };

  FrameBuffer.prototype.unbind = function() {
    if (this.isBound()) {
      this.manager._bound = null;
      this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, null);
    }
    return this;
  };

  FrameBuffer.prototype.makeTextureForColor = function() {
    return this._gila.makeEmptyTexture().prepareForDims(this.dims[0], this.dims[1]).wrapSClampToEdge().wrapTClampToEdge();
  };

  FrameBuffer.prototype.useTextureForColor = function(t) {
    if (this._gila.debug && !this.isBound()) {
      throw Error("FrameBuffer is not bound");
    }
    if (t == null) {
      t = this.makeTextureForColor();
    }
    this._colorTexture = t;
    this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER, this._gl.COLOR_ATTACHMENT0, this._gl.TEXTURE_2D, t.texture, 0);
    return this;
  };

  FrameBuffer.prototype.getColorTexture = function() {
    return this._colorTexture;
  };

  FrameBuffer.prototype.hasColorTexture = function() {
    return this._colorTexture != null;
  };

  FrameBuffer.prototype.makeRenderBufferForDepth = function() {
    return this._gila.makeRenderBuffer().storeDepth16(this.dims[0], this.dims[1]);
  };

  FrameBuffer.prototype.useRenderBufferForDepth = function(b) {
    if (this._gila.debug && !this.isBound()) {
      throw Error("FrameBuffer is not bound");
    }
    if (b == null) {
      b = this.makeRenderBufferForDepth();
    }
    this._depthRenderBuffer = b;
    this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER, this._gl.DEPTH_ATTACHMENT, this._gl.RENDERBUFFER, b.buffer);
    return this;
  };

  FrameBuffer.prototype.getDepthRenderBuffer = function() {
    return this._depthRenderBuffer;
  };

  FrameBuffer.prototype.hasDepthRenderBuffer = function() {
    return this._depthRenderBuffer != null;
  };

  return FrameBuffer;

})();

},{}],26:[function(require,module,exports){
var ShaderProgram, VertexAttribute, uniforms;

uniforms = require('./shaderProgram/uniform/index');

VertexAttribute = require('./shaderProgram/VertexAttribute');

module.exports = ShaderProgram = (function() {
  function ShaderProgram(_manager, index, vertex, frag) {
    this._manager = _manager;
    this.index = index;
    this.vertex = vertex;
    this.frag = frag;
    this._gila = this._manager._gila;
    this._gl = this._gila.gl;
    this._attribs = {};
    this._uniforms = {};
    this.program = null;
    this._prepare();
  }

  ShaderProgram.prototype.isActive = function() {
    return this === this._manager._active;
  };

  ShaderProgram.prototype.activate = function() {
    if (!this.isActive()) {
      this._gl.useProgram(this.program);
      this._manager._active = this;
    }
    return this;
  };

  ShaderProgram.prototype.getVariation = function(flags) {
    return this._manager._getVariationOfProgram(this, flags);
  };

  ShaderProgram.prototype._prepare = function() {
    this.vertex.ready();
    this.frag.ready();
    this.program = this._gl.createProgram();
    this._gl.attachShader(this.program, this.frag.shader);
    this._gl.attachShader(this.program, this.vertex.shader);
    this._gl.linkProgram(this.program);
    if (this._gila.debug && !this._gl.getProgramParameter(this.program, this._gl.LINK_STATUS)) {
      throw Error(("Could not initialize shader program '" + this.index + "':\n") + this._gl.getProgramInfoLog(this.program));
    }
  };

  ShaderProgram.prototype.attr = function(name) {
    if (this._attribs[name] == null) {
      this._attribs[name] = new VertexAttribute(this._gila, this, name);
    }
    return this._attribs[name];
  };

  ShaderProgram.prototype.uniform = function(type, name) {
    if (this._uniforms[name] == null) {
      this._uniforms[name] = this._makeUniform(type, name);
    } else if (this._gila.debug) {
      this._makeSureUniformTypesMatch(type, this._uniforms[name], name);
    }
    return this._uniforms[name];
  };

  ShaderProgram.prototype._makeUniform = function(type, name) {
    var cls;
    cls = uniforms[type];
    if (this._gila.debug && (cls == null)) {
      throw Error("Unkown uniform type `" + type + "`");
    }
    return new cls(this._gila, this, name);
  };

  ShaderProgram.prototype._makeSureUniformTypesMatch = function(type, uniform, name) {
    var cls, originalType;
    cls = uniforms[type];
    if (cls == null) {
      throw Error("Unkown uniform type `" + type + "`");
    }
    if (cls !== uniform.constructor) {
      originalType = uniforms.indexOf(uniform.constructor);
      throw Error("Uniform `" + name + "` is already initialized as `" + originalType + "`. Cannot re-set it to `" + type + "`");
    }
  };

  return ShaderProgram;

})();

},{"./shaderProgram/VertexAttribute":27,"./shaderProgram/uniform/index":44}],27:[function(require,module,exports){
var BYTE, FLOAT, SHORT, UNSIGNED_BYTE, UNSIGNED_SHORT, VertexAttribute, sizes;

module.exports = VertexAttribute = (function() {
  function VertexAttribute(_gila, shaderProgram, name) {
    var loc;
    this._gila = _gila;
    this.shaderProgram = shaderProgram;
    this.name = name;
    this._gl = this._gila.gl;
    this.program = this.shaderProgram.program;
    loc = this._gl.getAttribLocation(this.program, this.name);
    if (this._gila.debug && loc === -1) {
      console.error("Could not get shader attribute location `" + this.name + "` for shader `" + this.shaderProgram.id + "`");
    }
    this.location = loc;
  }

  VertexAttribute.prototype.enableVertexAttribArray = function() {
    this._gl.enableVertexAttribArray(this.location);
    return this;
  };

  VertexAttribute.prototype.enable = function() {
    return this.enableVertexAttribArray();
  };

  VertexAttribute.prototype._pointer = function(size, type, normalized, stride, offset) {
    if (this._gila.debug) {
      if (!this._gila.getBoundArrayBuffer()) {
        throw Error("There is no bound array buffer to read from");
      }
      if (size !== 1 && size !== 2 && size !== 3 && size !== 4) {
        throw Error("Invalid size `" + size);
      }
      if (normalized !== true && normalized !== false) {
        throw Error("Invalid value for normalized: " + normalized);
      }
      if (!((0 <= stride && stride <= 255))) {
        throw Error("stride is out of range: `" + stride);
      }
      if (offset < 0) {
        throw Error("offset is out of range: `" + offset + "`");
      }
      if (stride % sizes[type] !== 0) {
        throw Error("stride must be a multiple of the size of type, which is `" + sizes[type] + "`");
      }
      if (offset % sizes[type] !== 0) {
        throw Error("offset must be a multiple of the size of type, which is `" + sizes[type] + "`");
      }
    }
    this._gl.vertexAttribPointer(this.location, size, type, normalized, stride, offset);
    return this;
  };

  VertexAttribute.prototype.readAsFloat = function(size, normalized, stride, offset) {
    return this._pointer(size, FLOAT, normalized, stride, offset);
  };

  VertexAttribute.prototype.readAsByte = function(size, normalized, stride, offset) {
    return this._pointer(size, BYTE, normalized, stride, offset);
  };

  VertexAttribute.prototype.readAsUnsignedByte = function(size, normalized, stride, offset) {
    return this._pointer(size, UNSIGNED_BYTE, normalized, stride, offset);
  };

  VertexAttribute.prototype.readAsShort = function(size, normalized, stride, offset) {
    return this._pointer(size, SHORT, normalized, stride, offset);
  };

  VertexAttribute.prototype.readAsUnsignedShort = function(size, normalized, stride, offset) {
    return this._pointer(size, UNSIGNED_SHORT, normalized, stride, offset);
  };

  return VertexAttribute;

})();

FLOAT = WebGLRenderingContext.FLOAT, BYTE = WebGLRenderingContext.BYTE, UNSIGNED_BYTE = WebGLRenderingContext.UNSIGNED_BYTE, SHORT = WebGLRenderingContext.SHORT, UNSIGNED_SHORT = WebGLRenderingContext.UNSIGNED_SHORT;

sizes = {};

sizes[FLOAT] = 4;

sizes[BYTE] = 1;

sizes[UNSIGNED_BYTE] = 1;

sizes[SHORT] = 2;

sizes[UNSIGNED_SHORT] = 2;

},{}],28:[function(require,module,exports){
var _Uniform;

module.exports = _Uniform = (function() {
  function _Uniform(_gila, shaderProgram, name) {
    this._gila = _gila;
    this.shaderProgram = shaderProgram;
    this.name = name;
    this._gl = this._gila.gl;
    this.program = this.shaderProgram.program;
    this.location = this._gl.getUniformLocation(this.program, this.name);
    if (this._gila.debug && (this.location == null)) {
      console.error("Couldn't find location of uniform '" + this.name + "'");
    }
  }

  _Uniform.prototype.set = function() {
    if (!this.shaderProgram.isActive()) {
      throw Error("Cannot set uniform value if the shader program is not active.");
    }
  };

  return _Uniform;

})();

},{}],29:[function(require,module,exports){
var Uniform1F, _NonMatrixFloatUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixFloatUniform = require('./_NonMatrixFloatUniform');

module.exports = Uniform1F = (function(_super) {
  __extends(Uniform1F, _super);

  function Uniform1F() {
    this._len = 1;
    Uniform1F.__super__.constructor.apply(this, arguments);
  }

  Uniform1F.prototype._set = function(x) {
    this._gl.uniform1f(this.location, x);
  };

  Uniform1F.prototype._fromArray = function(r) {
    this._gl.uniform1fv(this.location, r);
  };

  return Uniform1F;

})(_NonMatrixFloatUniform);

},{"./_NonMatrixFloatUniform":41}],30:[function(require,module,exports){
var Uniform1I, _NonMatrixIntUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixIntUniform = require('./_NonMatrixIntUniform');

module.exports = Uniform1I = (function(_super) {
  __extends(Uniform1I, _super);

  function Uniform1I() {
    this._len = 1;
    Uniform1I.__super__.constructor.apply(this, arguments);
  }

  Uniform1I.prototype._set = function(x) {
    this._gl.uniform1i(this.location, x);
  };

  Uniform1I.prototype._fromArray = function(r) {
    this._gl.uniform1iv(this.location, r);
  };

  return Uniform1I;

})(_NonMatrixIntUniform);

},{"./_NonMatrixIntUniform":42}],31:[function(require,module,exports){
var Uniform2F, _NonMatrixFloatUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixFloatUniform = require('./_NonMatrixFloatUniform');

module.exports = Uniform2F = (function(_super) {
  __extends(Uniform2F, _super);

  function Uniform2F() {
    this._len = 2;
    Uniform2F.__super__.constructor.apply(this, arguments);
  }

  Uniform2F.prototype._set = function(x, y) {
    this._gl.uniform2f(this.location, x, y);
  };

  Uniform2F.prototype._fromArray = function(r) {
    this._gl.uniform2fv(this.location, r);
  };

  return Uniform2F;

})(_NonMatrixFloatUniform);

},{"./_NonMatrixFloatUniform":41}],32:[function(require,module,exports){
var Uniform2I, _NonMatrixIntUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixIntUniform = require('./_NonMatrixIntUniform');

module.exports = Uniform2I = (function(_super) {
  __extends(Uniform2I, _super);

  function Uniform2I() {
    this._len = 2;
    Uniform2I.__super__.constructor.apply(this, arguments);
  }

  Uniform2I.prototype._set = function(x, y) {
    this._gl.uniform2i(this.location, x, y);
  };

  Uniform2I.prototype._fromArray = function(r) {
    this._gl.uniform2iv(this.location, r);
  };

  return Uniform2I;

})(_NonMatrixIntUniform);

},{"./_NonMatrixIntUniform":42}],33:[function(require,module,exports){
var Uniform3F, _NonMatrixFloatUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixFloatUniform = require('./_NonMatrixFloatUniform');

module.exports = Uniform3F = (function(_super) {
  __extends(Uniform3F, _super);

  function Uniform3F() {
    this._len = 3;
    Uniform3F.__super__.constructor.apply(this, arguments);
  }

  Uniform3F.prototype._set = function(x, y, z) {
    this._gl.uniform3f(this.location, x, y, z);
  };

  Uniform3F.prototype._fromArray = function(r) {
    this._gl.uniform3fv(this.location, r);
  };

  return Uniform3F;

})(_NonMatrixFloatUniform);

},{"./_NonMatrixFloatUniform":41}],34:[function(require,module,exports){
var Uniform3I, _NonMatrixIntUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixIntUniform = require('./_NonMatrixIntUniform');

module.exports = Uniform3I = (function(_super) {
  __extends(Uniform3I, _super);

  function Uniform3I() {
    this._len = 3;
    Uniform3I.__super__.constructor.apply(this, arguments);
  }

  Uniform3I.prototype._set = function(x, y, z) {
    this._gl.uniform3i(this.location, x, y, z);
  };

  Uniform3I.prototype._fromArray = function(r) {
    this._gl.uniform3iv(this.location, r);
  };

  return Uniform3I;

})(_NonMatrixIntUniform);

},{"./_NonMatrixIntUniform":42}],35:[function(require,module,exports){
var Uniform4F, _NonMatrixFloatUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixFloatUniform = require('./_NonMatrixFloatUniform');

module.exports = Uniform4F = (function(_super) {
  __extends(Uniform4F, _super);

  function Uniform4F() {
    this._len = 4;
    Uniform4F.__super__.constructor.apply(this, arguments);
  }

  Uniform4F.prototype._set = function(x, y, z, w) {
    this._gl.uniform4f(this.location, x, y, z, w);
  };

  Uniform4F.prototype._fromArray = function(r) {
    this._gl.uniform4fv(this.location, r);
  };

  return Uniform4F;

})(_NonMatrixFloatUniform);

},{"./_NonMatrixFloatUniform":41}],36:[function(require,module,exports){
var Uniform4I, _NonMatrixIntUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixIntUniform = require('./_NonMatrixIntUniform');

module.exports = Uniform4I = (function(_super) {
  __extends(Uniform4I, _super);

  function Uniform4I() {
    this._len = 4;
    Uniform4I.__super__.constructor.apply(this, arguments);
  }

  Uniform4I.prototype._set = function(x, y, z, w) {
    this._gl.uniform4i(this.location, x, y, z, w);
  };

  Uniform4I.prototype._fromArray = function(r) {
    this._gl.uniform4iv(this.location, r);
  };

  return Uniform4I;

})(_NonMatrixIntUniform);

},{"./_NonMatrixIntUniform":42}],37:[function(require,module,exports){
var UniformMat2F, _MatrixUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_MatrixUniform = require('./_MatrixUniform');

module.exports = UniformMat2F = (function(_super) {
  __extends(UniformMat2F, _super);

  function UniformMat2F() {
    this._len = 4;
    UniformMat2F.__super__.constructor.apply(this, arguments);
  }

  UniformMat2F.prototype._set = function(mat) {
    this._gl.uniformMatrix2fv(this.location, false, mat);
  };

  return UniformMat2F;

})(_MatrixUniform);

},{"./_MatrixUniform":40}],38:[function(require,module,exports){
var UniformMat3F, _MatrixUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_MatrixUniform = require('./_MatrixUniform');

module.exports = UniformMat3F = (function(_super) {
  __extends(UniformMat3F, _super);

  function UniformMat3F() {
    this._len = 9;
    UniformMat3F.__super__.constructor.apply(this, arguments);
  }

  UniformMat3F.prototype._set = function(mat) {
    this._gl.uniformMatrix3fv(this.location, false, mat);
  };

  return UniformMat3F;

})(_MatrixUniform);

},{"./_MatrixUniform":40}],39:[function(require,module,exports){
var UniformMat4F, _MatrixUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_MatrixUniform = require('./_MatrixUniform');

module.exports = UniformMat4F = (function(_super) {
  __extends(UniformMat4F, _super);

  function UniformMat4F() {
    this._len = 16;
    UniformMat4F.__super__.constructor.apply(this, arguments);
  }

  UniformMat4F.prototype._set = function(mat) {
    this._gl.uniformMatrix4fv(this.location, false, mat);
  };

  return UniformMat4F;

})(_MatrixUniform);

},{"./_MatrixUniform":40}],40:[function(require,module,exports){
var _MatrixUniform, _Uniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Uniform = require('../_Uniform');

module.exports = _MatrixUniform = (function(_super) {
  __extends(_MatrixUniform, _super);

  function _MatrixUniform() {
    _MatrixUniform.__super__.constructor.apply(this, arguments);
    if (!this._gila.debug) {
      this.set = this._set;
    }
  }

  _MatrixUniform.prototype.set = function(mat) {
    _MatrixUniform.__super__.set.apply(this, arguments);
    if (!(mat instanceof Float32Array)) {
      throw Error("Matrix must be a Float32Array");
    }
    if (mat.length !== this._len) {
      throw Error("Matrix's length must equal to '@{len}'. Given: '" + mat.length + "'");
    }
    return this._set(mat);
  };

  _MatrixUniform.prototype.fromArray = function(mat) {
    return this.set(mat);
  };

  return _MatrixUniform;

})(_Uniform);

},{"../_Uniform":28}],41:[function(require,module,exports){
var _NonMatrixFloatUniform, _NonMatrixUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixUniform = require('./_NonMatrixUniform');

module.exports = _NonMatrixFloatUniform = (function(_super) {
  __extends(_NonMatrixFloatUniform, _super);

  function _NonMatrixFloatUniform() {
    this._arrayType = Float32Array;
    _NonMatrixFloatUniform.__super__.constructor.apply(this, arguments);
  }

  _NonMatrixFloatUniform.prototype._singleArgumentIsValid = function(val) {
    return parseFloat(val) === val;
  };

  return _NonMatrixFloatUniform;

})(_NonMatrixUniform);

},{"./_NonMatrixUniform":43}],42:[function(require,module,exports){
var _NonMatrixIntUniform, _NonMatrixUniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_NonMatrixUniform = require('./_NonMatrixUniform');

module.exports = _NonMatrixIntUniform = (function(_super) {
  __extends(_NonMatrixIntUniform, _super);

  function _NonMatrixIntUniform() {
    this._arrayType = Int32Array;
    _NonMatrixIntUniform.__super__.constructor.apply(this, arguments);
  }

  _NonMatrixIntUniform.prototype._singleArgumentIsValid = function(val) {
    return parseInt(val) === val;
  };

  return _NonMatrixIntUniform;

})(_NonMatrixUniform);

},{"./_NonMatrixUniform":43}],43:[function(require,module,exports){
var argNames, _NonMatrixUniform, _Uniform,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Uniform = require('../_Uniform');

argNames = ['x', 'y', 'z', 'w'];

module.exports = _NonMatrixUniform = (function(_super) {
  __extends(_NonMatrixUniform, _super);

  function _NonMatrixUniform() {
    _NonMatrixUniform.__super__.constructor.apply(this, arguments);
    if (!this._gila.debug) {
      this.set = this._set;
      this.fromArray = this._fromArray;
    }
  }

  _NonMatrixUniform.prototype.set = function() {
    var i, _i, _ref;
    _NonMatrixUniform.__super__.set.apply(this, arguments);
    for (i = _i = 0, _ref = this._len; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
      this._validateSingleArgument(arguments[i], i);
    }
    return this._set.apply(this, arguments);
  };

  _NonMatrixUniform.prototype.fromArray = function(r) {
    if (!(r instanceof this._arrayType)) {
      throw Error("Array must be a `" + this._arrayType.name + "`");
    }
    if (r.length !== this._len) {
      throw Error("Array length must be equal to '" + this._len + "'. Given: '" + r.length + "'");
    }
    return this._fromArray(r);
  };

  _NonMatrixUniform.prototype._validateSingleArgument = function(val, i) {
    var argName;
    argName = argNames[i];
    if (!this._singleArgumentIsValid(val)) {
      throw Error("Invalid value for `" + argName + "`. Given: '" + val + "'");
    }
  };

  return _NonMatrixUniform;

})(_Uniform);

},{"../_Uniform":28}],44:[function(require,module,exports){
module.exports = {
  '1f': require('./Uniform1F'),
  '2f': require('./Uniform2F'),
  '3f': require('./Uniform3F'),
  '4f': require('./Uniform4F'),
  '1i': require('./Uniform1I'),
  '2i': require('./Uniform2I'),
  '3i': require('./Uniform3I'),
  '4i': require('./Uniform4I'),
  'mat2': require('./UniformMat2F'),
  'mat3': require('./UniformMat3F'),
  'mat4': require('./UniformMat4F')
};

},{"./Uniform1F":29,"./Uniform1I":30,"./Uniform2F":31,"./Uniform2I":32,"./Uniform3F":33,"./Uniform3I":34,"./Uniform4F":35,"./Uniform4I":36,"./UniformMat2F":37,"./UniformMat3F":38,"./UniformMat4F":39}],45:[function(require,module,exports){
var RenderBuffer;

module.exports = RenderBuffer = (function() {
  function RenderBuffer(manager) {
    this.manager = manager;
    this._gila = this.manager._gila;
    this._gl = this._gila.gl;
    this.buffer = this._gl.createRenderbuffer();
    this.dims = new Float32Array(this._gila.viewportSize);
  }

  RenderBuffer.prototype.isBound = function() {
    return this.manager.bound === this;
  };

  RenderBuffer.prototype.bind = function() {
    this.manager.bound = this;
    this._gl.bindRenderbuffer(this._gl.RENDERBUFFER, this.buffer);
    return this;
  };

  RenderBuffer.prototype._store = function(format, width, height) {
    if (width == null) {
      width = this.dims[0];
    }
    if (height == null) {
      height = this.dims[1];
    }
    this.bind();
    this._gl.renderbufferStorage(this._gl.RENDERBUFFER, format, width, height);
    return this;
  };

  RenderBuffer.prototype.storeDepth16 = function(w, h) {
    return this._store(this._gl.DEPTH_COMPONENT16, w, h);
  };

  return RenderBuffer;

})();

},{}],46:[function(require,module,exports){
var FRAG, Shader, VERT, shaderNames;

FRAG = WebGLRenderingContext.FRAGMENT_SHADER;

VERT = WebGLRenderingContext.VERTEX_SHADER;

shaderNames = {};

shaderNames[FRAG] = 'fragment';

shaderNames[VERT] = 'vertex';

module.exports = Shader = (function() {
  function Shader(_sourceManager, type, sourceId, variation, source) {
    this._sourceManager = _sourceManager;
    this.type = type;
    this.sourceId = sourceId;
    this.variation = variation;
    this.source = source;
    this._gila = this._sourceManager._gila;
    this._gl = this._gila.gl;
    this.index = this.sourceId;
    if (this.variation > 0) {
      this.index += "-" + this.variation;
    }
    this.shader = null;
  }

  Shader.prototype.getVariation = function(flags) {
    return this._sourceManager.getVariation(flags);
  };

  Shader.prototype.ready = function() {
    var err, line, parts, shader;
    if (this.shader != null) {
      return this;
    }
    shader = this._gl.createShader(this.type);
    this._gl.shaderSource(shader, this.source);
    this._gl.compileShader(shader);
    if (this._gila.debug && !this._gl.getShaderParameter(shader, this._gl.COMPILE_STATUS)) {
      err = this._gl.getShaderInfoLog(shader);
      parts = err.match(/ERROR\: [0-9]+\:([0-9]+)\:/);
      if ((parts != null) && (parts[1] != null)) {
        line = parseInt(parts[1]);
      }
      console.group("Error compiling " + shaderNames[this.type] + " shader '" + this.index + "'");
      console.error(err);
      if (line != null) {
        console.log('Error line:\n\n', this.source.split("\n")[line - 1], '\n');
      }
      console.log("Shader source:", "\n\n" + this.source);
      console.groupEnd();
      throw Error("Shader didn't compile");
    }
    return this.shader = shader;
  };

  return Shader;

})();

},{}],47:[function(require,module,exports){
var OptionsToIndex, Shader, ShaderSource;

Shader = require('./Shader');

OptionsToIndex = require('options-to-index');

module.exports = ShaderSource = (function() {
  var self;

  self = ShaderSource;

  ShaderSource._ifdefRx = /\#ifdef\s+([a-zA-Z0-9\_]+)/g;

  ShaderSource._ifdefRemoveRx = /^\#ifdef\s+/;

  ShaderSource._ifDefinedRx = /\#.*defined\(([a-zA-Z0-9\_]+)\)/g;

  ShaderSource._definedRx = /(defined\()([a-zA-Z0-9\_]+)(\))/g;

  function ShaderSource(_manager, type, id, source) {
    this._manager = _manager;
    this.type = type;
    this.id = id;
    this.source = source;
    this._gila = this._manager._gila;
    this._template = self.getTemplateFor(this.source);
    this._optionsToIndex = new OptionsToIndex(this._template);
    this._variations = {};
  }

  ShaderSource.prototype.getVariation = function(flags) {
    var index;
    if (!flags) {
      return this._getDefaultVariation();
    }
    index = this._getVariationIndex(flags);
    if (!this._variations[index]) {
      this._variations[index] = new Shader(this, this.type, this.id, index, this._getSourceForVariation(flags));
    }
    return this._variations[index];
  };

  ShaderSource.prototype._getSourceForVariation = function(flags) {
    var defineStatements, flag;
    defineStatements = '';
    for (flag in this._template) {
      if (flags[flag] === true) {
        defineStatements += '#define ' + flag + '\n';
      }
    }
    return defineStatements + this.source;
  };

  ShaderSource.prototype._getDefaultVariation = function() {
    if (this._variations[0] == null) {
      this._variations[0] = new Shader(this, this.type, this.id, 0, this.source);
    }
    return this._variations[0];
  };

  ShaderSource.prototype._getVariationIndex = function(flags) {
    return this._optionsToIndex.getIndex(flags);
  };

  ShaderSource.getTemplateFor = function(source) {
    var definedStatement, flag, match, matches, template, _i, _j, _k, _len, _len1, _len2, _ref;
    template = {};
    matches = source.match(self._ifdefRx);
    if (matches == null) {
      return template;
    }
    for (_i = 0, _len = matches.length; _i < _len; _i++) {
      match = matches[_i];
      flag = match.replace(self._ifdefRemoveRx, '');
      template[flag] = null;
    }
    matches = source.match(self._ifDefinedRx);
    for (_j = 0, _len1 = matches.length; _j < _len1; _j++) {
      match = matches[_j];
      _ref = match.match(self._definedRx);
      for (_k = 0, _len2 = _ref.length; _k < _len2; _k++) {
        definedStatement = _ref[_k];
        flag = definedStatement.substr(8, definedStatement.length - 9);
        template[flag] = null;
      }
    }
    return template;
  };

  return ShaderSource;

})();

},{"./Shader":46,"options-to-index":3}],48:[function(require,module,exports){
var EmptyTexture, T2D, Texture2D,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Texture2D = require('./Texture2D');

module.exports = EmptyTexture = (function(_super) {
  __extends(EmptyTexture, _super);

  function EmptyTexture(manager) {
    EmptyTexture.__super__.constructor.apply(this, arguments);
  }

  EmptyTexture.prototype.prepareForDims = function(width, height) {
    this.activateUnit();
    this._gl.texImage2D(T2D, 0, this._format, width, height, 0, this._format, this._gl.UNSIGNED_BYTE, null);
    this.uploaded = true;
    this._emit('upload');
    return this;
  };

  return EmptyTexture;

})(Texture2D);

T2D = WebGLRenderingContext.TEXTURE_2D;

},{"./Texture2D":50}],49:[function(require,module,exports){
var ImageTexture, T2D, Texture2D, UNPACK_FLIP_Y_WEBGL,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Texture2D = require('./Texture2D');

module.exports = ImageTexture = (function(_super) {
  __extends(ImageTexture, _super);

  function ImageTexture(manager, source) {
    ImageTexture.__super__.constructor.apply(this, arguments);
    if (source == null) {
      throw Error("`source` cannot be empty");
    }
    this._source = null;
    this.url = '';
    this._set(source);
    this._manager._waitForTexture(this);
    this.once('upload', (function(_this) {
      return function() {
        return _this._manager._textureIsDoneLoading(_this);
      };
    })(this));
  }

  ImageTexture.prototype._fromUrl = function(url) {
    var el;
    if (url.length === 0) {
      throw Error("Texture url is empty");
    }
    el = new Image;
    el.src = url;
    return this._fromImage(el);
  };

  ImageTexture.prototype._fromImage = function(el) {
    this.uploaded = false;
    this._source = el;
    this.url = el.src;
    this._source.addEventListener('load', (function(_this) {
      return function() {
        if (_this.uploaded) {
          throw Error("'load' event is fired on source element, yet the texture is already uploaded");
        }
        _this._upload();
      };
    })(this));
    return this;
  };

  ImageTexture.prototype._set = function(source) {
    if (typeof source === 'string') {
      return this._fromUrl(source);
    } else if (source instanceof HTMLImageElement) {
      return this._fromImage(source);
    } else {
      throw Error("Only images/urls are supported for now");
    }
  };

  ImageTexture.prototype._upload = function() {
    this.activateUnit();
    this._gl.pixelStorei(UNPACK_FLIP_Y_WEBGL, this._options.flipY);
    this._gl.texImage2D(T2D, 0, this._format, this._format, this._gl.UNSIGNED_BYTE, this._source);
    this.uploaded = true;
    this._emit('upload');
  };

  return ImageTexture;

})(Texture2D);

T2D = WebGLRenderingContext.TEXTURE_2D;

UNPACK_FLIP_Y_WEBGL = WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL;

},{"./Texture2D":50}],50:[function(require,module,exports){
var T2D, Texture2D, setupShortcuts, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

setupShortcuts = require('./texture2D/setupShortcuts');

_Emitter = require('../utility/_Emitter');

module.exports = Texture2D = (function(_super) {
  __extends(Texture2D, _super);

  function Texture2D(_2DManager) {
    this._2DManager = _2DManager;
    Texture2D.__super__.constructor.apply(this, arguments);
    this._gila = this._2DManager._gila;
    this._gl = this._gila.gl;
    this._manager = this._gila.textures;
    this._options = {
      flipY: false,
      hasAlpha: true
    };
    this._shouldGenerateMipmap = false;
    this._params = {};
    this._format = this._gl.RGBA;
    this.uploaded = false;
    this.texture = this._gl.createTexture();
    this._unit = -1;
    this._unitIsLocked = false;
    this.magnifyWithLinear();
    this.minifyWithLinear();
  }

  Texture2D.prototype.isUploaded = function() {
    return this.uploaded;
  };

  Texture2D.prototype.bind = function() {
    if (this._2DManager._bound !== this) {
      this._gl.bindTexture(T2D, this.texture);
      this._2DManager._bound = this;
    }
    return this;
  };

  Texture2D.prototype.unbind = function() {
    if (this._2DManager._bound === this) {
      this._gl.bindTexture(T2D, null);
      this._2DManager._bound = null;
    }
    return this;
  };

  Texture2D.prototype.assignToUnit = function(n) {
    this._manager._assignTextureToUnit(this, n);
    this.activateUnit();
    return this;
  };

  Texture2D.prototype.assignToAUnit = function() {
    this._manager._assignTextureToAUnit(this);
    this._activateUnit();
    return this._unit;
  };

  Texture2D.prototype.activateUnit = function() {
    this.assignToAUnit();
    this._activateUnit();
    return this;
  };

  Texture2D.prototype._activateUnit = function() {
    this._manager._activateUnit(this._unit);
    this.bind();
  };

  Texture2D.prototype.lockUnit = function() {
    this._unitIsLocked = true;
    return this;
  };

  Texture2D.prototype.unlockUnit = function() {
    this._unitIsLocked = false;
    return this;
  };

  Texture2D.prototype.isUnitLocked = function() {
    return this._unitIsLocked;
  };

  Texture2D.prototype.getUnit = function() {
    if (this._unit === -1) {
      return null;
    } else {
      return this._unit;
    }
  };

  Texture2D.prototype.isAssignedToUnit = function() {
    return this._unit !== -1;
  };

  Texture2D.prototype.withAlpha = function() {
    if (this.uploaded) {
      throw Error("The texture is already uploaded");
    }
    this._options.hasAlpha = true;
    this._format = this._gl.RGBA;
    return this;
  };

  Texture2D.prototype.flipY = function() {
    if (this._gila.debug && this.uploaded) {
      throw Error("The texture is already uploaded");
    }
    this._options.flipY = true;
    return this;
  };

  Texture2D.prototype.noAlpha = function() {
    if (this._gila.debug && this.uploaded) {
      throw Error("The texture is already uploaded");
    }
    this._options.hasAlpha = false;
    this._format = this._gl.RGB;
    return this;
  };

  Texture2D.prototype.generateMipmap = function() {
    if (this._shouldGenerateMipmap) {
      return this;
    }
    this._shouldGenerateMipmap = true;
    this.on('upload', (function(_this) {
      return function() {
        return _this._generateMipmap();
      };
    })(this));
    if (this.uploaded) {
      this._generateMipmap();
    }
  };

  Texture2D.prototype._generateMipmap = function() {
    this.activateUnit();
    this._gl.generateMipmap(T2D);
    return this;
  };

  Texture2D.prototype._setParam = function(pname, param) {
    this.activateUnit();
    this._params[pname] = param;
    this._gl.texParameteri(T2D, pname, param);
  };

  return Texture2D;

})(_Emitter);

T2D = WebGLRenderingContext.TEXTURE_2D;

setupShortcuts(Texture2D);

},{"../utility/_Emitter":52,"./texture2D/setupShortcuts":51}],51:[function(require,module,exports){
var setupMethodShortcut, string;

string = require('../../utility/string');

module.exports = function(Texture2D) {
  var normalSetter;
  normalSetter = function(funcName, pname, value) {
    Texture2D.prototype[funcName] = function() {
      this._setParam(pname, value);
      return this;
    };
  };
  setupMethodShortcut('wrapS', 'TEXTURE_WRAP_S', ['CLAMP_TO_EDGE', 'REPEAT', 'MIRRORED_REPEAT'], normalSetter);
  setupMethodShortcut('wrapT', 'TEXTURE_WRAP_T', ['CLAMP_TO_EDGE', 'REPEAT', 'MIRRORED_REPEAT'], normalSetter);
  setupMethodShortcut('magnifyWith', 'TEXTURE_MAG_FILTER', ['NEAREST', 'LINEAR'], normalSetter);
  setupMethodShortcut('minifyWith', 'TEXTURE_MIN_FILTER', ['NEAREST', 'LINEAR'], normalSetter);
  return setupMethodShortcut('minifyWith', 'TEXTURE_MIN_FILTER', ['NEAREST_MIPMAP_NEAREST', 'LINEAR_MIPMAP_NEAREST', 'NEAREST_MIPMAP_LINEAR', 'LINEAR_MIPMAP_LINEAR'], function(funcName, pname, value) {
    Texture2D.prototype[funcName] = function() {
      this.generateMipmap();
      this._setParam(pname, value);
      return this;
    };
  });
};

setupMethodShortcut = function(funcPrefix, firstArg, secondArgs, cb) {
  var arg, funcName, _i, _len;
  firstArg = WebGLRenderingContext[firstArg];
  for (_i = 0, _len = secondArgs.length; _i < _len; _i++) {
    arg = secondArgs[_i];
    funcName = funcPrefix + string.allUpperCaseToCamelCase(arg);
    cb(funcName, firstArg, WebGLRenderingContext[arg]);
  }
};

},{"../../utility/string":54}],52:[function(require,module,exports){
var array, _Emitter;

array = require('utila/scripts/js/lib/array');

module.exports = _Emitter = (function() {
  function _Emitter() {
    this._listeners = {};
    this._listenersForAnyEvent = [];
    this._disabledEmitters = {};
  }

  _Emitter.prototype.on = function(eventName, listener) {
    if (this._listeners[eventName] == null) {
      this._listeners[eventName] = [];
    }
    this._listeners[eventName].push(listener);
    return this;
  };

  _Emitter.prototype.once = function(eventName, listener) {
    var cb, ran;
    ran = false;
    cb = (function(_this) {
      return function() {
        if (ran) {
          return;
        }
        ran = true;
        listener();
        return setTimeout(function() {
          return _this.removeEvent(eventName, cb);
        }, 0);
      };
    })(this);
    this.on(eventName, cb);
    return this;
  };

  _Emitter.prototype.onAnyEvent = function(listener) {
    this._listenersForAnyEvent.push(listener);
    return this;
  };

  _Emitter.prototype.removeEvent = function(eventName, listener) {
    if (this._listeners[eventName] == null) {
      return this;
    }
    array.pluckOneItem(this._listeners[eventName], listener);
    return this;
  };

  _Emitter.prototype.removeListeners = function(eventName) {
    if (this._listeners[eventName] == null) {
      return this;
    }
    this._listeners[eventName].length = 0;
    return this;
  };

  _Emitter.prototype.removeAllListeners = function() {
    var listeners, name, _ref;
    _ref = this._listeners;
    for (name in _ref) {
      listeners = _ref[name];
      listeners.length = 0;
    }
    return this;
  };

  _Emitter.prototype._emit = function(eventName, data) {
    var listener, _i, _j, _len, _len1, _ref, _ref1;
    _ref = this._listenersForAnyEvent;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener(data, eventName);
    }
    if (this._listeners[eventName] == null) {
      return;
    }
    _ref1 = this._listeners[eventName];
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      listener = _ref1[_j];
      listener(data);
    }
  };

  _Emitter.prototype._throttleEmitterMethod = function(fnName, time) {
    var lastCallArgs, originalFn, pend, pending, runIt, timer;
    if (time == null) {
      time = 1000;
    }
    originalFn = this[fnName];
    if (typeof originalFn !== 'function') {
      throw Error("this class does not have a method called '" + fnName + "'");
    }
    lastCallArgs = null;
    pending = false;
    timer = null;
    this[fnName] = (function(_this) {
      return function() {
        lastCallArgs = arguments;
        return pend();
      };
    })(this);
    pend = (function(_this) {
      return function() {
        if (pending) {
          clearTimeout(timer);
        }
        timer = setTimeout(runIt, time);
        return pending = true;
      };
    })(this);
    return runIt = (function(_this) {
      return function() {
        pending = false;
        return originalFn.apply(_this, lastCallArgs);
      };
    })(this);
  };

  _Emitter.prototype._disableEmitter = function(fnName) {
    if (this._disabledEmitters[fnName] != null) {
      throw Error("" + fnName + " is already a disabled emitter");
    }
    this._disabledEmitters[fnName] = this[fnName];
    return this[fnName] = function() {};
  };

  _Emitter.prototype._enableEmitter = function(fnName) {
    var fn;
    fn = this._disabledEmitters[fnName];
    if (fn == null) {
      throw Error("" + fnName + " is not a disabled emitter");
    }
    this[fnName] = fn;
    return delete this._disabledEmitters[fnName];
  };

  return _Emitter;

})();

},{"utila/scripts/js/lib/array":4}],53:[function(require,module,exports){
var exportApiFromSingleClass, exposeAllMethods, exposeApi, exposeMethodsFromArray, exposePropsFromArray, getter,
  __slice = [].slice;

module.exports = exposeApi = function() {
  var child, children, cls, _i, _j, _len;
  children = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), cls = arguments[_i++];
  for (_j = 0, _len = children.length; _j < _len; _j++) {
    child = children[_j];
    exportApiFromSingleClass(child, cls);
  }
};

getter = function(o, name, fn) {
  return Object.defineProperty(o, name, {
    get: fn,
    enumerable: true
  });
};

exportApiFromSingleClass = function(child, cls) {
  var memberName, memberNameValid, methods, props;
  methods = child._methodsToExpose;
  props = child._propsToExpose;
  memberName = child._memberName;
  memberNameValid = typeof memberName === 'string';
  if (((props != null) || (methods != null)) && !memberNameValid) {
    throw Error("Class `" + child + "` must have a valid `_memberName` property to be able to expose methods/props");
  }
  if (methods != null) {
    if (Array.isArray(methods)) {
      exposeMethodsFromArray(methods, child, cls, memberName);
    } else if (methods === '*') {
      exposeAllMethods(child, cls, memberName);
    } else {
      throw Error("Invalid value for `_methodsToExpose`");
    }
  }
  if (props != null) {
    if (Array.isArray(props)) {
      exposePropsFromArray(props, cls, memberName);
    } else {
      throw Error("Invalid value for `_propsToExpose`");
    }
  }
};

exposeMethodsFromArray = function(methods, child, cls, memberName) {
  var method, _fn, _i, _len;
  _fn = function() {
    var func;
    func = child.prototype[method];
    return cls.prototype[method] = function() {
      var member;
      member = this[memberName];
      func.apply(member, arguments);
      return this;
    };
  };
  for (_i = 0, _len = methods.length; _i < _len; _i++) {
    method = methods[_i];
    _fn();
  }
};

exposeAllMethods = function(child, cls, memberName) {
  var desc, methodName, methods;
  methods = [];
  for (methodName in child.prototype) {
    if (methodName[0] === '_') {
      continue;
    }
    desc = Object.getOwnPropertyDescriptor(child.prototype, methodName);
    if (desc.get != null) {
      continue;
    }
    methods.push(methodName);
  }
  return exposeMethodsFromArray(methods, child, cls, memberName);
};

exposePropsFromArray = function(props, cls, memberName) {
  var prop, _fn, _i, _len;
  _fn = function() {
    var propName;
    propName = prop;
    return getter(cls.prototype, propName, function() {
      return this[memberName][propName];
    });
  };
  for (_i = 0, _len = props.length; _i < _len; _i++) {
    prop = props[_i];
    _fn();
  }
};

},{}],54:[function(require,module,exports){
var string;

module.exports = string = {
  allUpperCaseToCamelCase: function(s) {
    return s.split('_').map(function(word) {
      return word[0] + word.substr(1, word.length).toLowerCase();
    }).join('');
  }
};

},{}],55:[function(require,module,exports){
/*
** Copyright (c) 2012 The Khronos Group Inc.
**
** Permission is hereby granted, free of charge, to any person obtaining a
** copy of this software and/or associated documentation files (the
** "Materials"), to deal in the Materials without restriction, including
** without limitation the rights to use, copy, modify, merge, publish,
** distribute, sublicense, and/or sell copies of the Materials, and to
** permit persons to whom the Materials are furnished to do so, subject to
** the following conditions:
**
** The above copyright notice and this permission notice shall be included
** in all copies or substantial portions of the Materials.
**
** THE MATERIALS ARE PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
** EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
** MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
** IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
** CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
** TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
** MATERIALS OR THE USE OR OTHER DEALINGS IN THE MATERIALS.
*/

// Various functions for helping debug WebGL apps.

module.exports = WebGLDebugUtils = function() {

/**
 * Wrapped logging function.
 * @param {string} msg Message to log.
 */
var log = function(msg) {
  if (window.console && window.console.log) {
    window.console.log(msg);
  }
};

/**
 * Wrapped error logging function.
 * @param {string} msg Message to log.
 */
var error = function(msg) {
  if (window.console && window.console.error) {
    window.console.error(msg);
  } else {
    log(msg);
  }
};


/**
 * Which arguments are enums based on the number of arguments to the function.
 * So
 *    'texImage2D': {
 *       9: { 0:true, 2:true, 6:true, 7:true },
 *       6: { 0:true, 2:true, 3:true, 4:true },
 *    },
 *
 * means if there are 9 arguments then 6 and 7 are enums, if there are 6
 * arguments 3 and 4 are enums
 *
 * @type {!Object.<number, !Object.<number, string>}}
 */
var glValidEnumContexts = {
  // Generic setters and getters

  'enable': {1: { 0:true }},
  'disable': {1: { 0:true }},
  'getParameter': {1: { 0:true }},

  // Rendering

  'drawArrays': {3:{ 0:true }},
  'drawElements': {4:{ 0:true, 2:true }},

  // Shaders

  'createShader': {1: { 0:true }},
  'getShaderParameter': {2: { 1:true }},
  'getProgramParameter': {2: { 1:true }},
  'getShaderPrecisionFormat': {2: { 0: true, 1:true }},

  // Vertex attributes

  'getVertexAttrib': {2: { 1:true }},
  'vertexAttribPointer': {6: { 2:true }},

  // Textures

  'bindTexture': {2: { 0:true }},
  'activeTexture': {1: { 0:true }},
  'getTexParameter': {2: { 0:true, 1:true }},
  'texParameterf': {3: { 0:true, 1:true }},
  'texParameteri': {3: { 0:true, 1:true, 2:true }},
  'texImage2D': {
     9: { 0:true, 2:true, 6:true, 7:true },
     6: { 0:true, 2:true, 3:true, 4:true },
  },
  'texSubImage2D': {
    9: { 0:true, 6:true, 7:true },
    7: { 0:true, 4:true, 5:true },
  },
  'copyTexImage2D': {8: { 0:true, 2:true }},
  'copyTexSubImage2D': {8: { 0:true }},
  'generateMipmap': {1: { 0:true }},
  'compressedTexImage2D': {7: { 0: true, 2:true }},
  'compressedTexSubImage2D': {8: { 0: true, 6:true }},

  // Buffer objects

  'bindBuffer': {2: { 0:true }},
  'bufferData': {3: { 0:true, 2:true }},
  'bufferSubData': {3: { 0:true }},
  'getBufferParameter': {2: { 0:true, 1:true }},

  // Renderbuffers and framebuffers

  'pixelStorei': {2: { 0:true, 1:true }},
  'readPixels': {7: { 4:true, 5:true }},
  'bindRenderbuffer': {2: { 0:true }},
  'bindFramebuffer': {2: { 0:true }},
  'checkFramebufferStatus': {1: { 0:true }},
  'framebufferRenderbuffer': {4: { 0:true, 1:true, 2:true }},
  'framebufferTexture2D': {5: { 0:true, 1:true, 2:true }},
  'getFramebufferAttachmentParameter': {3: { 0:true, 1:true, 2:true }},
  'getRenderbufferParameter': {2: { 0:true, 1:true }},
  'renderbufferStorage': {4: { 0:true, 1:true }},

  // Frame buffer operations (clear, blend, depth test, stencil)

  'clear': {1: { 0:true }},
  'depthFunc': {1: { 0:true }},
  'blendFunc': {2: { 0:true, 1:true }},
  'blendFuncSeparate': {4: { 0:true, 1:true, 2:true, 3:true }},
  'blendEquation': {1: { 0:true }},
  'blendEquationSeparate': {2: { 0:true, 1:true }},
  'stencilFunc': {3: { 0:true }},
  'stencilFuncSeparate': {4: { 0:true, 1:true }},
  'stencilMaskSeparate': {2: { 0:true }},
  'stencilOp': {3: { 0:true, 1:true, 2:true }},
  'stencilOpSeparate': {4: { 0:true, 1:true, 2:true, 3:true }},

  // Culling

  'cullFace': {1: { 0:true }},
  'frontFace': {1: { 0:true }},
};

/**
 * Map of numbers to names.
 * @type {Object}
 */
var glEnums = null;

/**
 * Initializes this module. Safe to call more than once.
 * @param {!WebGLRenderingContext} ctx A WebGL context. If
 *    you have more than one context it doesn't matter which one
 *    you pass in, it is only used to pull out constants.
 */
function init(ctx) {
  if (glEnums == null) {
    glEnums = { };
    for (var propertyName in ctx) {
      if (typeof ctx[propertyName] == 'number') {
        glEnums[ctx[propertyName]] = propertyName;
      }
    }
  }
}

/**
 * Checks the utils have been initialized.
 */
function checkInit() {
  if (glEnums == null) {
    throw 'WebGLDebugUtils.init(ctx) not called';
  }
}

/**
 * Returns true or false if value matches any WebGL enum
 * @param {*} value Value to check if it might be an enum.
 * @return {boolean} True if value matches one of the WebGL defined enums
 */
function mightBeEnum(value) {
  checkInit();
  return (glEnums[value] !== undefined);
}

/**
 * Gets an string version of an WebGL enum.
 *
 * Example:
 *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());
 *
 * @param {number} value Value to return an enum for
 * @return {string} The string version of the enum.
 */
function glEnumToString(value) {
  checkInit();
  var name = glEnums[value];
  return (name !== undefined) ? ("gl." + name) :
      ("/*UNKNOWN WebGL ENUM*/ 0x" + value.toString(16) + "");
}

/**
 * Returns the string version of a WebGL argument.
 * Attempts to convert enum arguments to strings.
 * @param {string} functionName the name of the WebGL function.
 * @param {number} numArgs the number of arguments passed to the function.
 * @param {number} argumentIndx the index of the argument.
 * @param {*} value The value of the argument.
 * @return {string} The value as a string.
 */
function glFunctionArgToString(functionName, numArgs, argumentIndex, value) {
  var funcInfo = glValidEnumContexts[functionName];
  if (funcInfo !== undefined) {
    var funcInfo = funcInfo[numArgs];
    if (funcInfo !== undefined) {
      if (funcInfo[argumentIndex]) {
        return glEnumToString(value);
      }
    }
  }
  if (value === null) {
    return "null";
  } else if (value === undefined) {
    return "undefined";
  } else {
    return value.toString();
  }
}

/**
 * Converts the arguments of a WebGL function to a string.
 * Attempts to convert enum arguments to strings.
 *
 * @param {string} functionName the name of the WebGL function.
 * @param {number} args The arguments.
 * @return {string} The arguments as a string.
 */
function glFunctionArgsToString(functionName, args) {
  // apparently we can't do args.join(",");
  var argStr = "";
  var numArgs = args.length;
  for (var ii = 0; ii < numArgs; ++ii) {
    argStr += ((ii == 0) ? '' : ', ') +
        glFunctionArgToString(functionName, numArgs, ii, args[ii]);
  }
  return argStr;
};


function makePropertyWrapper(wrapper, original, propertyName) {
  //log("wrap prop: " + propertyName);
  wrapper.__defineGetter__(propertyName, function() {
    return original[propertyName];
  });
  // TODO(gmane): this needs to handle properties that take more than
  // one value?
  wrapper.__defineSetter__(propertyName, function(value) {
    //log("set: " + propertyName);
    original[propertyName] = value;
  });
}

// Makes a function that calls a function on another object.
function makeFunctionWrapper(original, functionName) {
  //log("wrap fn: " + functionName);
  var f = original[functionName];
  return function() {
    //log("call: " + functionName);
    var result = f.apply(original, arguments);
    return result;
  };
}

/**
 * Given a WebGL context returns a wrapped context that calls
 * gl.getError after every command and calls a function if the
 * result is not gl.NO_ERROR.
 *
 * @param {!WebGLRenderingContext} ctx The webgl context to
 *        wrap.
 * @param {!function(err, funcName, args): void} opt_onErrorFunc
 *        The function to call when gl.getError returns an
 *        error. If not specified the default function calls
 *        console.log with a message.
 * @param {!function(funcName, args): void} opt_onFunc The
 *        function to call when each webgl function is called.
 *        You can use this to log all calls for example.
 */
function makeDebugContext(ctx, opt_onErrorFunc, opt_onFunc) {
  init(ctx);
  opt_onErrorFunc = opt_onErrorFunc || function(err, functionName, args) {
        // apparently we can't do args.join(",");
        var argStr = "";
        var numArgs = args.length;
        for (var ii = 0; ii < numArgs; ++ii) {
          argStr += ((ii == 0) ? '' : ', ') +
              glFunctionArgToString(functionName, numArgs, ii, args[ii]);
        }
        error("WebGL error "+ glEnumToString(err) + " in "+ functionName +
              "(" + argStr + ")");
      };

  // Holds booleans for each GL error so after we get the error ourselves
  // we can still return it to the client app.
  var glErrorShadow = { };

  // Makes a function that calls a WebGL function and then calls getError.
  function makeErrorWrapper(ctx, functionName) {
    return function() {
      if (opt_onFunc) {
        opt_onFunc(functionName, arguments);
      }
      var result = ctx[functionName].apply(ctx, arguments);
      var err = ctx.getError();
      if (err != 0) {
        glErrorShadow[err] = true;
        opt_onErrorFunc(err, functionName, arguments);
      }
      return result;
    };
  }

  // Make a an object that has a copy of every property of the WebGL context
  // but wraps all functions.
  var wrapper = {};
  for (var propertyName in ctx) {
    if (typeof ctx[propertyName] == 'function') {
       wrapper[propertyName] = makeErrorWrapper(ctx, propertyName);
     } else {
       makePropertyWrapper(wrapper, ctx, propertyName);
     }
  }

  // Override the getError function with one that returns our saved results.
  wrapper.getError = function() {
    for (var err in glErrorShadow) {
      if (glErrorShadow.hasOwnProperty(err)) {
        if (glErrorShadow[err]) {
          glErrorShadow[err] = false;
          return err;
        }
      }
    }
    return ctx.NO_ERROR;
  };

  return wrapper;
}

function resetToInitialState(ctx) {
  var numAttribs = ctx.getParameter(ctx.MAX_VERTEX_ATTRIBS);
  var tmp = ctx.createBuffer();
  ctx.bindBuffer(ctx.ARRAY_BUFFER, tmp);
  for (var ii = 0; ii < numAttribs; ++ii) {
    ctx.disableVertexAttribArray(ii);
    ctx.vertexAttribPointer(ii, 4, ctx.FLOAT, false, 0, 0);
    ctx.vertexAttrib1f(ii, 0);
  }
  ctx.deleteBuffer(tmp);

  var numTextureUnits = ctx.getParameter(ctx.MAX_TEXTURE_IMAGE_UNITS);
  for (var ii = 0; ii < numTextureUnits; ++ii) {
    ctx.activeTexture(ctx.TEXTURE0 + ii);
    ctx.bindTexture(ctx.TEXTURE_CUBE_MAP, null);
    ctx.bindTexture(ctx.TEXTURE_2D, null);
  }

  ctx.activeTexture(ctx.TEXTURE0);
  ctx.useProgram(null);
  ctx.bindBuffer(ctx.ARRAY_BUFFER, null);
  ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, null);
  ctx.bindFramebuffer(ctx.FRAMEBUFFER, null);
  ctx.bindRenderbuffer(ctx.RENDERBUFFER, null);
  ctx.disable(ctx.BLEND);
  ctx.disable(ctx.CULL_FACE);
  ctx.disable(ctx.DEPTH_TEST);
  ctx.disable(ctx.DITHER);
  ctx.disable(ctx.SCISSOR_TEST);
  ctx.blendColor(0, 0, 0, 0);
  ctx.blendEquation(ctx.FUNC_ADD);
  ctx.blendFunc(ctx.ONE, ctx.ZERO);
  ctx.clearColor(0, 0, 0, 0);
  ctx.clearDepth(1);
  ctx.clearStencil(-1);
  ctx.colorMask(true, true, true, true);
  ctx.cullFace(ctx.BACK);
  ctx.depthFunc(ctx.LESS);
  ctx.depthMask(true);
  ctx.depthRange(0, 1);
  ctx.frontFace(ctx.CCW);
  ctx.hint(ctx.GENERATE_MIPMAP_HINT, ctx.DONT_CARE);
  ctx.lineWidth(1);
  ctx.pixelStorei(ctx.PACK_ALIGNMENT, 4);
  ctx.pixelStorei(ctx.UNPACK_ALIGNMENT, 4);
  ctx.pixelStorei(ctx.UNPACK_FLIP_Y_WEBGL, false);
  ctx.pixelStorei(ctx.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);
  // TODO: Delete this IF.
  if (ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL) {
    ctx.pixelStorei(ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL, ctx.BROWSER_DEFAULT_WEBGL);
  }
  ctx.polygonOffset(0, 0);
  ctx.sampleCoverage(1, false);
  ctx.scissor(0, 0, ctx.canvas.width, ctx.canvas.height);
  ctx.stencilFunc(ctx.ALWAYS, 0, 0xFFFFFFFF);
  ctx.stencilMask(0xFFFFFFFF);
  ctx.stencilOp(ctx.KEEP, ctx.KEEP, ctx.KEEP);
  ctx.viewport(0, 0, ctx.canvas.width, ctx.canvas.height);
  ctx.clear(ctx.COLOR_BUFFER_BIT | ctx.DEPTH_BUFFER_BIT | ctx.STENCIL_BUFFER_BIT);

  // TODO: This should NOT be needed but Firefox fails with 'hint'
  while(ctx.getError());
}

function makeLostContextSimulatingCanvas(canvas) {
  var unwrappedContext_;
  var wrappedContext_;
  var onLost_ = [];
  var onRestored_ = [];
  var wrappedContext_ = {};
  var contextId_ = 1;
  var contextLost_ = false;
  var resourceId_ = 0;
  var resourceDb_ = [];
  var numCallsToLoseContext_ = 0;
  var numCalls_ = 0;
  var canRestore_ = false;
  var restoreTimeout_ = 0;

  // Holds booleans for each GL error so can simulate errors.
  var glErrorShadow_ = { };

  canvas.getContext = function(f) {
    return function() {
      var ctx = f.apply(canvas, arguments);
      // Did we get a context and is it a WebGL context?
      if (ctx instanceof WebGLRenderingContext) {
        if (ctx != unwrappedContext_) {
          if (unwrappedContext_) {
            throw "got different context"
          }
          unwrappedContext_ = ctx;
          wrappedContext_ = makeLostContextSimulatingContext(unwrappedContext_);
        }
        return wrappedContext_;
      }
      return ctx;
    }
  }(canvas.getContext);

  function wrapEvent(listener) {
    if (typeof(listener) == "function") {
      return listener;
    } else {
      return function(info) {
        listener.handleEvent(info);
      }
    }
  }

  var addOnContextLostListener = function(listener) {
    onLost_.push(wrapEvent(listener));
  };

  var addOnContextRestoredListener = function(listener) {
    onRestored_.push(wrapEvent(listener));
  };


  function wrapAddEventListener(canvas) {
    var f = canvas.addEventListener;
    canvas.addEventListener = function(type, listener, bubble) {
      switch (type) {
        case 'webglcontextlost':
          addOnContextLostListener(listener);
          break;
        case 'webglcontextrestored':
          addOnContextRestoredListener(listener);
          break;
        default:
          f.apply(canvas, arguments);
      }
    };
  }

  wrapAddEventListener(canvas);

  canvas.loseContext = function() {
    if (!contextLost_) {
      contextLost_ = true;
      numCallsToLoseContext_ = 0;
      ++contextId_;
      while (unwrappedContext_.getError());
      clearErrors();
      glErrorShadow_[unwrappedContext_.CONTEXT_LOST_WEBGL] = true;
      var event = makeWebGLContextEvent("context lost");
      var callbacks = onLost_.slice();
      setTimeout(function() {
          //log("numCallbacks:" + callbacks.length);
          for (var ii = 0; ii < callbacks.length; ++ii) {
            //log("calling callback:" + ii);
            callbacks[ii](event);
          }
          if (restoreTimeout_ >= 0) {
            setTimeout(function() {
                canvas.restoreContext();
              }, restoreTimeout_);
          }
        }, 0);
    }
  };

  canvas.restoreContext = function() {
    if (contextLost_) {
      if (onRestored_.length) {
        setTimeout(function() {
            if (!canRestore_) {
              throw "can not restore. webglcontestlost listener did not call event.preventDefault";
            }
            freeResources();
            resetToInitialState(unwrappedContext_);
            contextLost_ = false;
            numCalls_ = 0;
            canRestore_ = false;
            var callbacks = onRestored_.slice();
            var event = makeWebGLContextEvent("context restored");
            for (var ii = 0; ii < callbacks.length; ++ii) {
              callbacks[ii](event);
            }
          }, 0);
      }
    }
  };

  canvas.loseContextInNCalls = function(numCalls) {
    if (contextLost_) {
      throw "You can not ask a lost contet to be lost";
    }
    numCallsToLoseContext_ = numCalls_ + numCalls;
  };

  canvas.getNumCalls = function() {
    return numCalls_;
  };

  canvas.setRestoreTimeout = function(timeout) {
    restoreTimeout_ = timeout;
  };

  function isWebGLObject(obj) {
    //return false;
    return (obj instanceof WebGLBuffer ||
            obj instanceof WebGLFramebuffer ||
            obj instanceof WebGLProgram ||
            obj instanceof WebGLRenderbuffer ||
            obj instanceof WebGLShader ||
            obj instanceof WebGLTexture);
  }

  function checkResources(args) {
    for (var ii = 0; ii < args.length; ++ii) {
      var arg = args[ii];
      if (isWebGLObject(arg)) {
        return arg.__webglDebugContextLostId__ == contextId_;
      }
    }
    return true;
  }

  function clearErrors() {
    var k = Object.keys(glErrorShadow_);
    for (var ii = 0; ii < k.length; ++ii) {
      delete glErrorShadow_[k];
    }
  }

  function loseContextIfTime() {
    ++numCalls_;
    if (!contextLost_) {
      if (numCallsToLoseContext_ == numCalls_) {
        canvas.loseContext();
      }
    }
  }

  // Makes a function that simulates WebGL when out of context.
  function makeLostContextFunctionWrapper(ctx, functionName) {
    var f = ctx[functionName];
    return function() {
      // log("calling:" + functionName);
      // Only call the functions if the context is not lost.
      loseContextIfTime();
      if (!contextLost_) {
        //if (!checkResources(arguments)) {
        //  glErrorShadow_[wrappedContext_.INVALID_OPERATION] = true;
        //  return;
        //}
        var result = f.apply(ctx, arguments);
        return result;
      }
    };
  }

  function freeResources() {
    for (var ii = 0; ii < resourceDb_.length; ++ii) {
      var resource = resourceDb_[ii];
      if (resource instanceof WebGLBuffer) {
        unwrappedContext_.deleteBuffer(resource);
      } else if (resource instanceof WebGLFramebuffer) {
        unwrappedContext_.deleteFramebuffer(resource);
      } else if (resource instanceof WebGLProgram) {
        unwrappedContext_.deleteProgram(resource);
      } else if (resource instanceof WebGLRenderbuffer) {
        unwrappedContext_.deleteRenderbuffer(resource);
      } else if (resource instanceof WebGLShader) {
        unwrappedContext_.deleteShader(resource);
      } else if (resource instanceof WebGLTexture) {
        unwrappedContext_.deleteTexture(resource);
      }
    }
  }

  function makeWebGLContextEvent(statusMessage) {
    return {
      statusMessage: statusMessage,
      preventDefault: function() {
          canRestore_ = true;
        }
    };
  }

  return canvas;

  function makeLostContextSimulatingContext(ctx) {
    // copy all functions and properties to wrapper
    for (var propertyName in ctx) {
      if (typeof ctx[propertyName] == 'function') {
         wrappedContext_[propertyName] = makeLostContextFunctionWrapper(
             ctx, propertyName);
       } else {
         makePropertyWrapper(wrappedContext_, ctx, propertyName);
       }
    }

    // Wrap a few functions specially.
    wrappedContext_.getError = function() {
      loseContextIfTime();
      if (!contextLost_) {
        var err;
        while (err = unwrappedContext_.getError()) {
          glErrorShadow_[err] = true;
        }
      }
      for (var err in glErrorShadow_) {
        if (glErrorShadow_[err]) {
          delete glErrorShadow_[err];
          return err;
        }
      }
      return wrappedContext_.NO_ERROR;
    };

    var creationFunctions = [
      "createBuffer",
      "createFramebuffer",
      "createProgram",
      "createRenderbuffer",
      "createShader",
      "createTexture"
    ];
    for (var ii = 0; ii < creationFunctions.length; ++ii) {
      var functionName = creationFunctions[ii];
      wrappedContext_[functionName] = function(f) {
        return function() {
          loseContextIfTime();
          if (contextLost_) {
            return null;
          }
          var obj = f.apply(ctx, arguments);
          obj.__webglDebugContextLostId__ = contextId_;
          resourceDb_.push(obj);
          return obj;
        };
      }(ctx[functionName]);
    }

    var functionsThatShouldReturnNull = [
      "getActiveAttrib",
      "getActiveUniform",
      "getBufferParameter",
      "getContextAttributes",
      "getAttachedShaders",
      "getFramebufferAttachmentParameter",
      "getParameter",
      "getProgramParameter",
      "getProgramInfoLog",
      "getRenderbufferParameter",
      "getShaderParameter",
      "getShaderInfoLog",
      "getShaderSource",
      "getTexParameter",
      "getUniform",
      "getUniformLocation",
      "getVertexAttrib"
    ];
    for (var ii = 0; ii < functionsThatShouldReturnNull.length; ++ii) {
      var functionName = functionsThatShouldReturnNull[ii];
      wrappedContext_[functionName] = function(f) {
        return function() {
          loseContextIfTime();
          if (contextLost_) {
            return null;
          }
          return f.apply(ctx, arguments);
        }
      }(wrappedContext_[functionName]);
    }

    var isFunctions = [
      "isBuffer",
      "isEnabled",
      "isFramebuffer",
      "isProgram",
      "isRenderbuffer",
      "isShader",
      "isTexture"
    ];
    for (var ii = 0; ii < isFunctions.length; ++ii) {
      var functionName = isFunctions[ii];
      wrappedContext_[functionName] = function(f) {
        return function() {
          loseContextIfTime();
          if (contextLost_) {
            return false;
          }
          return f.apply(ctx, arguments);
        }
      }(wrappedContext_[functionName]);
    }

    wrappedContext_.checkFramebufferStatus = function(f) {
      return function() {
        loseContextIfTime();
        if (contextLost_) {
          return wrappedContext_.FRAMEBUFFER_UNSUPPORTED;
        }
        return f.apply(ctx, arguments);
      };
    }(wrappedContext_.checkFramebufferStatus);

    wrappedContext_.getAttribLocation = function(f) {
      return function() {
        loseContextIfTime();
        if (contextLost_) {
          return -1;
        }
        return f.apply(ctx, arguments);
      };
    }(wrappedContext_.getAttribLocation);

    wrappedContext_.getVertexAttribOffset = function(f) {
      return function() {
        loseContextIfTime();
        if (contextLost_) {
          return 0;
        }
        return f.apply(ctx, arguments);
      };
    }(wrappedContext_.getVertexAttribOffset);

    wrappedContext_.isContextLost = function() {
      return contextLost_;
    };

    return wrappedContext_;
  }
}

return {
    /**
     * Initializes this module. Safe to call more than once.
     * @param {!WebGLRenderingContext} ctx A WebGL context. If
    }
   *    you have more than one context it doesn't matter which one
   *    you pass in, it is only used to pull out constants.
   */
  'init': init,

  /**
   * Returns true or false if value matches any WebGL enum
   * @param {*} value Value to check if it might be an enum.
   * @return {boolean} True if value matches one of the WebGL defined enums
   */
  'mightBeEnum': mightBeEnum,

  /**
   * Gets an string version of an WebGL enum.
   *
   * Example:
   *   WebGLDebugUtil.init(ctx);
   *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());
   *
   * @param {number} value Value to return an enum for
   * @return {string} The string version of the enum.
   */
  'glEnumToString': glEnumToString,

  /**
   * Converts the argument of a WebGL function to a string.
   * Attempts to convert enum arguments to strings.
   *
   * Example:
   *   WebGLDebugUtil.init(ctx);
   *   var str = WebGLDebugUtil.glFunctionArgToString('bindTexture', 2, 0, gl.TEXTURE_2D);
   *
   * would return 'TEXTURE_2D'
   *
   * @param {string} functionName the name of the WebGL function.
   * @param {number} numArgs The number of arguments
   * @param {number} argumentIndx the index of the argument.
   * @param {*} value The value of the argument.
   * @return {string} The value as a string.
   */
  'glFunctionArgToString': glFunctionArgToString,

  /**
   * Converts the arguments of a WebGL function to a string.
   * Attempts to convert enum arguments to strings.
   *
   * @param {string} functionName the name of the WebGL function.
   * @param {number} args The arguments.
   * @return {string} The arguments as a string.
   */
  'glFunctionArgsToString': glFunctionArgsToString,

  /**
   * Given a WebGL context returns a wrapped context that calls
   * gl.getError after every command and calls a function if the
   * result is not NO_ERROR.
   *
   * You can supply your own function if you want. For example, if you'd like
   * an exception thrown on any GL error you could do this
   *
   *    function throwOnGLError(err, funcName, args) {
   *      throw WebGLDebugUtils.glEnumToString(err) +
   *            " was caused by call to " + funcName;
   *    };
   *
   *    ctx = WebGLDebugUtils.makeDebugContext(
   *        canvas.getContext("webgl"), throwOnGLError);
   *
   * @param {!WebGLRenderingContext} ctx The webgl context to wrap.
   * @param {!function(err, funcName, args): void} opt_onErrorFunc The function
   *     to call when gl.getError returns an error. If not specified the default
   *     function calls console.log with a message.
   * @param {!function(funcName, args): void} opt_onFunc The
   *     function to call when each webgl function is called. You
   *     can use this to log all calls for example.
   */
  'makeDebugContext': makeDebugContext,

  /**
   * Given a canvas element returns a wrapped canvas element that will
   * simulate lost context. The canvas returned adds the following functions.
   *
   * loseContext:
   *   simulates a lost context event.
   *
   * restoreContext:
   *   simulates the context being restored.
   *
   * lostContextInNCalls:
   *   loses the context after N gl calls.
   *
   * getNumCalls:
   *   tells you how many gl calls there have been so far.
   *
   * setRestoreTimeout:
   *   sets the number of milliseconds until the context is restored
   *   after it has been lost. Defaults to 0. Pass -1 to prevent
   *   automatic restoring.
   *
   * @param {!Canvas} canvas The canvas element to wrap.
   */
  'makeLostContextSimulatingCanvas': makeLostContextSimulatingCanvas,

  /**
   * Resets a context to the initial state.
   * @param {!WebGLRenderingContext} ctx The webgl context to
   *     reset.
   */
  'resetToInitialState': resetToInitialState
};

}();


},{}],56:[function(require,module,exports){
module.exports=require(4)
},{}],57:[function(require,module,exports){
var Kilid, Scope, array,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Scope = require('./kilid/Scope');

array = require('utila/scripts/js/lib/array');

module.exports = Kilid = (function() {
  function Kilid(rootNode, id) {
    this.rootNode = rootNode != null ? rootNode : document;
    this.id = id != null ? id : 'kilid';
    this._blur = __bind(this._blur, this);
    this._focus = __bind(this._focus, this);
    this._keyup = __bind(this._keyup, this);
    this._keydown = __bind(this._keydown, this);
    this.rootNode.addEventListener('keydown', this._keydown);
    this.rootNode.addEventListener('keyup', this._keyup);
    window.addEventListener('focus', this._focus);
    window.addEventListener('blur', this._blur);
    this._keysCurrentlyDown = [];
    this._rootScope = new Scope(null, this, this.id);
    this._activeScope = null;
    this._rootScope.activate();
  }

  Kilid.prototype._setActiveScope = function(scope) {
    if (this._activeScope != null) {
      this._activeScope._notActiveAnymore();
    }
    this._activeScope = scope;
  };

  Kilid.prototype.getRootScope = function() {
    return this._rootScope;
  };

  Kilid.prototype._keydown = function(e) {
    if (this._keysCurrentlyDown.indexOf(e.keyCode) === -1) {
      this._keysCurrentlyDown.push(e.keyCode);
    }
    this._activeScope._keydown(e);
  };

  Kilid.prototype._keyup = function(e) {
    array.pluckOneItem(this._keysCurrentlyDown, e.keyCode);
    this._activeScope._keyup(e);
  };

  Kilid.prototype._focus = function() {
    this._activeScope._focus();
  };

  Kilid.prototype._blur = function() {
    this._keysCurrentlyDown.length = 0;
    this._activeScope._blur();
  };

  return Kilid;

})();

},{"./kilid/Scope":58,"utila/scripts/js/lib/array":56}],58:[function(require,module,exports){
var ComboListener, NoKeyListener, Scope, array, map,
  __slice = [].slice;

ComboListener = require('./scope/ComboListener');

NoKeyListener = require('./scope/NoKeyListener');

array = require('utila/scripts/js/lib/array');

map = require('./map');

module.exports = Scope = (function() {
  function Scope(parent, _kilid, name) {
    this.parent = parent;
    this._kilid = _kilid;
    this.name = name;
    this.id = this.parent != null ? this.parent.id + '-' + this.name : this.name;
    this._bubbles = false;
    this._listeners = [];
    this._isActive = false;
    this._children = {};
  }

  Scope.prototype._keydown = function(e) {
    var listener, _i, _len, _ref;
    _ref = this._listeners;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener._handleKeydown(e);
    }
    if (this._bubbles && (this.parent != null)) {
      this.parent._keydown(e);
    }
  };

  Scope.prototype._keyup = function(e) {
    var listener, _i, _len, _ref;
    _ref = this._listeners;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener._handleKeyup(e);
    }
    if (this._bubbles && (this.parent != null)) {
      this.parent._keyup(e);
    }
  };

  Scope.prototype.bubble = function() {
    this._bubbles = true;
    return this;
  };

  Scope.prototype.dontBubble = function() {
    this._bubbles = false;
    return this;
  };

  Scope.prototype.on = function() {
    var ar, args, combo;
    combo = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    ar = this._comboToArray(combo);
    if (!ar) {
      combo = new NoKeyListener(this, args);
    } else {
      combo = new ComboListener(this, ar, args);
    }
    this._listeners.push(combo);
    return combo;
  };

  Scope.prototype._comboToArray = function(combo) {
    if (typeof combo !== 'string') {
      throw Error("Combo must be a string");
    }
    combo = combo.trim().replace(/\s+/, ' ');
    if (combo.length === 0) {
      return false;
    }
    return combo.split(/\s*\+\s*/).map((function(_this) {
      return function(name) {
        return map.keyCodeByName[name] | 0;
      };
    })(this));
  };

  Scope.prototype._detachListener = function(listener) {
    array.pluckOneItem(this._listeners, listener);
  };

  Scope.prototype.getScope = function(name) {
    if (this._children[name] == null) {
      this._children[name] = new Scope(this, this._kilid, name);
    }
    return this._children[name];
  };

  Scope.prototype.getTempScope = function() {
    return new Scope(this, this._kilid, 'null');
  };

  Scope.prototype.activate = function() {
    var listener, _i, _len, _ref;
    if (this._isActive) {
      throw Error("Scope is already active");
    }
    this._kilid._setActiveScope(this);
    this._isActive = true;
    _ref = this._listeners;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener._recheck();
    }
    return this;
  };

  Scope.prototype.deactivate = function() {
    if (!this._isActive) {
      throw Error("Scope is not active to be deactivated");
    }
    if (this.parent == null) {
      throw Error("Cannot deactivate the root scope");
    }
    this.parent.activate();
    return this;
  };

  Scope.prototype.remove = function() {
    if (this._isActive) {
      this.deactivate();
    }
    this.parent._removeChild(this);
  };

  Scope.prototype._removeChild = function(child) {
    array.pluckOneItem(this._children, child);
  };

  Scope.prototype._notActiveAnymore = function() {
    var listener, _i, _len, _ref;
    if (!this._isActive) {
      throw Error("Called _notActiveAnymore() when scope is not active");
    }
    this._isActive = false;
    _ref = this._listeners;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener._forceEnd();
    }
  };

  Scope.prototype._blur = function() {
    var listener, _i, _len, _ref;
    if (!this._isActive) {
      throw Error("Called _blur when scope is not active");
    }
    _ref = this._listeners;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener._forceEnd();
    }
  };

  Scope.prototype._focus = function() {
    var listener, _i, _len, _ref;
    if (!this._isActive) {
      throw Error("Called _focus when scope is not active");
    }
    _ref = this._listeners;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener._recheck();
    }
  };

  return Scope;

})();

},{"./map":59,"./scope/ComboListener":60,"./scope/NoKeyListener":61,"utila/scripts/js/lib/array":56}],59:[function(require,module,exports){
var keyCode, keyCodeByName, name, nameByKeyCode;

module.exports.nameByKeyCode = nameByKeyCode = {
  0: "\\",
  8: "backspace",
  9: "tab",
  12: "num",
  13: "enter",
  16: "shift",
  17: "ctrl",
  18: "alt",
  19: "pause",
  20: "caps",
  27: "esc",
  32: "space",
  33: "pageup",
  34: "pagedown",
  35: "end",
  36: "home",
  37: "left",
  38: "up",
  39: "right",
  40: "down",
  44: "print",
  45: "insert",
  46: "delete",
  48: "0",
  49: "1",
  50: "2",
  51: "3",
  52: "4",
  53: "5",
  54: "6",
  55: "7",
  56: "8",
  57: "9",
  65: "a",
  66: "b",
  67: "c",
  68: "d",
  69: "e",
  70: "f",
  71: "g",
  72: "h",
  73: "i",
  74: "j",
  75: "k",
  76: "l",
  77: "m",
  78: "n",
  79: "o",
  80: "p",
  81: "q",
  82: "r",
  83: "s",
  84: "t",
  85: "u",
  86: "v",
  87: "w",
  88: "x",
  89: "y",
  90: "z",
  96: "num_0",
  97: "num_1",
  98: "num_2",
  99: "num_3",
  100: "num_4",
  101: "num_5",
  102: "num_6",
  103: "num_7",
  104: "num_8",
  105: "num_9",
  106: "num_multiply",
  107: "num_add",
  108: "num_enter",
  109: "num_subtract",
  110: "num_decimal",
  111: "num_divide",
  124: "print",
  144: "num",
  145: "scroll",
  186: ";",
  187: "=",
  188: ",",
  189: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "\'"
};

module.exports.keyCodeByName = keyCodeByName = {};

for (keyCode in nameByKeyCode) {
  name = nameByKeyCode[keyCode];
  keyCodeByName[name] = keyCode;
}

},{}],60:[function(require,module,exports){
var ComboListener, _Listener,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

_Listener = require('./_Listener');

module.exports = ComboListener = (function(_super) {
  __extends(ComboListener, _super);

  function ComboListener(scope, _combo, args) {
    this._combo = _combo;
    ComboListener.__super__.constructor.apply(this, arguments);
    this._isExclusive = true;
    this._hitCallback = null;
    this._preventDefault = true;
    if (typeof args[0] === 'function') {
      this.onHit(args[0]);
    }
  }

  ComboListener.prototype.preventDefault = function() {
    this._preventDefault = true;
    return this;
  };

  ComboListener.prototype.allowDefault = function() {
    this._preventDefault = false;
    return this;
  };

  ComboListener.prototype.beInclusive = function() {
    if (this._locked) {
      throw Error("You can only modify combo listeners on the same tick they were introduced");
    }
    this._isExclusive = false;
    return this;
  };

  ComboListener.prototype.beExclusive = function() {
    if (this._locked) {
      throw Error("You can only modify combo listeners on the same tick they were introduced");
    }
    this._isExclusive = true;
    return this;
  };

  ComboListener.prototype._comboIsDown = function() {
    var keyCode, _i, _len, _ref;
    _ref = this._combo;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      keyCode = _ref[_i];
      if (__indexOf.call(this._kilid._keysCurrentlyDown, keyCode) < 0) {
        return false;
      }
    }
    return true;
  };

  ComboListener.prototype._comboIsExclusivelyDown = function() {
    if (!this._comboIsDown()) {
      return false;
    }
    return this._combo.length === this._kilid._keysCurrentlyDown.length;
  };

  ComboListener.prototype._handleKeyup = function(e) {
    if (this._isExclusive) {
      this._handleKeyupForExclusive(e);
    } else {
      this._handleKeyupForInclusive(e);
    }
  };

  ComboListener.prototype._handleKeydown = function(e) {
    if (this._isExclusive) {
      this._handleKeydownForExclusive(e);
    } else {
      this._handleKeydownForInclusive(e);
    }
  };

  ComboListener.prototype._handleKeydownForInclusive = function(e) {
    if (this._wasDown) {
      this._fireHit(e);
      return;
    }
    if (this._comboIsDown()) {
      this._fireHit(e);
      this._fireStart(e);
    }
  };

  ComboListener.prototype._handleKeyupForInclusive = function(e) {
    if (!this._wasDown) {
      return;
    }
    if (!this._comboIsDown()) {
      this._fireEnd(e);
    }
  };

  ComboListener.prototype._handleKeydownForExclusive = function(e) {
    if (this._wasDown) {
      if (this._comboIsExclusivelyDown()) {
        this._fireHit(e);
      } else {
        this._fireEnd(e);
      }
    } else {
      if (!this._comboIsExclusivelyDown()) {
        return;
      }
      this._fireHit(e);
      this._fireStart(e);
    }
  };

  ComboListener.prototype._handleKeyupForExclusive = function(e) {
    if (this._wasDown) {
      this._fireEnd(e);
    } else {
      if (!this._comboIsExclusivelyDown()) {
        return;
      }
      this._fireHit(e);
      this._fireStart(e);
    }
  };

  ComboListener.prototype._fireHit = function(e) {
    if ((e != null) && this._preventDefault) {
      e.preventDefault();
    }
    if (this._hitCallback != null) {
      this._hitCallback(e);
    }
  };

  ComboListener.prototype._fireEnd = function(e) {
    if ((e != null) && this._preventDefault) {
      e.preventDefault();
    }
    this._wasDown = false;
    if (this._endCallback != null) {
      this._endCallback(e);
    }
  };

  ComboListener.prototype._fireStart = function(e) {
    this._wasDown = true;
    if (this._startCallback != null) {
      this._startCallback(e);
    }
  };

  ComboListener.prototype.onHit = function(cb) {
    this._hitCallback = cb;
    return this;
  };

  ComboListener.prototype.detach = function() {
    if (this._wasDown) {
      this._fireEnd();
    }
    ComboListener.__super__.detach.apply(this, arguments);
  };

  ComboListener.prototype._forceEnd = function() {
    if (!this._wasDown) {
      return;
    }
    this._fireEnd();
  };

  ComboListener.prototype._recheck = function() {
    if (this._wasDown) {
      console.warn('_recheck ws called when ComboListener was already down');
      return;
    }
    this._handleKeydown();
  };

  return ComboListener;

})(_Listener);

},{"./_Listener":62}],61:[function(require,module,exports){
var NoKeyListener, _Listener,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Listener = require('./_Listener');

module.exports = NoKeyListener = (function(_super) {
  __extends(NoKeyListener, _super);

  function NoKeyListener(scope) {
    NoKeyListener.__super__.constructor.apply(this, arguments);
    this._wasStarted = false;
    setTimeout((function(_this) {
      return function() {
        if (!_this._wasStarted) {
          return _this._recheck();
        }
      };
    })(this), 0);
  }

  NoKeyListener.prototype._recheck = function() {
    if (this._wasStarted) {
      return;
    }
    if (!((this._kilid != null) && this._kilid._keysCurrentlyDown.length === 0)) {
      return;
    }
    this._wasStarted = true;
    if (this._startCallback != null) {
      this._startCallback();
    }
  };

  NoKeyListener.prototype._handleKeydown = function(e) {
    if (!this._wasStarted) {
      return;
    }
    this._wasStarted = false;
    if (this._endCallback != null) {
      this._endCallback();
    }
  };

  NoKeyListener.prototype._handleKeyup = function(e) {
    if (this._wasStarted || (this._kilid == null)) {
      return;
    }
    if (this._kilid._keysCurrentlyDown.length !== 0) {
      return;
    }
    this._wasStarted = true;
    if (this._startCallback != null) {
      this._startCallback();
    }
  };

  NoKeyListener.prototype.detach = function() {
    if (this._wasStarted && (this._endCallback != null)) {
      this._endCallback();
    }
    NoKeyListener.__super__.detach.apply(this, arguments);
  };

  NoKeyListener.prototype._forceEnd = function() {
    if (!this._wasStarted) {
      return;
    }
    this._wasStarted = false;
    if (this._endCallback != null) {
      this._endCallback();
    }
  };

  return NoKeyListener;

})(_Listener);

},{"./_Listener":62}],62:[function(require,module,exports){
var _Listener;

module.exports = _Listener = (function() {
  function _Listener(_scope) {
    this._scope = _scope;
    this._kilid = this._scope._kilid;
    this._endCallback = null;
    this._startCallback = null;
    this._locked = false;
    setTimeout((function(_this) {
      return function() {
        return _this._locked = true;
      };
    })(this), 0);
  }

  _Listener.prototype.detach = function() {
    this._scope._detachListener(this);
    this._scope = null;
    this._kilid = null;
  };

  _Listener.prototype.onEnd = function(cb) {
    this._endCallback = cb;
    return this;
  };

  _Listener.prototype.onStart = function(cb) {
    this._startCallback = cb;
    return this;
  };

  return _Listener;

})();

},{}],63:[function(require,module,exports){
var StupidDOMInterface, css;

css = require('./css');

module.exports = StupidDOMInterface = (function() {
  var self;

  function StupidDOMInterface(node, initial) {
    var name, parts, val, _ref;
    if (!(this instanceof self)) {
      return new self(node, initial);
    }
    if (typeof node === 'string') {
      parts = self._parseTag(node);
      if (parts.name.length === 0) {
        parts.name = 'div';
      }
      if (parts.ns) {
        node = document.createElementNS(parts.ns, parts.name);
      } else {
        node = document.createElement(parts.name);
      }
      _ref = parts.attribs;
      for (name in _ref) {
        val = _ref[name];
        node.setAttribute(name, val);
      }
    } else if (node == null) {
      node = document.createElement('div');
    }
    if (!(node instanceof Element)) {
      throw Error("node must be an HTML element.");
    }
    this.node = node;
    this._props = new Float32Array(28);
    this._map = {};
    this._style = this.node.style;
    this._initialize(initial);
  }

  StupidDOMInterface.prototype._initialize = function(initial) {
    this._props[6] = 1;
    this._props[22] = 1;
    this._props[23] = 1;
    this._props[24] = 1;
    this._props[27] = 1000000;
    if (initial === void 0 || initial === null) {
      return;
    }
    return this.from(initial);
  };

  StupidDOMInterface.prototype.inside = function(node) {
    if (node.node != null) {
      node = node.node;
    }
    node.appendChild(this.node);
    return this;
  };

  StupidDOMInterface.prototype.detach = function() {
    var p;
    p = this.node.parentNode;
    if (p != null) {
      p.removeChild(this.node);
    }
    return this;
  };

  StupidDOMInterface.prototype.from = function(props) {
    var name, val;
    for (name in props) {
      val = props[name];
      if (Array.isArray(val)) {
        this[name].apply(this, val);
      } else {
        this[name](val);
      }
    }
    return this;
  };

  StupidDOMInterface.prototype._setTextShadow = function() {
    return this._style.textShadow = (this._props[7] + 'px') + ' ' + (this._props[8] + 'px') + ' ' + (this._props[9] + 'px') + ' ' + ('rgb(' + this._props[10] + ',' + this._props[11] + ',' + this._props[12] + ')');
  };

  StupidDOMInterface.prototype._setTransform = function() {
    var transformString;
    transformString = '';
    if (this._props[22] !== 1) {
      transformString = ' scaleX(' + this._props[22] + ') ' + transformString;
    }
    if (this._props[23] !== 1) {
      transformString = ' scaleY(' + this._props[23] + ') ' + transformString;
    }
    if (this._props[24] !== 1) {
      transformString = ' scaleZ(' + this._props[24] + ') ' + transformString;
    }
    if (this._props[25] !== 0) {
      transformString = ' skewX(' + this._props[25] + 'deg) ' + transformString;
    }
    if (this._props[26] !== 0) {
      transformString = ' skewY(' + this._props[26] + 'deg) ' + transformString;
    }
    if (this._props[19] !== 0 || this._props[20] !== 0 || this._props[21] !== 0) {
      transformString = ' translate3d(' + this._props[19] + 'px, ' + this._props[20] + 'px, ' + this._props[21] + 'px) ' + transformString;
    }
    if (this._props[13] !== 0) {
      transformString = ' rotateX(' + this._props[13] + 'deg) ' + transformString;
    }
    if (this._props[14] !== 0) {
      transformString = ' rotateY(' + this._props[14] + 'deg) ' + transformString;
    }
    if (this._props[15] !== 0) {
      transformString = ' rotateZ(' + this._props[15] + 'deg) ' + transformString;
    }
    if (this._props[16] !== 0 || this._props[17] !== 0 || this._props[18] !== 0) {
      transformString = ' translate3d(' + this._props[16] + 'px, ' + this._props[17] + 'px, ' + this._props[18] + 'px) ' + transformString;
    }
    if (this._props[27] < 1000000) {
      transformString = ' perspective(' + this._props[27] + 'px) ' + transformString;
    }
    return css.setTransform(this.node, transformString);
  };

  StupidDOMInterface.prototype.set = function(name, val) {
    this._map[name] = val;
    return this;
  };

  StupidDOMInterface.prototype.get = function(name) {
    return this._map[name];
  };

  StupidDOMInterface.prototype.del = function(name) {
    delete this._map[name];
    return this;
  };

  StupidDOMInterface.prototype.has = function(name) {
    return this._map[name] != null;
  };

  StupidDOMInterface.prototype.html = function(text) {
    this.node.innerHTML = text;
    return this;
  };

  StupidDOMInterface.prototype.attr = function(name, val) {
    this.node.setAttribute(name, val);
    return this;
  };

  StupidDOMInterface.prototype.css = function(name, val) {
    var obj;
    if (typeof name === 'object') {
      obj = name;
      for (name in obj) {
        val = obj[name];
        this.css(name, val);
      }
      return this;
    }
    name = name.replace(/([A-Z]{1})/g, '-$1').toLowerCase();
    this._style[name] = val;
    return this;
  };

  StupidDOMInterface.prototype.getWidth = function() {
    return this._props[0];
  };

  StupidDOMInterface.prototype.width = function(width) {
    this._style.width = width + 'px';
    this._props[0] = width;
    return this;
  };

  StupidDOMInterface.prototype.getHeight = function() {
    return this._props[1];
  };

  StupidDOMInterface.prototype.height = function(height) {
    this._style.height = height + 'px';
    this._props[1] = height;
    return this;
  };

  StupidDOMInterface.prototype.zIndex = function(z) {
    this._style.zIndex = z;
    return this;
  };

  StupidDOMInterface.prototype.getTop = function() {
    return this._props[2];
  };

  StupidDOMInterface.prototype.top = function(top) {
    this._style.top = top + 'px';
    this._props[2] = top;
    return this;
  };

  StupidDOMInterface.prototype.getLeft = function() {
    return this._props[3];
  };

  StupidDOMInterface.prototype.left = function(left) {
    this._style.left = left + 'px';
    this._props[3] = left;
    return this;
  };

  StupidDOMInterface.prototype.getBottom = function() {
    return this._props[4];
  };

  StupidDOMInterface.prototype.bottom = function(bottom) {
    this._style.bottom = bottom + 'px';
    this._props[4] = bottom;
    return this;
  };

  StupidDOMInterface.prototype.getRight = function() {
    return this._props[5];
  };

  StupidDOMInterface.prototype.right = function(right) {
    this._style.right = right + 'px';
    this._props[5] = right;
    return this;
  };

  StupidDOMInterface.prototype.getOpacity = function() {
    return this._props[6];
  };

  StupidDOMInterface.prototype.opacity = function(opacity) {
    this._style.opacity = opacity;
    this._props[6] = opacity;
    return this;
  };

  StupidDOMInterface.prototype.getTextShadowH = function() {
    return this._props[7];
  };

  StupidDOMInterface.prototype.textShadowH = function(h) {
    this._props[7] = h;
    this._setTextShadow();
    return this;
  };

  StupidDOMInterface.prototype.getTextShadowV = function() {
    return this._props[8];
  };

  StupidDOMInterface.prototype.textShadowV = function(v) {
    this._props[8] = v;
    this._setTextShadow();
    return this;
  };

  StupidDOMInterface.prototype.getTextShadowBlur = function() {
    return this._props[9];
  };

  StupidDOMInterface.prototype.textShadowBlur = function(blur) {
    this._props[9] = blur;
    this._setTextShadow();
    return this;
  };

  StupidDOMInterface.prototype.getTextShadowColor = function() {
    return [this._props[10], this._props[11], this._props[12]];
  };

  StupidDOMInterface.prototype.textShadowColor = function(colorRed, colorGreen, colorBlue) {
    this._props[10] = colorRed;
    this._props[11] = colorGreen;
    this._props[12] = colorBlue;
    this._setTextShadow();
    return this;
  };

  StupidDOMInterface.prototype.getRotateX = function() {
    return this._props[13];
  };

  StupidDOMInterface.prototype.rotateX = function(rotateX) {
    this._props[13] = rotateX;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getRotateY = function() {
    return this._props[14];
  };

  StupidDOMInterface.prototype.rotateY = function(rotateY) {
    this._props[14] = rotateY;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getRotateZ = function() {
    return this._props[15];
  };

  StupidDOMInterface.prototype.rotateZ = function(rotateZ) {
    this._props[15] = rotateZ;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getX = function() {
    return this._props[16];
  };

  StupidDOMInterface.prototype.x = function(x) {
    this._props[16] = x;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getY = function() {
    return this._props[17];
  };

  StupidDOMInterface.prototype.y = function(y) {
    this._props[17] = y;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getZ = function() {
    return this._props[18];
  };

  StupidDOMInterface.prototype.z = function(z) {
    this._props[18] = z;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getlocalX = function() {
    return this._props[19];
  };

  StupidDOMInterface.prototype.localX = function(localX) {
    this._props[19] = localX;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getlocalY = function() {
    return this._props[20];
  };

  StupidDOMInterface.prototype.localY = function(localY) {
    this._props[20] = localY;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getlocalZ = function() {
    return this._props[21];
  };

  StupidDOMInterface.prototype.localZ = function(localZ) {
    this._props[21] = localZ;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.scale = function(amount) {
    this._props[22] = amount;
    this._props[23] = amount;
    this._props[24] = amount;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getScaleX = function() {
    return this._props[22];
  };

  StupidDOMInterface.prototype.scaleX = function(scaleX) {
    this._props[22] = scaleX;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getScaleY = function() {
    return this._props[23];
  };

  StupidDOMInterface.prototype.scaleY = function(scaleY) {
    this._props[23] = scaleY;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getScaleZ = function() {
    return this._props[24];
  };

  StupidDOMInterface.prototype.scaleZ = function(scaleZ) {
    this._props[24] = scaleZ;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getSkewX = function() {
    return this._props[25];
  };

  StupidDOMInterface.prototype.skewX = function(skewX) {
    this._props[25] = skewX;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getSkewY = function() {
    return this._props[26];
  };

  StupidDOMInterface.prototype.skewY = function(skewY) {
    this._props[26] = skewY;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.getPerspective = function() {
    return this._props[27];
  };

  StupidDOMInterface.prototype.perspective = function(perspective) {
    this._props[27] = perspective;
    this._setTransform();
    return this;
  };

  StupidDOMInterface.prototype.transformOriginX = function(x) {
    css.setTransformOriginX(this.node, x + 'px');
    return this;
  };

  StupidDOMInterface.prototype.transformOriginY = function(y) {
    css.setTransformOriginY(this.node, y + 'px');
    return this;
  };

  StupidDOMInterface.prototype.transformOriginZ = function(z) {
    css.setTransformOriginZ(this.node, z + 'px');
    return this;
  };

  StupidDOMInterface.prototype.transformStyle = function(v) {
    css.setTransformStyle(this.node, v);
    return this;
  };

  StupidDOMInterface.prototype.preserve3d = function() {
    return this.transformStyle('preserve-3d');
  };

  StupidDOMInterface.prototype.current = function(prop) {
    var comp;
    comp = getComputedStyle(this.node);
    if (prop != null) {
      return comp[prop];
    } else {
      return comp;
    }
  };

  StupidDOMInterface.prototype.addClass = function(c) {
    this.node.classList.add(c);
    return this;
  };

  StupidDOMInterface.prototype.removeClass = function(c) {
    this.node.classList.remove(c);
    return this;
  };

  StupidDOMInterface.prototype.toggleClass = function(c) {
    this.node.classList.toggle(c);
    return this;
  };

  StupidDOMInterface.prototype.setClass = function(c) {
    this.node.className = c;
    return this;
  };

  StupidDOMInterface._parseTag = function(k) {
    var attribs, classes, cls, id, m, name, parts;
    if (!k.match(/^[a-zA-Z0-9\#\-\_\.\[\]\"\'\=\,\s\:]+$/) || k.match(/^[0-9]+/)) {
      throw Error("cannot parse tag `" + k + "`");
    }
    attribs = {};
    parts = {
      name: '',
      attribs: attribs,
      ns: false
    };
    if (k.match(/^svg\:/)) {
      parts.ns = 'http://www.w3.org/2000/svg';
      k = k.substr(4, k.length);
    }
    if (m = k.match(/^([^\.#]+)/)) {
      name = m[1];
      if (!name.match(self._nameRx)) {
        throw Error("tag name `" + name + "` is not valid");
      }
      parts.name = name;
      k = k.substr(name.length, k.length);
    }
    if (m = k.match(/^#([a-zA-Z0-9\-]+)/)) {
      id = m[1];
      if (!id.match(self._nameRx)) {
        throw Error("tag id `" + id + "` is not valid");
      }
      attribs.id = id;
      k = k.substr(id.length + 1, k.length);
    }
    classes = [];
    while (m = k.match(/\.([a-zA-Z0-9\-\_]+)/)) {
      cls = m[1];
      if (!cls.match(self._nameRx)) {
        throw Error("tag class `" + cls + "` is not valid");
      }
      classes.push(cls);
      k = k.replace('.' + cls, '');
    }
    if (classes.length) {
      attribs["class"] = classes.join(" ");
    }
    return parts;
  };

  StupidDOMInterface._nameRx = /^[a-zA-Z\-\_]{1}[a-zA-Z0-9\-\_]*$/;

  self = StupidDOMInterface;

  return StupidDOMInterface;

})();

},{"./css":64}],64:[function(require,module,exports){
var css, cssPropertySetter, getCSSProp, getPossiblePropsFor;

getCSSProp = (function() {
  var el, p;
  p = null;
  el = document.createElement('div');
  return function(possibleProps) {
    var prop, _i, _len;
    for (_i = 0, _len = possibleProps.length; _i < _len; _i++) {
      prop = possibleProps[_i];
      if (el.style[prop] !== void 0) {
        return prop;
      }
    }
    return false;
  };
})();

cssPropertySetter = function(prop) {
  var actualProp;
  actualProp = getCSSProp(getPossiblePropsFor(prop));
  if (!actualProp) {
    return (function() {});
  }
  return function(el, v) {
    return el.style[actualProp] = v;
  };
};

getPossiblePropsFor = function(prop) {
  return ['webkit' + prop[0].toUpperCase() + prop.substr(1, prop.length), 'moz' + prop[0].toUpperCase() + prop.substr(1, prop.length), prop];
};

module.exports = css = {
  setTransform: cssPropertySetter('transform'),
  setTransformStyle: cssPropertySetter('transformStyle'),
  setTransformOrigin: cssPropertySetter('transformOrigin'),
  setTransformOriginX: cssPropertySetter('transformOriginX'),
  setTransformOriginY: cssPropertySetter('transformOriginY'),
  setTransformOriginZ: cssPropertySetter('transformOriginZ'),
  setCssFilter: cssPropertySetter('filter'),
  setTransitionDuration: cssPropertySetter('transitionDuration'),
  setTransitionTimingFunction: cssPropertySetter('transitionTimingFunction'),
  rgb: function(r, g, b) {
    return 'rgb(' + r + ', ' + g + ', ' + b + ')';
  }
};

},{}],65:[function(require,module,exports){
module.exports=require(4)
},{}],66:[function(require,module,exports){
/** @license MIT License (c) copyright 2013 original author or authors */

/**
 * callbacks.js
 *
 * Collection of helper functions for interacting with 'traditional',
 * callback-taking functions using a promise interface.
 *
 * @author Renato Zannon <renato.riccieri@gmail.com>
 * @contributor Brian Cavalier
 */

(function(define) {
define(function(require) {

	var when, promise, slice;

	when = require('./when');
	promise = when.promise;
	slice = [].slice;

	return {
		apply: apply,
		call: call,
		lift: lift,
		bind: lift, // DEPRECATED alias for lift
		promisify: promisify
	};

	/**
	 * Takes a `traditional` callback-taking function and returns a promise for its
	 * result, accepting an optional array of arguments (that might be values or
	 * promises). It assumes that the function takes its callback and errback as
	 * the last two arguments. The resolution of the promise depends on whether the
	 * function will call its callback or its errback.
	 *
	 * @example
	 *    var domIsLoaded = callbacks.apply($);
	 *    domIsLoaded.then(function() {
	 *		doMyDomStuff();
	 *	});
	 *
	 * @example
	 *    function existingAjaxyFunction(url, callback, errback) {
	 *		// Complex logic you'd rather not change
	 *	}
	 *
	 *    var promise = callbacks.apply(existingAjaxyFunction, ["/movies.json"]);
	 *
	 *    promise.then(function(movies) {
	 *		// Work with movies
	 *	}, function(reason) {
	 *		// Handle error
	 *	});
	 *
	 * @param {function} asyncFunction function to be called
	 * @param {Array} [extraAsyncArgs] array of arguments to asyncFunction
	 * @returns {Promise} promise for the callback value of asyncFunction
	 */
	function apply(asyncFunction, extraAsyncArgs) {
		return _apply(asyncFunction, this, extraAsyncArgs);
	}

	/**
	 * Apply helper that allows specifying thisArg
	 * @private
	 */
	function _apply(asyncFunction, thisArg, extraAsyncArgs) {
		return when.all(extraAsyncArgs || []).then(function(args) {
			return promise(function(resolve, reject) {
				var asyncArgs = args.concat(
					alwaysUnary(resolve),
					alwaysUnary(reject)
				);

				asyncFunction.apply(thisArg, asyncArgs);
			});
		});
	}

	/**
	 * Works as `callbacks.apply` does, with the difference that the arguments to
	 * the function are passed individually, instead of as an array.
	 *
	 * @example
	 *    function sumInFiveSeconds(a, b, callback) {
	 *		setTimeout(function() {
	 *			callback(a + b);
	 *		}, 5000);
	 *	}
	 *
	 *    var sumPromise = callbacks.call(sumInFiveSeconds, 5, 10);
	 *
	 *    // Logs '15' 5 seconds later
	 *    sumPromise.then(console.log);
	 *
	 * @param {function} asyncFunction function to be called
	 * @param {...*} args arguments that will be forwarded to the function
	 * @returns {Promise} promise for the callback value of asyncFunction
	 */
	function call(asyncFunction/*, arg1, arg2...*/) {
		return _apply(asyncFunction, this, slice.call(arguments, 1));
	}

	/**
	 * Takes a 'traditional' callback/errback-taking function and returns a function
	 * that returns a promise instead. The resolution/rejection of the promise
	 * depends on whether the original function will call its callback or its
	 * errback.
	 *
	 * If additional arguments are passed to the `lift` call, they will be prepended
	 * on the calls to the original function, much like `Function.prototype.bind`.
	 *
	 * The resulting function is also "promise-aware", in the sense that, if given
	 * promises as arguments, it will wait for their resolution before executing.
	 *
	 * @example
	 *    function traditionalAjax(method, url, callback, errback) {
	 *		var xhr = new XMLHttpRequest();
	 *		xhr.open(method, url);
	 *
	 *		xhr.onload = callback;
	 *		xhr.onerror = errback;
	 *
	 *		xhr.send();
	 *	}
	 *
	 *    var promiseAjax = callbacks.lift(traditionalAjax);
	 *    promiseAjax("GET", "/movies.json").then(console.log, console.error);
	 *
	 *    var promiseAjaxGet = callbacks.lift(traditionalAjax, "GET");
	 *    promiseAjaxGet("/movies.json").then(console.log, console.error);
	 *
	 * @param {Function} f traditional async function to be decorated
	 * @param {...*} [args] arguments to be prepended for the new function
	 * @returns {Function} a promise-returning function
	 */
	function lift(f/*, args...*/) {
		var args = slice.call(arguments, 1);
		return function() {
			return _apply(f, this, args.concat(slice.call(arguments)));
		};
	}

	/**
	 * `promisify` is a version of `lift` that allows fine-grained control over the
	 * arguments that passed to the underlying function. It is intended to handle
	 * functions that don't follow the common callback and errback positions.
	 *
	 * The control is done by passing an object whose 'callback' and/or 'errback'
	 * keys, whose values are the corresponding 0-based indexes of the arguments on
	 * the function. Negative values are interpreted as being relative to the end
	 * of the arguments array.
	 *
	 * If arguments are given on the call to the 'promisified' function, they are
	 * intermingled with the callback and errback. If a promise is given among them,
	 * the execution of the function will only occur after its resolution.
	 *
	 * @example
	 *    var delay = callbacks.promisify(setTimeout, {
	 *		callback: 0
	 *	});
	 *
	 *    delay(100).then(function() {
	 *		console.log("This happens 100ms afterwards");
	 *	});
	 *
	 * @example
	 *    function callbackAsLast(errback, followsStandards, callback) {
	 *		if(followsStandards) {
	 *			callback("well done!");
	 *		} else {
	 *			errback("some programmers just want to watch the world burn");
	 *		}
	 *	}
	 *
	 *    var promisified = callbacks.promisify(callbackAsLast, {
	 *		callback: -1,
	 *		errback:   0,
	 *	});
	 *
	 *    promisified(true).then(console.log, console.error);
	 *    promisified(false).then(console.log, console.error);
	 *
	 * @param {Function} asyncFunction traditional function to be decorated
	 * @param {object} positions
	 * @param {number} [positions.callback] index at which asyncFunction expects to
	 *  receive a success callback
	 * @param {number} [positions.errback] index at which asyncFunction expects to
	 *  receive an error callback
	 *  @returns {function} promisified function that accepts
	 */
	function promisify(asyncFunction, positions) {

		return function() {
			var thisArg = this;
			return when.all(arguments).then(function(args) {
				return promise(applyPromisified);

				function applyPromisified(resolve, reject) {
					var callbackPos, errbackPos;

					if('callback' in positions) {
						callbackPos = normalizePosition(args, positions.callback);
					}

					if('errback' in positions) {
						errbackPos = normalizePosition(args, positions.errback);
					}

					if(errbackPos < callbackPos) {
						insertCallback(args, errbackPos, reject);
						insertCallback(args, callbackPos, resolve);
					} else {
						insertCallback(args, callbackPos, resolve);
						insertCallback(args, errbackPos, reject);
					}

					asyncFunction.apply(thisArg, args);
				}

			});
		};
	}

	function normalizePosition(args, pos) {
		return pos < 0 ? (args.length + pos + 2) : pos;
	}

	function insertCallback(args, pos, callback) {
		if(pos != null) {
			callback = alwaysUnary(callback);
			if(pos < 0) {
				pos = args.length + pos + 2;
			}
			args.splice(pos, 0, callback);
		}

	}

	function alwaysUnary(fn) {
		return function() {
			if(arguments.length <= 1) {
				fn.apply(this, arguments);
			} else {
				fn.call(this, slice.call(arguments));
			}
		};
	}
});
})(
	typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }
	// Boilerplate for AMD and Node
);

},{"./when":67}],67:[function(require,module,exports){
/** @license MIT License (c) copyright 2011-2013 original author or authors */

/**
 * A lightweight CommonJS Promises/A and when() implementation
 * when is part of the cujo.js family of libraries (http://cujojs.com/)
 *
 * Licensed under the MIT License at:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * @author Brian Cavalier
 * @author John Hann
 * @version 2.7.1
 */
(function(define) { 'use strict';
define(function (require) {

	// Public API

	when.promise   = promise;    // Create a pending promise
	when.resolve   = resolve;    // Create a resolved promise
	when.reject    = reject;     // Create a rejected promise
	when.defer     = defer;      // Create a {promise, resolver} pair

	when.join      = join;       // Join 2 or more promises

	when.all       = all;        // Resolve a list of promises
	when.map       = map;        // Array.map() for promises
	when.reduce    = reduce;     // Array.reduce() for promises
	when.settle    = settle;     // Settle a list of promises

	when.any       = any;        // One-winner race
	when.some      = some;       // Multi-winner race

	when.isPromise = isPromiseLike;  // DEPRECATED: use isPromiseLike
	when.isPromiseLike = isPromiseLike; // Is something promise-like, aka thenable

	/**
	 * Register an observer for a promise or immediate value.
	 *
	 * @param {*} promiseOrValue
	 * @param {function?} [onFulfilled] callback to be called when promiseOrValue is
	 *   successfully fulfilled.  If promiseOrValue is an immediate value, callback
	 *   will be invoked immediately.
	 * @param {function?} [onRejected] callback to be called when promiseOrValue is
	 *   rejected.
	 * @param {function?} [onProgress] callback to be called when progress updates
	 *   are issued for promiseOrValue.
	 * @returns {Promise} a new {@link Promise} that will complete with the return
	 *   value of callback or errback or the completion value of promiseOrValue if
	 *   callback and/or errback is not supplied.
	 */
	function when(promiseOrValue, onFulfilled, onRejected, onProgress) {
		// Get a trusted promise for the input promiseOrValue, and then
		// register promise handlers
		return cast(promiseOrValue).then(onFulfilled, onRejected, onProgress);
	}

	/**
	 * Creates a new promise whose fate is determined by resolver.
	 * @param {function} resolver function(resolve, reject, notify)
	 * @returns {Promise} promise whose fate is determine by resolver
	 */
	function promise(resolver) {
		return new Promise(resolver,
			monitorApi.PromiseStatus && monitorApi.PromiseStatus());
	}

	/**
	 * Trusted Promise constructor.  A Promise created from this constructor is
	 * a trusted when.js promise.  Any other duck-typed promise is considered
	 * untrusted.
	 * @constructor
	 * @returns {Promise} promise whose fate is determine by resolver
	 * @name Promise
	 */
	function Promise(resolver, status) {
		var self, value, consumers = [];

		self = this;
		this._status = status;
		this.inspect = inspect;
		this._when = _when;

		// Call the provider resolver to seal the promise's fate
		try {
			resolver(promiseResolve, promiseReject, promiseNotify);
		} catch(e) {
			promiseReject(e);
		}

		/**
		 * Returns a snapshot of this promise's current status at the instant of call
		 * @returns {{state:String}}
		 */
		function inspect() {
			return value ? value.inspect() : toPendingState();
		}

		/**
		 * Private message delivery. Queues and delivers messages to
		 * the promise's ultimate fulfillment value or rejection reason.
		 * @private
		 */
		function _when(resolve, notify, onFulfilled, onRejected, onProgress) {
			consumers ? consumers.push(deliver) : enqueue(function() { deliver(value); });

			function deliver(p) {
				p._when(resolve, notify, onFulfilled, onRejected, onProgress);
			}
		}

		/**
		 * Transition from pre-resolution state to post-resolution state, notifying
		 * all listeners of the ultimate fulfillment or rejection
		 * @param {*} val resolution value
		 */
		function promiseResolve(val) {
			if(!consumers) {
				return;
			}

			var queue = consumers;
			consumers = undef;

			enqueue(function () {
				value = coerce(self, val);
				if(status) {
					updateStatus(value, status);
				}
				runHandlers(queue, value);
			});
		}

		/**
		 * Reject this promise with the supplied reason, which will be used verbatim.
		 * @param {*} reason reason for the rejection
		 */
		function promiseReject(reason) {
			promiseResolve(new RejectedPromise(reason));
		}

		/**
		 * Issue a progress event, notifying all progress listeners
		 * @param {*} update progress event payload to pass to all listeners
		 */
		function promiseNotify(update) {
			if(consumers) {
				var queue = consumers;
				enqueue(function () {
					runHandlers(queue, new ProgressingPromise(update));
				});
			}
		}
	}

	promisePrototype = Promise.prototype;

	/**
	 * Register handlers for this promise.
	 * @param [onFulfilled] {Function} fulfillment handler
	 * @param [onRejected] {Function} rejection handler
	 * @param [onProgress] {Function} progress handler
	 * @return {Promise} new Promise
	 */
	promisePrototype.then = function(onFulfilled, onRejected, onProgress) {
		var self = this;

		return new Promise(function(resolve, reject, notify) {
			self._when(resolve, notify, onFulfilled, onRejected, onProgress);
		}, this._status && this._status.observed());
	};

	/**
	 * Register a rejection handler.  Shortcut for .then(undefined, onRejected)
	 * @param {function?} onRejected
	 * @return {Promise}
	 */
	promisePrototype['catch'] = promisePrototype.otherwise = function(onRejected) {
		return this.then(undef, onRejected);
	};

	/**
	 * Ensures that onFulfilledOrRejected will be called regardless of whether
	 * this promise is fulfilled or rejected.  onFulfilledOrRejected WILL NOT
	 * receive the promises' value or reason.  Any returned value will be disregarded.
	 * onFulfilledOrRejected may throw or return a rejected promise to signal
	 * an additional error.
	 * @param {function} onFulfilledOrRejected handler to be called regardless of
	 *  fulfillment or rejection
	 * @returns {Promise}
	 */
	promisePrototype['finally'] = promisePrototype.ensure = function(onFulfilledOrRejected) {
		return typeof onFulfilledOrRejected === 'function'
			? this.then(injectHandler, injectHandler)['yield'](this)
			: this;

		function injectHandler() {
			return resolve(onFulfilledOrRejected());
		}
	};

	/**
	 * Terminate a promise chain by handling the ultimate fulfillment value or
	 * rejection reason, and assuming responsibility for all errors.  if an
	 * error propagates out of handleResult or handleFatalError, it will be
	 * rethrown to the host, resulting in a loud stack track on most platforms
	 * and a crash on some.
	 * @param {function?} handleResult
	 * @param {function?} handleError
	 * @returns {undefined}
	 */
	promisePrototype.done = function(handleResult, handleError) {
		this.then(handleResult, handleError)['catch'](crash);
	};

	/**
	 * Shortcut for .then(function() { return value; })
	 * @param  {*} value
	 * @return {Promise} a promise that:
	 *  - is fulfilled if value is not a promise, or
	 *  - if value is a promise, will fulfill with its value, or reject
	 *    with its reason.
	 */
	promisePrototype['yield'] = function(value) {
		return this.then(function() {
			return value;
		});
	};

	/**
	 * Runs a side effect when this promise fulfills, without changing the
	 * fulfillment value.
	 * @param {function} onFulfilledSideEffect
	 * @returns {Promise}
	 */
	promisePrototype.tap = function(onFulfilledSideEffect) {
		return this.then(onFulfilledSideEffect)['yield'](this);
	};

	/**
	 * Assumes that this promise will fulfill with an array, and arranges
	 * for the onFulfilled to be called with the array as its argument list
	 * i.e. onFulfilled.apply(undefined, array).
	 * @param {function} onFulfilled function to receive spread arguments
	 * @return {Promise}
	 */
	promisePrototype.spread = function(onFulfilled) {
		return this.then(function(array) {
			// array may contain promises, so resolve its contents.
			return all(array, function(array) {
				return onFulfilled.apply(undef, array);
			});
		});
	};

	/**
	 * Shortcut for .then(onFulfilledOrRejected, onFulfilledOrRejected)
	 * @deprecated
	 */
	promisePrototype.always = function(onFulfilledOrRejected, onProgress) {
		return this.then(onFulfilledOrRejected, onFulfilledOrRejected, onProgress);
	};

	/**
	 * Casts x to a trusted promise. If x is already a trusted promise, it is
	 * returned, otherwise a new trusted Promise which follows x is returned.
	 * @param {*} x
	 * @returns {Promise}
	 */
	function cast(x) {
		return x instanceof Promise ? x : resolve(x);
	}

	/**
	 * Returns a resolved promise. The returned promise will be
	 *  - fulfilled with promiseOrValue if it is a value, or
	 *  - if promiseOrValue is a promise
	 *    - fulfilled with promiseOrValue's value after it is fulfilled
	 *    - rejected with promiseOrValue's reason after it is rejected
	 * In contract to cast(x), this always creates a new Promise
	 * @param  {*} value
	 * @return {Promise}
	 */
	function resolve(value) {
		return promise(function(resolve) {
			resolve(value);
		});
	}

	/**
	 * Returns a rejected promise for the supplied promiseOrValue.  The returned
	 * promise will be rejected with:
	 * - promiseOrValue, if it is a value, or
	 * - if promiseOrValue is a promise
	 *   - promiseOrValue's value after it is fulfilled
	 *   - promiseOrValue's reason after it is rejected
	 * @param {*} promiseOrValue the rejected value of the returned {@link Promise}
	 * @return {Promise} rejected {@link Promise}
	 */
	function reject(promiseOrValue) {
		return when(promiseOrValue, function(e) {
			return new RejectedPromise(e);
		});
	}

	/**
	 * Creates a {promise, resolver} pair, either or both of which
	 * may be given out safely to consumers.
	 * The resolver has resolve, reject, and progress.  The promise
	 * has then plus extended promise API.
	 *
	 * @return {{
	 * promise: Promise,
	 * resolve: function:Promise,
	 * reject: function:Promise,
	 * notify: function:Promise
	 * resolver: {
	 *	resolve: function:Promise,
	 *	reject: function:Promise,
	 *	notify: function:Promise
	 * }}}
	 */
	function defer() {
		var deferred, pending, resolved;

		// Optimize object shape
		deferred = {
			promise: undef, resolve: undef, reject: undef, notify: undef,
			resolver: { resolve: undef, reject: undef, notify: undef }
		};

		deferred.promise = pending = promise(makeDeferred);

		return deferred;

		function makeDeferred(resolvePending, rejectPending, notifyPending) {
			deferred.resolve = deferred.resolver.resolve = function(value) {
				if(resolved) {
					return resolve(value);
				}
				resolved = true;
				resolvePending(value);
				return pending;
			};

			deferred.reject  = deferred.resolver.reject  = function(reason) {
				if(resolved) {
					return resolve(new RejectedPromise(reason));
				}
				resolved = true;
				rejectPending(reason);
				return pending;
			};

			deferred.notify  = deferred.resolver.notify  = function(update) {
				notifyPending(update);
				return update;
			};
		}
	}

	/**
	 * Run a queue of functions as quickly as possible, passing
	 * value to each.
	 */
	function runHandlers(queue, value) {
		for (var i = 0; i < queue.length; i++) {
			queue[i](value);
		}
	}

	/**
	 * Coerces x to a trusted Promise
	 * @param {*} x thing to coerce
	 * @returns {*} Guaranteed to return a trusted Promise.  If x
	 *   is trusted, returns x, otherwise, returns a new, trusted, already-resolved
	 *   Promise whose resolution value is:
	 *   * the resolution value of x if it's a foreign promise, or
	 *   * x if it's a value
	 */
	function coerce(self, x) {
		if (x === self) {
			return new RejectedPromise(new TypeError());
		}

		if (x instanceof Promise) {
			return x;
		}

		try {
			var untrustedThen = x === Object(x) && x.then;

			return typeof untrustedThen === 'function'
				? assimilate(untrustedThen, x)
				: new FulfilledPromise(x);
		} catch(e) {
			return new RejectedPromise(e);
		}
	}

	/**
	 * Safely assimilates a foreign thenable by wrapping it in a trusted promise
	 * @param {function} untrustedThen x's then() method
	 * @param {object|function} x thenable
	 * @returns {Promise}
	 */
	function assimilate(untrustedThen, x) {
		return promise(function (resolve, reject) {
			fcall(untrustedThen, x, resolve, reject);
		});
	}

	makePromisePrototype = Object.create ||
		function(o) {
			function PromisePrototype() {}
			PromisePrototype.prototype = o;
			return new PromisePrototype();
		};

	/**
	 * Creates a fulfilled, local promise as a proxy for a value
	 * NOTE: must never be exposed
	 * @private
	 * @param {*} value fulfillment value
	 * @returns {Promise}
	 */
	function FulfilledPromise(value) {
		this.value = value;
	}

	FulfilledPromise.prototype = makePromisePrototype(promisePrototype);

	FulfilledPromise.prototype.inspect = function() {
		return toFulfilledState(this.value);
	};

	FulfilledPromise.prototype._when = function(resolve, _, onFulfilled) {
		try {
			resolve(typeof onFulfilled === 'function' ? onFulfilled(this.value) : this.value);
		} catch(e) {
			resolve(new RejectedPromise(e));
		}
	};

	/**
	 * Creates a rejected, local promise as a proxy for a value
	 * NOTE: must never be exposed
	 * @private
	 * @param {*} reason rejection reason
	 * @returns {Promise}
	 */
	function RejectedPromise(reason) {
		this.value = reason;
	}

	RejectedPromise.prototype = makePromisePrototype(promisePrototype);

	RejectedPromise.prototype.inspect = function() {
		return toRejectedState(this.value);
	};

	RejectedPromise.prototype._when = function(resolve, _, __, onRejected) {
		try {
			resolve(typeof onRejected === 'function' ? onRejected(this.value) : this);
		} catch(e) {
			resolve(new RejectedPromise(e));
		}
	};

	/**
	 * Create a progress promise with the supplied update.
	 * @private
	 * @param {*} value progress update value
	 * @return {Promise} progress promise
	 */
	function ProgressingPromise(value) {
		this.value = value;
	}

	ProgressingPromise.prototype = makePromisePrototype(promisePrototype);

	ProgressingPromise.prototype._when = function(_, notify, f, r, u) {
		try {
			notify(typeof u === 'function' ? u(this.value) : this.value);
		} catch(e) {
			notify(e);
		}
	};

	/**
	 * Update a PromiseStatus monitor object with the outcome
	 * of the supplied value promise.
	 * @param {Promise} value
	 * @param {PromiseStatus} status
	 */
	function updateStatus(value, status) {
		value.then(statusFulfilled, statusRejected);

		function statusFulfilled() { status.fulfilled(); }
		function statusRejected(r) { status.rejected(r); }
	}

	/**
	 * Determines if x is promise-like, i.e. a thenable object
	 * NOTE: Will return true for *any thenable object*, and isn't truly
	 * safe, since it may attempt to access the `then` property of x (i.e.
	 *  clever/malicious getters may do weird things)
	 * @param {*} x anything
	 * @returns {boolean} true if x is promise-like
	 */
	function isPromiseLike(x) {
		return x && typeof x.then === 'function';
	}

	/**
	 * Initiates a competitive race, returning a promise that will resolve when
	 * howMany of the supplied promisesOrValues have resolved, or will reject when
	 * it becomes impossible for howMany to resolve, for example, when
	 * (promisesOrValues.length - howMany) + 1 input promises reject.
	 *
	 * @param {Array} promisesOrValues array of anything, may contain a mix
	 *      of promises and values
	 * @param howMany {number} number of promisesOrValues to resolve
	 * @param {function?} [onFulfilled] DEPRECATED, use returnedPromise.then()
	 * @param {function?} [onRejected] DEPRECATED, use returnedPromise.then()
	 * @param {function?} [onProgress] DEPRECATED, use returnedPromise.then()
	 * @returns {Promise} promise that will resolve to an array of howMany values that
	 *  resolved first, or will reject with an array of
	 *  (promisesOrValues.length - howMany) + 1 rejection reasons.
	 */
	function some(promisesOrValues, howMany, onFulfilled, onRejected, onProgress) {

		return when(promisesOrValues, function(promisesOrValues) {

			return promise(resolveSome).then(onFulfilled, onRejected, onProgress);

			function resolveSome(resolve, reject, notify) {
				var toResolve, toReject, values, reasons, fulfillOne, rejectOne, len, i;

				len = promisesOrValues.length >>> 0;

				toResolve = Math.max(0, Math.min(howMany, len));
				values = [];

				toReject = (len - toResolve) + 1;
				reasons = [];

				// No items in the input, resolve immediately
				if (!toResolve) {
					resolve(values);

				} else {
					rejectOne = function(reason) {
						reasons.push(reason);
						if(!--toReject) {
							fulfillOne = rejectOne = identity;
							reject(reasons);
						}
					};

					fulfillOne = function(val) {
						// This orders the values based on promise resolution order
						values.push(val);
						if (!--toResolve) {
							fulfillOne = rejectOne = identity;
							resolve(values);
						}
					};

					for(i = 0; i < len; ++i) {
						if(i in promisesOrValues) {
							when(promisesOrValues[i], fulfiller, rejecter, notify);
						}
					}
				}

				function rejecter(reason) {
					rejectOne(reason);
				}

				function fulfiller(val) {
					fulfillOne(val);
				}
			}
		});
	}

	/**
	 * Initiates a competitive race, returning a promise that will resolve when
	 * any one of the supplied promisesOrValues has resolved or will reject when
	 * *all* promisesOrValues have rejected.
	 *
	 * @param {Array|Promise} promisesOrValues array of anything, may contain a mix
	 *      of {@link Promise}s and values
	 * @param {function?} [onFulfilled] DEPRECATED, use returnedPromise.then()
	 * @param {function?} [onRejected] DEPRECATED, use returnedPromise.then()
	 * @param {function?} [onProgress] DEPRECATED, use returnedPromise.then()
	 * @returns {Promise} promise that will resolve to the value that resolved first, or
	 * will reject with an array of all rejected inputs.
	 */
	function any(promisesOrValues, onFulfilled, onRejected, onProgress) {

		function unwrapSingleResult(val) {
			return onFulfilled ? onFulfilled(val[0]) : val[0];
		}

		return some(promisesOrValues, 1, unwrapSingleResult, onRejected, onProgress);
	}

	/**
	 * Return a promise that will resolve only once all the supplied promisesOrValues
	 * have resolved. The resolution value of the returned promise will be an array
	 * containing the resolution values of each of the promisesOrValues.
	 * @memberOf when
	 *
	 * @param {Array|Promise} promisesOrValues array of anything, may contain a mix
	 *      of {@link Promise}s and values
	 * @param {function?} [onFulfilled] DEPRECATED, use returnedPromise.then()
	 * @param {function?} [onRejected] DEPRECATED, use returnedPromise.then()
	 * @param {function?} [onProgress] DEPRECATED, use returnedPromise.then()
	 * @returns {Promise}
	 */
	function all(promisesOrValues, onFulfilled, onRejected, onProgress) {
		return _map(promisesOrValues, identity).then(onFulfilled, onRejected, onProgress);
	}

	/**
	 * Joins multiple promises into a single returned promise.
	 * @return {Promise} a promise that will fulfill when *all* the input promises
	 * have fulfilled, or will reject when *any one* of the input promises rejects.
	 */
	function join(/* ...promises */) {
		return _map(arguments, identity);
	}

	/**
	 * Settles all input promises such that they are guaranteed not to
	 * be pending once the returned promise fulfills. The returned promise
	 * will always fulfill, except in the case where `array` is a promise
	 * that rejects.
	 * @param {Array|Promise} array or promise for array of promises to settle
	 * @returns {Promise} promise that always fulfills with an array of
	 *  outcome snapshots for each input promise.
	 */
	function settle(array) {
		return _map(array, toFulfilledState, toRejectedState);
	}

	/**
	 * Promise-aware array map function, similar to `Array.prototype.map()`,
	 * but input array may contain promises or values.
	 * @param {Array|Promise} array array of anything, may contain promises and values
	 * @param {function} mapFunc map function which may return a promise or value
	 * @returns {Promise} promise that will fulfill with an array of mapped values
	 *  or reject if any input promise rejects.
	 */
	function map(array, mapFunc) {
		return _map(array, mapFunc);
	}

	/**
	 * Internal map that allows a fallback to handle rejections
	 * @param {Array|Promise} array array of anything, may contain promises and values
	 * @param {function} mapFunc map function which may return a promise or value
	 * @param {function?} fallback function to handle rejected promises
	 * @returns {Promise} promise that will fulfill with an array of mapped values
	 *  or reject if any input promise rejects.
	 */
	function _map(array, mapFunc, fallback) {
		return when(array, function(array) {

			return new Promise(resolveMap);

			function resolveMap(resolve, reject, notify) {
				var results, len, toResolve, i;

				// Since we know the resulting length, we can preallocate the results
				// array to avoid array expansions.
				toResolve = len = array.length >>> 0;
				results = [];

				if(!toResolve) {
					resolve(results);
					return;
				}

				// Since mapFunc may be async, get all invocations of it into flight
				for(i = 0; i < len; i++) {
					if(i in array) {
						resolveOne(array[i], i);
					} else {
						--toResolve;
					}
				}

				function resolveOne(item, i) {
					when(item, mapFunc, fallback).then(function(mapped) {
						results[i] = mapped;

						if(!--toResolve) {
							resolve(results);
						}
					}, reject, notify);
				}
			}
		});
	}

	/**
	 * Traditional reduce function, similar to `Array.prototype.reduce()`, but
	 * input may contain promises and/or values, and reduceFunc
	 * may return either a value or a promise, *and* initialValue may
	 * be a promise for the starting value.
	 *
	 * @param {Array|Promise} promise array or promise for an array of anything,
	 *      may contain a mix of promises and values.
	 * @param {function} reduceFunc reduce function reduce(currentValue, nextValue, index, total),
	 *      where total is the total number of items being reduced, and will be the same
	 *      in each call to reduceFunc.
	 * @returns {Promise} that will resolve to the final reduced value
	 */
	function reduce(promise, reduceFunc /*, initialValue */) {
		var args = fcall(slice, arguments, 1);

		return when(promise, function(array) {
			var total;

			total = array.length;

			// Wrap the supplied reduceFunc with one that handles promises and then
			// delegates to the supplied.
			args[0] = function (current, val, i) {
				return when(current, function (c) {
					return when(val, function (value) {
						return reduceFunc(c, value, i, total);
					});
				});
			};

			return reduceArray.apply(array, args);
		});
	}

	// Snapshot states

	/**
	 * Creates a fulfilled state snapshot
	 * @private
	 * @param {*} x any value
	 * @returns {{state:'fulfilled',value:*}}
	 */
	function toFulfilledState(x) {
		return { state: 'fulfilled', value: x };
	}

	/**
	 * Creates a rejected state snapshot
	 * @private
	 * @param {*} x any reason
	 * @returns {{state:'rejected',reason:*}}
	 */
	function toRejectedState(x) {
		return { state: 'rejected', reason: x };
	}

	/**
	 * Creates a pending state snapshot
	 * @private
	 * @returns {{state:'pending'}}
	 */
	function toPendingState() {
		return { state: 'pending' };
	}

	//
	// Internals, utilities, etc.
	//

	var promisePrototype, makePromisePrototype, reduceArray, slice, fcall, nextTick, handlerQueue,
		funcProto, call, arrayProto, monitorApi,
		capturedSetTimeout, cjsRequire, MutationObs, undef;

	cjsRequire = require;

	//
	// Shared handler queue processing
	//
	// Credit to Twisol (https://github.com/Twisol) for suggesting
	// this type of extensible queue + trampoline approach for
	// next-tick conflation.

	handlerQueue = [];

	/**
	 * Enqueue a task. If the queue is not currently scheduled to be
	 * drained, schedule it.
	 * @param {function} task
	 */
	function enqueue(task) {
		if(handlerQueue.push(task) === 1) {
			nextTick(drainQueue);
		}
	}

	/**
	 * Drain the handler queue entirely, being careful to allow the
	 * queue to be extended while it is being processed, and to continue
	 * processing until it is truly empty.
	 */
	function drainQueue() {
		runHandlers(handlerQueue);
		handlerQueue = [];
	}

	// Allow attaching the monitor to when() if env has no console
	monitorApi = typeof console !== 'undefined' ? console : when;

	// Sniff "best" async scheduling option
	// Prefer process.nextTick or MutationObserver, then check for
	// vertx and finally fall back to setTimeout
	/*global process,document,setTimeout,MutationObserver,WebKitMutationObserver*/
	if (typeof process === 'object' && process.nextTick) {
		nextTick = process.nextTick;
	} else if(MutationObs =
		(typeof MutationObserver === 'function' && MutationObserver) ||
			(typeof WebKitMutationObserver === 'function' && WebKitMutationObserver)) {
		nextTick = (function(document, MutationObserver, drainQueue) {
			var el = document.createElement('div');
			new MutationObserver(drainQueue).observe(el, { attributes: true });

			return function() {
				el.setAttribute('x', 'x');
			};
		}(document, MutationObs, drainQueue));
	} else {
		try {
			// vert.x 1.x || 2.x
			nextTick = cjsRequire('vertx').runOnLoop || cjsRequire('vertx').runOnContext;
		} catch(ignore) {
			// capture setTimeout to avoid being caught by fake timers
			// used in time based tests
			capturedSetTimeout = setTimeout;
			nextTick = function(t) { capturedSetTimeout(t, 0); };
		}
	}

	//
	// Capture/polyfill function and array utils
	//

	// Safe function calls
	funcProto = Function.prototype;
	call = funcProto.call;
	fcall = funcProto.bind
		? call.bind(call)
		: function(f, context) {
			return f.apply(context, slice.call(arguments, 2));
		};

	// Safe array ops
	arrayProto = [];
	slice = arrayProto.slice;

	// ES5 reduce implementation if native not available
	// See: http://es5.github.com/#x15.4.4.21 as there are many
	// specifics and edge cases.  ES5 dictates that reduce.length === 1
	// This implementation deviates from ES5 spec in the following ways:
	// 1. It does not check if reduceFunc is a Callable
	reduceArray = arrayProto.reduce ||
		function(reduceFunc /*, initialValue */) {
			/*jshint maxcomplexity: 7*/
			var arr, args, reduced, len, i;

			i = 0;
			arr = Object(this);
			len = arr.length >>> 0;
			args = arguments;

			// If no initialValue, use first item of array (we know length !== 0 here)
			// and adjust i to start at second item
			if(args.length <= 1) {
				// Skip to the first real element in the array
				for(;;) {
					if(i in arr) {
						reduced = arr[i++];
						break;
					}

					// If we reached the end of the array without finding any real
					// elements, it's a TypeError
					if(++i >= len) {
						throw new TypeError();
					}
				}
			} else {
				// If initialValue provided, use it
				reduced = args[1];
			}

			// Do the actual reduce
			for(;i < len; ++i) {
				if(i in arr) {
					reduced = reduceFunc(reduced, arr[i], i, arr);
				}
			}

			return reduced;
		};

	function identity(x) {
		return x;
	}

	function crash(fatalError) {
		if(typeof monitorApi.reportUnhandled === 'function') {
			monitorApi.reportUnhandled();
		} else {
			enqueue(function() {
				throw fatalError;
			});
		}

		throw fatalError;
	}

	return when;
});
})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });

},{}],68:[function(require,module,exports){
var AudioDrivenTimeControl, CachedTrack, Context, TrackPlayer, array, wn, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

wn = require('when');

array = require('utila/scripts/js/lib/array');

TrackPlayer = require('./audioDrivenTimeControl/TrackPlayer');

CachedTrack = require('./CachedTrack');

_Emitter = require('./_Emitter');

Context = window.AudioContext || window.webkitAudioContext;

module.exports = AudioDrivenTimeControl = (function(_super) {
  __extends(AudioDrivenTimeControl, _super);

  function AudioDrivenTimeControl(destination, id) {
    if (destination == null) {
      destination = new Context;
    }
    this.id = id != null ? id : 'audio';
    AudioDrivenTimeControl.__super__.constructor.apply(this, arguments);
    if (destination.context != null) {
      this.context = destination.context;
    } else {
      this.context = destination;
      destination = this.context.destination;
    }
    this.node = this.context.createGain();
    this.node.connect(destination);
    this.t = 0.0;
    this.duration = 0.0;
    this._tracksDuration = 0.0;
    this._requestedDuration = 0.0;
    this._waitBeforePlay = 16.0;
    this._prescheduleFor = 1000.0;
    this._players = [];
    this._playersLeftToUpdate = 0;
    this._isReady = true;
    this._readyDeferred = wn.defer();
    this._readyDeferred.resolve();
    this._isPlaying = false;
    this._scheduledToPlay = false;
    this._queuedPlayers = [];
    this._lastWindowTime = 0.0;
  }

  AudioDrivenTimeControl.prototype.add = function(track, from) {
    var player;
    if (from == null) {
      from = 0.0;
    }
    if (typeof track === 'string') {
      track = new CachedTrack(this.context, track, this.id);
    }
    player = new TrackPlayer(this, track, from);
    this._players.push(player);
    return player;
  };

  AudioDrivenTimeControl.prototype._waitForUpdate = function(whenPlayerIsDonwWithUpdating) {
    this.pause();
    this._scheduleToGetReady();
    this._playersLeftToUpdate++;
    return wn(whenPlayerIsDonwWithUpdating).then((function(_this) {
      return function() {
        _this._playersLeftToUpdate--;
        _this._getReadyIfNecessary();
      };
    })(this));
  };

  AudioDrivenTimeControl.prototype._scheduleToGetReady = function() {
    if (this._playersLeftToUpdate === 0) {
      this._isReady = false;
      this._readyDeferred = wn.defer();
      return this._emit('ready-state-change');
    }
  };

  AudioDrivenTimeControl.prototype._getReadyIfNecessary = function() {
    if (this._playersLeftToUpdate === 0) {
      this._updateEverything();
      this._isReady = true;
      this._readyDeferred.resolve();
      return this._emit('ready-state-change');
    }
  };

  AudioDrivenTimeControl.prototype.ready = function() {
    return this._readyDeferred.promise;
  };

  AudioDrivenTimeControl.prototype.isReady = function() {
    return this._isReady;
  };

  AudioDrivenTimeControl.prototype._updateDuration = function() {
    var newDuration;
    newDuration = Math.max(this._requestedDuration, this._tracksDuration);
    if (newDuration !== this.duration) {
      this.duration = newDuration;
      return this._emit('duration-change');
    }
  };

  AudioDrivenTimeControl.prototype._updateEverything = function() {
    var player, tracksDuration, _i, _len, _ref;
    this._players.sort(function(b, a) {
      return b.from > a.from;
    });
    tracksDuration = 0.0;
    _ref = this._players;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      player = _ref[_i];
      tracksDuration = Math.max(tracksDuration, player.to);
    }
    this._tracksDuration = tracksDuration;
    return this._updateDuration();
  };

  AudioDrivenTimeControl.prototype._unqueueAllPlayers = function() {
    var player;
    while (true) {
      player = this._queuedPlayers.pop();
      if (player == null) {
        break;
      }
      player._unqueue();
    }
  };

  AudioDrivenTimeControl.prototype._queuePlayersToPlay = function() {
    var player, _i, _len, _ref;
    _ref = this._players;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      player = _ref[_i];
      if (__indexOf.call(this._queuedPlayers, player) >= 0) {
        continue;
      }
      if (player.from - this._prescheduleFor > this.t) {
        break;
      }
      if (player.to < this.t) {
        continue;
      }
      player._queue(this.t);
      this._queuedPlayers.push(player);
    }
  };

  AudioDrivenTimeControl.prototype.tick = function() {
    var currentWindowTime, i, player;
    if (!this._isPlaying) {
      return;
    }
    currentWindowTime = performance.now();
    this.t += currentWindowTime - this._lastWindowTime;
    this._lastWindowTime = currentWindowTime;
    if (this.t > this.duration) {
      this.pause();
      this.seekTo(0.0);
      return;
    }
    i = 0;
    while (true) {
      player = this._queuedPlayers[i];
      if (player == null) {
        break;
      }
      if (player._shouldUnqueue(this.t)) {
        player._unqueue();
        this._queuedPlayers.shift();
      } else {
        i++;
      }
    }
    this._queuePlayersToPlay();
    this._emit('tick', this.t);
  };

  AudioDrivenTimeControl.prototype.maximizeDuration = function(duration) {
    this._requestedDuration = duration;
    return this._updateDuration();
  };

  AudioDrivenTimeControl.prototype.play = function() {
    if (this._isPlaying || this._scheduledToPlay) {
      return;
    }
    if (this._isReady) {
      this._play();
      return;
    }
    this._scheduledToPlay = true;
    this._emit('scheduled-to-play');
    this.ready().then((function(_this) {
      return function() {
        if (_this._scheduledToPlay) {
          _this._scheduledToPlay = false;
          return _this._play();
        }
      };
    })(this));
  };

  AudioDrivenTimeControl.prototype._play = function() {
    if (this.t > this.duration) {
      return;
    }
    this._lastWindowTime = performance.now();
    this.t -= this._waitBeforePlay;
    this._queuePlayersToPlay();
    this._isPlaying = true;
    return this._emit('play');
  };

  AudioDrivenTimeControl.prototype.pause = function() {
    if (!this._isPlaying) {
      if (this._scheduledToPlay) {
        this._scheduledToPlay = false;
        this._emit('pause');
        return;
      }
    }
    this._unqueueAllPlayers();
    this._isPlaying = false;
    this._emit('pause');
  };

  AudioDrivenTimeControl.prototype.isPlaying = function() {
    return this._isPlaying;
  };

  AudioDrivenTimeControl.prototype.getPlayState = function() {
    if (this._isPlaying) {
      return 1;
    }
    if (this._scheduledToPlay) {
      return 2;
    }
    return 0;
  };

  AudioDrivenTimeControl.prototype.togglePlay = function() {
    if (this._isPlaying) {
      return this.pause();
    } else {
      return this.play();
    }
  };

  AudioDrivenTimeControl.prototype.seekTo = function(t) {
    var wasPlaying;
    if (this._isPlaying) {
      wasPlaying = true;
      this.pause();
    }
    if (t > this.duration) {
      t = this.duration;
    }
    if (t < 0) {
      t = 0.0;
    }
    this._emit('tick', this.t = t);
    if (wasPlaying) {
      this.play();
    }
  };

  AudioDrivenTimeControl.prototype.seek = function(amount) {
    return this.seekTo(this.t + amount);
  };

  return AudioDrivenTimeControl;

})(_Emitter);

},{"./CachedTrack":69,"./_Emitter":70,"./audioDrivenTimeControl/TrackPlayer":71,"utila/scripts/js/lib/array":65,"when":67}],69:[function(require,module,exports){
var CachedTrack, Storage, call, requestFileSystem, wn,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

wn = require('when');

call = require('when/callbacks').call;

module.exports = CachedTrack = (function() {
  var self;

  self = CachedTrack;

  function CachedTrack(context, addr, namespace) {
    var ns;
    this.context = context;
    this.addr = addr;
    this.namespace = namespace != null ? namespace : 'audio';
    this._cache = __bind(this._cache, this);
    this._decode = __bind(this._decode, this);
    this._loadByXhr = __bind(this._loadByXhr, this);
    this._getReady = __bind(this._getReady, this);
    ns = self._normalizeFileName(this.namespace);
    this._addrInFs = ns + '--sampleRate-' + this.context.sampleRate + '--' + 'track-' + self._normalizeFileName(this.addr);
    this._infoAddrInFs = this._addrInFs + '-info';
    this._loadPromise = this._load();
    this.audioData = null;
  }

  CachedTrack.prototype._isCached = function() {
    return self._openFs().then((function(_this) {
      return function(fs) {
        return self._getFile(fs.root, _this._infoAddrInFs).then((function() {
          return true;
        }), (function() {
          return false;
        }));
      };
    })(this));
  };

  CachedTrack.prototype.load = function() {
    return this._loadPromise;
  };

  CachedTrack.prototype._load = function() {
    return this._isCached().then((function(_this) {
      return function(isCached) {
        if (isCached) {
          return _this._getAudioFromCache().then(_this._getReady);
        } else {
          return _this._loadByXhr().then(_this._decode).then(_this._getReady).then(_this._cache);
        }
      };
    })(this));
  };

  CachedTrack.prototype._getReady = function(audioData) {
    this.audioData = audioData;
  };

  CachedTrack.prototype._getAudioFromCache = function() {
    var fs, info;
    info = null;
    fs = null;
    return self._openFs().then((function(_this) {
      return function(_fs) {
        fs = _fs;
        return self._getFile(fs.root, _this._infoAddrInFs);
      };
    })(this)).then((function(_this) {
      return function(infoFile) {
        return self._readAsText(infoFile);
      };
    })(this)).then((function(_this) {
      return function(infoJson) {
        info = JSON.parse(infoJson);
        return self._getFile(fs.root, _this._addrInFs);
      };
    })(this)).then((function(_this) {
      return function(dataFile) {
        return self._readAsArrayBuffer(dataFile);
      };
    })(this)).then((function(_this) {
      return function(dataBuffer) {
        var audioBuffer, byteLength, channelInt, endOffset, index, intv, lastIndex, originalByteLength, startOffset, _i, _len, _ref;
        intv = new Uint8Array(dataBuffer);
        originalByteLength = dataBuffer.byteLength;
        lastIndex = info.channels.length - 1;
        audioBuffer = _this.context.createBuffer(info.numberOfChannels, info.length, info.sampleRate);
        _ref = info.channels;
        for (index = _i = 0, _len = _ref.length; _i < _len; index = ++_i) {
          startOffset = _ref[index];
          if (index !== lastIndex) {
            endOffset = info.channels[index + 1];
          } else {
            endOffset = originalByteLength;
          }
          byteLength = endOffset - startOffset;
          channelInt = new Uint8Array(intv.subarray(startOffset, endOffset));
          audioBuffer.getChannelData(index).set(new Float32Array(channelInt.buffer));
        }
        return audioBuffer;
      };
    })(this));
  };

  CachedTrack.prototype._loadByXhr = function() {
    var d, req;
    d = wn.defer();
    req = new XMLHttpRequest;
    req.open('GET', this.addr, true);
    req.responseType = 'arraybuffer';
    req.addEventListener('load', function(e) {
      d.resolve(req.response);
    });
    req.send();
    return d.promise;
  };

  CachedTrack.prototype._decode = function(encodedBuffer) {
    var d;
    d = wn.defer();
    this.context.decodeAudioData(encodedBuffer, function(audioData) {
      d.resolve(audioData);
    }, function(err) {
      d.reject("Couldn't decode audio data");
    });
    return d.promise;
  };

  CachedTrack.prototype._cache = function() {
    var audioData, c, channels, i, size;
    audioData = this.audioData;
    channels = [];
    size = 10 * 1024;
    channels = (function() {
      var _i, _ref, _results;
      _results = [];
      for (i = _i = 0, _ref = audioData.numberOfChannels; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
        c = audioData.getChannelData(i);
        size += c.byteLength;
        _results.push(c);
      }
      return _results;
    })();
    return self._openFsWithQuota(size).then((function(_this) {
      return function(fs) {
        var a, b;
        a = _this._writeInfoFile(fs, audioData, channels, _this.addr);
        b = _this._writeDataFile(fs, channels);
        return wn.join(a, b);
      };
    })(this));
  };

  CachedTrack.prototype._writeDataFile = function(fs, channels) {
    var blob;
    blob = new Blob(channels);
    return self._overwriteFile(fs, this._addrInFs, blob);
  };

  CachedTrack.prototype._writeInfoFile = function(fs, audioData, channels, originalAddress) {
    var blob, channel, info, offset, _i, _len;
    offset = 0;
    info = {
      channels: [],
      sampleRate: audioData.sampleRate,
      length: audioData.length,
      numberOfChannels: audioData.numberOfChannels,
      duration: audioData.duration,
      originalAddress: originalAddress
    };
    for (_i = 0, _len = channels.length; _i < _len; _i++) {
      channel = channels[_i];
      info.channels.push(offset);
      offset += channel.byteLength;
    }
    info = JSON.stringify(info);
    blob = new Blob([info], {
      type: 'text/plain'
    });
    return self._overwriteFile(fs, this._infoAddrInFs, blob);
  };

  CachedTrack._normalizeFileName = function(name) {
    return name.replace(/[\.]{2,}/g, '--').replace(/[^a-zA-Z0-9\_\-\s\.]+/g, '-');
  };

  CachedTrack._readAsText = function(file) {
    return call(file.file.bind(file)).then(function(file) {
      var d, reader;
      d = wn.defer();
      reader = new FileReader;
      reader.onloadend = function(e) {
        return d.resolve(this.result);
      };
      reader.readAsText(file);
      return d.promise;
    });
  };

  CachedTrack._readAsArrayBuffer = function(file) {
    return call(file.file.bind(file)).then(function(file) {
      var d, reader;
      d = wn.defer();
      reader = new FileReader;
      reader.onloadend = function(e) {
        return d.resolve(this.result);
      };
      reader.readAsArrayBuffer(file);
      return d.promise;
    });
  };

  CachedTrack._getFile = function(dir, path, flags) {
    return call(dir.getFile.bind(dir), path, flags);
  };

  CachedTrack._openFs = function(size) {
    if (size == null) {
      size = 0;
    }
    return call(requestFileSystem, PERSISTENT, size);
  };

  CachedTrack._openFsWithQuota = function(size) {
    var finalSpaceNeeded;
    finalSpaceNeeded = 0;
    return call(Storage.queryUsageAndQuota.bind(Storage)).then((function(_this) {
      return function(args) {
        finalSpaceNeeded = args[0] + size;
        return call(Storage.requestQuota.bind(Storage), finalSpaceNeeded);
      };
    })(this)).then((function(_this) {
      return function() {
        return _this._openFs(finalSpaceNeeded);
      };
    })(this));
  };

  CachedTrack._truncateFile = function(file, size) {
    if (size == null) {
      size = 0;
    }
    return call(file.createWriter.bind(file)).then(function(writer) {
      var d;
      d = wn.defer();
      writer.onwriteend = function() {
        return d.resolve(file);
      };
      writer.onerror = function(e) {
        return d.reject(e);
      };
      writer.truncate(size);
      return d.promise;
    });
  };

  CachedTrack._writeToFile = function(file, blob) {
    return call(file.createWriter.bind(file)).then(function(writer) {
      var d;
      d = wn.defer();
      writer.onwriteend = function() {
        return d.resolve(file);
      };
      writer.onerror = function(e) {
        console.log('truncate');
        return d.reject(e);
      };
      writer.write(blob);
      return d.promise;
    });
  };

  CachedTrack._overwriteFile = function(fs, path, blob) {
    return call(fs.root.getFile.bind(fs.root), path, {
      create: true
    }).then(function(file) {
      return self._truncateFile(file, 0);
    }).then(function(file) {
      return self._writeToFile(file, blob);
    });
  };

  return CachedTrack;

})();

Storage = navigator.PersistentStorage || navigator.webkitPersistentStorage;

requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;

},{"when":67,"when/callbacks":66}],70:[function(require,module,exports){
var array, _Emitter;

array = require('utila/scripts/js/lib/array');

module.exports = _Emitter = (function() {
  function _Emitter() {
    this._listeners = {};
    this._listenersForAnyEvent = [];
    this._disabledEmitters = {};
  }

  _Emitter.prototype.on = function(eventName, listener) {
    if (this._listeners[eventName] == null) {
      this._listeners[eventName] = [];
    }
    this._listeners[eventName].push(listener);
    return this;
  };

  _Emitter.prototype.onAnyEvent = function(listener) {
    this._listenersForAnyEvent.push(listener);
    return this;
  };

  _Emitter.prototype.removeEvent = function(eventName, listener) {
    if (this._listeners[eventName] == null) {
      return this;
    }
    array.pluckOneItem(this._listeners[eventName], listener);
    return this;
  };

  _Emitter.prototype.removeListeners = function(eventName) {
    if (this._listeners[eventName] == null) {
      return this;
    }
    this._listeners[eventName].length = 0;
    return this;
  };

  _Emitter.prototype.removeAllListeners = function() {
    var listeners, name, _ref;
    _ref = this._listeners;
    for (name in _ref) {
      listeners = _ref[name];
      listeners.length = 0;
    }
    return this;
  };

  _Emitter.prototype._emit = function(eventName, data) {
    var listener, _i, _j, _len, _len1, _ref, _ref1;
    _ref = this._listenersForAnyEvent;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener(data, eventName);
    }
    if (this._listeners[eventName] == null) {
      return;
    }
    _ref1 = this._listeners[eventName];
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      listener = _ref1[_j];
      listener(data);
    }
  };

  _Emitter.prototype._throttleEmitterMethod = function(fnName, time) {
    var lastCallArgs, originalFn, pend, pending, runIt, timer;
    if (time == null) {
      time = 1000;
    }
    originalFn = this[fnName];
    if (typeof originalFn !== 'function') {
      throw Error("this class does not have a method called '" + fnName + "'");
    }
    lastCallArgs = null;
    pending = false;
    timer = null;
    this[fnName] = (function(_this) {
      return function() {
        lastCallArgs = arguments;
        return pend();
      };
    })(this);
    pend = (function(_this) {
      return function() {
        if (pending) {
          clearTimeout(timer);
        }
        timer = setTimeout(runIt, time);
        return pending = true;
      };
    })(this);
    return runIt = (function(_this) {
      return function() {
        pending = false;
        return originalFn.apply(_this, lastCallArgs);
      };
    })(this);
  };

  _Emitter.prototype._disableEmitter = function(fnName) {
    if (this._disabledEmitters[fnName] != null) {
      throw Error("" + fnName + " is already a disabled emitter");
    }
    this._disabledEmitters[fnName] = this[fnName];
    return this[fnName] = function() {};
  };

  _Emitter.prototype._enableEmitter = function(fnName) {
    var fn;
    fn = this._disabledEmitters[fnName];
    if (fn == null) {
      throw Error("" + fnName + " is not a disabled emitter");
    }
    this[fnName] = fn;
    return delete this._disabledEmitters[fnName];
  };

  return _Emitter;

})();

},{"utila/scripts/js/lib/array":65}],71:[function(require,module,exports){
var TrackPlayer,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

module.exports = TrackPlayer = (function() {
  function TrackPlayer(timeControl, track, from) {
    this.timeControl = timeControl;
    this.track = track;
    this.from = from != null ? from : 0.0;
    this._ready = __bind(this._ready, this);
    this.timeControl._waitForUpdate(this._ready());
    this.context = this.timeControl.context;
    this._destination = this.timeControl.node;
    this.duration = 0.0;
    this.to = 0.0;
    this.audioData = null;
    this._currentSource = null;
  }

  TrackPlayer.prototype._ready = function() {
    return this.track.load().then((function(_this) {
      return function() {
        _this.audioData = _this.track.audioData;
        _this.duration = _this.audioData.duration * 1000.0;
        _this.to = _this.from + _this.duration;
      };
    })(this));
  };

  TrackPlayer.prototype.setPosition = function(from) {
    this.from = parseFloat(from);
    this.timeControl._waitForUpdate(null);
    return this;
  };

  TrackPlayer.prototype._queue = function(t) {
    var localT, offset, wait;
    localT = this._toLocalT(t);
    this._currentSource = this.context.createBufferSource();
    this._currentSource.buffer = this.audioData;
    this._currentSource.connect(this._destination);
    offset = 0;
    if (localT > 0) {
      offset = localT / 1000.0;
    }
    wait = 0;
    if (localT < 0) {
      wait = this.context.currentTime - localT / 1000.0;
    }
    return this._currentSource.start(wait, offset);
  };

  TrackPlayer.prototype._unqueue = function() {
    return this._currentSource.stop(0);
  };

  TrackPlayer.prototype._shouldUnqueue = function(t) {
    return this._toLocalT(t) > this.duration;
  };

  TrackPlayer.prototype._toLocalT = function(t) {
    return t - this.from;
  };

  return TrackPlayer;

})();

},{}],72:[function(require,module,exports){
var Transformation, copyStack, emptyStack, perspective, rotation, scale, translation;

perspective = require('./transformation/perspective');

translation = require('./transformation/translation');

rotation = require('./transformation/rotation');

scale = require('./transformation/scale');

emptyStack = function() {
  var a;
  a = new Float64Array(16);
  a[0] = 0;
  a[1] = 0;
  a[2] = 0;
  a[3] = 1;
  a[4] = 1;
  a[5] = 1;
  a[6] = 10000;
  a[7] = 0;
  a[8] = 0;
  a[9] = 0;
  a[10] = 0;
  a[11] = 0;
  a[12] = 0;
  a[13] = 0;
  a[14] = 0;
  a[15] = 0;
  return a;
};

copyStack = function(from, to) {
  to[0] = from[0];
  to[1] = from[1];
  to[2] = from[2];
  to[3] = from[3];
  to[4] = from[4];
  to[5] = from[5];
  to[6] = from[6];
  to[7] = from[7];
  to[8] = from[8];
  to[9] = from[9];
  to[10] = from[10];
  to[11] = from[11];
  to[12] = from[12];
  to[13] = from[13];
  to[14] = from[14];
  to[15] = from[15];
};

module.exports = Transformation = (function() {
  Transformation._emptyStack = emptyStack;

  function Transformation() {
    this._main = emptyStack();
    this._temp = emptyStack();
    this._current = this._main;
    this._has = {
      movement: false,
      perspective: false,
      rotation: false,
      scale: false,
      localMovement: false,
      localRotation: false
    };
    this._tempMode = false;
  }

  Transformation.prototype.temporarily = function() {
    copyStack(this._main, this._temp);
    this._current = this._temp;
    this._tempMode = true;
    return this;
  };

  Transformation.prototype.commit = function() {
    if (this._tempMode) {
      copyStack(this._temp, this._main);
      this._current = this._main;
      this._tempMode = false;
    }
    return this;
  };

  Transformation.prototype.rollBack = function() {
    if (this._tempMode) {
      this._current = this._main;
      this._tempMode = false;
    }
    return this;
  };

  Transformation.prototype.toPlainCss = function() {
    var css;
    if (this._has.movement) {
      css = translation.toPlainCss(this._current[0], this._current[1], this._current[2]);
    } else {
      css = '';
    }
    if (this._has.perspective) {
      css += perspective.toPlainCss(this._current[6]);
    }
    if (this._has.rotation) {
      css += rotation.toPlainCss(this._current[7], this._current[8], this._current[9]);
    }
    if (this._has.localMovement) {
      css += translation.toPlainCss(this._current[10], this._current[11], this._current[12]);
    }
    if (this._has.localRotation) {
      css += rotation.toPlainCss(this._current[13], this._current[14], this._current[15]);
    }
    if (this._has.scale) {
      css += scale.toPlainCss(this._current[3], this._current[4], this._current[5]);
    }
    return css;
  };

  /*
  	Movement
  */


  Transformation.prototype.resetMovement = function() {
    this._has.movement = false;
    this._current[0] = 0;
    this._current[1] = 0;
    this._current[2] = 0;
    return this;
  };

  Transformation.prototype.movement = function() {
    return {
      x: this._current[0],
      y: this._current[1],
      z: this._current[2]
    };
  };

  Transformation.prototype.moveTo = function(x, y, z) {
    this._has.movement = true;
    this._current[0] = x;
    this._current[1] = y;
    this._current[2] = z;
    return this;
  };

  Transformation.prototype.moveXTo = function(x) {
    this._has.movement = true;
    this._current[0] = x;
    return this;
  };

  Transformation.prototype.moveYTo = function(y) {
    this._has.movement = true;
    this._current[1] = y;
    return this;
  };

  Transformation.prototype.moveZTo = function(z) {
    this._has.movement = true;
    this._current[2] = z;
    return this;
  };

  Transformation.prototype.move = function(x, y, z) {
    this._has.movement = true;
    this._current[0] += x;
    this._current[1] += y;
    this._current[2] += z;
    return this;
  };

  Transformation.prototype.moveX = function(x) {
    this._has.movement = true;
    this._current[0] += x;
    return this;
  };

  Transformation.prototype.moveY = function(y) {
    this._has.movement = true;
    this._current[1] += y;
    return this;
  };

  Transformation.prototype.moveZ = function(z) {
    this._has.movement = true;
    this._current[2] += z;
    return this;
  };

  /*
  	Scale
  */


  Transformation.prototype.resetScale = function() {
    this._has.scale = false;
    this._current[3] = 1;
    this._current[4] = 1;
    this._current[5] = 1;
    return this;
  };

  Transformation.prototype.getScale = function() {
    return {
      x: this._current[3],
      y: this._current[4],
      z: this._current[5]
    };
  };

  Transformation.prototype.scaleTo = function(x, y, z) {
    this._has.scale = true;
    this._current[3] = x;
    this._current[4] = y;
    this._current[5] = z;
    return this;
  };

  Transformation.prototype.scaleXTo = function(x) {
    this._has.scale = true;
    this._current[3] = x;
    return this;
  };

  Transformation.prototype.scaleYTo = function(y) {
    this._has.scale = true;
    this._current[4] = y;
    return this;
  };

  Transformation.prototype.scaleZTo = function(z) {
    this._has.scale = true;
    this._current[5] = z;
    return this;
  };

  Transformation.prototype.scale = function(x, y, z) {
    this._has.scale = true;
    this._current[3] *= x;
    this._current[4] *= y;
    this._current[5] *= z;
    return this;
  };

  Transformation.prototype.scaleAllTo = function(x) {
    if (x === 1) {
      this._has.scale = false;
    } else {
      this._has.scale = true;
    }
    this._current[3] = this._current[4] = this._current[5] = x;
    return this;
  };

  Transformation.prototype.scaleX = function(x) {
    this._has.scale = true;
    this._current[3] *= x;
    return this;
  };

  Transformation.prototype.scaleY = function(y) {
    this._has.scale = true;
    this._current[4] *= y;
    return this;
  };

  Transformation.prototype.scaleZ = function(z) {
    this._has.scale = true;
    this._current[5] *= z;
    return this;
  };

  /*
  	Perspective
  */


  Transformation.prototype.resetPerspective = function() {
    this._current[6] = 0;
    this._has.perspective = false;
    return this;
  };

  Transformation.prototype.perspective = function(d) {
    this._current[6] = d;
    if (d) {
      this._has.perspective = true;
    }
    return this;
  };

  /*
  	Rotation
  */


  Transformation.prototype.resetRotation = function() {
    this._has.rotation = false;
    this._current[7] = 0;
    this._current[8] = 0;
    this._current[9] = 0;
    return this;
  };

  Transformation.prototype.rotation = function() {
    return {
      x: this._current[7],
      y: this._current[8],
      z: this._current[9]
    };
  };

  Transformation.prototype.rotateTo = function(x, y, z) {
    this._has.rotation = true;
    this._current[7] = x;
    this._current[8] = y;
    this._current[9] = z;
    return this;
  };

  Transformation.prototype.rotateXTo = function(x) {
    this._has.rotation = true;
    this._current[7] = x;
    return this;
  };

  Transformation.prototype.rotateYTo = function(y) {
    this._has.rotation = true;
    this._current[8] = y;
    return this;
  };

  Transformation.prototype.rotateZTo = function(z) {
    this._has.rotation = true;
    this._current[9] = z;
    return this;
  };

  Transformation.prototype.rotate = function(x, y, z) {
    this._has.rotation = true;
    this._current[7] += x;
    this._current[8] += y;
    this._current[9] += z;
    return this;
  };

  Transformation.prototype.rotateX = function(x) {
    this._has.rotation = true;
    this._current[7] += x;
    return this;
  };

  Transformation.prototype.rotateY = function(y) {
    this._has.rotation = true;
    this._current[8] += y;
    return this;
  };

  Transformation.prototype.rotateZ = function(z) {
    this._has.rotation = true;
    this._current[9] += z;
    return this;
  };

  /*
  	Local Movement
  */


  Transformation.prototype.resetLocalMovement = function() {
    this._has.localMovement = false;
    this._current[10] = 0;
    this._current[11] = 0;
    this._current[12] = 0;
    return this;
  };

  Transformation.prototype.localMovement = function() {
    return {
      x: this._current[10],
      y: this._current[11],
      z: this._current[12]
    };
  };

  Transformation.prototype.localMoveTo = function(x, y, z) {
    this._has.localMovement = true;
    this._current[10] = x;
    this._current[11] = y;
    this._current[12] = z;
    return this;
  };

  Transformation.prototype.localMoveXTo = function(x) {
    this._has.localMovement = true;
    this._current[10] = x;
    return this;
  };

  Transformation.prototype.localMoveYTo = function(y) {
    this._has.localMovement = true;
    this._current[11] = y;
    return this;
  };

  Transformation.prototype.localMoveZTo = function(z) {
    this._has.localMovement = true;
    this._current[12] = z;
    return this;
  };

  Transformation.prototype.localMove = function(x, y, z) {
    this._has.localMovement = true;
    this._current[10] += x;
    this._current[11] += y;
    this._current[12] += z;
    return this;
  };

  Transformation.prototype.localMoveX = function(x) {
    this._has.localMovement = true;
    this._current[10] += x;
    return this;
  };

  Transformation.prototype.localMoveY = function(y) {
    this._has.localMovement = true;
    this._current[11] += y;
    return this;
  };

  Transformation.prototype.localMoveZ = function(z) {
    this._has.localMovement = true;
    this._current[12] += z;
    return this;
  };

  /*
  	Local Rotation
  */


  Transformation.prototype.resetLocalRotation = function() {
    this._has.localRotation = false;
    this._current[13] = 0;
    this._current[14] = 0;
    this._current[15] = 0;
    return this;
  };

  Transformation.prototype.localRotation = function() {
    return {
      x: this._current[13],
      y: this._current[14],
      z: this._current[15]
    };
  };

  Transformation.prototype.localRotateTo = function(x, y, z) {
    this._has.localRotation = true;
    this._current[13] = x;
    this._current[14] = y;
    this._current[15] = z;
    return this;
  };

  Transformation.prototype.localRotateXTo = function(x) {
    this._has.localRotation = true;
    this._current[13] = x;
    return this;
  };

  Transformation.prototype.localRotateYTo = function(y) {
    this._has.localRotation = true;
    this._current[14] = y;
    return this;
  };

  Transformation.prototype.localRotateZTo = function(z) {
    this._has.localRotation = true;
    this._current[15] = z;
    return this;
  };

  Transformation.prototype.localRotate = function(x, y, z) {
    this._has.localRotation = true;
    this._current[13] += x;
    this._current[14] += y;
    this._current[15] += z;
    return this;
  };

  Transformation.prototype.localRotateX = function(x) {
    this._has.localRotation = true;
    this._current[13] += x;
    return this;
  };

  Transformation.prototype.localRotateY = function(y) {
    this._has.localRotation = true;
    this._current[14] += y;
    return this;
  };

  Transformation.prototype.localRotateZ = function(z) {
    this._has.localRotation = true;
    this._current[15] += z;
    return this;
  };

  Transformation.prototype.resetAll = function() {
    this.resetMovement();
    this.resetScale();
    this.resetPerspective();
    this.resetRotation();
    this.resetLocalMovement();
    return this.resetLocalRotation();
  };

  return Transformation;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNmb3JtYXRpb24uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcVHJhbnNmb3JtYXRpb24uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU1BLElBQUEsNEVBQUE7O0FBQUEsQ0FBQSxFQUFjLElBQUEsSUFBZCxtQkFBYzs7QUFDZCxDQURBLEVBQ2MsSUFBQSxJQUFkLG1CQUFjOztBQUNkLENBRkEsRUFFVyxJQUFBLENBQVgsbUJBQVc7O0FBQ1gsQ0FIQSxFQUdRLEVBQVIsRUFBUSxpQkFBQTs7QUFFUixDQUxBLEVBS2EsTUFBQSxDQUFiO0NBRUMsS0FBQTtDQUFBLENBQUEsQ0FBUSxDQUFBLFFBQUE7Q0FBUixDQUVBLENBQU87Q0FGUCxDQUdBLENBQU87Q0FIUCxDQUlBLENBQU87Q0FKUCxDQU1BLENBQU87Q0FOUCxDQU9BLENBQU87Q0FQUCxDQVFBLENBQU87Q0FSUCxDQVVBLENBQU8sRUFWUDtDQUFBLENBWUEsQ0FBTztDQVpQLENBYUEsQ0FBTztDQWJQLENBY0EsQ0FBTztDQWRQLENBZ0JBLENBQVE7Q0FoQlIsQ0FpQkEsQ0FBUTtDQWpCUixDQWtCQSxDQUFRO0NBbEJSLENBb0JBLENBQVE7Q0FwQlIsQ0FxQkEsQ0FBUTtDQXJCUixDQXNCQSxDQUFRO0NBeEJJLFFBMEJaO0NBMUJZOztBQTRCYixDQWpDQSxDQWlDbUIsQ0FBUCxDQUFBLEtBQVo7Q0FFQyxDQUFBLENBQVEsQ0FBSztDQUFiLENBQ0EsQ0FBUSxDQUFLO0NBRGIsQ0FFQSxDQUFRLENBQUs7Q0FGYixDQUlBLENBQVEsQ0FBSztDQUpiLENBS0EsQ0FBUSxDQUFLO0NBTGIsQ0FNQSxDQUFRLENBQUs7Q0FOYixDQVFBLENBQVEsQ0FBSztDQVJiLENBVUEsQ0FBUSxDQUFLO0NBVmIsQ0FXQSxDQUFRLENBQUs7Q0FYYixDQVlBLENBQVEsQ0FBSztDQVpiLENBY0EsQ0FBUyxDQUFLO0NBZGQsQ0FlQSxDQUFTLENBQUs7Q0FmZCxDQWdCQSxD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LENBQWhCLElBQVU7Q0FKSyxVQU1mO0NBL2dCRCxFQXlnQmdCOztDQXpnQmhCLEVBaWhCZ0IsTUFBQyxLQUFqQjtDQUVDLEVBQXNCLENBQXRCLFNBQUE7Q0FBQSxDQUVVLENBQU0sQ0FBaEIsSUFBVTtDQUpLLFVBTWY7Q0F2aEJELEVBaWhCZ0I7O0NBamhCaEIsRUF5aEJnQixNQUFDLEtBQWpCO0NBRUMsRUFBc0IsQ0FBdEIsU0FBQTtDQUFBLENBRVUsQ0FBTSxDQUFoQixJQUFVO0NBSkssVUFNZjtDQS9oQkQsRUF5aEJnQjs7Q0F6aEJoQixDQWlpQmlCLENBQUosTUFBQyxFQUFkO0NBRUMsRUFBc0IsQ0FBdEIsU0FBQTtDQUFBLENBRVUsRUFBVixJQUFVO0NBRlYsQ0FHVSxFQUFWLElBQVU7Q0FIVixDQUlVLEVBQVYsSUFBVTtDQU5FLFVBUVo7Q0F6aUJELEVBaWlCYTs7Q0FqaUJiLEVBMmlCYyxNQUFDLEdBQWY7Q0FFQyxFQUFzQixDQUF0QixTQUFBO0NBQUEsQ0FFVSxFQUFWLElBQVU7Q0FKRyxVQU1iO0NBampCRCxFQTJpQmM7O0NBM2lCZCxFQW1qQmMsTUFBQyxHQUFmO0NBRUMsRUFBc0IsQ0FBdEIsU0FBQTtDQUFBLENBRVUsRUFBVixJQUFVO0NBSkcsVUFNYjtDQXpqQkQsRUFtakJjOztDQW5qQmQsRUEyakJjLE1BQUMsR0FBZjtDQUVDLEVBQXNCLENBQXRCLFNBQUE7Q0FBQSxDQUVVLEVBQVYsSUFBVTtDQUpHLFVBTWI7Q0Fqa0JELEVBMmpCYzs7Q0EzakJkLEVBbWtCVSxLQUFWLENBQVU7Q0FFVCxHQUFHLFNBQUg7Q0FBQSxHQUNHLE1BQUg7Q0FEQSxHQUVHLFlBQUg7Q0FGQSxHQUdHLFNBQUg7Q0FIQSxHQUlHLGNBQUg7Q0FDSSxHQUFBLE9BQUQsT0FBSDtDQTFrQkQsRUFta0JVOztDQW5rQlY7O0NBN0REIiwic291cmNlc0NvbnRlbnQiOlsiIyBUaGlzIHVzZWQgdG8gYmUgYSBjb21wbGV0ZSAzZCB0cmFuc2Zvcm1hdGlvbiBsaWJyYXJ5LFxuIyBidXQgSSdtIGN1dHRpbmcgaXQgZG93biB0byBhIGJhc2ljIDNkIHRyYW5zZm9ybWF0aW9uXG4jIGdldC9zZXQgYXBpLlxuI1xuIyBJJ2xsIGxlYXZlIHRoZSBtYXRyaXggY2FsY3VsYXRpb25zIHRvIGFuIGV4dGVybmFsIGxpYi5cblxucGVyc3BlY3RpdmUgPSByZXF1aXJlICcuL3RyYW5zZm9ybWF0aW9uL3BlcnNwZWN0aXZlJ1xudHJhbnNsYXRpb24gPSByZXF1aXJlICcuL3RyYW5zZm9ybWF0aW9uL3RyYW5zbGF0aW9uJ1xucm90YXRpb24gPSByZXF1aXJlICcuL3RyYW5zZm9ybWF0aW9uL3JvdGF0aW9uJ1xuc2NhbGUgPSByZXF1aXJlICcuL3RyYW5zZm9ybWF0aW9uL3NjYWxlJ1xuXG5lbXB0eVN0YWNrID0gLT5cblxuXHRhID0gbmV3IEZsb2F0NjRBcnJheSAxNlxuXG5cdGFbMF0gPSAwXG5cdGFbMV0gPSAwXG5cdGFbMl0gPSAwXG5cblx0YVszXSA9IDFcblx0YVs0XSA9IDFcblx0YVs1XSA9IDFcblxuXHRhWzZdID0gMTAwMDBcblxuXHRhWzddID0gMFxuXHRhWzhdID0gMFxuXHRhWzldID0gMFxuXG5cdGFbMTBdID0gMFxuXHRhWzExXSA9IDBcblx0YVsxMl0gPSAwXG5cblx0YVsxM10gPSAwXG5cdGFbMTRdID0gMFxuXHRhWzE1XSA9IDBcblxuXHRhXG5cbmNvcHlTdGFjayA9IChmcm9tLCB0bykgLT5cblxuXHR0b1swXSA9IGZyb21bMF1cblx0dG9bMV0gPSBmcm9tWzFdXG5cdHRvWzJdID0gZnJvbVsyXVxuXG5cdHRvWzNdID0gZnJvbVszXVxuXHR0b1s0XSA9IGZyb21bNF1cblx0dG9bNV0gPSBmcm9tWzVdXG5cblx0dG9bNl0gPSBmcm9tWzZdXG5cblx0dG9bN10gPSBmcm9tWzddXG5cdHRvWzhdID0gZnJvbVs4XVxuXHR0b1s5XSA9IGZyb21bOV1cblxuXHR0b1sxMF0gPSBmcm9tWzEwXVxuXHR0b1sxMV0gPSBmcm9tWzExXVxuXHR0b1sxMl0gPSBmcm9tWzEyXVxuXG5cdHRvWzEzXSA9IGZyb21bMTNdXG5cdHRvWzE0XSA9IGZyb21bMTRdXG5cdHRvWzE1XSA9IGZyb21bMTVdXG5cblx0cmV0dXJuXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgVHJhbnNmb3JtYXRpb25cblxuXHRAX2VtcHR5U3RhY2s6IGVtcHR5U3RhY2tcblxuXHRjb25zdHJ1Y3RvcjogLT5cblxuXHRcdEBfbWFpbiA9IGVtcHR5U3RhY2soKVxuXHRcdEBfdGVtcCA9IGVtcHR5U3RhY2soKVxuXG5cdFx0QF9jdXJyZW50ID0gQF9tYWluXG5cblx0XHRAX2hhcyA9XG5cblx0XHRcdG1vdmVtZW50OiBub1xuXG5cdFx0XHRwZXJzcGVjdGl2ZTogbm9cblxuXHRcdFx0cm90YXRpb246IG5vXG5cblx0XHRcdHNjYWxlOiBub1xuXG5cdFx0XHRsb2NhbE1vdmVtZW50OiBub1xuXG5cdFx0XHRsb2NhbFJvdGF0aW9uOiBub1xuXG5cdFx0QF90ZW1wTW9kZSA9IG5vXG5cblx0dGVtcG9yYXJpbHk6IC0+XG5cblx0XHRjb3B5U3RhY2sgQF9tYWluLCBAX3RlbXBcblx0XHRAX2N1cnJlbnQgPSBAX3RlbXBcblxuXHRcdEBfdGVtcE1vZGUgPSB5ZXNcblxuXHRcdEBcblxuXHRjb21taXQ6IC0+XG5cblx0XHRpZiBAX3RlbXBNb2RlXG5cblx0XHRcdGNvcHlTdGFjayBAX3RlbXAsIEBfbWFpblxuXHRcdFx0QF9jdXJyZW50ID0gQF9tYWluXG5cblx0XHRcdEBfdGVtcE1vZGUgPSBub1xuXG5cdFx0QFxuXG5cdHJvbGxCYWNrOiAtPlxuXG5cdFx0aWYgQF90ZW1wTW9kZVxuXG5cdFx0XHRAX2N1cnJlbnQgPSBAX21haW5cblxuXHRcdFx0QF90ZW1wTW9kZSA9IG5vXG5cblx0XHRAXG5cblx0dG9QbGFpbkNzczogLT5cblxuXHRcdCMgbW92ZW1lbnRcblx0XHRpZiBAX2hhcy5tb3ZlbWVudFxuXG5cdFx0XHRjc3MgPSB0cmFuc2xhdGlvbi50b1BsYWluQ3NzIEBfY3VycmVudFswXSwgQF9jdXJyZW50WzFdLCBAX2N1cnJlbnRbMl1cblxuXHRcdGVsc2VcblxuXHRcdFx0Y3NzID0gJydcblxuXHRcdCMgcGVyc3BlY3RvdmVcblx0XHRpZiBAX2hhcy5wZXJzcGVjdGl2ZVxuXG5cdFx0XHRjc3MgKz0gcGVyc3BlY3RpdmUudG9QbGFpbkNzcyBAX2N1cnJlbnRbNl1cblxuXHRcdCMgcm90YXRpb25cblx0XHRpZiBAX2hhcy5yb3RhdGlvblxuXG5cdFx0XHRjc3MgKz0gcm90YXRpb24udG9QbGFpbkNzcyBAX2N1cnJlbnRbN10sIEBfY3VycmVudFs4XSwgQF9jdXJyZW50WzldXG5cblx0XHQjIHRyYW5zbGF0aW9uXG5cdFx0aWYgQF9oYXMubG9jYWxNb3ZlbWVudFxuXG5cdFx0XHRjc3MgKz0gdHJhbnNsYXRpb24udG9QbGFpbkNzcyBAX2N1cnJlbnRbMTBdLCBAX2N1cnJlbnRbMTFdLCBAX2N1cnJlbnRbMTJdXG5cblx0XHQjIHJvdGF0aW9uXG5cdFx0aWYgQF9oYXMubG9jYWxSb3RhdGlvblxuXG5cdFx0XHRjc3MgKz0gcm90YXRpb24udG9QbGFpbkNzcyBAX2N1cnJlbnRbMTNdLCBAX2N1cnJlbnRbMTRdLCBAX2N1cnJlbnRbMTVdXG5cblx0XHQjIHNjYWxlXG5cdFx0aWYgQF9oYXMuc2NhbGVcblxuXHRcdFx0Y3NzICs9IHNjYWxlLnRvUGxhaW5Dc3MgQF9jdXJyZW50WzNdLCBAX2N1cnJlbnRbNF0sIEBfY3VycmVudFs1XVxuXG5cdFx0Y3NzXG5cblx0IyMjXG5cdE1vdmVtZW50XG5cdCMjI1xuXG5cdHJlc2V0TW92ZW1lbnQ6IC0+XG5cblx0XHRAX2hhcy5tb3ZlbWVudCA9IG5vXG5cblx0XHRAX2N1cnJlbnRbMF0gPSAwXG5cdFx0QF9jdXJyZW50WzFdID0gMFxuXHRcdEBfY3VycmVudFsyXSA9IDBcblxuXHRcdEBcblxuXHRtb3ZlbWVudDogLT5cblxuXHRcdHtcblx0XHRcdHg6IEBfY3VycmVudFswXVxuXHRcdFx0eTogQF9jdXJyZW50WzFdXG5cdFx0XHR6OiBAX2N1cnJlbnRbMl1cblx0XHR9XG5cblx0bW92ZVRvOiAoeCwgeSwgeikgLT5cblxuXHRcdEBfaGFzLm1vdmVtZW50ID0geWVzXG5cblx0XHRAX2N1cnJlbnRbMF0gPSB4XG5cdFx0QF9jdXJyZW50WzFdID0geVxuXHRcdEBfY3VycmVudFsyXSA9IHpcblxuXHRcdEBcblxuXHRtb3ZlWFRvOiAoeCkgLT5cblxuXHRcdEBfaGFzLm1vdmVtZW50ID0geWVzXG5cblx0XHRAX2N1cnJlbnRbMF0gPSB4XG5cblx0XHRAXG5cblx0bW92ZVlUbzogKHkpIC0+XG5cblx0XHRAX2hhcy5tb3ZlbWVudCA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzFdID0geVxuXG5cdFx0QFxuXG5cdG1vdmVaVG86ICh6KSAtPlxuXG5cdFx0QF9oYXMubW92ZW1lbnQgPSB5ZXNcblxuXHRcdEBfY3VycmVudFsyXSA9IHpcblxuXHRcdEBcblxuXHRtb3ZlOiAoeCwgeSwgeikgLT5cblxuXHRcdEBfaGFzLm1vdmVtZW50ID0geWVzXG5cblx0XHRAX2N1cnJlbnRbMF0gKz0geFxuXHRcdEBfY3VycmVudFsxXSArPSB5XG5cdFx0QF9jdXJyZW50WzJdICs9IHpcblxuXHRcdEBcblxuXHRtb3ZlWDogKHgpIC0+XG5cblx0XHRAX2hhcy5tb3ZlbWVudCA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzBdICs9IHhcblxuXHRcdEBcblxuXHRtb3ZlWTogKHkpIC0+XG5cblx0XHRAX2hhcy5tb3ZlbWVudCA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzFdICs9IHlcblxuXHRcdEBcblxuXHRtb3ZlWjogKHopIC0+XG5cblx0XHRAX2hhcy5tb3ZlbWVudCA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzJdICs9IHpcblxuXHRcdEBcblxuXHQjIyNcblx0U2NhbGVcblx0IyMjXG5cblx0cmVzZXRTY2FsZTogLT5cblxuXHRcdEBfaGFzLnNjYWxlID0gbm9cblxuXHRcdEBfY3VycmVudFszXSA9IDFcblx0XHRAX2N1cnJlbnRbNF0gPSAxXG5cdFx0QF9jdXJyZW50WzVdID0gMVxuXG5cdFx0QFxuXG5cdGdldFNjYWxlOiAtPlxuXG5cdFx0e1xuXHRcdFx0eDogQF9jdXJyZW50WzNdXG5cdFx0XHR5OiBAX2N1cnJlbnRbNF1cblx0XHRcdHo6IEBfY3VycmVudFs1XVxuXHRcdH1cblxuXHRzY2FsZVRvOiAoeCwgeSwgeikgLT5cblxuXHRcdEBfaGFzLnNjYWxlID0geWVzXG5cblx0XHRAX2N1cnJlbnRbM10gPSB4XG5cdFx0QF9jdXJyZW50WzRdID0geVxuXHRcdEBfY3VycmVudFs1XSA9IHpcblxuXHRcdEBcblxuXHRzY2FsZVhUbzogKHgpIC0+XG5cblx0XHRAX2hhcy5zY2FsZSA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzNdID0geFxuXG5cdFx0QFxuXG5cdHNjYWxlWVRvOiAoeSkgLT5cblxuXHRcdEBfaGFzLnNjYWxlID0geWVzXG5cblx0XHRAX2N1cnJlbnRbNF0gPSB5XG5cblx0XHRAXG5cblx0c2NhbGVaVG86ICh6KSAtPlxuXG5cdFx0QF9oYXMuc2NhbGUgPSB5ZXNcblxuXHRcdEBfY3VycmVudFs1XSA9IHpcblxuXHRcdEBcblxuXHRzY2FsZTogKHgsIHksIHopIC0+XG5cblx0XHRAX2hhcy5zY2FsZSA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzNdICo9IHhcblx0XHRAX2N1cnJlbnRbNF0gKj0geVxuXHRcdEBfY3VycmVudFs1XSAqPSB6XG5cblx0XHRAXG5cblx0c2NhbGVBbGxUbzogKHgpIC0+XG5cblx0XHRpZiB4IGlzIDFcblxuXHRcdFx0QF9oYXMuc2NhbGUgPSBub1xuXG5cdFx0ZWxzZVxuXG5cdFx0XHRAX2hhcy5zY2FsZSA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzNdID0gQF9jdXJyZW50WzRdID0gQF9jdXJyZW50WzVdID0geFxuXG5cdFx0QFxuXG5cdHNjYWxlWDogKHgpIC0+XG5cblx0XHRAX2hhcy5zY2FsZSA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzNdICo9IHhcblxuXHRcdEBcblxuXHRzY2FsZVk6ICh5KSAtPlxuXG5cdFx0QF9oYXMuc2NhbGUgPSB5ZXNcblxuXHRcdEBfY3VycmVudFs0XSAqPSB5XG5cblx0XHRAXG5cblx0c2NhbGVaOiAoeikgLT5cblxuXHRcdEBfaGFzLnNjYWxlID0geWVzXG5cblx0XHRAX2N1cnJlbnRbNV0gKj0gelxuXG5cdFx0QFxuXG5cdCMjI1xuXHRQZXJzcGVjdGl2ZVxuXHQjIyNcblxuXHRyZXNldFBlcnNwZWN0aXZlOiAtPlxuXG5cdFx0QF9jdXJyZW50WzZdID0gMFxuXG5cdFx0QF9oYXMucGVyc3BlY3RpdmUgPSBub1xuXG5cdFx0QFxuXG5cdHBlcnNwZWN0aXZlOiAoZCkgLT5cblxuXHRcdEBfY3VycmVudFs2XSA9IGRcblxuXHRcdGlmIGRcblxuXHRcdFx0QF9oYXMucGVyc3BlY3RpdmUgPSB5ZXNcblxuXHRcdEBcblxuXHQjIyNcblx0Um90YXRpb25cblx0IyMjXG5cblx0cmVzZXRSb3RhdGlvbjogLT5cblxuXHRcdEBfaGFzLnJvdGF0aW9uID0gbm9cblxuXHRcdEBfY3VycmVudFs3XSA9IDBcblx0XHRAX2N1cnJlbnRbOF0gPSAwXG5cdFx0QF9jdXJyZW50WzldID0gMFxuXG5cdFx0QFxuXG5cdHJvdGF0aW9uOiAtPlxuXG5cdFx0e1xuXHRcdFx0eDogQF9jdXJyZW50WzddXG5cdFx0XHR5OiBAX2N1cnJlbnRbOF1cblx0XHRcdHo6IEBfY3VycmVudFs5XVxuXHRcdH1cblxuXHRyb3RhdGVUbzogKHgsIHksIHopIC0+XG5cblx0XHRAX2hhcy5yb3RhdGlvbiA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzddID0geFxuXHRcdEBfY3VycmVudFs4XSA9IHlcblx0XHRAX2N1cnJlbnRbOV0gPSB6XG5cblx0XHRAXG5cblx0cm90YXRlWFRvOiAoeCkgLT5cblxuXHRcdEBfaGFzLnJvdGF0aW9uID0geWVzXG5cblx0XHRAX2N1cnJlbnRbN10gPSB4XG5cblx0XHRAXG5cblx0cm90YXRlWVRvOiAoeSkgLT5cblxuXHRcdEBfaGFzLnJvdGF0aW9uID0geWVzXG5cblx0XHRAX2N1cnJlbnRbOF0gPSB5XG5cblx0XHRAXG5cblx0cm90YXRlWlRvOiAoeikgLT5cblxuXHRcdEBfaGFzLnJvdGF0aW9uID0geWVzXG5cblx0XHRAX2N1cnJlbnRbOV0gPSB6XG5cblx0XHRAXG5cblx0cm90YXRlOiAoeCwgeSwgeikgLT5cblxuXHRcdEBfaGFzLnJvdGF0aW9uID0geWVzXG5cblx0XHRAX2N1cnJlbnRbN10gKz0geFxuXHRcdEBfY3VycmVudFs4XSArPSB5XG5cdFx0QF9jdXJyZW50WzldICs9IHpcblxuXHRcdEBcblxuXHRyb3RhdGVYOiAoeCkgLT5cblxuXHRcdEBfaGFzLnJvdGF0aW9uID0geWVzXG5cblx0XHRAX2N1cnJlbnRbN10gKz0geFxuXG5cdFx0QFxuXG5cdHJvdGF0ZVk6ICh5KSAtPlxuXG5cdFx0QF9oYXMucm90YXRpb24gPSB5ZXNcblxuXHRcdEBfY3VycmVudFs4XSArPSB5XG5cblx0XHRAXG5cblx0cm90YXRlWjogKHopIC0+XG5cblx0XHRAX2hhcy5yb3RhdGlvbiA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzldICs9IHpcblxuXHRcdEBcblxuXHQjIyNcblx0TG9jYWwgTW92ZW1lbnRcblx0IyMjXG5cblx0cmVzZXRMb2NhbE1vdmVtZW50OiAtPlxuXG5cdFx0QF9oYXMubG9jYWxNb3ZlbWVudCA9IG5vXG5cblx0XHRAX2N1cnJlbnRbMTBdID0gMFxuXHRcdEBfY3VycmVudFsxMV0gPSAwXG5cdFx0QF9jdXJyZW50WzEyXSA9IDBcblxuXHRcdEBcblxuXHRsb2NhbE1vdmVtZW50OiAtPlxuXG5cdFx0e1xuXHRcdFx0eDogQF9jdXJyZW50WzEwXVxuXHRcdFx0eTogQF9jdXJyZW50WzExXVxuXHRcdFx0ejogQF9jdXJyZW50WzEyXVxuXHRcdH1cblxuXHRsb2NhbE1vdmVUbzogKHgsIHksIHopIC0+XG5cblx0XHRAX2hhcy5sb2NhbE1vdmVtZW50ID0geWVzXG5cblx0XHRAX2N1cnJlbnRbMTBdID0geFxuXHRcdEBfY3VycmVudFsxMV0gPSB5XG5cdFx0QF9jdXJyZW50WzEyXSA9IHpcblxuXHRcdEBcblxuXHRsb2NhbE1vdmVYVG86ICh4KSAtPlxuXG5cdFx0QF9oYXMubG9jYWxNb3ZlbWVudCA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzEwXSA9IHhcblxuXHRcdEBcblxuXHRsb2NhbE1vdmVZVG86ICh5KSAtPlxuXG5cdFx0QF9oYXMubG9jYWxNb3ZlbWVudCA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzExXSA9IHlcblxuXHRcdEBcblxuXHRsb2NhbE1vdmVaVG86ICh6KSAtPlxuXG5cdFx0QF9oYXMubG9jYWxNb3ZlbWVudCA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzEyXSA9IHpcblxuXHRcdEBcblxuXHRsb2NhbE1vdmU6ICh4LCB5LCB6KSAtPlxuXG5cdFx0QF9oYXMubG9jYWxNb3ZlbWVudCA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzEwXSArPSB4XG5cdFx0QF9jdXJyZW50WzExXSArPSB5XG5cdFx0QF9jdXJyZW50WzEyXSArPSB6XG5cblx0XHRAXG5cblx0bG9jYWxNb3ZlWDogKHgpIC0+XG5cblx0XHRAX2hhcy5sb2NhbE1vdmVtZW50ID0geWVzXG5cblx0XHRAX2N1cnJlbnRbMTBdICs9IHhcblxuXHRcdEBcblxuXHRsb2NhbE1vdmVZOiAoeSkgLT5cblxuXHRcdEBfaGFzLmxvY2FsTW92ZW1lbnQgPSB5ZXNcblxuXHRcdEBfY3VycmVudFsxMV0gKz0geVxuXG5cdFx0QFxuXG5cdGxvY2FsTW92ZVo6ICh6KSAtPlxuXG5cdFx0QF9oYXMubG9jYWxNb3ZlbWVudCA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzEyXSArPSB6XG5cblx0XHRAXG5cblx0IyMjXG5cdExvY2FsIFJvdGF0aW9uXG5cdCMjI1xuXG5cdHJlc2V0TG9jYWxSb3RhdGlvbjogLT5cblxuXHRcdEBfaGFzLmxvY2FsUm90YXRpb24gPSBub1xuXG5cdFx0QF9jdXJyZW50WzEzXSA9IDBcblx0XHRAX2N1cnJlbnRbMTRdID0gMFxuXHRcdEBfY3VycmVudFsxNV0gPSAwXG5cblx0XHRAXG5cblx0bG9jYWxSb3RhdGlvbjogLT5cblxuXHRcdHtcblx0XHRcdHg6IEBfY3VycmVudFsxM11cblx0XHRcdHk6IEBfY3VycmVudFsxNF1cblx0XHRcdHo6IEBfY3VycmVudFsxNV1cblx0XHR9XG5cblx0bG9jYWxSb3RhdGVUbzogKHgsIHksIHopIC0+XG5cblx0XHRAX2hhcy5sb2NhbFJvdGF0aW9uID0geWVzXG5cblx0XHRAX2N1cnJlbnRbMTNdID0geFxuXHRcdEBfY3VycmVudFsxNF0gPSB5XG5cdFx0QF9jdXJyZW50WzE1XSA9IHpcblxuXHRcdEBcblxuXHRsb2NhbFJvdGF0ZVhUbzogKHgpIC0+XG5cblx0XHRAX2hhcy5sb2NhbFJvdGF0aW9uID0geWVzXG5cblx0XHRAX2N1cnJlbnRbMTNdID0geFxuXG5cdFx0QFxuXG5cdGxvY2FsUm90YXRlWVRvOiAoeSkgLT5cblxuXHRcdEBfaGFzLmxvY2FsUm90YXRpb24gPSB5ZXNcblxuXHRcdEBfY3VycmVudFsxNF0gPSB5XG5cblx0XHRAXG5cblx0bG9jYWxSb3RhdGVaVG86ICh6KSAtPlxuXG5cdFx0QF9oYXMubG9jYWxSb3RhdGlvbiA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzE1XSA9IHpcblxuXHRcdEBcblxuXHRsb2NhbFJvdGF0ZTogKHgsIHksIHopIC0+XG5cblx0XHRAX2hhcy5sb2NhbFJvdGF0aW9uID0geWVzXG5cblx0XHRAX2N1cnJlbnRbMTNdICs9IHhcblx0XHRAX2N1cnJlbnRbMTRdICs9IHlcblx0XHRAX2N1cnJlbnRbMTVdICs9IHpcblxuXHRcdEBcblxuXHRsb2NhbFJvdGF0ZVg6ICh4KSAtPlxuXG5cdFx0QF9oYXMubG9jYWxSb3RhdGlvbiA9IHllc1xuXG5cdFx0QF9jdXJyZW50WzEzXSArPSB4XG5cblx0XHRAXG5cblx0bG9jYWxSb3RhdGVZOiAoeSkgLT5cblxuXHRcdEBfaGFzLmxvY2FsUm90YXRpb24gPSB5ZXNcblxuXHRcdEBfY3VycmVudFsxNF0gKz0geVxuXG5cdFx0QFxuXG5cdGxvY2FsUm90YXRlWjogKHopIC0+XG5cblx0XHRAX2hhcy5sb2NhbFJvdGF0aW9uID0geWVzXG5cblx0XHRAX2N1cnJlbnRbMTVdICs9IHpcblxuXHRcdEBcblxuXHRyZXNldEFsbDogLT5cblxuXHRcdGRvIEByZXNldE1vdmVtZW50XG5cdFx0ZG8gQHJlc2V0U2NhbGVcblx0XHRkbyBAcmVzZXRQZXJzcGVjdGl2ZVxuXHRcdGRvIEByZXNldFJvdGF0aW9uXG5cdFx0ZG8gQHJlc2V0TG9jYWxNb3ZlbWVudFxuXHRcdGRvIEByZXNldExvY2FsUm90YXRpb24iXX0=
},{"./transformation/perspective":73,"./transformation/rotation":74,"./transformation/scale":75,"./transformation/translation":76}],73:[function(require,module,exports){
var perspective;

module.exports = perspective = {
  toPlainCss: function(d) {
    return "perspective(" + d + ") ";
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyc3BlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXHRyYW5zZm9ybWF0aW9uXFxwZXJzcGVjdGl2ZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxPQUFBOztBQUFBLENBQUEsRUFBaUIsR0FBWCxDQUFOLElBQWlCO0NBRWhCLENBQUEsQ0FBWSxNQUFDLENBQWI7Q0FFRSxFQUFhLFFBQWIsR0FBQTtDQUZGLEVBQVk7Q0FGYixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBwZXJzcGVjdGl2ZSA9XG5cblx0dG9QbGFpbkNzczogKGQpIC0+XG5cblx0XHRcInBlcnNwZWN0aXZlKCN7ZH0pIFwiIl19
},{}],74:[function(require,module,exports){
var rotation;

module.exports = rotation = {
  toPlainCss: function(x, y, z) {
    if ((-0.00001 < x && x < 0.00001)) {
      x = 0;
    }
    if ((-0.00001 < y && y < 0.00001)) {
      y = 0;
    }
    if ((-0.00001 < z && z < 0.00001)) {
      z = 0;
    }
    return "rotateX(" + x + "rad) rotateY(" + y + "rad) rotateZ(" + z + "rad) ";
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm90YXRpb24uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXHRyYW5zZm9ybWF0aW9uXFxyb3RhdGlvbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxJQUFBOztBQUFBLENBQUEsRUFBaUIsR0FBWCxDQUFOLENBQWlCO0NBRWhCLENBQUEsQ0FBWSxNQUFDLENBQWI7QUFFSyxDQUFKLEVBQWMsQ0FBZCxHQUFHO0NBRUYsRUFBSSxHQUFKO01BRkQ7QUFLSSxDQUFKLEVBQWMsQ0FBZCxHQUFHO0NBRUYsRUFBSSxHQUFKO01BUEQ7QUFVSSxDQUFKLEVBQWMsQ0FBZCxHQUFHO0NBRUYsRUFBSSxHQUFKO01BWkQ7Q0FjQyxFQUFTLE9BQVQsQ0FBQSxJQUFBO0NBaEJGLEVBQVk7Q0FGYixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByb3RhdGlvbiA9XG5cblx0dG9QbGFpbkNzczogKHgsIHksIHopIC0+XG5cblx0XHRpZiAtMC4wMDAwMSA8IHggPCAwLjAwMDAxXG5cblx0XHRcdHggPSAwXG5cblxuXHRcdGlmIC0wLjAwMDAxIDwgeSA8IDAuMDAwMDFcblxuXHRcdFx0eSA9IDBcblxuXG5cdFx0aWYgLTAuMDAwMDEgPCB6IDwgMC4wMDAwMVxuXG5cdFx0XHR6ID0gMFxuXG5cdFx0XCJyb3RhdGVYKCN7eH1yYWQpIHJvdGF0ZVkoI3t5fXJhZCkgcm90YXRlWigje3p9cmFkKSBcIlxuIl19
},{}],75:[function(require,module,exports){
var scale;

module.exports = scale = {
  toPlainCss: function(x, y, z) {
    if ((-0.00001 < x && x < 0.00001)) {
      x = 0;
    }
    if ((-0.00001 < y && y < 0.00001)) {
      y = 0;
    }
    if ((-0.00001 < z && z < 0.00001)) {
      z = 0;
    }
    return "scale3d(" + x + ", " + y + ", " + z + ") ";
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NhbGUuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXHRyYW5zZm9ybWF0aW9uXFxzY2FsZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxDQUFBOztBQUFBLENBQUEsRUFBaUIsRUFBQSxDQUFYLENBQU47Q0FFQyxDQUFBLENBQVksTUFBQyxDQUFiO0FBRUssQ0FBSixFQUFjLENBQWQsR0FBRztDQUVGLEVBQUksR0FBSjtNQUZEO0FBS0ksQ0FBSixFQUFjLENBQWQsR0FBRztDQUVGLEVBQUksR0FBSjtNQVBEO0FBVUksQ0FBSixFQUFjLENBQWQsR0FBRztDQUVGLEVBQUksR0FBSjtNQVpEO0NBY0MsRUFBUyxDQUFULE1BQUEsQ0FBQTtDQWhCRixFQUFZO0NBRmIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gc2NhbGUgPVxuXG5cdHRvUGxhaW5Dc3M6ICh4LCB5LCB6KSAtPlxuXG5cdFx0aWYgLTAuMDAwMDEgPCB4IDwgMC4wMDAwMVxuXG5cdFx0XHR4ID0gMFxuXG5cblx0XHRpZiAtMC4wMDAwMSA8IHkgPCAwLjAwMDAxXG5cblx0XHRcdHkgPSAwXG5cblxuXHRcdGlmIC0wLjAwMDAxIDwgeiA8IDAuMDAwMDFcblxuXHRcdFx0eiA9IDBcblxuXHRcdFwic2NhbGUzZCgje3h9LCAje3l9LCAje3p9KSBcIiJdfQ==
},{}],76:[function(require,module,exports){
var translation;

module.exports = translation = {
  toPlainCss: function(x, y, z) {
    if ((-0.00001 < x && x < 0.00001)) {
      x = 0;
    }
    if ((-0.00001 < y && y < 0.00001)) {
      y = 0;
    }
    if ((-0.00001 < z && z < 0.00001)) {
      z = 0;
    }
    return "translate3d(" + x + "px, " + y + "px, " + z + "px) ";
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNsYXRpb24uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXHRyYW5zZm9ybWF0aW9uXFx0cmFuc2xhdGlvbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxPQUFBOztBQUFBLENBQUEsRUFBaUIsR0FBWCxDQUFOLElBQWlCO0NBRWhCLENBQUEsQ0FBWSxNQUFDLENBQWI7QUFFSyxDQUFKLEVBQWMsQ0FBZCxHQUFHO0NBRUYsRUFBSSxHQUFKO01BRkQ7QUFLSSxDQUFKLEVBQWMsQ0FBZCxHQUFHO0NBRUYsRUFBSSxHQUFKO01BUEQ7QUFVSSxDQUFKLEVBQWMsQ0FBZCxHQUFHO0NBRUYsRUFBSSxHQUFKO01BWkQ7Q0FjQyxFQUFhLEdBQWIsS0FBQSxHQUFBO0NBaEJGLEVBQVk7Q0FGYixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSB0cmFuc2xhdGlvbiA9XG5cblx0dG9QbGFpbkNzczogKHgsIHksIHopIC0+XG5cblx0XHRpZiAtMC4wMDAwMSA8IHggPCAwLjAwMDAxXG5cblx0XHRcdHggPSAwXG5cblxuXHRcdGlmIC0wLjAwMDAxIDwgeSA8IDAuMDAwMDFcblxuXHRcdFx0eSA9IDBcblxuXG5cdFx0aWYgLTAuMDAwMDEgPCB6IDwgMC4wMDAwMVxuXG5cdFx0XHR6ID0gMFxuXG5cdFx0XCJ0cmFuc2xhdGUzZCgje3h9cHgsICN7eX1weCwgI3t6fXB4KSBcIiJdfQ==
},{}],77:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var CSSColor;

module.exports = CSSColor = (function() {
  function CSSColor(h, s, l) {
    this.h = h;
    this.s = s;
    this.l = l;
  }

  CSSColor.prototype.setHue = function(deg) {
    this.h = deg / 360;
    return this;
  };

  CSSColor.prototype.rotateHue = function(deg) {
    deg /= 360;
    this.h = this.h + deg;
    return this;
  };

  CSSColor.prototype.setSaturation = function(amount) {
    this.s = amount / 100;
    return this;
  };

  CSSColor.prototype.saturate = function(amount) {
    this.s += amount / 100;
    return this;
  };

  CSSColor.prototype.setLightness = function(amount) {
    this.l = amount / 100;
    return this;
  };

  CSSColor.prototype.lighten = function(amount) {
    this.l += amount / 100;
    return this;
  };

  CSSColor.prototype.toCss = function() {
    var h, l, s;
    h = Math.round(this.h * 360);
    s = Math.round(this.s * 100);
    l = Math.round(this.l * 100);
    return "hsl(" + h + ", " + s + "%, " + l + "%)";
  };

  CSSColor.prototype.fromHsl = function(h, s, l) {
    this.h = h / 360;
    this.s = s / 100;
    this.l = l / 100;
    return this;
  };

  CSSColor.prototype.toRgb = function() {
    var b, g, p, q, r;
    r = 0;
    g = 0;
    b = 0;
    if (this.s === 0) {
      r = g = b = this.l;
    } else {
      q = (this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s);
      p = 2 * this.l - q;
      r = CSSColor._hue2rgb(p, q, this.h + 1 / 3);
      g = CSSColor._hue2rgb(p, q, this.h);
      b = CSSColor._hue2rgb(p, q, this.h - 1 / 3);
    }
    return [r * 255, g * 255, b * 255];
  };

  CSSColor.prototype.fromRgb = function(r, g, b) {
    var d, h, l, max, min, s;
    r /= 255;
    g /= 255;
    b /= 255;
    max = Math.max(r, g, b);
    min = Math.min(r, g, b);
    h = 0;
    s = 0;
    l = (max + min) / 2;
    if (max !== min) {
      d = max - min;
      s = (l > 0.5 ? d / (2 - max - min) : d / (max + min));
      switch (max) {
        case r:
          h = (g - b) / d + (g < b ? 6 : 0);
          break;
        case g:
          h = (b - r) / d + 2;
          break;
        case b:
          h = (r - g) / d + 4;
      }
      h /= 6;
    }
    this.h = h;
    this.s = s;
    this.l = l;
    return this;
  };

  CSSColor.prototype.clone = function() {
    return new CSSColor(this.h, this.s, this.l);
  };

  CSSColor.hsl = function(h, s, l) {
    return new CSSColor(h, s, l);
  };

  CSSColor.rgb = function(r, g, b) {
    var d, h, l, max, min, s;
    r /= 255;
    g /= 255;
    b /= 255;
    max = Math.max(r, g, b);
    min = Math.min(r, g, b);
    h = 0;
    s = 0;
    l = (max + min) / 2;
    if (max !== min) {
      d = max - min;
      s = (l > 0.5 ? d / (2 - max - min) : d / (max + min));
      switch (max) {
        case r:
          h = (g - b) / d + (g < b ? 6 : 0);
          break;
        case g:
          h = (b - r) / d + 2;
          break;
        case b:
          h = (r - g) / d + 4;
      }
      h /= 6;
    }
    return new CSSColor(h, s, l);
  };

  CSSColor._hue2rgb = function(p, q, t) {
    if (t < 0) {
      t += 1;
    }
    if (t > 1) {
      t -= 1;
    }
    if (t < 1 / 6) {
      return p + (q - p) * 6 * t;
    }
    if (t < 1 / 2) {
      return q;
    }
    if (t < 2 / 3) {
      return p + (q - p) * (2 / 3 - t) * 6;
    }
    return p;
  };

  return CSSColor;

})();

},{}],78:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var CSSFilter, blur, brightness, contrast, filters, grayscale, hueRotate, invert, opacity, saturate, sepia;

blur = require('./filter/blur');

brightness = require('./filter/brightness');

contrast = require('./filter/contrast');

grayscale = require('./filter/grayscale');

hueRotate = require('./filter/hueRotate');

invert = require('./filter/invert');

opacity = require('./filter/opacity');

saturate = require('./filter/saturate');

sepia = require('./filter/sepia');

filters = {
  blur: blur,
  brightness: brightness,
  contrast: contrast,
  grayscale: grayscale,
  hueRotate: hueRotate,
  invert: invert,
  opacity: opacity,
  saturate: saturate,
  sepia: sepia
};

module.exports = CSSFilter = (function() {
  function CSSFilter() {
    this._filters = {};
  }

  CSSFilter.prototype.setBlur = function(d) {
    this._filters.blur = d;
    return this;
  };

  CSSFilter.prototype.setBrightness = function(d) {
    this._filters.brightness = d;
    return this;
  };

  CSSFilter.prototype.setContrast = function(d) {
    this._filters.contrast = d;
    return this;
  };

  CSSFilter.prototype.setGrayscale = function(d) {
    this._filters.grayscale = d;
    return this;
  };

  CSSFilter.prototype.rotateHue = function(d) {
    this._filters.hueRotate = d;
    return this;
  };

  CSSFilter.prototype.invertColors = function(d) {
    this._filters.invert = d;
    return this;
  };

  CSSFilter.prototype.setOpacity = function(d) {
    this._filters.opacity = d;
    return this;
  };

  CSSFilter.prototype.setSaturation = function(d) {
    this._filters.saturate = d;
    return this;
  };

  CSSFilter.prototype.setSepia = function(d) {
    this._filters.sepia = d;
    return this;
  };

  CSSFilter.prototype.toCss = function() {
    var key, str, value, _ref;
    str = '';
    _ref = this._filters;
    for (key in _ref) {
      value = _ref[key];
      str += filters[key].toCss(value) + ' ';
    }
    return str;
  };

  return CSSFilter;

})();

},{"./filter/blur":79,"./filter/brightness":80,"./filter/contrast":81,"./filter/grayscale":82,"./filter/hueRotate":83,"./filter/invert":84,"./filter/opacity":85,"./filter/saturate":86,"./filter/sepia":87}],79:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var blur;

module.exports = blur = {
  toCss: function(radius) {
    return "blur(" + radius + "px)";
  }
};

},{}],80:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var brightness;

module.exports = brightness = {
  toCss: function(amount) {
    return "brightness(" + amount + ")";
  }
};

},{}],81:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var contrast;

module.exports = contrast = {
  toCss: function(amount) {
    return "contrast(" + amount + "%)";
  }
};

},{}],82:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var grayscale;

module.exports = grayscale = {
  toCss: function(amount) {
    return "grayscale(" + amount + "%)";
  }
};

},{}],83:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var hueRotate;

module.exports = hueRotate = {
  toCss: function(angle) {
    return "hue-rotate(" + angle + "deg)";
  }
};

},{}],84:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var invert;

module.exports = invert = {
  toCss: function(amount) {
    return "invert(" + amount + "%)";
  }
};

},{}],85:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var opacity;

module.exports = opacity = {
  toCss: function(amount) {
    return "opacity(" + amount + "%)";
  }
};

},{}],86:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var saturate;

module.exports = saturate = {
  toCss: function(amount) {
    return "saturate(" + amount + "%)";
  }
};

},{}],87:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
var sepia;

module.exports = sepia = {
  toCss: function(amount) {
    return "sepia(" + amount + "%)";
  }
};

},{}],88:[function(require,module,exports){
var MethodChain, _Interface,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Interface = require('./_Interface');

module.exports = MethodChain = (function() {
  function MethodChain() {
    var I, _ref;
    this._methods = {};
    this._Interface = I = (function(_super) {
      __extends(I, _super);

      function I() {
        _ref = I.__super__.constructor.apply(this, arguments);
        return _ref;
      }

      return I;

    })(_Interface);
  }

  MethodChain.prototype.addMethod = function(name) {
    this._Interface.prototype[name] = function() {
      this._queue.push({
        method: name,
        args: Array.prototype.slice.call(arguments)
      });
      return this;
    };
    return this;
  };

  MethodChain.prototype.getInterface = function() {
    return new this._Interface;
  };

  MethodChain.prototype.run = function(_interface, context, transform) {
    var args, item, _i, _len, _ref;
    if (transform == null) {
      transform = null;
    }
    _ref = _interface._queue;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      if (transform != null) {
        args = transform(item.args);
      } else {
        args = args;
      }
      context = context[item.method].apply(context, args);
    }
    return context;
  };

  return MethodChain;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWV0aG9kQ2hhaW4uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcTWV0aG9kQ2hhaW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsbUJBQUE7R0FBQTtrU0FBQTs7QUFBQSxDQUFBLEVBQWEsSUFBQSxHQUFiLElBQWE7O0FBRWIsQ0FGQSxFQUV1QixHQUFqQixDQUFOO0NBRWMsQ0FBQSxDQUFBLGtCQUFBO0NBRVosTUFBQSxDQUFBO0NBQUEsQ0FBQSxDQUFZLENBQVosSUFBQTtDQUFBLEVBRW9CLENBQXBCLE1BQUE7Q0FBYzs7Ozs7Q0FBQTs7Q0FBQTs7Q0FBZ0I7Q0FKL0IsRUFBYTs7Q0FBYixFQU1XLENBQUEsS0FBWDtDQUVDLEVBQXNCLENBQXRCLEtBQWMsQ0FBSDtDQUVWLEdBQUMsRUFBRDtDQUVDLENBQVEsRUFBUixFQUFBLEVBQUE7Q0FBQSxDQUVNLEVBQU4sQ0FBVyxHQUFYLENBQWE7Q0FKZCxPQUFBO0NBRnFCLFlBUXJCO0NBUkQsSUFBc0I7Q0FGWixVQVlWO0NBbEJELEVBTVc7O0NBTlgsRUFvQmMsTUFBQSxHQUFkO0FBRUMsQ0FBQSxFQUFBLENBQUssT0FBTDtDQXRCRCxFQW9CYzs7Q0FwQmQsQ0F3QmtCLENBQWxCLElBQUssRUFBQyxDQUFEO0NBRUosT0FBQSxrQkFBQTs7R0FGc0MsR0FBWjtNQUUxQjtDQUFBO0NBQUEsUUFBQSxrQ0FBQTt1QkFBQTtDQUVDLEdBQUcsRUFBSCxXQUFBO0NBRUMsRUFBTyxDQUFQLElBQUEsQ0FBTztNQUZSLEVBQUE7Q0FNQyxFQUFPLENBQVAsSUFBQTtRQU5EO0NBQUEsQ0FROEMsQ0FBcEMsQ0FBWSxDQUFaLENBQVYsQ0FBQTtDQVZELElBQUE7Q0FGSSxVQWNKO0NBdENELEVBd0JLOztDQXhCTDs7Q0FKRCIsInNvdXJjZXNDb250ZW50IjpbIl9JbnRlcmZhY2UgPSByZXF1aXJlICcuL19JbnRlcmZhY2UnXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgTWV0aG9kQ2hhaW5cblxuXHRjb25zdHJ1Y3RvcjogLT5cblxuXHRcdEBfbWV0aG9kcyA9IHt9XG5cblx0XHRAX0ludGVyZmFjZSA9IGNsYXNzIEkgZXh0ZW5kcyBfSW50ZXJmYWNlXG5cblx0YWRkTWV0aG9kOiAobmFtZSkgLT5cblxuXHRcdEBfSW50ZXJmYWNlOjpbbmFtZV0gPSAtPlxuXG5cdFx0XHRAX3F1ZXVlLnB1c2hcblxuXHRcdFx0XHRtZXRob2Q6IG5hbWVcblxuXHRcdFx0XHRhcmdzOiBBcnJheTo6c2xpY2UuY2FsbCBhcmd1bWVudHNcblxuXHRcdFx0QFxuXG5cdFx0QFxuXG5cdGdldEludGVyZmFjZTogLT5cblxuXHRcdG5ldyBAX0ludGVyZmFjZVxuXG5cdHJ1bjogKF9pbnRlcmZhY2UsIGNvbnRleHQsIHRyYW5zZm9ybSA9IG51bGwpIC0+XG5cblx0XHRmb3IgaXRlbSBpbiBfaW50ZXJmYWNlLl9xdWV1ZVxuXG5cdFx0XHRpZiB0cmFuc2Zvcm0/XG5cblx0XHRcdFx0YXJncyA9IHRyYW5zZm9ybSBpdGVtLmFyZ3NcblxuXHRcdFx0ZWxzZVxuXG5cdFx0XHRcdGFyZ3MgPSBhcmdzXG5cblx0XHRcdGNvbnRleHQgPSBjb250ZXh0W2l0ZW0ubWV0aG9kXS5hcHBseSBjb250ZXh0LCBhcmdzXG5cblx0XHRjb250ZXh0Il19
},{"./_Interface":89}],89:[function(require,module,exports){
var _Interface;

module.exports = _Interface = (function() {
  function _Interface() {
    this._queue = [];
  }

  return _Interface;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX0ludGVyZmFjZS5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcbGliXFxfSW50ZXJmYWNlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLE1BQUE7O0FBQUEsQ0FBQSxFQUF1QixHQUFqQixDQUFOO0NBRWMsQ0FBQSxDQUFBLGlCQUFBO0NBRVosQ0FBQSxDQUFVLENBQVYsRUFBQTtDQUZELEVBQWE7O0NBQWI7O0NBRkQiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGNsYXNzIF9JbnRlcmZhY2VcblxuXHRjb25zdHJ1Y3RvcjogLT5cblxuXHRcdEBfcXVldWUgPSBbXSJdfQ==
},{}],90:[function(require,module,exports){
module.exports=require(1)
},{}],91:[function(require,module,exports){
var array, _common;

_common = require('./_common');

module.exports = array = {
  _clone: _common._cloneArray.bind(_common),
  clone: function(what) {
    if (!Array.isArray(what)) {
      throw Error("`what` isn\'t an array.");
    }
    return this._clone.apply(this, arguments);
  },
  /*
  	Tries to turn anything into an array.
  */

  from: function(r) {
    return Array.prototype.slice.call(r);
  },
  /*
  	Clone of an array. Properties will be shallow copies.
  */

  simpleClone: function(a) {
    return a.slice(0);
  },
  pluck: function(a, i) {
    var index, value, _i, _len;
    if (a.length < 1) {
      return a;
    }
    for (index = _i = 0, _len = a.length; _i < _len; index = ++_i) {
      value = a[index];
      if (index > i) {
        a[index - 1] = a[index];
      }
    }
    a.length = a.length - 1;
    return a;
  },
  pluckItem: function(a, item) {
    var index, removed, value, _i, _len;
    if (a.length < 1) {
      return a;
    }
    removed = 0;
    for (index = _i = 0, _len = a.length; _i < _len; index = ++_i) {
      value = a[index];
      if (value === item) {
        removed++;
        continue;
      }
      if (removed !== 0) {
        a[index - removed] = a[index];
      }
    }
    if (removed > 0) {
      a.length = a.length - removed;
    }
    return a;
  },
  pluckOneItem: function(a, item) {
    var index, reached, value, _i, _len;
    if (a.length < 1) {
      return a;
    }
    reached = false;
    for (index = _i = 0, _len = a.length; _i < _len; index = ++_i) {
      value = a[index];
      if (!reached) {
        if (value === item) {
          reached = true;
          continue;
        }
      } else {
        a[index - 1] = a[index];
      }
    }
    if (reached) {
      a.length = a.length - 1;
    }
    return a;
  },
  pluckByCallback: function(a, cb) {
    var index, removed, value, _i, _len;
    if (a.length < 1) {
      return a;
    }
    removed = 0;
    for (index = _i = 0, _len = a.length; _i < _len; index = ++_i) {
      value = a[index];
      if (cb(value, index)) {
        removed++;
        continue;
      }
      if (removed !== 0) {
        a[index - removed] = a[index];
      }
    }
    if (removed > 0) {
      a.length = a.length - removed;
    }
    return a;
  },
  pluckMultiple: function(array, indexesToRemove) {
    var i, removedSoFar, _i, _len;
    if (array.length < 1) {
      return array;
    }
    removedSoFar = 0;
    indexesToRemove.sort();
    for (_i = 0, _len = indexesToRemove.length; _i < _len; _i++) {
      i = indexesToRemove[_i];
      this.pluck(array, i - removedSoFar);
      removedSoFar++;
    }
    return array;
  },
  injectByCallback: function(a, toInject, shouldInject) {
    var i, len, val, valA, valB, _i, _len;
    valA = null;
    valB = null;
    len = a.length;
    if (len < 1) {
      a.push(toInject);
      return a;
    }
    for (i = _i = 0, _len = a.length; _i < _len; i = ++_i) {
      val = a[i];
      valA = valB;
      valB = val;
      if (shouldInject(valA, valB, toInject)) {
        return a.splice(i, 0, toInject);
      }
    }
    a.push(toInject);
    return a;
  },
  injectInIndex: function(a, index, toInject) {
    var i, len, toPut, toPutNext;
    len = a.length;
    i = index;
    if (len < 1) {
      a.push(toInject);
      return a;
    }
    toPut = toInject;
    toPutNext = null;
    for(; i <= len; i++){

			toPutNext = a[i];

			a[i] = toPut;

			toPut = toPutNext;

		};
    return null;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJyYXkuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcYXJyYXkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsVUFBQTs7QUFBQSxDQUFBLEVBQVUsSUFBVixJQUFVOztBQUVWLENBRkEsRUFFaUIsRUFBQSxDQUFYLENBQU47Q0FFQyxDQUFBLEVBQVEsRUFBUixDQUFlLElBQVk7Q0FBM0IsQ0FFQSxDQUFPLENBQUEsQ0FBUCxJQUFRO0FBRXVDLENBQTlDLEdBQUEsQ0FBbUQsRUFBTDtDQUE5QyxJQUFNLE9BQUEsYUFBQTtNQUFOO0NBRUMsQ0FBZ0IsRUFBaEIsQ0FBRCxDQUFPLEdBQVAsRUFBQTtDQU5ELEVBRU87Q0FNUDs7O0NBUkE7Q0FBQSxDQVdBLENBQU0sQ0FBTixLQUFPO0NBRUQsR0FBTCxDQUFLLElBQUUsRUFBUDtDQWJELEVBV007Q0FJTjs7O0NBZkE7Q0FBQSxDQWtCQSxDQUFhLE1BQUMsRUFBZDtDQUVFLElBQUQsTUFBQTtDQXBCRCxFQWtCYTtDQWxCYixDQXNCQSxDQUFPLEVBQVAsSUFBUTtDQUVQLE9BQUEsY0FBQTtDQUFBLEVBQXVCLENBQXZCLEVBQVk7Q0FBWixZQUFPO01BQVA7QUFHQSxDQUFBLFFBQUEsK0NBQUE7d0JBQUE7Q0FFQyxFQUFXLENBQVIsQ0FBQSxDQUFIO0NBRUMsRUFBVSxFQUFSLEdBQUY7UUFKRjtDQUFBLElBSEE7Q0FBQSxFQVNXLENBQVgsRUFBQTtDQVhNLFVBYU47Q0FuQ0QsRUFzQk87Q0F0QlAsQ0FxQ0EsQ0FBVyxDQUFBLEtBQVg7Q0FFQyxPQUFBLHVCQUFBO0NBQUEsRUFBdUIsQ0FBdkIsRUFBWTtDQUFaLFlBQU87TUFBUDtDQUFBLEVBR1UsQ0FBVixHQUFBO0FBRUEsQ0FBQSxRQUFBLCtDQUFBO3dCQUFBO0NBRUMsR0FBRyxDQUFBLENBQUg7QUFFQyxDQUFBLENBQUEsS0FBQSxDQUFBO0NBRUEsZ0JBSkQ7UUFBQTtDQU1BLEdBQUcsQ0FBYSxDQUFoQixDQUFHO0NBRUYsRUFBVSxFQUFSLEVBQUEsQ0FBRjtRQVZGO0NBQUEsSUFMQTtDQWlCQSxFQUEyQyxDQUEzQyxHQUFpQztDQUFqQyxFQUFXLEdBQVgsQ0FBQTtNQWpCQTtDQUZVLFVBcUJWO0NBMURELEVBcUNXO0NBckNYLENBNERBLENBQWMsQ0FBQSxLQUFDLEdBQWY7Q0FFQyxPQUFBLHVCQUFBO0NBQUEsRUFBdUIsQ0FBdkIsRUFBWTtDQUFaLFlBQU87TUFBUDtDQUFBLEVBRVUsQ0FBVixDQUZBLEVBRUE7QUFFQSxDQUFBLFFBQUEsK0NBQUE7d0JBQUE7QUFFUSxDQUFQLEdBQUcsRUFBSCxDQUFBO0NBRUMsR0FBRyxDQUFBLEdBQUg7Q0FFQyxFQUFVLENBQVYsR0FBQSxHQUFBO0NBRUEsa0JBSkQ7VUFGRDtNQUFBLEVBQUE7Q0FVQyxFQUFVLEVBQVIsR0FBRjtRQVpGO0NBQUEsSUFKQTtDQWtCQSxHQUFBLEdBQUE7Q0FBQSxFQUFXLEdBQVg7TUFsQkE7Q0FGYSxVQXNCYjtDQWxGRCxFQTREYztDQTVEZCxDQW9GQSxDQUFpQixNQUFDLE1BQWxCO0NBRUMsT0FBQSx1QkFBQTtDQUFBLEVBQXVCLENBQXZCLEVBQVk7Q0FBWixZQUFPO01BQVA7Q0FBQSxFQUVVLENBQVYsR0FBQTtBQUVBLENBQUEsUUFBQSwrQ0FBQTt3QkFBQTtDQUVDLENBQUcsRUFBQSxDQUFBLENBQUg7QUFFQyxDQUFBLENBQUEsS0FBQSxDQUFBO0NBRUEsZ0JBSkQ7UUFBQTtDQU1BLEdBQUcsQ0FBYSxDQUFoQixDQUFHO0NBRUYsRUFBVSxFQUFSLEVBQUEsQ0FBRjtRQVZGO0NBQUEsSUFKQTtDQWdCQSxFQUFhLENBQWIsR0FBRztDQUVGLEVBQVcsR0FBWCxDQUFBO01BbEJEO0NBRmdCLFVBc0JoQjtDQTFHRCxFQW9GaUI7Q0FwRmpCLENBNEdBLENBQWUsRUFBQSxJQUFDLElBQWhCLEVBQWU7Q0FFZCxPQUFBLGlCQUFBO0NBQUEsRUFBK0IsQ0FBL0IsQ0FBcUIsQ0FBTDtDQUFoQixJQUFBLFFBQU87TUFBUDtDQUFBLEVBRWUsQ0FBZixRQUFBO0NBRkEsR0FJQSxXQUFlO0FBRWYsQ0FBQSxRQUFBLDZDQUFBOytCQUFBO0NBRUMsQ0FBYyxDQUFJLENBQWpCLENBQUQsQ0FBQSxNQUFBO0FBRUEsQ0FGQSxDQUFBLElBRUEsTUFBQTtDQUpELElBTkE7Q0FGYyxVQWNkO0NBMUhELEVBNEdlO0NBNUdmLENBNEhBLENBQWtCLEtBQUEsQ0FBQyxHQUFELElBQWxCO0NBRUMsT0FBQSx5QkFBQTtDQUFBLEVBQU8sQ0FBUDtDQUFBLEVBRU8sQ0FBUDtDQUZBLEVBSUEsQ0FBQSxFQUpBO0NBTUEsRUFBRyxDQUFIO0NBRUMsR0FBQSxFQUFBLEVBQUE7Q0FFQSxZQUFPO01BVlI7QUFhQSxDQUFBLFFBQUEsdUNBQUE7a0JBQUE7Q0FFQyxFQUFPLENBQVAsRUFBQTtDQUFBLEVBRU8sQ0FBUCxFQUFBO0NBRUEsQ0FBc0IsRUFBbkIsRUFBSCxFQUFHLElBQUE7Q0FFRixDQUFtQixJQUFaLEVBQUEsT0FBQTtRQVJUO0NBQUEsSUFiQTtDQUFBLEdBdUJBLElBQUE7Q0F6QmlCLFVBMkJqQjtDQXZKRCxFQTRIa0I7Q0E1SGxCLENBeUpBLENBQWUsRUFBQSxHQUFBLENBQUMsSUFBaEI7Q0FFQyxPQUFBLGdCQUFBO0NBQUEsRUFBQSxDQUFBLEVBQUE7Q0FBQSxFQUVJLENBQUosQ0FGQTtDQUlBLEVBQUcsQ0FBSDtDQUVDLEdBQUEsRUFBQSxFQUFBO0NBRUEsWUFBTztNQVJSO0NBQUEsRUFVUSxDQUFSLENBQUEsR0FWQTtDQUFBLEVBWVksQ0FBWixLQUFBO0NBWkEsR0FjQTs7Ozs7Ozs7Q0FkQSxHQUFBO0NBRmMsVUE0QmQ7Q0FyTEQsRUF5SmU7Q0E3SmhCLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJfY29tbW9uID0gcmVxdWlyZSAnLi9fY29tbW9uJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFycmF5ID1cblxuXHRfY2xvbmU6IF9jb21tb24uX2Nsb25lQXJyYXkuYmluZCBfY29tbW9uXG5cblx0Y2xvbmU6ICh3aGF0KSAtPlxuXG5cdFx0dGhyb3cgRXJyb3IoXCJgd2hhdGAgaXNuXFwndCBhbiBhcnJheS5cIikgdW5sZXNzIEFycmF5LmlzQXJyYXkgd2hhdFxuXG5cdFx0QF9jbG9uZS5hcHBseSBALCBhcmd1bWVudHNcblxuXHQjIyNcblx0VHJpZXMgdG8gdHVybiBhbnl0aGluZyBpbnRvIGFuIGFycmF5LlxuXHQjIyNcblx0ZnJvbTogKHIpIC0+XG5cblx0XHRBcnJheTo6c2xpY2UuY2FsbCByXG5cblx0IyMjXG5cdENsb25lIG9mIGFuIGFycmF5LiBQcm9wZXJ0aWVzIHdpbGwgYmUgc2hhbGxvdyBjb3BpZXMuXG5cdCMjI1xuXHRzaW1wbGVDbG9uZTogKGEpIC0+XG5cblx0XHRhLnNsaWNlIDBcblxuXHRwbHVjazogKGEsIGkpIC0+XG5cblx0XHRyZXR1cm4gYSBpZiBhLmxlbmd0aCA8IDFcblxuXG5cdFx0Zm9yIHZhbHVlLCBpbmRleCBpbiBhXG5cblx0XHRcdGlmIGluZGV4ID4gaVxuXG5cdFx0XHRcdGFbaW5kZXggLSAxXSA9IGFbaW5kZXhdXG5cblx0XHRhLmxlbmd0aCA9IGEubGVuZ3RoIC0gMVxuXG5cdFx0YVxuXG5cdHBsdWNrSXRlbTogKGEsIGl0ZW0pIC0+XG5cblx0XHRyZXR1cm4gYSBpZiBhLmxlbmd0aCA8IDFcblxuXG5cdFx0cmVtb3ZlZCA9IDBcblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiB2YWx1ZSBpcyBpdGVtXG5cblx0XHRcdFx0cmVtb3ZlZCsrXG5cblx0XHRcdFx0Y29udGludWVcblxuXHRcdFx0aWYgcmVtb3ZlZCBpc250IDBcblxuXHRcdFx0XHRhW2luZGV4IC0gcmVtb3ZlZF0gPSBhW2luZGV4XVxuXG5cdFx0YS5sZW5ndGggPSBhLmxlbmd0aCAtIHJlbW92ZWQgaWYgcmVtb3ZlZCA+IDBcblxuXHRcdGFcblxuXHRwbHVja09uZUl0ZW06IChhLCBpdGVtKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblx0XHRyZWFjaGVkID0gbm9cblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBub3QgcmVhY2hlZFxuXG5cdFx0XHRcdGlmIHZhbHVlIGlzIGl0ZW1cblxuXHRcdFx0XHRcdHJlYWNoZWQgPSB5ZXNcblxuXHRcdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGVsc2VcblxuXHRcdFx0XHRhW2luZGV4IC0gMV0gPSBhW2luZGV4XVxuXG5cdFx0YS5sZW5ndGggPSBhLmxlbmd0aCAtIDEgaWYgcmVhY2hlZFxuXG5cdFx0YVxuXG5cdHBsdWNrQnlDYWxsYmFjazogKGEsIGNiKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblx0XHRyZW1vdmVkID0gMFxuXG5cdFx0Zm9yIHZhbHVlLCBpbmRleCBpbiBhXG5cblx0XHRcdGlmIGNiIHZhbHVlLCBpbmRleFxuXG5cdFx0XHRcdHJlbW92ZWQrK1xuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGlmIHJlbW92ZWQgaXNudCAwXG5cblx0XHRcdFx0YVtpbmRleCAtIHJlbW92ZWRdID0gYVtpbmRleF1cblxuXHRcdGlmIHJlbW92ZWQgPiAwXG5cblx0XHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSByZW1vdmVkXG5cblx0XHRhXG5cblx0cGx1Y2tNdWx0aXBsZTogKGFycmF5LCBpbmRleGVzVG9SZW1vdmUpIC0+XG5cblx0XHRyZXR1cm4gYXJyYXkgaWYgYXJyYXkubGVuZ3RoIDwgMVxuXG5cdFx0cmVtb3ZlZFNvRmFyID0gMFxuXG5cdFx0aW5kZXhlc1RvUmVtb3ZlLnNvcnQoKVxuXG5cdFx0Zm9yIGkgaW4gaW5kZXhlc1RvUmVtb3ZlXG5cblx0XHRcdEBwbHVjayBhcnJheSwgaSAtIHJlbW92ZWRTb0ZhclxuXG5cdFx0XHRyZW1vdmVkU29GYXIrK1xuXG5cdFx0YXJyYXlcblxuXHRpbmplY3RCeUNhbGxiYWNrOiAoYSwgdG9JbmplY3QsIHNob3VsZEluamVjdCkgLT5cblxuXHRcdHZhbEEgPSBudWxsXG5cblx0XHR2YWxCID0gbnVsbFxuXG5cdFx0bGVuID0gYS5sZW5ndGhcblxuXHRcdGlmIGxlbiA8IDFcblxuXHRcdFx0YS5wdXNoIHRvSW5qZWN0XG5cblx0XHRcdHJldHVybiBhXG5cblxuXHRcdGZvciB2YWwsIGkgaW4gYVxuXG5cdFx0XHR2YWxBID0gdmFsQlxuXG5cdFx0XHR2YWxCID0gdmFsXG5cblx0XHRcdGlmIHNob3VsZEluamVjdCB2YWxBLCB2YWxCLCB0b0luamVjdFxuXG5cdFx0XHRcdHJldHVybiBhLnNwbGljZSBpLCAwLCB0b0luamVjdFxuXG5cdFx0YS5wdXNoIHRvSW5qZWN0XG5cblx0XHRhXG5cblx0aW5qZWN0SW5JbmRleDogKGEsIGluZGV4LCB0b0luamVjdCkgLT5cblxuXHRcdGxlbiA9IGEubGVuZ3RoXG5cblx0XHRpID0gaW5kZXhcblxuXHRcdGlmIGxlbiA8IDFcblxuXHRcdFx0YS5wdXNoIHRvSW5qZWN0XG5cblx0XHRcdHJldHVybiBhXG5cblx0XHR0b1B1dCA9IHRvSW5qZWN0XG5cblx0XHR0b1B1dE5leHQgPSBudWxsXG5cblx0XHRgZm9yKDsgaSA8PSBsZW47IGkrKyl7XG5cblx0XHRcdHRvUHV0TmV4dCA9IGFbaV07XG5cblx0XHRcdGFbaV0gPSB0b1B1dDtcblxuXHRcdFx0dG9QdXQgPSB0b1B1dE5leHQ7XG5cblx0XHR9YFxuXG5cdFx0IyBhW2ldID0gdG9QdXRcblxuXHRcdG51bGwiXX0=
},{"./_common":90}],92:[function(require,module,exports){
var Priority, array;

array = require('utila/scripts/js/lib/array');

module.exports = Priority = (function() {
  function Priority() {
    this._singles = [];
    this._series = [];
    this._toCancelFromEachTick = [];
  }

  Priority.prototype.onNextTick = function(fn) {
    this._singles.push(fn);
  };

  Priority.prototype.cancelNextTick = function(fn) {
    array.pluckOneItem(this._singles, fn);
  };

  Priority.prototype._callSingles = function(t) {
    var fn, toCallNow, _i, _len;
    if (this._singles.length < 1) {
      return;
    }
    toCallNow = this._singles;
    this._singles = [];
    for (_i = 0, _len = toCallNow.length; _i < _len; _i++) {
      fn = toCallNow[_i];
      fn(t);
    }
  };

  Priority.prototype.onEachTick = function(fn) {
    this._series.push(fn);
  };

  Priority.prototype.cancelEachTick = function(fn) {
    this._toCancelFromEachTick.push(fn);
  };

  Priority.prototype._callSeries = function(t) {
    var fn, toCancel, _i, _j, _len, _len1, _ref, _ref1;
    if (this._series.length < 1) {
      return;
    }
    _ref = this._toCancelFromEachTick;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      toCancel = _ref[_i];
      array.pluckOneItem(this._series, toCancel);
    }
    this._toCancelFromEachTick.length = 0;
    _ref1 = this._series;
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      fn = _ref1[_j];
      fn(t);
    }
  };

  Priority.prototype.tick = function(t) {
    this._callSingles(t);
    this._callSeries(t);
  };

  return Priority;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJpb3JpdHkuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcUHJpb3JpdHkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsV0FBQTs7QUFBQSxDQUFBLEVBQVEsRUFBUixFQUFRLHFCQUFBOztBQUVSLENBRkEsRUFFdUIsR0FBakIsQ0FBTjtDQUVjLENBQUEsQ0FBQSxlQUFBO0NBRVosQ0FBQSxDQUFZLENBQVosSUFBQTtDQUFBLENBQUEsQ0FFVyxDQUFYLEdBQUE7Q0FGQSxDQUFBLENBSXlCLENBQXpCLGlCQUFBO0NBTkQsRUFBYTs7Q0FBYixDQVFZLENBQUEsTUFBQyxDQUFiO0NBRUMsQ0FBQSxFQUFBLElBQVM7Q0FWVixFQVFZOztDQVJaLENBY2dCLENBQUEsTUFBQyxLQUFqQjtDQUVDLENBQThCLEVBQTlCLENBQUssR0FBTCxJQUFBO0NBaEJELEVBY2dCOztDQWRoQixFQW9CYyxNQUFDLEdBQWY7Q0FFQyxPQUFBLGVBQUE7Q0FBQSxFQUE2QixDQUE3QixFQUFVLEVBQVM7Q0FBbkIsV0FBQTtNQUFBO0NBQUEsRUFFWSxDQUFaLElBRkEsQ0FFQTtDQUZBLENBQUEsQ0FJWSxDQUFaLElBQUE7QUFFQSxDQUFBLFFBQUEsdUNBQUE7MEJBQUE7Q0FFQyxDQUFBLElBQUE7Q0FGRCxJQVJhO0NBcEJkLEVBb0JjOztDQXBCZCxDQWtDWSxDQUFBLE1BQUMsQ0FBYjtDQUVDLENBQUEsRUFBQSxHQUFRO0NBcENULEVBa0NZOztDQWxDWixDQXdDZ0IsQ0FBQSxNQUFDLEtBQWpCO0NBRUMsQ0FBQSxFQUFBLGlCQUFzQjtDQTFDdkIsRUF3Q2dCOztDQXhDaEIsRUE4Q2EsTUFBQyxFQUFkO0NBRUMsT0FBQSxzQ0FBQTtDQUFBLEVBQTRCLENBQTVCLEVBQVUsQ0FBUTtDQUFsQixXQUFBO01BQUE7Q0FFQTtDQUFBLFFBQUEsa0NBQUE7MkJBQUE7Q0FFQyxDQUE2QixFQUFULENBQWYsQ0FBTCxDQUFBLENBQUEsSUFBQTtDQUZELElBRkE7Q0FBQSxFQU1nQyxDQUFoQyxFQUFBLGVBQXNCO0NBRXRCO0NBQUEsUUFBQSxxQ0FBQTtzQkFBQTtDQUVDLENBQUEsSUFBQTtDQUZELElBVlk7Q0E5Q2IsRUE4Q2E7O0NBOUNiLEVBOERNLENBQU4sS0FBTztDQUVOLEdBQUEsUUFBQTtDQUFBLEdBRUEsT0FBQTtDQWxFRCxFQThETTs7Q0E5RE47O0NBSkQiLCJzb3VyY2VzQ29udGVudCI6WyJhcnJheSA9IHJlcXVpcmUgJ3V0aWxhL3NjcmlwdHMvanMvbGliL2FycmF5J1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBQcmlvcml0eVxyXG5cclxuXHRjb25zdHJ1Y3RvcjogLT5cclxuXHJcblx0XHRAX3NpbmdsZXMgPSBbXVxyXG5cclxuXHRcdEBfc2VyaWVzID0gW11cclxuXHJcblx0XHRAX3RvQ2FuY2VsRnJvbUVhY2hUaWNrID0gW11cclxuXHJcblx0b25OZXh0VGljazogKGZuKSAtPlxyXG5cclxuXHRcdEBfc2luZ2xlcy5wdXNoIGZuXHJcblxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdGNhbmNlbE5leHRUaWNrOiAoZm4pIC0+XHJcblxyXG5cdFx0YXJyYXkucGx1Y2tPbmVJdGVtIEBfc2luZ2xlcywgZm5cclxuXHJcblx0XHRyZXR1cm5cclxuXHJcblx0X2NhbGxTaW5nbGVzOiAodCkgLT5cclxuXHJcblx0XHRyZXR1cm4gaWYgQF9zaW5nbGVzLmxlbmd0aCA8IDFcclxuXHJcblx0XHR0b0NhbGxOb3cgPSBAX3NpbmdsZXNcclxuXHJcblx0XHRAX3NpbmdsZXMgPSBbXVxyXG5cclxuXHRcdGZvciBmbiBpbiB0b0NhbGxOb3dcclxuXHJcblx0XHRcdGZuIHRcclxuXHJcblx0XHRyZXR1cm5cclxuXHJcblx0b25FYWNoVGljazogKGZuKSAtPlxyXG5cclxuXHRcdEBfc2VyaWVzLnB1c2ggZm5cclxuXHJcblx0XHRyZXR1cm5cclxuXHJcblx0Y2FuY2VsRWFjaFRpY2s6IChmbikgLT5cclxuXHJcblx0XHRAX3RvQ2FuY2VsRnJvbUVhY2hUaWNrLnB1c2ggZm5cclxuXHJcblx0XHRyZXR1cm5cclxuXHJcblx0X2NhbGxTZXJpZXM6ICh0KSAtPlxyXG5cclxuXHRcdHJldHVybiBpZiBAX3Nlcmllcy5sZW5ndGggPCAxXHJcblxyXG5cdFx0Zm9yIHRvQ2FuY2VsIGluIEBfdG9DYW5jZWxGcm9tRWFjaFRpY2tcclxuXHJcblx0XHRcdGFycmF5LnBsdWNrT25lSXRlbSBAX3NlcmllcywgdG9DYW5jZWxcclxuXHJcblx0XHRAX3RvQ2FuY2VsRnJvbUVhY2hUaWNrLmxlbmd0aCA9IDBcclxuXHJcblx0XHRmb3IgZm4gaW4gQF9zZXJpZXNcclxuXHJcblx0XHRcdGZuIHRcclxuXHJcblx0XHRyZXR1cm5cclxuXHJcblx0dGljazogKHQpIC0+XHJcblxyXG5cdFx0QF9jYWxsU2luZ2xlcyB0XHJcblxyXG5cdFx0QF9jYWxsU2VyaWVzIHRcclxuXHJcblx0XHRyZXR1cm4iXX0=
},{"utila/scripts/js/lib/array":91}],93:[function(require,module,exports){
var Priority, Timing, Waiter, cancelAnimationFrame, nextTick, requestAnimationFrame, _ref;

Waiter = require('./Waiter');

nextTick = require('./nextTick');

Priority = require('./Priority');

_ref = require('./raf'), requestAnimationFrame = _ref.requestAnimationFrame, cancelAnimationFrame = _ref.cancelAnimationFrame;

module.exports = Timing = (function() {
  var self;

  self = Timing;

  Timing.requestAnimationFrame = requestAnimationFrame;

  Timing.cancelAnimationFrame = cancelAnimationFrame;

  function Timing() {
    var _this = this;
    this.nanoTime = 0;
    this.time = 0;
    this.speed = 1;
    this.tickNumber = 0;
    this._rafId = 0;
    this._waiter = new Waiter;
    this._boundLoop = function(t) {
      _this._loop(t);
    };
    this._started = false;
    this._before = new Priority;
    this._on = new Priority;
    this._after = new Priority;
  }

  Timing.prototype.nextTick = function(fn) {
    nextTick(fn);
  };

  Timing.prototype.wait = function(ms, fn) {
    var callTime;
    callTime = this.time + ms + 8;
    this._waiter.setTimeout(callTime, fn);
  };

  Timing.prototype.every = function(ms, fn) {
    this._waiter.setInterval(ms, fn, this.time);
  };

  Timing.prototype.cancelEvery = function(fn) {
    this._waiter.cancelInterval(fn);
  };

  Timing.prototype.beforeNextFrame = function(fn) {
    this._before.onNextTick(fn);
  };

  Timing.prototype.cancelBeforeNextFrame = function(fn) {
    this._before.cancelNextTick(fn);
  };

  Timing.prototype.beforeEachFrame = function(fn) {
    this._before.onEachTick(fn);
  };

  Timing.prototype.cancelBeforeEachFrame = function(fn) {
    this._before.cancelEachTick(fn);
  };

  Timing.prototype.onNextFrame = function(fn) {
    this._on.onNextTick(fn);
  };

  Timing.prototype.cancelOnNextFrame = function(fn) {
    this._on.cancelNextTick(fn);
  };

  Timing.prototype.onEachFrame = function(fn) {
    this._on.onEachTick(fn);
  };

  Timing.prototype.cancelOnEachFrame = function(fn) {
    this._on.cancelEachTick(fn);
  };

  Timing.prototype.afterNextFrame = function(fn) {
    this._after.onNextTick(fn);
  };

  Timing.prototype.cancelAfterNextFrame = function(fn) {
    this._after.cancelNextTick(fn);
  };

  Timing.prototype.afterEachFrame = function(fn) {
    this._after.onEachTick(fn);
  };

  Timing.prototype.cancelAfterEachFrame = function(fn) {
    this._after.cancelEachTick(fn);
  };

  Timing.prototype._loop = function(t) {
    this._rafId = requestAnimationFrame(this._boundLoop);
    this.tick(t);
  };

  Timing.prototype.tick = function(t) {
    this.tickNumber++;
    t = t * this.speed;
    this.nanoTime = t;
    t = parseInt(t);
    this.time = t;
    this._waiter.tick(t);
    this._before.tick(t);
    this._on.tick(t);
    this._after.tick(t);
  };

  Timing.prototype.start = function() {
    if (this._started) {
      return;
    }
    this._rafId = requestAnimationFrame(this._boundLoop);
  };

  Timing.prototype.stop = function() {
    if (!this._started) {
      return;
    }
    cancelAnimationFrame(this._rafId);
  };

  return Timing;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGltaW5nLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXFRpbWluZy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxpRkFBQTs7QUFBQSxDQUFBLEVBQVMsR0FBVCxDQUFTLEdBQUE7O0FBQ1QsQ0FEQSxFQUNXLElBQUEsQ0FBWCxJQUFXOztBQUNYLENBRkEsRUFFVyxJQUFBLENBQVgsSUFBVzs7QUFDWCxDQUhBLENBR0MsS0FBK0MsYUFIaEQsQ0FHQTs7QUFFQSxDQUxBLEVBS3VCLEdBQWpCLENBQU47Q0FFQyxHQUFBLEVBQUE7O0NBQUEsQ0FBQSxDQUFPLENBQVAsRUFBQTs7Q0FBQSxDQUVBLENBQXdCLEdBQXZCLGVBQUQ7O0NBRkEsQ0FJQSxDQUF1QixHQUF0QixjQUFEOztDQUVhLENBQUEsQ0FBQSxhQUFBO0NBRVosT0FBQSxJQUFBO0NBQUEsRUFBWSxDQUFaLElBQUE7Q0FBQSxFQUVRLENBQVI7Q0FGQSxFQUlTLENBQVQsQ0FBQTtDQUpBLEVBTWMsQ0FBZCxNQUFBO0NBTkEsRUFRVSxDQUFWLEVBQUE7QUFFVyxDQVZYLEVBVVcsQ0FBWCxFQVZBLENBVUE7Q0FWQSxFQVljLENBQWQsS0FBZSxDQUFmO0NBRUMsSUFBQyxDQUFEO0NBZEQsSUFZYztDQVpkLEVBa0JZLENBQVosQ0FsQkEsR0FrQkE7QUFFVyxDQXBCWCxFQW9CVyxDQUFYLEdBQUEsQ0FwQkE7QUFzQk8sQ0F0QlAsRUFzQkEsQ0FBQSxJQXRCQTtBQXdCVSxDQXhCVixFQXdCVSxDQUFWLEVBQUEsRUF4QkE7Q0FSRCxFQU1hOztDQU5iLENBa0NVLENBQUEsS0FBVixDQUFXO0NBRVYsQ0FBQSxFQUFBLElBQUE7Q0FwQ0QsRUFrQ1U7O0NBbENWLENBd0NNLENBQUEsQ0FBTixLQUFPO0NBRU4sT0FBQTtDQUFBLENBQVcsQ0FBQSxDQUFYLElBQUE7Q0FBQSxDQUU4QixFQUE5QixHQUFRLENBQVIsRUFBQTtDQTVDRCxFQXdDTTs7Q0F4Q04sQ0FnRE8sQ0FBQSxFQUFQLElBQVE7Q0FFUCxDQUFBLEVBQUEsR0FBUSxJQUFSO0NBbERELEVBZ0RPOztDQWhEUCxDQXNEYSxDQUFBLE1BQUMsRUFBZDtDQUVDLENBQUEsRUFBQSxHQUFRLE9BQVI7Q0F4REQsRUFzRGE7O0NBdERiLENBNERpQixDQUFBLE1BQUMsTUFBbEI7Q0FFQyxDQUFBLEVBQUEsR0FBUSxHQUFSO0NBOURELEVBNERpQjs7Q0E1RGpCLENBa0V1QixDQUFBLE1BQUMsWUFBeEI7Q0FFQyxDQUFBLEVBQUEsR0FBUSxPQUFSO0NBcEVELEVBa0V1Qjs7Q0FsRXZCLENBd0VpQixDQUFBLE1BQUMsTUFBbEI7Q0FFQyxDQUFBLEVBQUEsR0FBUSxHQUFSO0NBMUVELEVBd0VpQjs7Q0F4RWpCLENBOEV1QixDQUFBLE1BQUMsWUFBeEI7Q0FFQyxDQUFBLEVBQUEsR0FBUSxPQUFSO0NBaEZELEVBOEV1Qjs7Q0E5RXZCLENBb0ZhLENBQUEsTUFBQyxFQUFkO0NBRUMsQ0FBQSxDQUFJLENBQUosTUFBQTtDQXRGRCxFQW9GYTs7Q0FwRmIsQ0EwRm1CLENBQUEsTUFBQyxRQUFwQjtDQUVDLENBQUEsQ0FBSSxDQUFKLFVBQUE7Q0E1RkQsRUEwRm1COztDQTFGbkIsQ0FnR2EsQ0FBQSxNQUFDLEVBQWQ7Q0FFQyxDQUFBLENBQUksQ0FBSixNQUFBO0NBbEdELEVBZ0dhOztDQWhHYixDQXNHbUIsQ0FBQSxNQUFDLFFBQXBCO0NBRUMsQ0FBQSxDQUFJLENBQUosVUFBQTtDQXhHRCxFQXNHbUI7O0NBdEduQixDQTRHZ0IsQ0FBQSxNQUFDLEtBQWpCO0NBRUMsQ0FBQSxFQUFBLEVBQU8sSUFBUDtDQTlHRCxFQTRHZ0I7O0NBNUdoQixDQWtIc0IsQ0FBQSxNQUFDLFdBQXZCO0NBRUMsQ0FBQSxFQUFBLEVBQU8sUUFBUDtDQXBIRCxFQWtIc0I7O0NBbEh0QixDQXdIZ0IsQ0FBQSxNQUFDLEtBQWpCO0NBRUMsQ0FBQSxFQUFBLEVBQU8sSUFBUDtDQTFIRCxFQXdIZ0I7O0NBeEhoQixDQThIc0IsQ0FBQSxNQUFDLFdBQXZCO0NBRUMsQ0FBQSxFQUFBLEVBQU8sUUFBUDtDQWhJRCxFQThIc0I7O0NBOUh0QixFQW9JTyxFQUFQLElBQVE7Q0FFUCxFQUFVLENBQVYsRUFBQSxJQUFVLFdBQUE7Q0FBVixHQUVBO0NBeElELEVBb0lPOztDQXBJUCxFQTRJTSxDQUFOLEtBQU87QUFFTixDQUFBLENBQUEsRUFBQSxNQUFBO0NBQUEsRUFFSSxDQUFKLENBRkE7Q0FBQSxFQUlZLENBQVosSUFBQTtDQUpBLEVBTUksQ0FBSixJQUFJO0NBTkosRUFRUSxDQUFSO0NBUkEsR0FVQSxHQUFRO0NBVlIsR0FZQSxHQUFRO0NBWlIsRUFjSSxDQUFKO0NBZEEsR0FnQkEsRUFBTztDQTlKUixFQTRJTTs7Q0E1SU4sRUFrS08sRUFBUCxJQUFPO0NBRU4sR0FBQSxJQUFBO0NBQUEsV0FBQTtNQUFBO0NBQUEsRUFFVSxDQUFWLEVBQUEsSUFBVSxXQUFBO0NBdEtYLEVBa0tPOztDQWxLUCxFQTBLTSxDQUFOLEtBQU07QUFFUyxDQUFkLEdBQUEsSUFBQTtDQUFBLFdBQUE7TUFBQTtDQUFBLEdBRUEsRUFBQSxjQUFBO0NBOUtELEVBMEtNOztDQTFLTjs7Q0FQRCIsInNvdXJjZXNDb250ZW50IjpbIldhaXRlciA9IHJlcXVpcmUgJy4vV2FpdGVyJ1xubmV4dFRpY2sgPSByZXF1aXJlICcuL25leHRUaWNrJ1xuUHJpb3JpdHkgPSByZXF1aXJlICcuL1ByaW9yaXR5J1xue3JlcXVlc3RBbmltYXRpb25GcmFtZSwgY2FuY2VsQW5pbWF0aW9uRnJhbWV9ID0gcmVxdWlyZSAnLi9yYWYnXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgVGltaW5nXG5cblx0c2VsZiA9IEBcblxuXHRAcmVxdWVzdEFuaW1hdGlvbkZyYW1lOiByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcblxuXHRAY2FuY2VsQW5pbWF0aW9uRnJhbWU6IGNhbmNlbEFuaW1hdGlvbkZyYW1lXG5cblx0Y29uc3RydWN0b3I6IC0+XG5cblx0XHRAbmFub1RpbWUgPSAwXG5cblx0XHRAdGltZSA9IDBcblxuXHRcdEBzcGVlZCA9IDFcblxuXHRcdEB0aWNrTnVtYmVyID0gMFxuXG5cdFx0QF9yYWZJZCA9IDBcblxuXHRcdEBfd2FpdGVyID0gbmV3IFdhaXRlclxuXG5cdFx0QF9ib3VuZExvb3AgPSAodCkgPT5cblxuXHRcdFx0QF9sb29wIHRcblxuXHRcdFx0cmV0dXJuXG5cblx0XHRAX3N0YXJ0ZWQgPSBub1xuXG5cdFx0QF9iZWZvcmUgPSBuZXcgUHJpb3JpdHlcblxuXHRcdEBfb24gPSBuZXcgUHJpb3JpdHlcblxuXHRcdEBfYWZ0ZXIgPSBuZXcgUHJpb3JpdHlcblxuXHRuZXh0VGljazogKGZuKSAtPlxuXG5cdFx0bmV4dFRpY2sgZm5cblxuXHRcdHJldHVyblxuXG5cdHdhaXQ6IChtcywgZm4pIC0+XG5cblx0XHRjYWxsVGltZSA9IEB0aW1lICsgbXMgKyA4XG5cblx0XHRAX3dhaXRlci5zZXRUaW1lb3V0IGNhbGxUaW1lLCBmblxuXG5cdFx0cmV0dXJuXG5cblx0ZXZlcnk6IChtcywgZm4pIC0+XG5cblx0XHRAX3dhaXRlci5zZXRJbnRlcnZhbCBtcywgZm4sIEB0aW1lXG5cblx0XHRyZXR1cm5cblxuXHRjYW5jZWxFdmVyeTogKGZuKSAtPlxuXG5cdFx0QF93YWl0ZXIuY2FuY2VsSW50ZXJ2YWwgZm5cblxuXHRcdHJldHVyblxuXG5cdGJlZm9yZU5leHRGcmFtZTogKGZuKSAtPlxuXG5cdFx0QF9iZWZvcmUub25OZXh0VGljayBmblxuXG5cdFx0cmV0dXJuXG5cblx0Y2FuY2VsQmVmb3JlTmV4dEZyYW1lOiAoZm4pIC0+XG5cblx0XHRAX2JlZm9yZS5jYW5jZWxOZXh0VGljayBmblxuXG5cdFx0cmV0dXJuXG5cblx0YmVmb3JlRWFjaEZyYW1lOiAoZm4pIC0+XG5cblx0XHRAX2JlZm9yZS5vbkVhY2hUaWNrIGZuXG5cblx0XHRyZXR1cm5cblxuXHRjYW5jZWxCZWZvcmVFYWNoRnJhbWU6IChmbikgLT5cblxuXHRcdEBfYmVmb3JlLmNhbmNlbEVhY2hUaWNrIGZuXG5cblx0XHRyZXR1cm5cblxuXHRvbk5leHRGcmFtZTogKGZuKSAtPlxuXG5cdFx0QF9vbi5vbk5leHRUaWNrIGZuXG5cblx0XHRyZXR1cm5cblxuXHRjYW5jZWxPbk5leHRGcmFtZTogKGZuKSAtPlxuXG5cdFx0QF9vbi5jYW5jZWxOZXh0VGljayBmblxuXG5cdFx0cmV0dXJuXG5cblx0b25FYWNoRnJhbWU6IChmbikgLT5cblxuXHRcdEBfb24ub25FYWNoVGljayBmblxuXG5cdFx0cmV0dXJuXG5cblx0Y2FuY2VsT25FYWNoRnJhbWU6IChmbikgLT5cblxuXHRcdEBfb24uY2FuY2VsRWFjaFRpY2sgZm5cblxuXHRcdHJldHVyblxuXG5cdGFmdGVyTmV4dEZyYW1lOiAoZm4pIC0+XG5cblx0XHRAX2FmdGVyLm9uTmV4dFRpY2sgZm5cblxuXHRcdHJldHVyblxuXG5cdGNhbmNlbEFmdGVyTmV4dEZyYW1lOiAoZm4pIC0+XG5cblx0XHRAX2FmdGVyLmNhbmNlbE5leHRUaWNrIGZuXG5cblx0XHRyZXR1cm5cblxuXHRhZnRlckVhY2hGcmFtZTogKGZuKSAtPlxuXG5cdFx0QF9hZnRlci5vbkVhY2hUaWNrIGZuXG5cblx0XHRyZXR1cm5cblxuXHRjYW5jZWxBZnRlckVhY2hGcmFtZTogKGZuKSAtPlxuXG5cdFx0QF9hZnRlci5jYW5jZWxFYWNoVGljayBmblxuXG5cdFx0cmV0dXJuXG5cblx0X2xvb3A6ICh0KSAtPlxuXG5cdFx0QF9yYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSBAX2JvdW5kTG9vcFxuXG5cdFx0QHRpY2sgdFxuXG5cdFx0cmV0dXJuXG5cblx0dGljazogKHQpIC0+XG5cblx0XHRAdGlja051bWJlcisrXG5cblx0XHR0ID0gdCAqIEBzcGVlZFxuXG5cdFx0QG5hbm9UaW1lID0gdFxuXG5cdFx0dCA9IHBhcnNlSW50IHRcblxuXHRcdEB0aW1lID0gdFxuXG5cdFx0QF93YWl0ZXIudGljayB0XG5cblx0XHRAX2JlZm9yZS50aWNrIHRcblxuXHRcdEBfb24udGljayB0XG5cblx0XHRAX2FmdGVyLnRpY2sgdFxuXG5cdFx0cmV0dXJuXG5cblx0c3RhcnQ6IC0+XG5cblx0XHRyZXR1cm4gaWYgQF9zdGFydGVkXG5cblx0XHRAX3JhZklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIEBfYm91bmRMb29wXG5cblx0XHRyZXR1cm5cblxuXHRzdG9wOiAtPlxuXG5cdFx0cmV0dXJuIGlmIG5vdCBAX3N0YXJ0ZWRcblxuXHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lIEBfcmFmSWRcblxuXHRcdHJldHVybiJdfQ==
},{"./Priority":92,"./Waiter":94,"./nextTick":95,"./raf":98}],94:[function(require,module,exports){
var Waiter, array, intervalPool, shouldInjectCallItem, timeoutPool;

array = require('utila/scripts/js/lib/array');

timeoutPool = require('./pool/timeout');

intervalPool = require('./pool/interval');

module.exports = Waiter = (function() {
  function Waiter() {
    this._timeouts = [];
    this._intervals = [];
    this._toRemoveFromIntervals = [];
  }

  Waiter.prototype.setTimeout = function(callTime, fn) {
    var item;
    item = timeoutPool.give(callTime, fn);
    array.injectByCallback(this._timeouts, item, shouldInjectCallItem);
  };

  Waiter.prototype.cancelTimeout = function(fn) {
    throw Error("TODO: Waiter.cancelTimeout() to be implemented");
  };

  Waiter.prototype._callTimeouts = function(t) {
    var item;
    if (this._timeouts.length < 1) {
      return;
    }
    while (this._timeouts.length) {
      item = this._timeouts[0];
      if (item.time > t) {
        return;
      }
      timeoutPool.take(item);
      this._timeouts.shift();
      item.fn(t);
    }
  };

  Waiter.prototype.tick = function(t) {
    this._callTimeouts(t);
    this._callIntervals(t);
  };

  Waiter.prototype.setInterval = function(ms, fn, currentTimeInMs) {
    this._intervals.push(intervalPool.give(ms, currentTimeInMs, 0, fn));
  };

  Waiter.prototype.cancelInterval = function(fn) {
    this._toRemoveFromIntervals.push(fn);
  };

  Waiter.prototype._callIntervals = function(t) {
    var fnToRemove, item, properTimeToCall, _i, _j, _len, _len1, _ref, _ref1;
    if (this._intervals.length < 1) {
      return;
    }
    _ref = this._toRemoveFromIntervals;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      fnToRemove = _ref[_i];
      array.pluckByCallback(this._intervals, function(item) {
        if (item.fn === fnToRemove) {
          return true;
        }
        return false;
      });
    }
    _ref1 = this._intervals;
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      item = _ref1[_j];
      properTimeToCall = item.from + (item.timesCalled * item.every) + item.every;
      if (properTimeToCall <= t) {
        item.fn(t);
        item.timesCalled++;
      }
    }
  };

  return Waiter;

})();

shouldInjectCallItem = function(itemA, itemB, itemToInject) {
  var _ref;
  if (itemA == null) {
    if (itemToInject.time <= itemB.time) {
      return true;
    }
    return false;
  }
  if (itemB == null) {
    if (itemA.time <= itemToInject.time) {
      return true;
    }
    return false;
  }
  if ((itemA.time <= (_ref = itemToInject.time) && _ref <= itemB.time)) {
    return true;
  }
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV2FpdGVyLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXFdhaXRlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSwwREFBQTs7QUFBQSxDQUFBLEVBQVEsRUFBUixFQUFRLHFCQUFBOztBQUNSLENBREEsRUFDYyxJQUFBLElBQWQsS0FBYzs7QUFDZCxDQUZBLEVBRWUsSUFBQSxLQUFmLEtBQWU7O0FBRWYsQ0FKQSxFQUl1QixHQUFqQixDQUFOO0NBRWMsQ0FBQSxDQUFBLGFBQUE7Q0FFWixDQUFBLENBQWEsQ0FBYixLQUFBO0NBQUEsQ0FBQSxDQUVjLENBQWQsTUFBQTtDQUZBLENBQUEsQ0FJMEIsQ0FBMUIsa0JBQUE7Q0FORCxFQUFhOztDQUFiLENBUXVCLENBQVgsS0FBQSxDQUFDLENBQWI7Q0FFQyxHQUFBLElBQUE7Q0FBQSxDQUFrQyxDQUEzQixDQUFQLElBQU8sR0FBVztDQUFsQixDQUVtQyxFQUFuQyxDQUFLLElBQUwsT0FBQSxJQUFBO0NBWkQsRUFRWTs7Q0FSWixDQWdCZSxDQUFBLE1BQUMsSUFBaEI7Q0FFQyxJQUFNLEtBQUEsc0NBQUE7Q0FsQlAsRUFnQmU7O0NBaEJmLEVBb0JlLE1BQUMsSUFBaEI7Q0FFQyxHQUFBLElBQUE7Q0FBQSxFQUE4QixDQUE5QixFQUFVLEdBQVU7Q0FBcEIsV0FBQTtNQUFBO0NBRUEsRUFBQSxDQUFPLEVBQVAsR0FBZ0IsRUFBVjtDQUVMLEVBQU8sQ0FBUCxFQUFBLEdBQWtCO0NBRWxCLEVBQXNCLENBQVosRUFBVjtDQUFBLGFBQUE7UUFGQTtDQUFBLEdBSUEsRUFBQSxLQUFXO0NBSlgsR0FNQyxDQUFELENBQUEsR0FBVTtDQU5WLENBUUEsRUFBSSxFQUFKO0NBZGEsSUFJZDtDQXhCRCxFQW9CZTs7Q0FwQmYsRUFzQ00sQ0FBTixLQUFPO0NBRU4sR0FBQSxTQUFBO0NBQUEsR0FFQSxVQUFBO0NBMUNELEVBc0NNOztDQXRDTixDQThDYSxDQUFBLE1BQUMsRUFBZCxJQUFhO0NBRVosQ0FBaUIsRUFBakIsTUFBVyxFQUFrQixHQUFaO0NBaERsQixFQThDYTs7Q0E5Q2IsQ0FvRGdCLENBQUEsTUFBQyxLQUFqQjtDQUdDLENBQUEsRUFBQSxrQkFBdUI7Q0F2RHhCLEVBb0RnQjs7Q0FwRGhCLEVBMkRnQixNQUFDLEtBQWpCO0NBRUMsT0FBQSw0REFBQTtDQUFBLEVBQStCLENBQS9CLEVBQVUsSUFBVztDQUFyQixXQUFBO01BQUE7Q0FFQTtDQUFBLFFBQUEsa0NBQUE7NkJBQUE7Q0FFQyxDQUFtQyxDQUFBLENBQVosQ0FBbEIsQ0FBTCxHQUFvQyxDQUFwQyxLQUFBO0NBRUMsQ0FBYyxFQUFBLENBQVcsR0FBekIsRUFBQTtDQUFBLEdBQUEsYUFBTztVQUFQO0NBQ0EsSUFBQSxVQUFPO0NBSFIsTUFBbUM7Q0FGcEMsSUFGQTtDQVNBO0NBQUEsUUFBQSxxQ0FBQTt3QkFBQTtDQUVDLEVBQW1CLENBQUksQ0FBUSxDQUEvQixLQUFnQyxLQUFoQztDQUVBLEdBQUcsRUFBSCxVQUFHO0NBRUYsQ0FBQSxFQUFJLElBQUo7QUFFQSxDQUZBLENBQUEsRUFFSSxJQUFKLEdBQUE7UUFSRjtDQUFBLElBWGU7Q0EzRGhCLEVBMkRnQjs7Q0EzRGhCOztDQU5EOztBQXdGQSxDQXhGQSxDQXdGK0IsQ0FBUixFQUFBLElBQUMsR0FBRCxRQUF2QjtDQUVDLEdBQUEsRUFBQTtDQUFBLENBQUEsRUFBTyxTQUFQO0NBRUMsR0FBQSxDQUF3QyxPQUFkO0NBQTFCLEdBQUEsU0FBTztNQUFQO0NBRUEsSUFBQSxNQUFPO0lBSlI7Q0FNQSxDQUFBLEVBQU8sU0FBUDtDQUVDLEdBQUEsQ0FBbUIsT0FBcUI7Q0FBeEMsR0FBQSxTQUFPO01BQVA7Q0FFQSxJQUFBLE1BQU87SUFWUjtDQVlBLENBQUEsQ0FBNEIsQ0FBZCxDQUFLLE9BQXFCO0NBQXhDLEdBQUEsT0FBTztJQVpQO0NBY0EsSUFBQSxJQUFPO0NBaEJlIiwic291cmNlc0NvbnRlbnQiOlsiYXJyYXkgPSByZXF1aXJlICd1dGlsYS9zY3JpcHRzL2pzL2xpYi9hcnJheSdcclxudGltZW91dFBvb2wgPSByZXF1aXJlICcuL3Bvb2wvdGltZW91dCdcclxuaW50ZXJ2YWxQb29sID0gcmVxdWlyZSAnLi9wb29sL2ludGVydmFsJ1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBXYWl0ZXJcclxuXHJcblx0Y29uc3RydWN0b3I6IC0+XHJcblxyXG5cdFx0QF90aW1lb3V0cyA9IFtdXHJcblxyXG5cdFx0QF9pbnRlcnZhbHMgPSBbXVxyXG5cclxuXHRcdEBfdG9SZW1vdmVGcm9tSW50ZXJ2YWxzID0gW11cclxuXHJcblx0c2V0VGltZW91dDogKGNhbGxUaW1lLCBmbikgLT5cclxuXHJcblx0XHRpdGVtID0gdGltZW91dFBvb2wuZ2l2ZSBjYWxsVGltZSwgZm5cclxuXHJcblx0XHRhcnJheS5pbmplY3RCeUNhbGxiYWNrIEBfdGltZW91dHMsIGl0ZW0sIHNob3VsZEluamVjdENhbGxJdGVtXHJcblxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdGNhbmNlbFRpbWVvdXQ6IChmbikgLT5cclxuXHJcblx0XHR0aHJvdyBFcnJvciBcIlRPRE86IFdhaXRlci5jYW5jZWxUaW1lb3V0KCkgdG8gYmUgaW1wbGVtZW50ZWRcIlxyXG5cclxuXHRfY2FsbFRpbWVvdXRzOiAodCkgLT5cclxuXHJcblx0XHRyZXR1cm4gaWYgQF90aW1lb3V0cy5sZW5ndGggPCAxXHJcblxyXG5cdFx0d2hpbGUgQF90aW1lb3V0cy5sZW5ndGhcclxuXHJcblx0XHRcdGl0ZW0gPSBAX3RpbWVvdXRzWzBdXHJcblxyXG5cdFx0XHRyZXR1cm4gaWYgaXRlbS50aW1lID4gdFxyXG5cclxuXHRcdFx0dGltZW91dFBvb2wudGFrZSBpdGVtXHJcblxyXG5cdFx0XHRAX3RpbWVvdXRzLnNoaWZ0KClcclxuXHJcblx0XHRcdGl0ZW0uZm4gdFxyXG5cclxuXHRcdHJldHVyblxyXG5cclxuXHR0aWNrOiAodCkgLT5cclxuXHJcblx0XHRAX2NhbGxUaW1lb3V0cyB0XHJcblxyXG5cdFx0QF9jYWxsSW50ZXJ2YWxzIHRcclxuXHJcblx0XHRyZXR1cm5cclxuXHJcblx0c2V0SW50ZXJ2YWw6IChtcywgZm4sIGN1cnJlbnRUaW1lSW5NcykgLT5cclxuXHJcblx0XHRAX2ludGVydmFscy5wdXNoIGludGVydmFsUG9vbC5naXZlIG1zLCBjdXJyZW50VGltZUluTXMsIDAsIGZuXHJcblxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdGNhbmNlbEludGVydmFsOiAoZm4pIC0+XHJcblxyXG5cdFx0IyB0b2RvOiBtYWtlIHRoaXMgSUQgYmFzZWRcclxuXHRcdEBfdG9SZW1vdmVGcm9tSW50ZXJ2YWxzLnB1c2ggZm5cclxuXHJcblx0XHRyZXR1cm5cclxuXHJcblx0X2NhbGxJbnRlcnZhbHM6ICh0KSAtPlxyXG5cclxuXHRcdHJldHVybiBpZiBAX2ludGVydmFscy5sZW5ndGggPCAxXHJcblxyXG5cdFx0Zm9yIGZuVG9SZW1vdmUgaW4gQF90b1JlbW92ZUZyb21JbnRlcnZhbHNcclxuXHJcblx0XHRcdGFycmF5LnBsdWNrQnlDYWxsYmFjayBAX2ludGVydmFscywgKGl0ZW0pIC0+XHJcblxyXG5cdFx0XHRcdHJldHVybiB5ZXMgaWYgaXRlbS5mbiBpcyBmblRvUmVtb3ZlXHJcblx0XHRcdFx0cmV0dXJuIG5vXHJcblxyXG5cdFx0Zm9yIGl0ZW0gaW4gQF9pbnRlcnZhbHNcclxuXHJcblx0XHRcdHByb3BlclRpbWVUb0NhbGwgPSBpdGVtLmZyb20gKyAoaXRlbS50aW1lc0NhbGxlZCAqIGl0ZW0uZXZlcnkpICsgaXRlbS5ldmVyeVxyXG5cclxuXHRcdFx0aWYgcHJvcGVyVGltZVRvQ2FsbCA8PSB0XHJcblxyXG5cdFx0XHRcdGl0ZW0uZm4gdFxyXG5cclxuXHRcdFx0XHRpdGVtLnRpbWVzQ2FsbGVkKytcclxuXHJcblx0XHRyZXR1cm5cclxuXHJcbnNob3VsZEluamVjdENhbGxJdGVtID0gKGl0ZW1BLCBpdGVtQiwgaXRlbVRvSW5qZWN0KSAtPlxyXG5cclxuXHR1bmxlc3MgaXRlbUE/XHJcblxyXG5cdFx0cmV0dXJuIHllcyBpZiBpdGVtVG9JbmplY3QudGltZSA8PSBpdGVtQi50aW1lXHJcblxyXG5cdFx0cmV0dXJuIG5vXHJcblxyXG5cdHVubGVzcyBpdGVtQj9cclxuXHJcblx0XHRyZXR1cm4geWVzIGlmIGl0ZW1BLnRpbWUgPD0gaXRlbVRvSW5qZWN0LnRpbWVcclxuXHJcblx0XHRyZXR1cm4gbm9cclxuXHJcblx0cmV0dXJuIHllcyBpZiBpdGVtQS50aW1lIDw9IGl0ZW1Ub0luamVjdC50aW1lIDw9IGl0ZW1CLnRpbWVcclxuXHJcblx0cmV0dXJuIG5vIl19
},{"./pool/interval":96,"./pool/timeout":97,"utila/scripts/js/lib/array":91}],95:[function(require,module,exports){
var nextTick;

module.exports = nextTick = (function() {
  if ((typeof process !== "undefined" && process !== null) && typeof process.nextTick === 'function') {
    return process.nextTick;
  }
  if (typeof setImmediate === 'function') {
    return function(cb) {
      return setImmediate(cb);
    };
  }
  return function(cb) {
    return setTimeout(cb, 0);
  };
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmV4dFRpY2suanMiLCJzb3VyY2VSb290IjoiLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcbmV4dFRpY2suY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsSUFBQTs7QUFBQSxDQUFBLEVBQWlCLEdBQVgsQ0FBTixDQUFpQixDQUFjO0FBRWQsQ0FBaEIsQ0FBQSxFQUFHLENBQXdDLENBQTNCLENBQWMsQ0FBZCxFQUFoQiwwQ0FBRztDQUVGLE1BQWMsQ0FBZCxHQUFPO0lBRlI7QUFJRyxDQUFILENBQUEsRUFBRyxDQUF1QixDQUF2QixJQUFILEVBQUc7Q0FFRixDQUFPLENBQUEsTUFBQyxFQUFEO0NBQXFCLENBQWIsVUFBQSxDQUFBO0NBQWYsSUFBTztJQU5SO0NBU0EsQ0FBTyxDQUFBLE1BQUE7Q0FBbUIsQ0FBWCxRQUFBLENBQUE7Q0FBZixFQUFPO0NBWHVCIiwic291cmNlc0NvbnRlbnQiOlsiIyBodHRwczovL2dpdGh1Yi5jb20vbWVkaWtvby9uZXh0LXRpY2svYmxvYi9tYXN0ZXIvbGliL25leHQtdGljay5qc1xyXG5tb2R1bGUuZXhwb3J0cyA9IG5leHRUaWNrID0gZG8gLT5cclxuXHJcblx0aWYgcHJvY2Vzcz8gYW5kIHR5cGVvZiBwcm9jZXNzLm5leHRUaWNrIGlzICdmdW5jdGlvbidcclxuXHJcblx0XHRyZXR1cm4gcHJvY2Vzcy5uZXh0VGlja1xyXG5cclxuXHRpZiB0eXBlb2Ygc2V0SW1tZWRpYXRlIGlzICdmdW5jdGlvbidcclxuXHJcblx0XHRyZXR1cm4gKGNiKSAtPiBzZXRJbW1lZGlhdGUgY2JcclxuXHJcblx0IyB0b2RvOiB0aGVyZSB3YXMgYSBwb2x5ZmlsbCBmb3IgY2hyb21lIHRoYXQgc2ltdWxhdGVkIHNldEltbWVkaWF0ZS4uLlxyXG5cdHJldHVybiAoY2IpIC0+IHNldFRpbWVvdXQgY2IsIDAiXX0=
},{}],96:[function(require,module,exports){
var intervalPool;

module.exports = intervalPool = {
  _pool: [],
  _getNew: function(every, from, timesCalled, fn) {
    return {
      every: every,
      from: from,
      timesCalled: timesCalled,
      fn: fn
    };
  },
  give: function(every, from, timesCalled, fn) {
    var item;
    if (intervalPool._pool.length > 0) {
      item = intervalPool._pool.pop();
      item.every = every;
      item.from = from;
      item.timesCalled = timesCalled;
      item.fn = fn;
      return item;
    } else {
      return intervalPool._getNew(every, from, timesCalled, fn);
    }
  },
  take: function(item) {
    intervalPool._pool.push(item);
    return null;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZXJ2YWwuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXHBvb2xcXGludGVydmFsLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLFFBQUE7O0FBQUEsQ0FBQSxFQUFpQixHQUFYLENBQU4sS0FBaUI7Q0FFaEIsQ0FBQSxHQUFBO0NBQUEsQ0FFQSxDQUFTLENBQUEsQ0FBQSxFQUFULEVBQVUsRUFBRDtXQUVSO0NBQUEsQ0FDUSxHQUFQLENBQUE7Q0FERCxDQUVPLEVBQU4sRUFBQTtDQUZELENBR2MsSUFBYixLQUFBO0NBSEQsQ0FJQyxJQUFBO0NBTk87Q0FGVCxFQUVTO0NBRlQsQ0FXQSxDQUFNLENBQU4sQ0FBTSxJQUFDLEVBQUQ7Q0FFTCxHQUFBLElBQUE7Q0FBQSxFQUErQixDQUEvQixDQUFxQixDQUFsQixNQUFZO0NBRWQsRUFBTyxDQUFQLENBQXlCLENBQXpCLE1BQW1CO0NBQW5CLEVBRWEsQ0FBVCxDQUFKLENBQUE7Q0FGQSxFQUdZLENBQVIsRUFBSjtDQUhBLEVBSW1CLENBQWYsRUFBSixLQUFBO0NBSkEsQ0FLQSxDQUFVLENBQU4sRUFBSjtDQUVBLEdBQUEsU0FBTztNQVRSO0NBYUMsQ0FBbUMsRUFBNUIsQ0FBQSxFQUFBLElBQUEsQ0FBWSxDQUFaO01BZkg7Q0FYTixFQVdNO0NBWE4sQ0E0QkEsQ0FBTSxDQUFOLEtBQU87Q0FFTixHQUFBLENBQWtCLE9BQU47Q0FGUCxVQUlMO0NBaENELEVBNEJNO0NBOUJQLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGludGVydmFsUG9vbCA9XG5cblx0X3Bvb2w6IFtdXG5cblx0X2dldE5ldzogKGV2ZXJ5LCBmcm9tLCB0aW1lc0NhbGxlZCwgZm4pIC0+XG5cblx0XHR7XG5cdFx0XHRldmVyeTogZXZlcnlcblx0XHRcdGZyb206IGZyb21cblx0XHRcdHRpbWVzQ2FsbGVkOiB0aW1lc0NhbGxlZFxuXHRcdFx0Zm46IGZuXG5cdFx0fVxuXG5cdGdpdmU6IChldmVyeSwgZnJvbSwgdGltZXNDYWxsZWQsIGZuKSAtPlxuXG5cdFx0aWYgaW50ZXJ2YWxQb29sLl9wb29sLmxlbmd0aCA+IDBcblxuXHRcdFx0aXRlbSA9IGludGVydmFsUG9vbC5fcG9vbC5wb3AoKVxuXG5cdFx0XHRpdGVtLmV2ZXJ5ID0gZXZlcnlcblx0XHRcdGl0ZW0uZnJvbSA9IGZyb21cblx0XHRcdGl0ZW0udGltZXNDYWxsZWQgPSB0aW1lc0NhbGxlZFxuXHRcdFx0aXRlbS5mbiA9IGZuXG5cblx0XHRcdHJldHVybiBpdGVtXG5cblx0XHRlbHNlXG5cblx0XHRcdHJldHVybiBpbnRlcnZhbFBvb2wuX2dldE5ldyBldmVyeSwgZnJvbSwgdGltZXNDYWxsZWQsIGZuXG5cblx0dGFrZTogKGl0ZW0pIC0+XG5cblx0XHRpbnRlcnZhbFBvb2wuX3Bvb2wucHVzaCBpdGVtXG5cblx0XHRudWxsIl19
},{}],97:[function(require,module,exports){
var timeoutPool;

module.exports = timeoutPool = {
  _pool: [],
  _getNew: function(time, fn) {
    return {
      time: time,
      fn: fn
    };
  },
  give: function(time, fn) {
    var item;
    if (this._pool.length > 0) {
      item = this._pool.pop();
      item.time = time;
      item.fn = fn;
      return item;
    } else {
      return this._getNew(time, fn);
    }
  },
  take: function(item) {
    this._pool.push(item);
    return null;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZW91dC5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxccG9vbFxcdGltZW91dC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxPQUFBOztBQUFBLENBQUEsRUFBaUIsR0FBWCxDQUFOLElBQWlCO0NBRWhCLENBQUEsR0FBQTtDQUFBLENBRUEsQ0FBUyxDQUFBLEdBQVQsRUFBVTtXQUVUO0NBQUEsQ0FDTyxFQUFOLEVBQUE7Q0FERCxDQUVDLElBQUE7Q0FKTztDQUZULEVBRVM7Q0FGVCxDQVNBLENBQU0sQ0FBTixLQUFPO0NBRU4sR0FBQSxJQUFBO0NBQUEsRUFBbUIsQ0FBbkIsQ0FBUyxDQUFOO0NBRUYsRUFBTyxDQUFQLENBQWEsQ0FBYjtDQUFBLEVBRVksQ0FBUixFQUFKO0NBRkEsQ0FJQSxDQUFVLENBQU4sRUFBSjtDQUVBLEdBQUEsU0FBTztNQVJSO0NBWUMsQ0FBc0IsRUFBZCxHQUFELE1BQUE7TUFkSDtDQVROLEVBU007Q0FUTixDQXlCQSxDQUFNLENBQU4sS0FBTztDQUVOLEdBQUEsQ0FBTTtDQUZELFVBSUw7Q0E3QkQsRUF5Qk07Q0EzQlAsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gdGltZW91dFBvb2wgPVxuXG5cdF9wb29sOiBbXVxuXG5cdF9nZXROZXc6ICh0aW1lLCBmbikgLT5cblxuXHRcdHtcblx0XHRcdHRpbWU6IHRpbWVcblx0XHRcdGZuOiBmblxuXHRcdH1cblxuXHRnaXZlOiAodGltZSwgZm4pIC0+XG5cblx0XHRpZiBAX3Bvb2wubGVuZ3RoID4gMFxuXG5cdFx0XHRpdGVtID0gQF9wb29sLnBvcCgpXG5cblx0XHRcdGl0ZW0udGltZSA9IHRpbWVcblxuXHRcdFx0aXRlbS5mbiA9IGZuXG5cblx0XHRcdHJldHVybiBpdGVtXG5cblx0XHRlbHNlXG5cblx0XHRcdHJldHVybiBAX2dldE5ldyB0aW1lLCBmblxuXG5cdHRha2U6IChpdGVtKSAtPlxuXG5cdFx0QF9wb29sLnB1c2ggaXRlbVxuXG5cdFx0bnVsbCJdfQ==
},{}],98:[function(require,module,exports){
module.exports = {
  requestAnimationFrame: (function() {
    if (window.requestAnimationFrame) {
      return window.requestAnimationFrame.bind(window);
    }
    if (window.mozRequestAnimationFrame) {
      return window.mozRequestAnimationFrame.bind(window);
    }
    if (window.webkitRequestAnimationFrame) {
      return window.webkitRequestAnimationFrame.bind(window);
    }
    throw Error("This environment does not support requestAnimationFrame, and no, we're not gonna fall back to setTimeout()!");
  })(),
  cancelAnimationFrame: (function() {
    if (window.cancelAnimationFrame) {
      return window.cancelAnimationFrame.bind(window);
    }
    if (window.mozCancelAnimationFrame) {
      return window.mozCancelAnimationFrame.bind(window);
    }
    if (window.webkitCancelAnimationFrame) {
      return window.webkitCancelAnimationFrame.bind(window);
    }
    throw Error("This environment does not support requestAnimationFrame, and no, we're not gonna fall back to setTimeout()!");
  })()
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFmLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXHJhZi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsQ0FBTyxFQUVOLEdBRkssQ0FBTjtDQUVDLENBQUEsQ0FBMEIsTUFBQSxZQUExQjtDQUVDLEdBQUEsRUFBMEQsZUFBMUQ7Q0FBQSxHQUFPLEVBQU0sT0FBTixRQUE0QjtNQUFuQztDQUVBLEdBQUEsRUFBNkQsa0JBQTdEO0NBQUEsR0FBTyxFQUFNLE9BQU4sV0FBK0I7TUFGdEM7Q0FJQSxHQUFBLEVBQWdFLHFCQUFoRTtDQUFBLEdBQU8sRUFBTSxPQUFOLGNBQWtDO01BSnpDO0NBTUEsSUFBTSxLQUFBLG1HQUFBO0NBUm1CLEVBQUE7Q0FBMUIsQ0FVQSxDQUF5QixNQUFBLFdBQXpCO0NBRUMsR0FBQSxFQUF5RCxjQUF6RDtDQUFBLEdBQU8sRUFBTSxPQUFOLE9BQTJCO01BQWxDO0NBRUEsR0FBQSxFQUE0RCxpQkFBNUQ7Q0FBQSxHQUFPLEVBQU0sT0FBTixVQUE4QjtNQUZyQztDQUlBLEdBQUEsRUFBK0Qsb0JBQS9EO0NBQUEsR0FBTyxFQUFNLE9BQU4sYUFBaUM7TUFKeEM7Q0FNQSxJQUFNLEtBQUEsbUdBQUE7Q0FSa0IsRUFBQTtDQVoxQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPVxyXG5cclxuXHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWU6IGRvIC0+XHJcblxyXG5cdFx0cmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpIGlmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcclxuXHJcblx0XHRyZXR1cm4gd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdykgaWYgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZVxyXG5cclxuXHRcdHJldHVybiB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KSBpZiB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lXHJcblxyXG5cdFx0dGhyb3cgRXJyb3IgXCJUaGlzIGVudmlyb25tZW50IGRvZXMgbm90IHN1cHBvcnQgcmVxdWVzdEFuaW1hdGlvbkZyYW1lLCBhbmQgbm8sIHdlJ3JlIG5vdCBnb25uYSBmYWxsIGJhY2sgdG8gc2V0VGltZW91dCgpIVwiXHJcblxyXG5cdGNhbmNlbEFuaW1hdGlvbkZyYW1lOiBkbyAtPlxyXG5cclxuXHRcdHJldHVybiB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpIGlmIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZVxyXG5cclxuXHRcdHJldHVybiB3aW5kb3cubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpIGlmIHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZVxyXG5cclxuXHRcdHJldHVybiB3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpIGlmIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZVxyXG5cclxuXHRcdHRocm93IEVycm9yIFwiVGhpcyBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IHJlcXVlc3RBbmltYXRpb25GcmFtZSwgYW5kIG5vLCB3ZSdyZSBub3QgZ29ubmEgZmFsbCBiYWNrIHRvIHNldFRpbWVvdXQoKSFcIiJdfQ==
},{}],99:[function(require,module,exports){
/*
 * Source: http://stackoverflow.com/a/11697909/607997
 * http://codepen.io/onedayitwillmake/details/EHDmw
 * by Mario Gonzalez
*/

/*
 * Solver for cubic bezier curve with implicit control points at (0,0) and (1.0, 1.0)
*/

var UnitBezier;

module.exports = UnitBezier = (function() {
  function UnitBezier(p1x, p1y, p2x, p2y) {
    this.cx = 3.0 * p1x;
    this.bx = 3.0 * (p2x - p1x) - this.cx;
    this.ax = 1.0 - this.cx - this.bx;
    this.cy = 3.0 * p1y;
    this.by = 3.0 * (p2y - p1y) - this.cy;
    this.ay = 1.0 - this.cy - this.by;
  }

  UnitBezier.epsilon = 1e-6;

  UnitBezier.prototype.sampleCurveX = function(t) {
    return ((this.ax * t + this.bx) * t + this.cx) * t;
  };

  UnitBezier.prototype.sampleCurveY = function(t) {
    return ((this.ay * t + this.by) * t + this.cy) * t;
  };

  UnitBezier.prototype.sampleCurveDerivativeX = function(t) {
    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;
  };

  UnitBezier.prototype.solveCurveX = function(x, epsilon) {
    var d2, i, t0, t1, t2, x2;
    t0 = void 0;
    t1 = void 0;
    t2 = void 0;
    x2 = void 0;
    d2 = void 0;
    i = void 0;
    t2 = x;
    i = 0;
    while (i < 8) {
      x2 = this.sampleCurveX(t2) - x;
      if (Math.abs(x2) < epsilon) {
        return t2;
      }
      d2 = this.sampleCurveDerivativeX(t2);
      if (Math.abs(d2) < epsilon) {
        break;
      }
      t2 = t2 - x2 / d2;
      i++;
    }
    t0 = 0.0;
    t1 = 1.0;
    t2 = x;
    if (t2 < t0) {
      return t0;
    }
    if (t2 > t1) {
      return t1;
    }
    while (t0 < t1) {
      x2 = this.sampleCurveX(t2);
      if (Math.abs(x2 - x) < epsilon) {
        return t2;
      }
      if (x > x2) {
        t0 = t2;
      } else {
        t1 = t2;
      }
      t2 = (t1 - t0) * .5 + t0;
    }
    return t2;
  };

  UnitBezier.prototype.solve = function(x, epsilon) {
    return this.sampleCurveY(this.solveCurveX(x, epsilon));
  };

  return UnitBezier;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVW5pdEJlemllci5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcbGliXFxVbml0QmV6aWVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FBQTtDQU1BOzs7Q0FOQTtDQUFBLEdBQUEsTUFBQTs7QUFTQSxDQVRBLEVBU3VCLEdBQWpCLENBQU47Q0FFYyxDQUFBLENBQUEsaUJBQUM7Q0FJYixDQUFBLENBQU0sQ0FBTjtDQUFBLENBQ0EsQ0FBTSxDQUFOO0NBREEsQ0FFQSxDQUFNLENBQU47Q0FGQSxDQUdBLENBQU0sQ0FBTjtDQUhBLENBSUEsQ0FBTSxDQUFOO0NBSkEsQ0FLQSxDQUFNLENBQU47Q0FURCxFQUFhOztDQUFiLENBV0EsQ0FBVSxDQVhWLEdBV0EsR0FBQzs7Q0FYRCxFQWFjLE1BQUMsR0FBZjtDQUVFLENBQUMsQ0FBTSxDQUFMLE9BQUg7Q0FmRCxFQWFjOztDQWJkLEVBaUJjLE1BQUMsR0FBZjtDQUVFLENBQUMsQ0FBTSxDQUFMLE9BQUg7Q0FuQkQsRUFpQmM7O0NBakJkLEVBcUJ3QixNQUFDLGFBQXpCO0NBRUUsQ0FBQSxDQUFBLENBQU8sT0FBUjtDQXZCRCxFQXFCd0I7O0NBckJ4QixDQXlCaUIsQ0FBSixJQUFBLEVBQUMsRUFBZDtDQUVDLE9BQUEsYUFBQTtDQUFBLENBQUEsQ0FBSyxDQUFMLEVBQUE7Q0FBQSxDQUNBLENBQUssQ0FBTCxFQURBO0NBQUEsQ0FFQSxDQUFLLENBQUwsRUFGQTtDQUFBLENBR0EsQ0FBSyxDQUFMLEVBSEE7Q0FBQSxDQUlBLENBQUssQ0FBTCxFQUpBO0NBQUEsRUFLSSxDQUFKLEVBTEE7Q0FBQSxDQVFBLENBQUssQ0FBTDtDQVJBLEVBU0ksQ0FBSjtDQUVBLEVBQVUsUUFBSjtDQUVMLENBQUEsQ0FBSyxDQUFDLEVBQU4sTUFBSztDQUNMLENBQWMsQ0FBQSxDQUFBLEVBQWQsQ0FBQTtDQUFBLENBQUEsYUFBTztRQURQO0NBQUEsQ0FHQSxDQUFLLENBQUMsRUFBTixnQkFBSztDQUNMLENBQVUsQ0FBQSxDQUFBLEVBQVYsQ0FBQTtDQUFBLGFBQUE7UUFKQTtDQUFBLENBTUEsQ0FBSyxHQUFMO0FBQ0EsQ0FQQSxDQUFBLElBT0E7Q0FwQkQsSUFXQTtDQVhBLENBdUJBLENBQUssQ0FBTDtDQXZCQSxDQXdCQSxDQUFLLENBQUw7Q0F4QkEsQ0F5QkEsQ0FBSyxDQUFMO0NBRUEsQ0FBYyxDQUFLLENBQW5CO0NBQUEsQ0FBQSxXQUFPO01BM0JQO0NBNkJBLENBQWMsQ0FBSyxDQUFuQjtDQUFBLENBQUEsV0FBTztNQTdCUDtDQStCQSxDQUFNLENBQUssUUFBTDtDQUVMLENBQUEsQ0FBSyxDQUFDLEVBQU4sTUFBSztDQUVMLENBQXNCLENBQVQsQ0FBQSxFQUFiLENBQUE7Q0FBQSxDQUFBLGFBQU87UUFGUDtDQUlBLENBQUEsQ0FBTyxDQUFKLEVBQUg7Q0FFQyxDQUFBLENBQUssS0FBTDtNQUZELEVBQUE7Q0FNQyxDQUFBLENBQUssS0FBTDtRQVZEO0NBQUEsQ0FZQSxDQUFLLEdBQUw7Q0E3Q0QsSUErQkE7Q0FqQ1ksVUFrRFo7Q0EzRUQsRUF5QmE7O0NBekJiLENBK0VXLENBQUosRUFBUCxFQUFPLEVBQUM7Q0FFTixDQUE2QixFQUE3QixHQUFhLElBQWQsQ0FBQTtDQWpGRCxFQStFTzs7Q0EvRVA7O0NBWEQiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcclxuICogU291cmNlOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMTY5NzkwOS82MDc5OTdcclxuICogaHR0cDovL2NvZGVwZW4uaW8vb25lZGF5aXR3aWxsbWFrZS9kZXRhaWxzL0VIRG13XHJcbiAqIGJ5IE1hcmlvIEdvbnphbGV6XHJcbiMjI1xyXG5cclxuIyMjXHJcbiAqIFNvbHZlciBmb3IgY3ViaWMgYmV6aWVyIGN1cnZlIHdpdGggaW1wbGljaXQgY29udHJvbCBwb2ludHMgYXQgKDAsMCkgYW5kICgxLjAsIDEuMClcclxuIyMjXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgVW5pdEJlemllclxyXG5cclxuXHRjb25zdHJ1Y3RvcjogKHAxeCwgcDF5LCBwMngsIHAyeSkgLT5cclxuXHJcblx0XHQjIHByZS1jYWxjdWxhdGUgdGhlIHBvbHlub21pYWwgY29lZmZpY2llbnRzXHJcblx0XHQjIEZpcnN0IGFuZCBsYXN0IGNvbnRyb2wgcG9pbnRzIGFyZSBpbXBsaWVkIHRvIGJlICgwLDApIGFuZCAoMS4wLCAxLjApXHJcblx0XHRAY3ggPSAzLjAgKiBwMXhcclxuXHRcdEBieCA9IDMuMCAqIChwMnggLSBwMXgpIC0gQGN4XHJcblx0XHRAYXggPSAxLjAgLSBAY3ggLSBAYnhcclxuXHRcdEBjeSA9IDMuMCAqIHAxeVxyXG5cdFx0QGJ5ID0gMy4wICogKHAyeSAtIHAxeSkgLSBAY3lcclxuXHRcdEBheSA9IDEuMCAtIEBjeSAtIEBieVxyXG5cclxuXHRAZXBzaWxvbjogMWUtNiAjIFByZWNpc2lvblxyXG5cclxuXHRzYW1wbGVDdXJ2ZVg6ICh0KSAtPlxyXG5cclxuXHRcdCgoQGF4ICogdCArIEBieCkgKiB0ICsgQGN4KSAqIHRcclxuXHJcblx0c2FtcGxlQ3VydmVZOiAodCkgLT5cclxuXHJcblx0XHQoKEBheSAqIHQgKyBAYnkpICogdCArIEBjeSkgKiB0XHJcblxyXG5cdHNhbXBsZUN1cnZlRGVyaXZhdGl2ZVg6ICh0KSAtPlxyXG5cclxuXHRcdCgzLjAgKiBAYXggKiB0ICsgMi4wICogQGJ4KSAqIHQgKyBAY3hcclxuXHJcblx0c29sdmVDdXJ2ZVg6ICh4LCBlcHNpbG9uKSAtPlxyXG5cclxuXHRcdHQwID0gdW5kZWZpbmVkXHJcblx0XHR0MSA9IHVuZGVmaW5lZFxyXG5cdFx0dDIgPSB1bmRlZmluZWRcclxuXHRcdHgyID0gdW5kZWZpbmVkXHJcblx0XHRkMiA9IHVuZGVmaW5lZFxyXG5cdFx0aSA9IHVuZGVmaW5lZFxyXG5cclxuXHRcdCMgRmlyc3QgdHJ5IGEgZmV3IGl0ZXJhdGlvbnMgb2YgTmV3dG9uJ3MgbWV0aG9kIC0tIG5vcm1hbGx5IHZlcnkgZmFzdC5cclxuXHRcdHQyID0geFxyXG5cdFx0aSA9IDBcclxuXHJcblx0XHR3aGlsZSBpIDwgOFxyXG5cclxuXHRcdFx0eDIgPSBAc2FtcGxlQ3VydmVYKHQyKSAtIHhcclxuXHRcdFx0cmV0dXJuIHQyICBpZiBNYXRoLmFicyh4MikgPCBlcHNpbG9uXHJcblxyXG5cdFx0XHRkMiA9IEBzYW1wbGVDdXJ2ZURlcml2YXRpdmVYKHQyKVxyXG5cdFx0XHRicmVhayAgaWYgTWF0aC5hYnMoZDIpIDwgZXBzaWxvblxyXG5cclxuXHRcdFx0dDIgPSB0MiAtIHgyIC8gZDJcclxuXHRcdFx0aSsrXHJcblxyXG5cdFx0IyBObyBzb2x1dGlvbiBmb3VuZCAtIHVzZSBiaS1zZWN0aW9uXHJcblx0XHR0MCA9IDAuMFxyXG5cdFx0dDEgPSAxLjBcclxuXHRcdHQyID0geFxyXG5cclxuXHRcdHJldHVybiB0MCAgaWYgdDIgPCB0MFxyXG5cclxuXHRcdHJldHVybiB0MSAgaWYgdDIgPiB0MVxyXG5cclxuXHRcdHdoaWxlIHQwIDwgdDFcclxuXHJcblx0XHRcdHgyID0gQHNhbXBsZUN1cnZlWCh0MilcclxuXHJcblx0XHRcdHJldHVybiB0MiBpZiBNYXRoLmFicyh4MiAtIHgpIDwgZXBzaWxvblxyXG5cclxuXHRcdFx0aWYgeCA+IHgyXHJcblxyXG5cdFx0XHRcdHQwID0gdDJcclxuXHJcblx0XHRcdGVsc2VcclxuXHJcblx0XHRcdFx0dDEgPSB0MlxyXG5cclxuXHRcdFx0dDIgPSAodDEgLSB0MCkgKiAuNSArIHQwXHJcblxyXG5cdFx0IyBHaXZlIHVwXHJcblx0XHR0MlxyXG5cclxuXHJcblx0IyBGaW5kIG5ldyBUIGFzIGEgZnVuY3Rpb24gb2YgWSBhbG9uZyBjdXJ2ZSBYXHJcblx0c29sdmU6ICh4LCBlcHNpbG9uKSAtPlxyXG5cclxuXHRcdEBzYW1wbGVDdXJ2ZVkgQHNvbHZlQ3VydmVYKHgsIGVwc2lsb24pIl19
},{}],100:[function(require,module,exports){
var UnitBezier, timingFunction;

UnitBezier = require('./UnitBezier');

module.exports = timingFunction = {
  linear: function(p) {
    return p;
  },
  define: function(name, func) {
    var _func, _name;
    if (typeof name === 'object') {
      for (_name in name) {
        _func = name[_name];
        timingFunction.define(_name, _func);
      }
      return;
    }
    return timingFunction[name] = {
      easeIn: func,
      easeOut: function(p) {
        return 1 - func(1 - p);
      },
      easeInOut: function(p) {
        if (p <= 0.5) {
          return 0.5 * func(p * 2);
        } else {
          return 0.5 * (2 - func(2 * (1 - p)));
        }
      }
    };
  },
  get: function(func) {
    var b, f, part, parts, _i, _len;
    if (func instanceof Function) {
      return func;
    } else if ((arguments[1] != null) && (arguments[2] != null) && (arguments[3] != null)) {
      b = new UnitBezier(arguments[0], arguments[1], arguments[2], arguments[3]);
      return function(p) {
        return b.solve(p, UnitBezier.epsilon);
      };
    }
    if (typeof func !== 'string') {
      throw Error("func should either be a function or a string, like cubic.easeOut");
    }
    parts = func.split('.');
    f = timingFunction;
    for (_i = 0, _len = parts.length; _i < _len; _i++) {
      part = parts[_i];
      f = f[part];
    }
    if (typeof f === 'undefined') {
      throw Error("Cannot find easing function `" + func + "`");
    }
    return f;
  }
};

timingFunction.define({
  quad: function(p) {
    return Math.pow(p, 2);
  },
  cubic: function(p) {
    return Math.pow(p, 3);
  },
  quart: function(p) {
    return Math.pow(p, 4);
  },
  quint: function(p) {
    return Math.pow(p, 5);
  },
  expo: function(p) {
    return Math.pow(2, 8 * (p - 1));
  },
  circ: function(p) {
    return 1 - Math.sin(Math.cos(p));
  },
  sine: function(p) {
    return 1 - Math.cos(p * Math.PI / 2);
  }
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltaW5nRnVuY3Rpb24uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcdGltaW5nRnVuY3Rpb24uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsc0JBQUE7O0FBQUEsQ0FBQSxFQUFhLElBQUEsR0FBYixJQUFhOztBQUtiLENBTEEsRUFLaUIsR0FBWCxDQUFOLE9BQWlCO0NBR2hCLENBQUEsQ0FBUSxHQUFSLEdBQVM7Q0FBRCxVQUFPO0NBQWYsRUFBUTtDQUFSLENBUUEsQ0FBUSxDQUFBLEVBQVIsR0FBUztDQUVSLE9BQUEsSUFBQTtBQUFHLENBQUgsR0FBQSxDQUFrQixDQUFmLEVBQUg7QUFFQyxDQUFBLFVBQUEsRUFBQTs2QkFBQTtDQUFBLENBQTZCLEdBQTdCLENBQUEsRUFBQSxNQUFjO0NBQWQsTUFBQTtDQUVBLFdBQUE7TUFKRDtDQU1lLEVBRWQsQ0FGYyxPQUFmLEdBQWU7Q0FFZCxDQUFRLEVBQVIsRUFBQTtDQUFBLENBRVMsQ0FBQSxHQUFULENBQUEsRUFBVTtDQUFNLEVBQUksQ0FBQSxXQUFKO0NBRmhCLE1BRVM7Q0FGVCxDQUlXLENBQUEsR0FBWCxHQUFBO0NBRUMsRUFBQSxDQUFHLElBQUg7Q0FDQyxFQUFPLENBQU0sYUFBTjtNQURSLElBQUE7Q0FHQyxFQUFPLENBQVksYUFBWjtVQUxFO0NBSlgsTUFJVztDQWRMO0NBUlIsRUFRUTtDQVJSLENBNkJBLENBQUEsQ0FBSyxLQUFDO0NBRUwsT0FBQSxtQkFBQTtDQUFBLEdBQUEsSUFBQSxJQUFtQjtDQUVsQixHQUFBLFNBQU87SUFFQSxFQUpSLGdCQUlRO0NBRVAsQ0FBaUMsQ0FBekIsQ0FBQSxFQUFSLEdBQTZCLENBQXJCO0NBRVIsRUFBTyxNQUFDLElBQUQ7Q0FFTCxDQUFVLEdBQVgsRUFBQSxHQUFxQixLQUFyQjtDQUZELE1BQU87TUFSUjtBQVlPLENBQVAsR0FBQSxDQUFzQixDQUFmLEVBQVA7Q0FFQyxJQUFNLE9BQUEsc0RBQUE7TUFkUDtDQUFBLEVBZ0JRLENBQVIsQ0FBQTtDQWhCQSxFQWtCSSxDQUFKLFVBbEJBO0FBb0JBLENBQUEsUUFBQSxtQ0FBQTt3QkFBQTtDQUVDLEVBQUksQ0FBRSxFQUFOO0NBRkQsSUFwQkE7QUF3QkcsQ0FBSCxHQUFBLENBQWUsQ0FBWixLQUFIO0NBRUMsRUFBMkMsQ0FBOUIsQ0FBUCxPQUFBLG1CQUFPO01BMUJkO0NBRkksVUE4Qko7Q0EzREQsRUE2Qks7Q0FyQ04sQ0FBQTs7QUFzRUEsQ0F0RUEsS0FzRUEsUUFBYztDQUViLENBQUEsQ0FBTyxDQUFQLEtBQVE7Q0FBVyxDQUFPLENBQVosQ0FBSSxPQUFKO0NBQWQsRUFBTztDQUFQLENBRUEsQ0FBUSxFQUFSLElBQVM7Q0FBVyxDQUFPLENBQVosQ0FBSSxPQUFKO0NBRmYsRUFFUTtDQUZSLENBSUEsQ0FBUSxFQUFSLElBQVM7Q0FBVyxDQUFPLENBQVosQ0FBSSxPQUFKO0NBSmYsRUFJUTtDQUpSLENBTUEsQ0FBUSxFQUFSLElBQVM7Q0FBVyxDQUFPLENBQVosQ0FBSSxPQUFKO0NBTmYsRUFNUTtDQU5SLENBUUEsQ0FBTyxDQUFQLEtBQVE7Q0FBVyxDQUFPLENBQVosQ0FBSSxPQUFKO0NBUmQsRUFRTztDQVJQLENBVUEsQ0FBTSxDQUFOLEtBQU87Q0FBTSxFQUFJLENBQUksT0FBUjtDQVZiLEVBVU07Q0FWTixDQVlBLENBQU0sQ0FBTixLQUFPO0NBQU0sQ0FBYSxDQUFULENBQUksT0FBUjtDQVpiLEVBWU07Q0FwRlAsQ0FzRUEiLCJzb3VyY2VzQ29udGVudCI6WyJVbml0QmV6aWVyID0gcmVxdWlyZSAnLi9Vbml0QmV6aWVyJ1xuXG4jIFNvbWUgc3RhbmRhcmQgdGltaW5nIGZ1bmN0aW9ucyBmb3IgdHJhbnNpdGlvbnMsIG9yaWdpbmFsbHkgZnJvbSBNb29Ub29scy5cbiNcbiMgU2VlIGh0dHA6Ly9lYXNpbmdzLm5ldFxubW9kdWxlLmV4cG9ydHMgPSB0aW1pbmdGdW5jdGlvbiA9XG5cblx0IyBMaW5lYXIgZWFzaW5nXG5cdGxpbmVhcjogKHApIC0+IHBcblxuXHQjIFRvIGRlZmluZSBhIGVhc2luZyBmdW5jdGlvbi4gSXQnbGwgdGFrZSBjYXJlIG9mIHRoZSBlYXNlIGluLCBvdXQsIGFuZCBpbi1vdXRcblx0IyBwYXJ0cy5cblx0I1xuXHQjIEV4YW1wbGU6IGVhc2luZy5kZWZpbmUgJ3F1YWQnLCAocCkgLT4gcCAqIHBcblx0I1xuXHQjIHVzYWdlOiBlYXNpbmcucXVhZC5lYXNlSW4gMC42XG5cdGRlZmluZTogKG5hbWUsIGZ1bmMpIC0+XG5cblx0XHRpZiB0eXBlb2YgbmFtZSBpcyAnb2JqZWN0J1xuXG5cdFx0XHR0aW1pbmdGdW5jdGlvbi5kZWZpbmUgX25hbWUsIF9mdW5jIGZvciBfbmFtZSwgX2Z1bmMgb2YgbmFtZVxuXG5cdFx0XHRyZXR1cm5cblxuXHRcdHRpbWluZ0Z1bmN0aW9uW25hbWVdID1cblxuXHRcdFx0ZWFzZUluOiBmdW5jXG5cblx0XHRcdGVhc2VPdXQ6IChwKSAtPiAxIC0gZnVuYyggMSAtIHAgKVxuXG5cdFx0XHRlYXNlSW5PdXQ6IChwKSAtPlxuXG5cdFx0XHRcdGlmIHAgPD0gMC41XG5cdFx0XHRcdFx0cmV0dXJuIDAuNSAqIGZ1bmMoIHAgKiAyIClcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHJldHVybiAwLjUgKiAoIDIgLSBmdW5jKCAyICogKCAxIC0gcCApICkgKVxuXG5cdGdldDogKGZ1bmMpIC0+XG5cblx0XHRpZiBmdW5jIGluc3RhbmNlb2YgRnVuY3Rpb25cblxuXHRcdFx0cmV0dXJuIGZ1bmNcblxuXHRcdGVsc2UgaWYgYXJndW1lbnRzWzFdPyBhbmQgYXJndW1lbnRzWzJdPyBhbmQgYXJndW1lbnRzWzNdP1xuXG5cdFx0XHRiID0gbmV3IFVuaXRCZXppZXIgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSwgYXJndW1lbnRzWzNdXG5cblx0XHRcdHJldHVybiAocCkgLT5cblxuXHRcdFx0XHRiLnNvbHZlIHAsIFVuaXRCZXppZXIuZXBzaWxvblxuXG5cdFx0dW5sZXNzIHR5cGVvZiBmdW5jIGlzICdzdHJpbmcnXG5cblx0XHRcdHRocm93IEVycm9yIFwiZnVuYyBzaG91bGQgZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmcsIGxpa2UgY3ViaWMuZWFzZU91dFwiXG5cblx0XHRwYXJ0cyA9IGZ1bmMuc3BsaXQgJy4nXG5cblx0XHRmID0gdGltaW5nRnVuY3Rpb25cblxuXHRcdGZvciBwYXJ0IGluIHBhcnRzXG5cblx0XHRcdGYgPSBmW3BhcnRdXG5cblx0XHRpZiB0eXBlb2YgZiBpcyAndW5kZWZpbmVkJ1xuXG5cdFx0XHR0aHJvdyBFcnJvciBcIkNhbm5vdCBmaW5kIGVhc2luZyBmdW5jdGlvbiBgI3tmdW5jfWBcIlxuXG5cdFx0ZlxuXG4jIERlZmluaW5nIHRoZSBzdGFuZGFyZCBlYXNpbmdzXG50aW1pbmdGdW5jdGlvbi5kZWZpbmVcblxuXHRxdWFkOiBcdChwKSAtPiBNYXRoLnBvdyBwLCAyXG5cblx0Y3ViaWM6IFx0KHApIC0+IE1hdGgucG93IHAsIDNcblxuXHRxdWFydDogXHQocCkgLT4gTWF0aC5wb3cgcCwgNFxuXG5cdHF1aW50OiBcdChwKSAtPiBNYXRoLnBvdyBwLCA1XG5cblx0ZXhwbzogXHQocCkgLT4gTWF0aC5wb3cgMiwgOCAqIChwIC0gMSlcblxuXHRjaXJjOlx0KHApIC0+IDEgLSBNYXRoLnNpbiBNYXRoLmNvcyBwXG5cblx0c2luZTpcdChwKSAtPiAxIC0gTWF0aC5jb3MgcCAqIE1hdGguUEkgLyAyIl19
},{"./UnitBezier":99}],101:[function(require,module,exports){
module.exports=require(72)
},{"./transformation/perspective":102,"./transformation/rotation":103,"./transformation/scale":104,"./transformation/translation":105}],102:[function(require,module,exports){
module.exports=require(73)
},{}],103:[function(require,module,exports){
module.exports=require(74)
},{}],104:[function(require,module,exports){
module.exports=require(75)
},{}],105:[function(require,module,exports){
module.exports=require(76)
},{}],106:[function(require,module,exports){
module.exports=require(1)
},{}],107:[function(require,module,exports){
module.exports=require(91)
},{"./_common":106}],108:[function(require,module,exports){
var classic,
  __slice = [].slice;

module.exports = classic = {};

classic.implement = function() {
  var classProto, classReference, desc, member, mixin, mixins, _i, _j, _len;
  mixins = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), classReference = arguments[_i++];
  for (_j = 0, _len = mixins.length; _j < _len; _j++) {
    mixin = mixins[_j];
    classProto = classReference.prototype;
    for (member in mixin.prototype) {
      if (!Object.getOwnPropertyDescriptor(classProto, member)) {
        desc = Object.getOwnPropertyDescriptor(mixin.prototype, member);
        Object.defineProperty(classProto, member, desc);
      }
    }
  }
  return classReference;
};

classic.mix = function() {
  var classProto, classReference, desc, member, mixin, mixins, _i, _j, _len;
  mixins = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), classReference = arguments[_i++];
  classProto = classReference.prototype;
  classReference.__mixinCloners = [];
  classReference.__applyClonersFor = function(instance, args) {
    var cloner, _j, _len, _ref;
    if (args == null) {
      args = null;
    }
    _ref = classReference.__mixinCloners;
    for (_j = 0, _len = _ref.length; _j < _len; _j++) {
      cloner = _ref[_j];
      cloner.apply(instance, args);
    }
  };
  classReference.__mixinInitializers = [];
  classReference.__initMixinsFor = function(instance, args) {
    var initializer, _j, _len, _ref;
    if (args == null) {
      args = null;
    }
    _ref = classReference.__mixinInitializers;
    for (_j = 0, _len = _ref.length; _j < _len; _j++) {
      initializer = _ref[_j];
      initializer.apply(instance, args);
    }
  };
  classReference.__mixinQuitters = [];
  classReference.__applyQuittersFor = function(instance, args) {
    var quitter, _j, _len, _ref;
    if (args == null) {
      args = null;
    }
    _ref = classReference.__mixinQuitters;
    for (_j = 0, _len = _ref.length; _j < _len; _j++) {
      quitter = _ref[_j];
      quitter.apply(instance, args);
    }
  };
  for (_j = 0, _len = mixins.length; _j < _len; _j++) {
    mixin = mixins[_j];
    if (!(mixin.constructor instanceof Function)) {
      throw Error("Mixin should be a function");
    }
    for (member in mixin.prototype) {
      if (member.substr(0, 11) === '__initMixin') {
        classReference.__mixinInitializers.push(mixin.prototype[member]);
        continue;
      } else if (member.substr(0, 11) === '__clonerFor') {
        classReference.__mixinCloners.push(mixin.prototype[member]);
        continue;
      } else if (member.substr(0, 12) === '__quitterFor') {
        classReference.__mixinQuitters.push(mixin.prototype[member]);
        continue;
      }
      if (!Object.getOwnPropertyDescriptor(classProto, member)) {
        desc = Object.getOwnPropertyDescriptor(mixin.prototype, member);
        Object.defineProperty(classProto, member, desc);
      }
    }
  }
  return classReference;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xhc3NpYy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcbGliXFxjbGFzc2ljLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLEdBQUE7R0FBQSxlQUFBOztBQUFBLENBQUEsQ0FBQSxDQUFpQixHQUFYLENBQU47O0FBSUEsQ0FKQSxFQUlvQixJQUFiLEVBQVA7Q0FFQyxLQUFBLCtEQUFBO0NBQUEsQ0FGb0I7QUFFcEIsQ0FBQSxNQUFBLHNDQUFBO3dCQUFBO0NBRUMsRUFBYSxDQUFiLEtBQUEsQ0FBQSxJQUEyQjtBQUUzQixDQUFBLEVBQUEsTUFBQSxnQkFBQTtBQUVRLENBQVAsQ0FBbUQsRUFBbkQsRUFBQSxJQUFPLGNBQUE7Q0FFTixDQUFnRCxDQUF6QyxDQUFQLENBQTRDLENBQS9CLEVBQWIsQ0FBTyxlQUFBO0NBQVAsQ0FFa0MsRUFBbEMsRUFBTSxFQUFOLEVBQUEsSUFBQTtRQU5GO0NBQUEsSUFKRDtDQUFBLEVBQUE7Q0FGbUIsUUFjbkI7Q0FkbUI7O0FBZ0JwQixDQXBCQSxFQW9CQSxJQUFPLEVBQU87Q0FFYixLQUFBLCtEQUFBO0NBQUEsQ0FGYztDQUVkLENBQUEsQ0FBYSxNQUFiLENBQUEsSUFBMkI7Q0FBM0IsQ0FFQSxDQUFnQyxXQUFsQjtDQUZkLENBSUEsQ0FBbUMsQ0FBQSxJQUFBLENBQUMsS0FBdEIsR0FBZDtDQUVDLE9BQUEsY0FBQTs7R0FGb0QsR0FBUDtNQUU3QztDQUFBO0NBQUEsUUFBQSxrQ0FBQTt5QkFBQTtDQUVDLENBQXVCLEVBQXZCLENBQUEsQ0FBQSxFQUFBO0NBRkQsSUFGa0M7Q0FKbkMsRUFJbUM7Q0FKbkMsQ0FZQSxDQUFxQyxXQUF2QixLQUFkO0NBWkEsQ0FjQSxDQUFpQyxDQUFBLElBQUEsQ0FBQyxLQUFwQixDQUFkO0NBRUMsT0FBQSxtQkFBQTs7R0FGa0QsR0FBUDtNQUUzQztDQUFBO0NBQUEsUUFBQSxrQ0FBQTs4QkFBQTtDQUVDLENBQTRCLEVBQTVCLENBQUEsQ0FBQSxFQUFBLEdBQVc7Q0FGWixJQUZnQztDQWRqQyxFQWNpQztDQWRqQyxDQXNCQSxDQUFpQyxXQUFuQixDQUFkO0NBdEJBLENBd0JBLENBQW9DLENBQUEsSUFBQSxDQUFDLEtBQXZCLElBQWQ7Q0FFQyxPQUFBLGVBQUE7O0dBRnFELEdBQVA7TUFFOUM7Q0FBQTtDQUFBLFFBQUEsa0NBQUE7MEJBQUE7Q0FFQyxDQUF3QixFQUF4QixDQUFBLENBQUEsQ0FBTyxDQUFQO0NBRkQsSUFGbUM7Q0F4QnBDLEVBd0JvQztBQVFwQyxDQUFBLE1BQUEsc0NBQUE7d0JBQUE7QUFFQyxDQUFBLEdBQUEsQ0FBWSxHQUFaLEdBQU8sQ0FBNkI7Q0FFbkMsSUFBTSxPQUFBLGdCQUFBO01BRlA7QUFJQSxDQUFBLEVBQUEsTUFBQSxnQkFBQTtDQUVDLENBQW9CLEVBQWpCLENBQXdCLENBQTNCLE9BQUE7Q0FFQyxHQUFBLENBQTZDLENBQUcsRUFBaEQsQ0FBZ0QsS0FBbEMsS0FBb0I7Q0FFbEMsZ0JBSkQ7Q0FNZSxDQUFVLEVBQWpCLENBQXdCLENBTmhDLEVBQUEsS0FBQTtDQVFDLEdBQUEsQ0FBd0MsQ0FBRyxFQUEzQyxDQUEyQyxLQUE3QjtDQUVkLGdCQVZEO0NBWWUsQ0FBVSxFQUFqQixDQUF3QixDQVpoQyxFQUFBLE1BQUE7Q0FjQyxHQUFBLENBQXlDLENBQUcsRUFBNUMsQ0FBNEMsS0FBOUIsQ0FBZ0I7Q0FFOUIsZ0JBaEJEO1FBQUE7QUFrQk8sQ0FBUCxDQUFtRCxFQUFuRCxFQUFBLElBQU8sY0FBQTtDQUVOLENBQWdELENBQXpDLENBQVAsQ0FBNEMsQ0FBL0IsRUFBYixDQUFPLGVBQUE7Q0FBUCxDQUVrQyxFQUFsQyxFQUFNLEVBQU4sRUFBQSxJQUFBO1FBeEJGO0NBQUEsSUFORDtDQUFBLEVBaENBO0NBRmEsUUFrRWI7Q0FsRWEiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGNsYXNzaWMgPSB7fVxuXG4jIExpdHRsZSBoZWxwZXIgZm9yIG1peGlucyBmcm9tIENvZmZlZVNjcmlwdCBGQVEsXG4jIGNvdXJ0ZXN5IG9mIFNldGhhdXJ1cyAoaHR0cDovL2dpdGh1Yi5jb20vc2V0aGF1cnVzKVxuY2xhc3NpYy5pbXBsZW1lbnQgPSAobWl4aW5zLi4uLCBjbGFzc1JlZmVyZW5jZSkgLT5cblxuXHRmb3IgbWl4aW4gaW4gbWl4aW5zXG5cblx0XHRjbGFzc1Byb3RvID0gY2xhc3NSZWZlcmVuY2U6OlxuXG5cdFx0Zm9yIG1lbWJlciBvZiBtaXhpbjo6XG5cblx0XHRcdHVubGVzcyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIGNsYXNzUHJvdG8sIG1lbWJlclxuXG5cdFx0XHRcdGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIG1peGluOjosIG1lbWJlclxuXG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBjbGFzc1Byb3RvLCBtZW1iZXIsIGRlc2NcblxuXHRjbGFzc1JlZmVyZW5jZVxuXG5jbGFzc2ljLm1peCA9IChtaXhpbnMuLi4sIGNsYXNzUmVmZXJlbmNlKSAtPlxuXG5cdGNsYXNzUHJvdG8gPSBjbGFzc1JlZmVyZW5jZTo6XG5cblx0Y2xhc3NSZWZlcmVuY2UuX19taXhpbkNsb25lcnMgPSBbXVxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fYXBwbHlDbG9uZXJzRm9yID0gKGluc3RhbmNlLCBhcmdzID0gbnVsbCkgLT5cblxuXHRcdGZvciBjbG9uZXIgaW4gY2xhc3NSZWZlcmVuY2UuX19taXhpbkNsb25lcnNcblxuXHRcdFx0Y2xvbmVyLmFwcGx5IGluc3RhbmNlLCBhcmdzXG5cblx0XHRyZXR1cm5cblxuXHRjbGFzc1JlZmVyZW5jZS5fX21peGluSW5pdGlhbGl6ZXJzID0gW11cblxuXHRjbGFzc1JlZmVyZW5jZS5fX2luaXRNaXhpbnNGb3IgPSAoaW5zdGFuY2UsIGFyZ3MgPSBudWxsKSAtPlxuXG5cdFx0Zm9yIGluaXRpYWxpemVyIGluIGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5Jbml0aWFsaXplcnNcblxuXHRcdFx0aW5pdGlhbGl6ZXIuYXBwbHkgaW5zdGFuY2UsIGFyZ3NcblxuXHRcdHJldHVyblxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5RdWl0dGVycyA9IFtdXG5cblx0Y2xhc3NSZWZlcmVuY2UuX19hcHBseVF1aXR0ZXJzRm9yID0gKGluc3RhbmNlLCBhcmdzID0gbnVsbCkgLT5cblxuXHRcdGZvciBxdWl0dGVyIGluIGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5RdWl0dGVyc1xuXG5cdFx0XHRxdWl0dGVyLmFwcGx5IGluc3RhbmNlLCBhcmdzXG5cblx0XHRyZXR1cm5cblxuXHRmb3IgbWl4aW4gaW4gbWl4aW5zXG5cblx0XHR1bmxlc3MgbWl4aW4uY29uc3RydWN0b3IgaW5zdGFuY2VvZiBGdW5jdGlvblxuXG5cdFx0XHR0aHJvdyBFcnJvciBcIk1peGluIHNob3VsZCBiZSBhIGZ1bmN0aW9uXCJcblxuXHRcdGZvciBtZW1iZXIgb2YgbWl4aW46OlxuXG5cdFx0XHRpZiBtZW1iZXIuc3Vic3RyKDAsIDExKSBpcyAnX19pbml0TWl4aW4nXG5cblx0XHRcdFx0Y2xhc3NSZWZlcmVuY2UuX19taXhpbkluaXRpYWxpemVycy5wdXNoIG1peGluOjpbbWVtYmVyXVxuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGVsc2UgaWYgbWVtYmVyLnN1YnN0cigwLCAxMSkgaXMgJ19fY2xvbmVyRm9yJ1xuXG5cdFx0XHRcdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5DbG9uZXJzLnB1c2ggbWl4aW46OlttZW1iZXJdXG5cblx0XHRcdFx0Y29udGludWVcblxuXHRcdFx0ZWxzZSBpZiBtZW1iZXIuc3Vic3RyKDAsIDEyKSBpcyAnX19xdWl0dGVyRm9yJ1xuXG5cdFx0XHRcdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5RdWl0dGVycy5wdXNoIG1peGluOjpbbWVtYmVyXVxuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdHVubGVzcyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIGNsYXNzUHJvdG8sIG1lbWJlclxuXG5cdFx0XHRcdGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIG1peGluOjosIG1lbWJlclxuXG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBjbGFzc1Byb3RvLCBtZW1iZXIsIGRlc2NcblxuXHRjbGFzc1JlZmVyZW5jZSJdfQ==
},{}],109:[function(require,module,exports){
module.exports=require(2)
},{"./_common":106}],110:[function(require,module,exports){
var utila;

module.exports = utila = {
  array: require('./array'),
  classic: require('./classic'),
  object: require('./object')
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbGEuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcdXRpbGEuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsQ0FBQTs7QUFBQSxDQUFBLEVBQWlCLEVBQUEsQ0FBWCxDQUFOO0NBRUMsQ0FBQSxHQUFBLEVBQU8sRUFBQTtDQUFQLENBQ0EsS0FBQSxJQUFTO0NBRFQsQ0FFQSxJQUFBLENBQVEsR0FBQTtDQUpULENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHV0aWxhID1cblxuXHRhcnJheTogcmVxdWlyZSAnLi9hcnJheSdcblx0Y2xhc3NpYzogcmVxdWlyZSAnLi9jbGFzc2ljJ1xuXHRvYmplY3Q6IHJlcXVpcmUgJy4vb2JqZWN0JyJdfQ==
},{"./array":107,"./classic":108,"./object":109}],111:[function(require,module,exports){
var Chain_, Foxie, Styles_, Timing_, array, classic, lazyValues, object, timing, _ref;

Chain_ = require('./el/mixin/Chain_');

timing = require('./timing');

Styles_ = require('./el/mixin/Styles_');

Timing_ = require('./el/mixin/Timing_');

lazyValues = require('./utility/lazyValues');

_ref = require('utila'), classic = _ref.classic, object = _ref.object, array = _ref.array;

timing = require('./timing');

module.exports = classic.mix(Styles_, Chain_, Timing_, Foxie = (function() {
  var self;

  self = Foxie;

  Foxie._nameRx = /^[a-zA-Z\-\_]{1}[a-zA-Z0-9\-\_]*$/;

  Foxie.timing = timing;

  Foxie._parseTag = function(k) {
    var attribs, classes, cls, id, m, name, parts;
    if (!k.match(/^[a-zA-Z0-9\#\-\_\.\[\]\"\'\=\,\s\:]+$/) || k.match(/^[0-9]+/)) {
      throw Error("cannot parse tag `" + k + "`");
    }
    attribs = {};
    parts = {
      name: '',
      attribs: attribs,
      ns: false
    };
    if (k.match(/^svg\:/)) {
      parts.ns = 'http://www.w3.org/2000/svg';
      k = k.substr(4, k.length);
    }
    if (m = k.match(/^([^\.#]+)/)) {
      name = m[1];
      if (!name.match(self._nameRx)) {
        throw Error("tag name `" + name + "` is not valid");
      }
      parts.name = name;
      k = k.substr(name.length, k.length);
    }
    if (m = k.match(/^#([a-zA-Z0-9\-]+)/)) {
      id = m[1];
      if (!id.match(self._nameRx)) {
        throw Error("tag id `" + id + "` is not valid");
      }
      attribs.id = id;
      k = k.substr(id.length + 1, k.length);
    }
    classes = [];
    while (m = k.match(/\.([a-zA-Z0-9\-\_]+)/)) {
      cls = m[1];
      if (!cls.match(self._nameRx)) {
        throw Error("tag class `" + cls + "` is not valid");
      }
      classes.push(cls);
      k = k.replace('.' + cls, '');
    }
    if (classes.length) {
      attribs["class"] = classes.join(" ");
    }
    return parts;
  };

  function Foxie(node) {
    var name, parts, val, _ref1;
    if (!(this instanceof self)) {
      return new self(node);
    }
    if (typeof node === 'string') {
      parts = self._parseTag(node);
      if (parts.name.length === 0) {
        parts.name = 'div';
      }
      if (parts.ns) {
        node = document.createElementNS(parts.ns, parts.name);
      } else {
        node = document.createElement(parts.name);
      }
      _ref1 = parts.attribs;
      for (name in _ref1) {
        val = _ref1[name];
        node.setAttribute(name, val);
      }
    }
    if (!(node instanceof Element)) {
      throw Error("node must be an HTML element.");
    }
    this.node = node;
    if (this._shouldCloneInnerHTML == null) {
      this._shouldCloneInnerHTML = false;
    }
    self.__initMixinsFor(this);
    this._parent = null;
    this._children = [];
    this._customVars = {};
  }

  Foxie.prototype.clone = function(newself) {
    var child, key, newNode, parent, val, _i, _len, _ref1, _ref2, _ref3;
    if (newself == null) {
      newself = Object.create(this.constructor.prototype);
    }
    this._doUpdate();
    newNode = this.node.cloneNode();
    newself.node = newNode;
    newself._children = [];
    if (this._shouldCloneInnerHTML) {
      newself.node.innerHTML = this.node.innerHTML;
    } else {
      _ref1 = this._children;
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        child = _ref1[_i];
        child.clone().putIn(newself);
      }
    }
    newself._parent = null;
    if (this._parent != null) {
      parent = this._parent;
    } else {
      parent = (_ref2 = (_ref3 = this.node._parent) != null ? _ref3 : this.node.parentselfement) != null ? _ref2 : null;
    }
    timing.afterFrame((function(_this) {
      return function() {};
    })(this));
    self.__applyClonersFor(this, [newself]);
    for (key in this) {
      val = this[key];
      if (newself[key] !== void 0) {
        continue;
      }
      if (this.hasOwnProperty(key)) {
        newself[key] = object.clone(val, true);
      }
    }
    return newself;
  };

  Foxie.prototype._notYourChildAnymore = function(el) {
    if (!(el instanceof self)) {
      throw Error("`el` must be an instance of `self`");
    }
    array.pluckItem(this._children, el);
    return this;
  };

  Foxie.prototype.putIn = function(el) {
    var node;
    if (this._parent != null) {
      this._parent._notYourChildAnymore(this);
    }
    if (el instanceof self) {
      el._append(this);
      this._parent = el;
    } else {
      node = el;
      if (node.node != null) {
        node = node.node;
      }
      node.appendChild(this.node);
      this._parent = null;
    }
    return this;
  };

  Foxie.prototype.takeOutOfParent = function() {
    if (this._parent != null) {
      this._parent._notYourChildAnymore(this);
    }
    this._parent = null;
    return this;
  };

  Foxie.prototype._append = function(el) {
    var node;
    if (el instanceof self) {
      node = el.node;
      this._children.push(el);
    } else {
      node = el;
    }
    this.node.appendChild(node);
    return this;
  };

  Foxie.prototype.remove = function() {
    if (this._parent != null) {
      this._parent._notYourChildAnymore(this);
    }
    if (this.node.parentNode != null) {
      this.node.parentNode.removeChild(this.node);
    }
    return null;
  };

  Foxie.prototype.quit = function() {
    var child, p, _i, _len, _ref1;
    p = this.node.parentNode;
    if (p != null) {
      p.removeChild(this.node);
    }
    _ref1 = this._children;
    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
      child = _ref1[_i];
      child.quit();
    }
    self.__applyQuittersFor(this);
  };

  Foxie.prototype.each = function(cb) {
    var child, counter, els, i, _interface;
    if (cb == null) {
      cb = null;
    }
    if (cb instanceof Function) {
      i = 0;
      child = null;
      counter = -1;
      while (true) {
        counter++;
        if (child === this._children[i]) {
          i++;
        }
        child = this._children[i];
        if (child == null) {
          break;
        }
        cb.call(this, child, counter);
      }
      return this;
    }
    _interface = this._getNewInterface();
    els = this._children;
    if (els.length !== 0) {
      timing.afterFrame((function(_this) {
        return function() {
          var el, _i, _len;
          for (_i = 0, _len = els.length; _i < _len; _i++) {
            el = els[_i];
            _this._getMethodChain().run(_interface, el);
          }
          return null;
        };
      })(this));
    }
    return _interface;
  };

  Foxie.prototype.get = function(name) {
    return this._customVars[name];
  };

  Foxie.prototype.set = function(name, val) {
    this._customVars[name] = val;
    return this;
  };

  Foxie.prototype.unset = function(name) {
    delete this._customVars[name];
    return this;
  };

  Foxie.prototype.attr = function(name, val) {
    if (val == null) {
      return this.node.getAttribute(name);
    } else {
      this.node.setAttribute(name, val);
    }
    return this;
  };

  Foxie.prototype.removeAttr = function(name) {
    this.node.removeAttribute(name);
    return this;
  };

  Foxie.prototype.innerHTML = function(val) {
    if (val == null) {
      return this.node.innerHTML;
    }
    this.node.innerHTML = val;
    return this;
  };

  Foxie.prototype.computedStyle = function(prop) {
    var comp;
    comp = getComputedStyle(this.node);
    if (prop != null) {
      return comp[prop];
    } else {
      return comp;
    }
  };

  return Foxie;

})());

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRm94aWUuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcRm94aWUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsaUZBQUE7O0FBQUEsTUFBQSxHQUFTLE9BQUEsQ0FBUSxtQkFBUixDQUFULENBQUE7O0FBQUEsTUFDQSxHQUFTLE9BQUEsQ0FBUSxVQUFSLENBRFQsQ0FBQTs7QUFBQSxPQUVBLEdBQVUsT0FBQSxDQUFRLG9CQUFSLENBRlYsQ0FBQTs7QUFBQSxPQUdBLEdBQVUsT0FBQSxDQUFRLG9CQUFSLENBSFYsQ0FBQTs7QUFBQSxVQUlBLEdBQWEsT0FBQSxDQUFRLHNCQUFSLENBSmIsQ0FBQTs7QUFBQSxPQUsyQixPQUFBLENBQVEsT0FBUixDQUEzQixFQUFDLGVBQUEsT0FBRCxFQUFVLGNBQUEsTUFBVixFQUFrQixhQUFBLEtBTGxCLENBQUE7O0FBQUEsTUFPQSxHQUFTLE9BQUEsQ0FBUSxVQUFSLENBUFQsQ0FBQTs7QUFBQSxNQVNNLENBQUMsT0FBUCxHQUFpQixPQUFPLENBQUMsR0FBUixDQUFZLE9BQVosRUFBcUIsTUFBckIsRUFBNkIsT0FBN0IsRUFBNEM7QUFFNUQsTUFBQSxJQUFBOztBQUFBLEVBQUEsSUFBQSxHQUFPLEtBQVAsQ0FBQTs7QUFBQSxFQUVBLEtBQUMsQ0FBQSxPQUFELEdBQVUsbUNBRlYsQ0FBQTs7QUFBQSxFQUlBLEtBQUMsQ0FBQSxNQUFELEdBQVMsTUFKVCxDQUFBOztBQUFBLEVBTUEsS0FBQyxDQUFBLFNBQUQsR0FBWSxTQUFDLENBQUQsR0FBQTtBQUdYLFFBQUEseUNBQUE7QUFBQSxJQUFBLElBQUcsQ0FBQSxDQUFLLENBQUMsS0FBRixDQUFRLHdDQUFSLENBQUosSUFBeUQsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxTQUFSLENBQTVEO0FBRUMsWUFBTSxLQUFBLENBQU8sb0JBQUEsR0FBbUIsQ0FBbkIsR0FBc0IsR0FBN0IsQ0FBTixDQUZEO0tBQUE7QUFBQSxJ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SUFBSSxDQUFDLFNBQWIsQ0FGRDtLQUFBO0FBQUEsSUFJQSxJQUFDLENBQUEsSUFBSSxDQUFDLFNBQU4sR0FBa0IsR0FKbEIsQ0FBQTtXQU1BLEtBUlU7RUFBQSxDQWpWWCxDQUFBOztBQUFBLGtCQTJWQSxhQUFBLEdBQWUsU0FBQyxJQUFELEdBQUE7QUFFZCxRQUFBLElBQUE7QUFBQSxJQUFBLElBQUEsR0FBTyxnQkFBQSxDQUFpQixJQUFDLENBQUEsSUFBbEIsQ0FBUCxDQUFBO0FBRUEsSUFBQSxJQUFHLFlBQUg7YUFFQyxJQUFLLENBQUEsSUFBQSxFQUZOO0tBQUEsTUFBQTthQU1DLEtBTkQ7S0FKYztFQUFBLENBM1ZmLENBQUE7O2VBQUE7O0lBRmdCLENBVGpCLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJDaGFpbl8gPSByZXF1aXJlICcuL2VsL21peGluL0NoYWluXydcclxudGltaW5nID0gcmVxdWlyZSAnLi90aW1pbmcnXHJcblN0eWxlc18gPSByZXF1aXJlICcuL2VsL21peGluL1N0eWxlc18nXHJcblRpbWluZ18gPSByZXF1aXJlICcuL2VsL21peGluL1RpbWluZ18nXHJcbmxhenlWYWx1ZXMgPSByZXF1aXJlICcuL3V0aWxpdHkvbGF6eVZhbHVlcydcclxue2NsYXNzaWMsIG9iamVjdCwgYXJyYXl9ID0gcmVxdWlyZSAndXRpbGEnXHJcblxyXG50aW1pbmcgPSByZXF1aXJlICcuL3RpbWluZydcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3NpYy5taXggU3R5bGVzXywgQ2hhaW5fLCBUaW1pbmdfLCBjbGFzcyBGb3hpZVxyXG5cclxuXHRzZWxmID0gQFxyXG5cclxuXHRAX25hbWVSeDogL15bYS16QS1aXFwtXFxfXXsxfVthLXpBLVowLTlcXC1cXF9dKiQvXHJcblxyXG5cdEB0aW1pbmc6IHRpbWluZ1xyXG5cclxuXHRAX3BhcnNlVGFnOiAoaykgLT5cclxuXHJcblx0XHQjIHZhbGlkYXRlXHJcblx0XHRpZiBub3Qgay5tYXRjaCgvXlthLXpBLVowLTlcXCNcXC1cXF9cXC5cXFtcXF1cXFwiXFwnXFw9XFwsXFxzXFw6XSskLykgb3Igay5tYXRjaCgvXlswLTldKy8pXHJcblxyXG5cdFx0XHR0aHJvdyBFcnJvciBcImNhbm5vdCBwYXJzZSB0YWcgYCN7a31gXCJcclxuXHJcblx0XHRhdHRyaWJzID0ge31cclxuXHJcblx0XHRwYXJ0cyA9XHJcblxyXG5cdFx0XHRuYW1lOiAnJ1xyXG5cclxuXHRcdFx0YXR0cmliczogYXR0cmlic1xyXG5cclxuXHRcdFx0bnM6IG5vXHJcblxyXG5cdFx0aWYgay5tYXRjaCAvXnN2Z1xcOi9cclxuXHJcblx0XHRcdHBhcnRzLm5zID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJ1xyXG5cclxuXHRcdFx0ayA9IGsuc3Vic3RyIDQsIGsubGVuZ3RoXHJcblxyXG5cdFx0IyB0YWcgbmFtZVxyXG5cdFx0aWYgbSA9IGsubWF0Y2ggL14oW15cXC4jXSspL1xyXG5cclxuXHRcdFx0bmFtZSA9IG1bMV1cclxuXHJcblx0XHRcdHVubGVzcyBuYW1lLm1hdGNoIHNlbGYuX25hbWVSeFxyXG5cclxuXHRcdFx0XHR0aHJvdyBFcnJvciBcInRhZyBuYW1lIGAje25hbWV9YCBpcyBub3QgdmFsaWRcIlxyXG5cclxuXHRcdFx0cGFydHMubmFtZSA9IG5hbWVcclxuXHJcblx0XHRcdGsgPSBrLnN1YnN0ciBuYW1lLmxlbmd0aCwgay5sZW5ndGhcclxuXHJcblx0XHQjIHRhZyBpZFxyXG5cdFx0aWYgbSA9IGsubWF0Y2ggL14jKFthLXpBLVowLTlcXC1dKykvXHJcblxyXG5cdFx0XHRpZCA9IG1bMV1cclxuXHJcblx0XHRcdHVubGVzcyBpZC5tYXRjaCBzZWxmLl9uYW1lUnhcclxuXHJcblx0XHRcdFx0dGhyb3cgRXJyb3IgXCJ0YWcgaWQgYCN7aWR9YCBpcyBub3QgdmFsaWRcIlxyXG5cclxuXHRcdFx0YXR0cmlicy5pZCA9IGlkXHJcblxyXG5cdFx0XHRrID0gay5zdWJzdHIgaWQubGVuZ3RoICsgMSwgay5sZW5ndGhcclxuXHJcblx0XHRjbGFzc2VzID0gW11cclxuXHJcblx0XHQjIHRoZSBjbGFzcyBhdHRyaWJcclxuXHRcdHdoaWxlIG0gPSBrLm1hdGNoIC9cXC4oW2EtekEtWjAtOVxcLVxcX10rKS9cclxuXHJcblx0XHRcdGNscyA9IG1bMV1cclxuXHJcblx0XHRcdHVubGVzcyBjbHMubWF0Y2ggc2VsZi5fbmFtZVJ4XHJcblxyXG5cdFx0XHRcdHRocm93IEVycm9yIFwidGFnIGNsYXNzIGAje2Nsc31gIGlzIG5vdCB2YWxpZFwiXHJcblxyXG5cdFx0XHRjbGFzc2VzLnB1c2ggY2xzXHJcblxyXG5cdFx0XHRrID0gay5yZXBsYWNlICcuJyArIGNscywgJydcclxuXHJcblx0XHRpZiBjbGFzc2VzLmxlbmd0aFxyXG5cclxuXHRcdFx0YXR0cmlicy5jbGFzcyA9IGNsYXNzZXMuam9pbiBcIiBcIlxyXG5cclxuXHRcdCMgVE9ETzogbWF0Y2ggYXR0cmlidXRlcyBsaWtlIFthPWJdXHJcblxyXG5cdFx0cGFydHNcclxuXHJcblx0Y29uc3RydWN0b3I6IChub2RlKSAtPlxyXG5cclxuXHRcdHVubGVzcyBAIGluc3RhbmNlb2Ygc2VsZlxyXG5cclxuXHRcdFx0cmV0dXJuIG5ldyBzZWxmIG5vZGVcclxuXHJcblx0XHRpZiB0eXBlb2Ygbm9kZSBpcyAnc3RyaW5nJ1xyXG5cclxuXHRcdFx0cGFydHMgPSBzZWxmLl9wYXJzZVRhZyBub2RlXHJcblxyXG5cdFx0XHRpZiBwYXJ0cy5uYW1lLmxlbmd0aCBpcyAwXHJcblxyXG5cdFx0XHRcdHBhcnRzLm5hbWUgPSAnZGl2J1xyXG5cclxuXHRcdFx0aWYgcGFydHMubnNcclxuXHJcblx0XHRcdFx0bm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyBwYXJ0cy5ucywgcGFydHMubmFtZVxyXG5cclxuXHRcdFx0ZWxzZVxyXG5cclxuXHRcdFx0XHRub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBwYXJ0cy5uYW1lXHJcblxyXG5cdFx0XHRmb3IgbmFtZSwgdmFsIG9mIHBhcnRzLmF0dHJpYnNcclxuXHJcblx0XHRcdFx0bm9kZS5zZXRBdHRyaWJ1dGUgbmFtZSwgdmFsXHJcblxyXG5cdFx0dW5sZXNzIG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50XHJcblxyXG5cdFx0XHR0aHJvdyBFcnJvciBcIm5vZGUgbXVzdCBiZSBhbiBIVE1MIGVsZW1lbnQuXCJcclxuXHJcblx0XHRAbm9kZSA9IG5vZGVcclxuXHJcblx0XHRpZiBub3QgQF9zaG91bGRDbG9uZUlubmVySFRNTD9cclxuXHJcblx0XHRcdEBfc2hvdWxkQ2xvbmVJbm5lckhUTUwgPSBub1xyXG5cclxuXHRcdHNlbGYuX19pbml0TWl4aW5zRm9yIEBcclxuXHJcblx0XHRAX3BhcmVudCA9IG51bGxcclxuXHJcblx0XHRAX2NoaWxkcmVuID0gW11cclxuXHJcblx0XHRAX2N1c3RvbVZhcnMgPSB7fVxyXG5cclxuXHRjbG9uZTogKG5ld3NlbGYgPSBPYmplY3QuY3JlYXRlIEBjb25zdHJ1Y3Rvcjo6KSAtPlxyXG5cclxuXHRcdEBfZG9VcGRhdGUoKVxyXG5cclxuXHRcdCMgQWRkaW5nIHRoZSBub2RlXHJcblx0XHRuZXdOb2RlID0gQG5vZGUuY2xvbmVOb2RlKClcclxuXHRcdG5ld3NlbGYubm9kZSA9IG5ld05vZGVcclxuXHRcdG5ld3NlbGYuX2NoaWxkcmVuID0gW11cclxuXHJcblx0XHQjIENsb25pbmcgdGhlIGNoaWxkcmVuXHJcblx0XHRpZiBAX3Nob3VsZENsb25lSW5uZXJIVE1MXHJcblxyXG5cdFx0XHRuZXdzZWxmLm5vZGUuaW5uZXJIVE1MID0gQG5vZGUuaW5uZXJIVE1MXHJcblxyXG5cdFx0ZWxzZVxyXG5cclxuXHRcdFx0Zm9yIGNoaWxkIGluIEBfY2hpbGRyZW5cclxuXHJcblx0XHRcdFx0Y2hpbGQuY2xvbmUoKS5wdXRJbiBuZXdzZWxmXHJcblxyXG5cdFx0IyBEZWNpZGluZyBvbiB0aGUgcGFyZW50XHJcblx0XHRuZXdzZWxmLl9wYXJlbnQgPSBudWxsXHJcblxyXG5cdFx0aWYgQF9wYXJlbnQ/XHJcblxyXG5cdFx0XHRwYXJlbnQgPSBAX3BhcmVudFxyXG5cclxuXHRcdGVsc2VcclxuXHJcblx0XHRcdHBhcmVudCA9IEBub2RlLl9wYXJlbnQgPyBAbm9kZS5wYXJlbnRzZWxmZW1lbnQgPyBudWxsXHJcblxyXG5cdFx0dGltaW5nLmFmdGVyRnJhbWUgPT5cclxuXHJcblx0XHRcdCMgaWYgbm90IG5ld3NlbGYuX2JlZW5BcHBlbmRlZFxyXG5cclxuXHRcdFx0IyBcdG5ld3NlbGYucHV0SW4gcGFyZW50XHJcblxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHRzZWxmLl9fYXBwbHlDbG9uZXJzRm9yIEAsIFtuZXdzZWxmXVxyXG5cclxuXHRcdGZvciBrZXksIHZhbCBvZiBAXHJcblxyXG5cdFx0XHRjb250aW51ZSBpZiBuZXdzZWxmW2tleV0gaXNudCB1bmRlZmluZWRcclxuXHJcblx0XHRcdGlmIEBoYXNPd25Qcm9wZXJ0eSBrZXlcclxuXHJcblx0XHRcdFx0bmV3c2VsZltrZXldID0gb2JqZWN0LmNsb25lIHZhbCwgeWVzXHJcblxyXG5cdFx0bmV3c2VsZlxyXG5cclxuXHRfbm90WW91ckNoaWxkQW55bW9yZTogKGVsKSAtPlxyXG5cclxuXHRcdHVubGVzcyBlbCBpbnN0YW5jZW9mIHNlbGZcclxuXHJcblx0XHRcdHRocm93IEVycm9yIFwiYGVsYCBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIGBzZWxmYFwiXHJcblxyXG5cdFx0YXJyYXkucGx1Y2tJdGVtIEBfY2hpbGRyZW4sIGVsXHJcblxyXG5cdFx0QFxyXG5cclxuXHRwdXRJbjogKGVsKSAtPlxyXG5cclxuXHRcdGlmIEBfcGFyZW50P1xyXG5cclxuXHRcdFx0QF9wYXJlbnQuX25vdFlvdXJDaGlsZEFueW1vcmUgQFxyXG5cclxuXHRcdGlmIGVsIGluc3RhbmNlb2Ygc2VsZlxyXG5cclxuXHRcdFx0ZWwuX2FwcGVuZCBAXHJcblx0XHRcdEBfcGFyZW50ID0gZWxcclxuXHJcblx0XHRlbHNlXHJcblxyXG5cdFx0XHRub2RlID0gZWxcclxuXHJcblx0XHRcdGlmIG5vZGUubm9kZT9cclxuXHJcblx0XHRcdFx0bm9kZSA9IG5vZGUubm9kZVxyXG5cclxuXHRcdFx0bm9kZS5hcHBlbmRDaGlsZCBAbm9kZVxyXG5cdFx0XHRAX3BhcmVudCA9IG51bGxcclxuXHJcblx0XHRAXHJcblxyXG5cdHRha2VPdXRPZlBhcmVudDogLT5cclxuXHJcblx0XHRpZiBAX3BhcmVudD9cclxuXHJcblx0XHRcdEBfcGFyZW50Ll9ub3RZb3VyQ2hpbGRBbnltb3JlIEBcclxuXHJcblx0XHRAX3BhcmVudCA9IG51bGxcclxuXHJcblx0XHRAXHJcblxyXG5cdF9hcHBlbmQ6IChlbCkgLT5cclxuXHJcblx0XHRpZiBlbCBpbnN0YW5jZW9mIHNlbGZcclxuXHJcblx0XHRcdG5vZGUgPSBlbC5ub2RlXHJcblx0XHRcdEBfY2hpbGRyZW4ucHVzaCBlbFxyXG5cclxuXHRcdGVsc2VcclxuXHJcblx0XHRcdG5vZGUgPSBlbFxyXG5cclxuXHRcdEBub2RlLmFwcGVuZENoaWxkIG5vZGVcclxuXHJcblx0XHRAXHJcblxyXG5cdHJlbW92ZTogLT5cclxuXHJcblx0XHRpZiBAX3BhcmVudD9cclxuXHJcblx0XHRcdEBfcGFyZW50Ll9ub3RZb3VyQ2hpbGRBbnltb3JlIEBcclxuXHJcblx0XHRpZiBAbm9kZS5wYXJlbnROb2RlP1xyXG5cclxuXHRcdFx0QG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCBAbm9kZVxyXG5cclxuXHRcdG51bGxcclxuXHJcblx0cXVpdDogLT5cclxuXHJcblx0XHRwID0gQG5vZGUucGFyZW50Tm9kZVxyXG5cclxuXHRcdGlmIHA/XHJcblxyXG5cdFx0XHRwLnJlbW92ZUNoaWxkIEBub2RlXHJcblxyXG5cdFx0Zm9yIGNoaWxkIGluIEBfY2hpbGRyZW5cclxuXHJcblx0XHRcdGNoaWxkLnF1aXQoKVxyXG5cclxuXHJcblx0XHRzZWxmLl9fYXBwbHlRdWl0dGVyc0ZvciBAXHJcblxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdGVhY2g6IChjYiA9IG51bGwpIC0+XHJcblxyXG5cdFx0aWYgY2IgaW5zdGFuY2VvZiBGdW5jdGlvblxyXG5cclxuXHRcdFx0IyBJIGhhdmUgdG8gdXNlIHRoaXMgbG9vcCwgc2luY2UgdGhlIGNoaWxkcmVuXHJcblx0XHRcdCMgbWlnaHQgYmUgcHV0IGluIGFub3RoZXIgY29udGFpbmVyXHJcblx0XHRcdGkgPSAwXHJcblx0XHRcdGNoaWxkID0gbnVsbFxyXG5cdFx0XHRjb3VudGVyID0gLTFcclxuXHJcblx0XHRcdGxvb3BcclxuXHJcblx0XHRcdFx0Y291bnRlcisrXHJcblxyXG5cdFx0XHRcdGlmIGNoaWxkIGlzIEBfY2hpbGRyZW5baV1cclxuXHJcblx0XHRcdFx0XHRpKytcclxuXHJcblx0XHRcdFx0Y2hpbGQgPSBAX2NoaWxkcmVuW2ldXHJcblxyXG5cdFx0XHRcdGJyZWFrIHVubGVzcyBjaGlsZD9cclxuXHJcblx0XHRcdFx0Y2IuY2FsbCBALCBjaGlsZCwgY291bnRlclxyXG5cclxuXHRcdFx0cmV0dXJuIEBcclxuXHJcblx0XHRfaW50ZXJmYWNlID0gQF9nZXROZXdJbnRlcmZhY2UoKVxyXG5cclxuXHRcdGVscyA9IEBfY2hpbGRyZW5cclxuXHJcblx0XHRpZiBlbHMubGVuZ3RoIGlzbnQgMFxyXG5cclxuXHRcdFx0dGltaW5nLmFmdGVyRnJhbWUgPT5cclxuXHJcblx0XHRcdFx0Zm9yIGVsIGluIGVsc1xyXG5cclxuXHRcdFx0XHRcdEBfZ2V0TWV0aG9kQ2hhaW4oKS5ydW4gX2ludGVyZmFjZSwgZWxcclxuXHJcblx0XHRcdFx0bnVsbFxyXG5cclxuXHRcdHJldHVybiBfaW50ZXJmYWNlXHJcblxyXG5cdGdldDogKG5hbWUpIC0+XHJcblxyXG5cdFx0QF9jdXN0b21WYXJzW25hbWVdXHJcblxyXG5cdHNldDogKG5hbWUsIHZhbCkgLT5cclxuXHJcblx0XHRAX2N1c3RvbVZhcnNbbmFtZV0gPSB2YWxcclxuXHJcblx0XHRAXHJcblxyXG5cdHVuc2V0OiAobmFtZSkgLT5cclxuXHJcblx0XHRkZWxldGUgQF9jdXN0b21WYXJzW25hbWVdXHJcblxyXG5cdFx0QFxyXG5cclxuXHRhdHRyOiAobmFtZSwgdmFsKSAtPlxyXG5cclxuXHRcdHVubGVzcyB2YWw/XHJcblxyXG5cdFx0XHRyZXR1cm4gQG5vZGUuZ2V0QXR0cmlidXRlIG5hbWVcclxuXHJcblx0XHRlbHNlXHJcblxyXG5cdFx0XHRAbm9kZS5zZXRBdHRyaWJ1dGUgbmFtZSwgdmFsXHJcblxyXG5cdFx0QFxyXG5cclxuXHRyZW1vdmVBdHRyOiAobmFtZSkgLT5cclxuXHJcblx0XHRAbm9kZS5yZW1vdmVBdHRyaWJ1dGUgbmFtZVxyXG5cclxuXHRcdEBcclxuXHJcblx0aW5uZXJIVE1MOiAodmFsKSAtPlxyXG5cclxuXHRcdHVubGVzcyB2YWw/XHJcblxyXG5cdFx0XHRyZXR1cm4gQG5vZGUuaW5uZXJIVE1MXHJcblxyXG5cdFx0QG5vZGUuaW5uZXJIVE1MID0gdmFsXHJcblxyXG5cdFx0QFxyXG5cclxuXHRjb21wdXRlZFN0eWxlOiAocHJvcCkgLT5cclxuXHJcblx0XHRjb21wID0gZ2V0Q29tcHV0ZWRTdHlsZSBAbm9kZVxyXG5cclxuXHRcdGlmIHByb3A/XHJcblxyXG5cdFx0XHRjb21wW3Byb3BdXHJcblxyXG5cdFx0ZWxzZVxyXG5cclxuXHRcdFx0Y29tcCJdfQ==
},{"./el/mixin/Chain_":112,"./el/mixin/Styles_":113,"./el/mixin/Timing_":114,"./timing":127,"./utility/lazyValues":129,"utila":110}],112:[function(require,module,exports){
var Chain_, MethodChain;

MethodChain = require('method-chain');

module.exports = Chain_ = (function() {
  function Chain_() {}

  Chain_.prototype._getMethodChain = function() {
    var fn, key;
    if (this.constructor.__methodChain == null) {
      this.constructor.__methodChain = new MethodChain;
      for (key in this) {
        fn = this[key];
        if (key[0] === '_' || key === 'constructor') {
          continue;
        }
        if (!(fn instanceof Function)) {
          continue;
        }
        this.constructor.__methodChain.addMethod(key);
      }
    }
    return this.constructor.__methodChain;
  };

  Chain_.prototype._getNewInterface = function() {
    return this._getMethodChain().getInterface();
  };

  Chain_.prototype._eventEnabledMethod = function(args, runCallback) {
    var fn, _interface, _ref;
    fn = (_ref = args[0]) != null ? _ref : null;
    if (fn) {
      runCallback((function(_this) {
        return function() {
          return fn.apply(_this, arguments);
        };
      })(this));
      return this;
    } else {
      _interface = this._getNewInterface();
      runCallback((function(_this) {
        return function() {
          return _this._getMethodChain().run(_interface, _this);
        };
      })(this));
      return _interface;
    }
  };

  return Chain_;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2hhaW5fLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcZWxcXG1peGluXFxDaGFpbl8uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsbUJBQUE7O0FBQUEsV0FBQSxHQUFjLE9BQUEsQ0FBUSxjQUFSLENBQWQsQ0FBQTs7QUFBQSxNQUVNLENBQUMsT0FBUCxHQUF1QjtzQkFFdEI7O0FBQUEsbUJBQUEsZUFBQSxHQUFpQixTQUFBLEdBQUE7QUFFaEIsUUFBQSxPQUFBO0FBQUEsSUFBQSxJQUFPLHNDQUFQO0FBRUMsTUFBQSxJQUFDLENBQUEsV0FBVyxDQUFDLGFBQWIsR0FBNkIsR0FBQSxDQUFBLFdBQTdCLENBQUE7QUFFQSxXQUFBLFdBQUE7dUJBQUE7QUFFQyxRQUFBLElBQVksR0FBSSxDQUFBLENBQUEsQ0FBSixLQUFVLEdBQVYsSUFBaUIsR0FBQSxLQUFPLGFBQXBDO0FBQUEsbUJBQUE7U0FBQTtBQUVBLFFBQUEsSUFBQSxDQUFBLENBQWdCLEVBQUEsWUFBYyxRQUE5QixDQUFBO0FBQUEsbUJBQUE7U0FGQTtBQUFBLFFBSUEsSUFBQyxDQUFBLFdBQVcsQ0FBQyxhQUFhLENBQUMsU0FBM0IsQ0FBcUMsR0FBckMsQ0FKQSxDQUZEO0FBQUEsT0FKRDtLQUFBO1dBWUEsSUFBQyxDQUFBLFdBQVcsQ0FBQyxjQWRHO0VBQUEsQ0FBakIsQ0FBQTs7QUFBQSxtQkFnQkEsZ0JBQUEsR0FBa0IsU0FBQSxHQUFBO1dBRWpCLElBQUMsQ0FBQSxlQUFELENBQUEsQ0FBa0IsQ0FBQyxZQUFuQixDQUFBLEVBRmlCO0VBQUEsQ0FoQmxCLENBQUE7O0FBQUEsbUJBb0JBLG1CQUFBLEdBQXFCLFNBQUMsSUFBRCxFQUFPLFdBQVAsR0FBQTtBQUVwQixRQUFBLG9CQUFBO0FBQUEsSUFBQSxFQUFBLHFDQUFlLElBQWYsQ0FBQTtBQUVBLElBQUEsSUFBRyxFQUFIO0FBRUMsTUFBQSxXQUFBLENBQVksQ0FBQSxTQUFBLEtBQUEsR0FBQTtlQUFBLFNBQUEsR0FBQTtpQkFFWCxFQUFFLENBQUMsS0FBSCxDQUFTLEtBQVQsRUFBWSxTQUFaLEVBRlc7UUFBQSxFQUFBO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFaLENBQUEsQ0FBQTtBQUlBLGFBQU8sSUFBUCxDQU5EO0tBQUEsTUFBQTtBQVVDLE1BQUEsVUFBQSxHQUFhLElBQUMsQ0FBQSxnQkFBRCxDQUFBLENBQWIsQ0FBQTtBQUFBLE1BRUEsV0FBQSxDQUFZLENBQUEsU0FBQSxLQUFBLEdBQUE7ZUFBQSxTQUFBLEdBQUE7aUJBR1gsS0FBQyxDQUFBLGVBQUQsQ0FBQSxDQUFrQixDQUFDLEdBQW5CLENBQXVCLFVBQXZCLEVBQW1DLEtBQW5DLEVBSFc7UUFBQSxFQUFBO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFaLENBRkEsQ0FBQTtBQU9BLGFBQU8sVUFBUCxDQWpCRDtLQUpvQjtFQUFBLENBcEJyQixDQUFBOztnQkFBQTs7SUFKRCxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiTWV0aG9kQ2hhaW4gPSByZXF1aXJlICdtZXRob2QtY2hhaW4nXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQ2hhaW5fXG5cblx0X2dldE1ldGhvZENoYWluOiAtPlxuXG5cdFx0dW5sZXNzIEBjb25zdHJ1Y3Rvci5fX21ldGhvZENoYWluP1xuXG5cdFx0XHRAY29uc3RydWN0b3IuX19tZXRob2RDaGFpbiA9IG5ldyBNZXRob2RDaGFpblxuXG5cdFx0XHRmb3Iga2V5LCBmbiBvZiBAXG5cblx0XHRcdFx0Y29udGludWUgaWYga2V5WzBdIGlzICdfJyBvciBrZXkgaXMgJ2NvbnN0cnVjdG9yJ1xuXG5cdFx0XHRcdGNvbnRpbnVlIHVubGVzcyBmbiBpbnN0YW5jZW9mIEZ1bmN0aW9uXG5cblx0XHRcdFx0QGNvbnN0cnVjdG9yLl9fbWV0aG9kQ2hhaW4uYWRkTWV0aG9kIGtleVxuXG5cdFx0QGNvbnN0cnVjdG9yLl9fbWV0aG9kQ2hhaW5cblxuXHRfZ2V0TmV3SW50ZXJmYWNlOiAtPlxuXG5cdFx0QF9nZXRNZXRob2RDaGFpbigpLmdldEludGVyZmFjZSgpXG5cblx0X2V2ZW50RW5hYmxlZE1ldGhvZDogKGFyZ3MsIHJ1bkNhbGxiYWNrKSAtPlxuXG5cdFx0Zm4gPSBhcmdzWzBdID8gbnVsbFxuXG5cdFx0aWYgZm5cblxuXHRcdFx0cnVuQ2FsbGJhY2sgPT5cblxuXHRcdFx0XHRmbi5hcHBseSBALCBhcmd1bWVudHNcblxuXHRcdFx0cmV0dXJuIEBcblxuXHRcdGVsc2VcblxuXHRcdFx0X2ludGVyZmFjZSA9IEBfZ2V0TmV3SW50ZXJmYWNlKClcblxuXHRcdFx0cnVuQ2FsbGJhY2sgPT5cblxuXHRcdFx0XHQjIFRPRE86IGxhenlWYWx1ZXNcblx0XHRcdFx0QF9nZXRNZXRob2RDaGFpbigpLnJ1biBfaW50ZXJmYWNlLCBAXG5cblx0XHRcdHJldHVybiBfaW50ZXJmYWNlIl19
},{"method-chain":88}],113:[function(require,module,exports){
var ClassPrototype, StyleSetter, Styles, Transitioner, method, methodName, timing, _fn, _fn1, _ref, _ref1;

StyleSetter = require('./styleSetter/StyleSetter');

Transitioner = require('./transitioner/Transitioner');

timing = require('../../timing');

module.exports = Styles = (function() {
  function Styles() {}

  Styles.prototype.__initMixinHasStyles = function() {
    this._styleSetter = new StyleSetter(this);
    this._transitioner = new Transitioner(this);
    this.fill = this._styleSetter.fill;
    this._styleInterface = this._styleSetter;
    this._updaterDeployed = false;
    this._shouldUpdate = false;
    this._updaterCallback = this._getNewUpdaterCallback();
    this._lastTimeUpdated = 0;
  };

  Styles.prototype._getNewUpdaterCallback = function() {
    return (function(_this) {
      return function(t) {
        return _this._doUpdate(t);
      };
    })(this);
  };

  Styles.prototype._scheduleUpdate = function() {
    this._shouldUpdate = true;
    this._deployUpdater();
  };

  Styles.prototype._deployUpdater = function() {
    if (this._updaterDeployed) {
      return;
    }
    this._updaterDeployed = true;
    return timing.afterEachFrame(this._updaterCallback);
  };

  Styles.prototype._undeployUpdater = function() {
    if (!this._updaterDeployed) {
      return;
    }
    this._updaterDeployed = false;
    return timing.cancelAfterEachFrame(this._updaterCallback);
  };

  Styles.prototype._doUpdate = function(t) {
    if (!this._shouldUpdate) {
      if (t - this._lastTimeUpdated > 100) {
        this._undeployUpdater();
      }
      return;
    }
    this._lastTimeUpdated = t;
    this._shouldUpdate = false;
    this._transitioner._updateTransition();
    this._styleSetter._updateTransforms();
    this._styleSetter._updateFilters();
  };

  Styles.prototype.__clonerForHasStyles = function(newEl) {
    newEl._styleSetter = this._styleSetter.clone(newEl);
    newEl.fill = newEl._styleSetter.fill;
    newEl._transitioner = this._transitioner.clone(newEl);
    newEl._updaterDeployed = false;
    newEl._shouldUpdate = false;
    newEl._updaterCallback = newEl._getNewUpdaterCallback();
    newEl._lastTimeUpdated;
    if (this._styleInterface === this._styleSetter) {
      newEl._styleInterface = newEl._styleSetter;
    } else {
      newEl._styleInterface = newEl._transitioner;
    }
  };

  Styles.prototype.__quitterForHasStyles = function() {
    return this._undeployUpdater();
  };

  Styles.prototype.enableTransition = function(duration) {
    this._styleInterface = this._transitioner;
    this._transitioner.enable(duration);
    return this;
  };

  Styles.prototype.disableTransition = function() {
    this._styleInterface = this._styleSetter;
    this._transitioner.disable();
    return this;
  };

  Styles.prototype.trans = function(duration) {
    return this.enableTransition(duration);
  };

  Styles.prototype.noTrans = function() {
    return this.disableTransition();
  };

  Styles.prototype.ease = function(funcNameOrFirstNumOfCubicBezier, secondNum, thirdNum, fourthNum) {
    this._transitioner.ease(funcNameOrFirstNumOfCubicBezier, secondNum, thirdNum, fourthNum);
    return this;
  };

  return Styles;

})();

ClassPrototype = Styles.prototype;

_ref = Transitioner.prototype;
_fn = function() {
  var _methodName;
  _methodName = methodName;
  if (method.length === 0) {
    return ClassPrototype[_methodName] = function() {
      this._styleInterface[_methodName]();
      return this;
    };
  } else if (method.length === 1) {
    return ClassPrototype[_methodName] = function(arg0) {
      this._styleInterface[_methodName](arg0);
      return this;
    };
  } else if (method.length === 2) {
    return ClassPrototype[_methodName] = function(arg0, arg1) {
      this._styleInterface[_methodName](arg0, arg1);
      return this;
    };
  } else if (method.length === 3) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2) {
      this._styleInterface[_methodName](arg0, arg1, arg2);
      return this;
    };
  } else if (method.length === 4) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3) {
      this._styleInterface[_methodName](arg0, arg1, arg2, arg3);
      return this;
    };
  } else if (method.length === 5) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3, arg4) {
      this._styleInterface[_methodName](arg0, arg1, arg2, arg3, arg4);
      return this;
    };
  } else {
    throw Error("Methods with more than 5 args are not supported.");
  }
};
for (methodName in _ref) {
  method = _ref[methodName];
  if (!(method instanceof Function)) {
    continue;
  }
  if (ClassPrototype[methodName] != null) {
    continue;
  }
  if (methodName[0] === '_') {
    continue;
  }
  if (methodName.substr(0, 3) === 'get') {
    continue;
  }
  _fn();
}

_ref1 = StyleSetter.prototype;
_fn1 = function() {
  var _methodName;
  _methodName = methodName;
  if (method.length === 0) {
    return ClassPrototype[_methodName] = function() {
      this._styleSetter[_methodName]();
      return this;
    };
  } else if (method.length === 1) {
    return ClassPrototype[_methodName] = function(arg0) {
      this._styleSetter[_methodName](arg0);
      return this;
    };
  } else if (method.length === 2) {
    return ClassPrototype[_methodName] = function(arg0, arg1) {
      this._styleSetter[_methodName](arg0, arg1);
      return this;
    };
  } else if (method.length === 3) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2) {
      this._styleSetter[_methodName](arg0, arg1, arg2);
      return this;
    };
  } else if (method.length === 4) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3) {
      this._styleSetter[_methodName](arg0, arg1, arg2, arg3);
      return this;
    };
  } else if (method.length === 5) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3, arg4) {
      this._styleSetter[_methodName](arg0, arg1, arg2, arg3, arg4);
      return this;
    };
  } else {
    throw Error("Methods with more than 5 args are not supported.");
  }
};
for (methodName in _ref1) {
  method = _ref1[methodName];
  if (!(method instanceof Function)) {
    continue;
  }
  if (ClassPrototype[methodName] != null) {
    continue;
  }
  if (methodName[0] === '_') {
    continue;
  }
  if (methodName.substr(0, 3) === 'get') {
    continue;
  }
  _fn1();
}

Styles.prototype.getMovement = function() {
  return this._styleSetter._transformer.movement();
};

Styles.prototype.getRotation = function() {
  return this._styleSetter._transformer.rotation();
};

Styles.prototype.getScale = function() {
  return this._styleSetter._transformer.getScale();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3R5bGVzXy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcU3R5bGVzXy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxxR0FBQTs7QUFBQSxXQUFBLEdBQWMsT0FBQSxDQUFRLDJCQUFSLENBQWQsQ0FBQTs7QUFBQSxZQUNBLEdBQWUsT0FBQSxDQUFRLDZCQUFSLENBRGYsQ0FBQTs7QUFBQSxNQUVBLEdBQVMsT0FBQSxDQUFRLGNBQVIsQ0FGVCxDQUFBOztBQUFBLE1BSU0sQ0FBQyxPQUFQLEdBQXVCO3NCQUV0Qjs7QUFBQSxtQkFBQSxvQkFBQSxHQUFzQixTQUFBLEdBQUE7QUFFckIsSUFBQSxJQUFDLENBQUEsWUFBRCxHQUFvQixJQUFBLFdBQUEsQ0FBWSxJQUFaLENBQXBCLENBQUE7QUFBQSxJQUVBLElBQUMsQ0FBQSxhQUFELEdBQXFCLElBQUEsWUFBQSxDQUFhLElBQWIsQ0FGckIsQ0FBQTtBQUFBLElBSUEsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFDLENBQUEsWUFBWSxDQUFDLElBSnRCLENBQUE7QUFBQSxJQU1BLElBQUMsQ0FBQSxlQUFELEdBQW1CLElBQUMsQ0FBQSxZQU5wQixDQUFBO0FBQUEsSUFRQSxJQUFDLENBQUEsZ0JBQUQsR0FBb0IsS0FScEIsQ0FBQTtBQUFBLElBVUEsSUFBQyxDQUFBLGFBQUQsR0FBaUIsS0FWakIsQ0FBQTtBQUFBLElBWUEsSUFBQyxDQUFBLGdCQUFELEdBQW9CLElBQUMsQ0FBQSxzQkFBRCxDQUFBLENBWnBCLENBQUE7QUFBQSxJQWNBLElBQUMsQ0FBQSxnQkFBRCxHQUFvQixDQWRwQixDQUZxQjtFQUFBLENBQXRCLENBQUE7O0FBQUEsbUJBb0JBLHNCQUFBLEdBQXdCLFNBQUEsR0FBQTtXQUV2QixDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxDQUFELEdBQUE7ZUFBTyxLQUFDLENBQUEsU0FBRCxDQUFX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cmUgJy4vc3R5bGVTZXR0ZXIvU3R5bGVTZXR0ZXInXHJcblRyYW5zaXRpb25lciA9IHJlcXVpcmUgJy4vdHJhbnNpdGlvbmVyL1RyYW5zaXRpb25lcidcclxudGltaW5nID0gcmVxdWlyZSAnLi4vLi4vdGltaW5nJ1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBTdHlsZXNcclxuXHJcblx0X19pbml0TWl4aW5IYXNTdHlsZXM6IC0+XHJcblxyXG5cdFx0QF9zdHlsZVNldHRlciA9IG5ldyBTdHlsZVNldHRlciBAXHJcblxyXG5cdFx0QF90cmFuc2l0aW9uZXIgPSBuZXcgVHJhbnNpdGlvbmVyIEBcclxuXHJcblx0XHRAZmlsbCA9IEBfc3R5bGVTZXR0ZXIuZmlsbFxyXG5cclxuXHRcdEBfc3R5bGVJbnRlcmZhY2UgPSBAX3N0eWxlU2V0dGVyXHJcblxyXG5cdFx0QF91cGRhdGVyRGVwbG95ZWQgPSBub1xyXG5cclxuXHRcdEBfc2hvdWxkVXBkYXRlID0gbm9cclxuXHJcblx0XHRAX3VwZGF0ZXJDYWxsYmFjayA9IEBfZ2V0TmV3VXBkYXRlckNhbGxiYWNrKClcclxuXHJcblx0XHRAX2xhc3RUaW1lVXBkYXRlZCA9IDBcclxuXHJcblx0XHRyZXR1cm5cclxuXHJcblx0X2dldE5ld1VwZGF0ZXJDYWxsYmFjazogLT5cclxuXHJcblx0XHQodCkgPT4gQF9kb1VwZGF0ZSB0XHJcblxyXG5cdF9zY2hlZHVsZVVwZGF0ZTogLT5cclxuXHJcblx0XHRAX3Nob3VsZFVwZGF0ZSA9IHllc1xyXG5cclxuXHRcdGRvIEBfZGVwbG95VXBkYXRlclxyXG5cclxuXHRcdHJldHVyblxyXG5cclxuXHRfZGVwbG95VXBkYXRlcjogLT5cclxuXHJcblx0XHRyZXR1cm4gaWYgQF91cGRhdGVyRGVwbG95ZWRcclxuXHJcblx0XHRAX3VwZGF0ZXJEZXBsb3llZCA9IHllc1xyXG5cclxuXHRcdHRpbWluZy5hZnRlckVhY2hGcmFtZSBAX3VwZGF0ZXJDYWxsYmFja1xyXG5cclxuXHRfdW5kZXBsb3lVcGRhdGVyOiAtPlxyXG5cclxuXHRcdHJldHVybiB1bmxlc3MgQF91cGRhdGVyRGVwbG95ZWRcclxuXHJcblx0XHRAX3VwZGF0ZXJEZXBsb3llZCA9IG5vXHJcblxyXG5cdFx0dGltaW5nLmNhbmNlbEFmdGVyRWFjaEZyYW1lIEBfdXBkYXRlckNhbGxiYWNrXHJcblxyXG5cdF9kb1VwZGF0ZTogKHQpIC0+XHJcblxyXG5cdFx0dW5sZXNzIEBfc2hvdWxkVXBkYXRlXHJcblxyXG5cdFx0XHRpZiB0IC0gQF9sYXN0VGltZVVwZGF0ZWQgPiAxMDBcclxuXHJcblx0XHRcdFx0ZG8gQF91bmRlcGxveVVwZGF0ZXJcclxuXHJcblx0XHRcdHJldHVyblxyXG5cclxuXHRcdEBfbGFzdFRpbWVVcGRhdGVkID0gdFxyXG5cclxuXHRcdEBfc2hvdWxkVXBkYXRlID0gbm9cclxuXHJcblx0XHRkbyBAX3RyYW5zaXRpb25lci5fdXBkYXRlVHJhbnNpdGlvblxyXG5cclxuXHRcdGRvIEBfc3R5bGVTZXR0ZXIuX3VwZGF0ZVRyYW5zZm9ybXNcclxuXHJcblx0XHRkbyBAX3N0eWxlU2V0dGVyLl91cGRhdGVGaWx0ZXJzXHJcblxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdF9fY2xvbmVyRm9ySGFzU3R5bGVzOiAobmV3RWwpIC0+XHJcblxyXG5cdFx0bmV3RWwuX3N0eWxlU2V0dGVyID0gQF9zdHlsZVNldHRlci5jbG9uZSBuZXdFbFxyXG5cdFx0bmV3RWwuZmlsbCA9IG5ld0VsLl9zdHlsZVNldHRlci5maWxsXHJcblx0XHRuZXdFbC5fdHJhbnNpdGlvbmVyID0gQF90cmFuc2l0aW9uZXIuY2xvbmUgbmV3RWxcclxuXHJcblx0XHRuZXdFbC5fdXBkYXRlckRlcGxveWVkID0gbm9cclxuXHJcblx0XHRuZXdFbC5fc2hvdWxkVXBkYXRlID0gbm9cclxuXHJcblx0XHRuZXdFbC5fdXBkYXRlckNhbGxiYWNrID0gbmV3RWwuX2dldE5ld1VwZGF0ZXJDYWxsYmFjaygpXHJcblxyXG5cdFx0bmV3RWwuX2xhc3RUaW1lVXBkYXRlZFxyXG5cclxuXHRcdGlmIEBfc3R5bGVJbnRlcmZhY2UgaXMgQF9zdHlsZVNldHRlclxyXG5cclxuXHRcdFx0bmV3RWwuX3N0eWxlSW50ZXJmYWNlID0gbmV3RWwuX3N0eWxlU2V0dGVyXHJcblxyXG5cdFx0ZWxzZVxyXG5cclxuXHRcdFx0bmV3RWwuX3N0eWxlSW50ZXJmYWNlID0gbmV3RWwuX3RyYW5zaXRpb25lclxyXG5cclxuXHRcdHJldHVyblxyXG5cclxuXHRfX3F1aXR0ZXJGb3JIYXNTdHlsZXM6IC0+XHJcblxyXG5cdFx0ZG8gQF91bmRlcGxveVVwZGF0ZXJcclxuXHJcblx0ZW5hYmxlVHJhbnNpdGlvbjogKGR1cmF0aW9uKSAtPlxyXG5cclxuXHRcdCMgY29uc29sZS5sb2cgJ2VuYWJsZSdcclxuXHJcblx0XHRAX3N0eWxlSW50ZXJmYWNlID0gQF90cmFuc2l0aW9uZXJcclxuXHJcblx0XHRAX3RyYW5zaXRpb25lci5lbmFibGUgZHVyYXRpb25cclxuXHJcblx0XHRAXHJcblxyXG5cdGRpc2FibGVUcmFuc2l0aW9uOiAtPlxyXG5cclxuXHRcdEBfc3R5bGVJbnRlcmZhY2UgPSBAX3N0eWxlU2V0dGVyXHJcblxyXG5cdFx0ZG8gQF90cmFuc2l0aW9uZXIuZGlzYWJsZVxyXG5cclxuXHRcdEBcclxuXHJcblx0dHJhbnM6IChkdXJhdGlvbikgLT4gQGVuYWJsZVRyYW5zaXRpb24gZHVyYXRpb25cclxuXHJcblx0bm9UcmFuczogLT4gZG8gQGRpc2FibGVUcmFuc2l0aW9uXHJcblxyXG5cdGVhc2U6IChmdW5jTmFtZU9yRmlyc3ROdW1PZkN1YmljQmV6aWVyLCBzZWNvbmROdW0sIHRoaXJkTnVtLCBmb3VydGhOdW0pIC0+XHJcblxyXG5cdFx0QF90cmFuc2l0aW9uZXIuZWFzZSBmdW5jTmFtZU9yRmlyc3ROdW1PZkN1YmljQmV6aWVyLCBzZWNvbmROdW0sIHRoaXJkTnVtLCBmb3VydGhOdW1cclxuXHJcblx0XHRAXHJcblxyXG5DbGFzc1Byb3RvdHlwZSA9IFN0eWxlcy5wcm90b3R5cGVcclxuXHJcbmZvciBtZXRob2ROYW1lLCBtZXRob2Qgb2YgVHJhbnNpdGlvbmVyLnByb3RvdHlwZVxyXG5cclxuXHRjb250aW51ZSB1bmxlc3MgbWV0aG9kIGluc3RhbmNlb2YgRnVuY3Rpb25cclxuXHJcblx0Y29udGludWUgaWYgQ2xhc3NQcm90b3R5cGVbbWV0aG9kTmFtZV0/XHJcblxyXG5cdGNvbnRpbnVlIGlmIG1ldGhvZE5hbWVbMF0gaXMgJ18nXHJcblxyXG5cdGNvbnRpbnVlIGlmIG1ldGhvZE5hbWUuc3Vic3RyKDAsIDMpIGlzICdnZXQnXHJcblxyXG5cdGRvIC0+XHJcblxyXG5cdFx0X21ldGhvZE5hbWUgPSBtZXRob2ROYW1lXHJcblxyXG5cdFx0aWYgbWV0aG9kLmxlbmd0aCBpcyAwXHJcblxyXG5cdFx0XHRDbGFzc1Byb3RvdHlwZVtfbWV0aG9kTmFtZV0gPSAtPlxyXG5cclxuXHRcdFx0XHQjIFRoaXMgaXMgbW9yZSBwZXJmb3JtYW50IHRoYW4gbWV0aG9kLmFwcGx5KClcclxuXHRcdFx0XHQjXHJcblx0XHRcdFx0IyBBcmd1bWVudCBzcGxhdHMgd29uJ3Qgd29yayBoZXJlIHRob3VnaC5cclxuXHRcdFx0XHRAX3N0eWxlSW50ZXJmYWNlW19tZXRob2ROYW1lXSgpXHJcblxyXG5cdFx0XHRcdEBcclxuXHJcblx0XHRlbHNlIGlmIG1ldGhvZC5sZW5ndGggaXMgMVxyXG5cclxuXHRcdFx0Q2xhc3NQcm90b3R5cGVbX21ldGhvZE5hbWVdID0gKGFyZzApIC0+XHJcblxyXG5cdFx0XHRcdEBfc3R5bGVJbnRlcmZhY2VbX21ldGhvZE5hbWVdIGFyZzBcclxuXHJcblx0XHRcdFx0QFxyXG5cclxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyAyXHJcblxyXG5cdFx0XHRDbGFzc1Byb3RvdHlwZVtfbWV0aG9kTmFtZV0gPSAoYXJnMCwgYXJnMSkgLT5cclxuXHJcblx0XHRcdFx0QF9zdHlsZUludGVyZmFjZVtfbWV0aG9kTmFtZV0gYXJnMCwgYXJnMVxyXG5cclxuXHRcdFx0XHRAXHJcblxyXG5cdFx0ZWxzZSBpZiBtZXRob2QubGVuZ3RoIGlzIDNcclxuXHJcblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwLCBhcmcxLCBhcmcyKSAtPlxyXG5cclxuXHRcdFx0XHRAX3N0eWxlSW50ZXJmYWNlW19tZXRob2ROYW1lXSBhcmcwLCBhcmcxLCBhcmcyXHJcblxyXG5cdFx0XHRcdEBcclxuXHJcblx0XHRlbHNlIGlmIG1ldGhvZC5sZW5ndGggaXMgNFxyXG5cclxuXHRcdFx0Q2xhc3NQcm90b3R5cGVbX21ldGhvZE5hbWVdID0gKGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMpIC0+XHJcblxyXG5cdFx0XHRcdEBfc3R5bGVJbnRlcmZhY2VbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzEsIGFyZzIsIGFyZzNcclxuXHJcblx0XHRcdFx0QFxyXG5cclxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyA1XHJcblxyXG5cdFx0XHRDbGFzc1Byb3RvdHlwZVtfbWV0aG9kTmFtZV0gPSAoYXJnMCwgYXJnMSwgYXJnMiwgYXJnMywgYXJnNCkgLT5cclxuXHJcblx0XHRcdFx0QF9zdHlsZUludGVyZmFjZVtfbWV0aG9kTmFtZV0gYXJnMCwgYXJnMSwgYXJnMiwgYXJnMywgYXJnNFxyXG5cclxuXHRcdFx0XHRAXHJcblxyXG5cdFx0ZWxzZVxyXG5cclxuXHRcdFx0dGhyb3cgRXJyb3IgXCJNZXRob2RzIHdpdGggbW9yZSB0aGFuIDUgYXJncyBhcmUgbm90IHN1cHBvcnRlZC5cIlxyXG5cclxuZm9yIG1ldGhvZE5hbWUsIG1ldGhvZCBvZiBTdHlsZVNldHRlci5wcm90b3R5cGVcclxuXHJcblx0Y29udGludWUgdW5sZXNzIG1ldGhvZCBpbnN0YW5jZW9mIEZ1bmN0aW9uXHJcblxyXG5cdGNvbnRpbnVlIGlmIENsYXNzUHJvdG90eXBlW21ldGhvZE5hbWVdP1xyXG5cclxuXHRjb250aW51ZSBpZiBtZXRob2ROYW1lWzBdIGlzICdfJ1xyXG5cclxuXHRjb250aW51ZSBpZiBtZXRob2ROYW1lLnN1YnN0cigwLCAzKSBpcyAnZ2V0J1xyXG5cclxuXHRkbyAtPlxyXG5cclxuXHRcdF9tZXRob2ROYW1lID0gbWV0aG9kTmFtZVxyXG5cclxuXHRcdGlmIG1ldGhvZC5sZW5ndGggaXMgMFxyXG5cclxuXHRcdFx0Q2xhc3NQcm90b3R5cGVbX21ldGhvZE5hbWVdID0gLT5cclxuXHJcblx0XHRcdFx0IyBUaGlzIGlzIG1vcmUgcGVyZm9ybWFudCB0aGFuIG1ldGhvZC5hcHBseSgpXHJcblx0XHRcdFx0I1xyXG5cdFx0XHRcdCMgQXJndW1lbnQgc3BsYXRzIHdvbid0IHdvcmsgaGVyZSB0aG91Z2guXHJcblx0XHRcdFx0QF9zdHlsZVNldHRlcltfbWV0aG9kTmFtZV0oKVxyXG5cclxuXHRcdFx0XHRAXHJcblxyXG5cdFx0ZWxzZSBpZiBtZXRob2QubGVuZ3RoIGlzIDFcclxuXHJcblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwKSAtPlxyXG5cclxuXHRcdFx0XHRAX3N0eWxlU2V0dGVyW19tZXRob2ROYW1lXSBhcmcwXHJcblxyXG5cdFx0XHRcdEBcclxuXHJcblx0XHRlbHNlIGlmIG1ldGhvZC5sZW5ndGggaXMgMlxyXG5cclxuXHRcdFx0Q2xhc3NQcm90b3R5cGVbX21ldGhvZE5hbWVdID0gKGFyZzAsIGFyZzEpIC0+XHJcblxyXG5cdFx0XHRcdEBfc3R5bGVTZXR0ZXJbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzFcclxuXHJcblx0XHRcdFx0QFxyXG5cclxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyAzXHJcblxyXG5cdFx0XHRDbGFzc1Byb3RvdHlwZVtfbWV0aG9kTmFtZV0gPSAoYXJnMCwgYXJnMSwgYXJnMikgLT5cclxuXHJcblx0XHRcdFx0QF9zdHlsZVNldHRlcltfbWV0aG9kTmFtZV0gYXJnMCwgYXJnMSwgYXJnMlxyXG5cclxuXHRcdFx0XHRAXHJcblxyXG5cdFx0ZWxzZSBpZiBtZXRob2QubGVuZ3RoIGlzIDRcclxuXHJcblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwLCBhcmcxLCBhcmcyLCBhcmczKSAtPlxyXG5cclxuXHRcdFx0XHRAX3N0eWxlU2V0dGVyW19tZXRob2ROYW1lXSBhcmcwLCBhcmcxLCBhcmcyLCBhcmczXHJcblxyXG5cdFx0XHRcdEBcclxuXHJcblx0XHRlbHNlIGlmIG1ldGhvZC5sZW5ndGggaXMgNVxyXG5cclxuXHRcdFx0Q2xhc3NQcm90b3R5cGVbX21ldGhvZE5hbWVdID0gKGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzQpIC0+XHJcblxyXG5cdFx0XHRcdEBfc3R5bGVTZXR0ZXJbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzRcclxuXHJcblx0XHRcdFx0QFxyXG5cclxuXHRcdGVsc2VcclxuXHJcblx0XHRcdHRocm93IEVycm9yIFwiTWV0aG9kcyB3aXRoIG1vcmUgdGhhbiA1IGFyZ3MgYXJlIG5vdCBzdXBwb3J0ZWQuXCJcclxuXHJcbiMgbGV0J3MganVzdCBleHBvc2UgdGhlc2UgdGVtcG9yYXJpbHksIHRpbGwgd2UgZG8gdGhlIHJld3JpdGVcclxuU3R5bGVzOjpnZXRNb3ZlbWVudCA9IC0+XHJcblxyXG5cdEBfc3R5bGVTZXR0ZXIuX3RyYW5zZm9ybWVyLm1vdmVtZW50KClcclxuXHJcblN0eWxlczo6Z2V0Um90YXRpb24gPSAtPlxyXG5cclxuXHRAX3N0eWxlU2V0dGVyLl90cmFuc2Zvcm1lci5yb3RhdGlvbigpXHJcblxyXG5TdHlsZXM6OmdldFNjYWxlID0gLT5cclxuXHJcblx0QF9zdHlsZVNldHRlci5fdHJhbnNmb3JtZXIuZ2V0U2NhbGUoKSJdfQ==
},{"../../timing":127,"./styleSetter/StyleSetter":115,"./transitioner/Transitioner":123}],114:[function(require,module,exports){
var Timing_, array, timing,
  __slice = [].slice;

array = require('utila').array;

timing = require('../../timing');

module.exports = Timing_ = (function() {
  function Timing_() {}

  Timing_.prototype.__initMixinTiming = function() {
    this._quittersForTiming = [];
    return null;
  };

  Timing_.prototype.__clonerForTiming = function(newEl) {
    return newEl._quittersForTiming = [];
  };

  Timing_.prototype.__quitterForTiming = function() {
    while (true) {
      if (this._quittersForTiming.length < 1) {
        return;
      }
      this._quittersForTiming.pop()();
    }
  };

  Timing_.prototype.wait = function() {
    var ms, rest;
    ms = arguments[0], rest = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return this._eventEnabledMethod(rest, (function(_this) {
      return function(cb) {
        return timing.wait(ms, function() {
          return cb.call(_this);
        });
      };
    })(this));
  };

  Timing_.prototype.immediately = function() {
    return this._eventEnabledMethod(arguments, (function(_this) {
      return function(cb) {
        return timing.nextTick(function() {
          return cb.call(_this);
        });
      };
    })(this));
  };

  Timing_.prototype.eachFrame = function() {
    return this._eventEnabledMethod(arguments, (function(_this) {
      return function(cb) {
        var canceled, canceler, startTime, theCallback;
        startTime = new Int32Array(1);
        startTime[0] = -1;
        canceled = false;
        canceler = function() {
          if (canceled) {
            return;
          }
          timing.cancelOnEachFrame(theCallback);
          array.pluckOneItem(_this._quittersForTiming, canceler);
          return canceled = true;
        };
        _this._quittersForTiming.push(canceler);
        theCallback = function(t) {
          var elapsedTime;
          if (startTime[0] < 0) {
            startTime[0] = t;
            elapsedTime = 0;
          } else {
            elapsedTime = t - startTime[0];
          }
          cb.call(_this, elapsedTime, canceler);
          return null;
        };
        return timing.onEachFrame(theCallback);
      };
    })(this));
  };

  Timing_.prototype.run = function() {
    this._eventEnabledMethod(arguments, (function(_this) {
      return function(cb) {
        return cb.call(_this);
      };
    })(this));
    return this;
  };

  Timing_.prototype.every = function() {
    var args, ms;
    ms = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return this._eventEnabledMethod(args, (function(_this) {
      return function(cb) {
        var canceled, canceler, theCallback;
        canceled = false;
        canceler = function() {
          if (canceled) {
            return;
          }
          timing.cancelEvery(theCallback);
          array.pluckOneItem(_this._quittersForTiming, canceler);
          return canceled = true;
        };
        _this._quittersForTiming.push(canceler);
        theCallback = function() {
          return cb.call(_this, canceler);
        };
        return timing.every(ms, theCallback);
      };
    })(this));
  };

  Timing_.prototype.everyAndNow = function() {
    var args, ms;
    ms = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return this._eventEnabledMethod(args, (function(_this) {
      return function(cb) {
        var canceled, canceler, theCallback;
        canceled = false;
        canceler = function() {
          if (canceled) {
            return;
          }
          timing.cancelEvery(theCallback);
          array.pluckOneItem(_this._quittersForTiming, canceler);
          return canceled = true;
        };
        _this._quittersForTiming.push(canceler);
        theCallback = function() {
          return cb.call(_this, canceler);
        };
        timing.every(ms, theCallback);
        return timing.afterNextFrame(theCallback);
      };
    })(this));
  };

  return Timing_;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGltaW5nXy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcVGltaW5nXy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxzQkFBQTtFQUFBLGtCQUFBOztBQUFBLFFBQVUsT0FBQSxDQUFRLE9BQVIsRUFBVCxLQUFELENBQUE7O0FBQUEsTUFDQSxHQUFTLE9BQUEsQ0FBUSxjQUFSLENBRFQsQ0FBQTs7QUFBQSxNQUdNLENBQUMsT0FBUCxHQUF1Qjt1QkFFdEI7O0FBQUEsb0JBQUEsaUJBQUEsR0FBbUIsU0FBQSxHQUFBO0FBRWxCLElBQUEsSUFBQyxDQUFBLGtCQUFELEdBQXNCLEVBQXRCLENBQUE7V0FFQSxLQUprQjtFQUFBLENBQW5CLENBQUE7O0FBQUEsb0JBTUEsaUJBQUEsR0FBbUIsU0FBQyxLQUFELEdBQUE7V0FFbEIsS0FBSyxDQUFDLGtCQUFOLEdBQTJCLEdBRlQ7RUFBQSxDQU5uQixDQUFBOztBQUFBLG9CQVVBLGtCQUFBLEdBQW9CLFNBQUEsR0FBQTtBQUVuQixXQUFBLElBQUEsR0FBQTtBQUVDLE1BQUEsSUFBVSxJQUFDLENBQUEsa0JBQWtCLENBQUMsTUFBcEIsR0FBNkIsQ0FBdkM7QUFBQSxjQUFBLENBQUE7T0FBQTtBQUFBLE1BRUEsSUFBQyxDQUFBLGtCQUFrQixDQUFDLEdBQXBCLENBQUEsQ0FBQSxDQUFBLENBRkEsQ0FGRDtJQUFBLENBRm1CO0VBQUEsQ0FWcEIsQ0FBQTs7QUFBQSxvQkFvQkEsSUFBQSxHQUFNLFNBQUEsR0FBQTtBQUVMLFFBQUEsUUFBQTtBQUFBLElBRk0sbUJBQUksOERBRVYsQ0FBQTtXQUFBLElBQUMsQ0FBQSxtQkFBRCxDQUFxQixJQUFyQixFQUEyQixDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxFQUFELEdBQUE7ZUFFMUIsTUFBTSxDQUFDLElBQVAsQ0FBWSxFQUFaLEVBQWdCLFNBQUEsR0FBQTtpQkFF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Q0FBQTtBQUFBLFFBWUEsS0FBQyxDQUFBLGtCQUFrQixDQUFDLElBQXBCLENBQXlCLFFBQXpCLENBWkEsQ0FBQTtBQUFBLFFBY0EsV0FBQSxHQUFjLFNBQUEsR0FBQTtpQkFFYixFQUFFLENBQUMsSUFBSCxDQUFRLEtBQVIsRUFBVyxRQUFYLEVBRmE7UUFBQSxDQWRkLENBQUE7QUFBQSxRQWtCQSxNQUFNLENBQUMsS0FBUCxDQUFhLEVBQWIsRUFBaUIsV0FBakIsQ0FsQkEsQ0FBQTtlQW9CQSxNQUFNLENBQUMsY0FBUCxDQUFzQixXQUF0QixFQXRCMEI7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUEzQixFQUZZO0VBQUEsQ0EzR2IsQ0FBQTs7aUJBQUE7O0lBTEQsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbInthcnJheX0gPSByZXF1aXJlICd1dGlsYSdcclxudGltaW5nID0gcmVxdWlyZSAnLi4vLi4vdGltaW5nJ1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBUaW1pbmdfXHJcblxyXG5cdF9faW5pdE1peGluVGltaW5nOiAtPlxyXG5cclxuXHRcdEBfcXVpdHRlcnNGb3JUaW1pbmcgPSBbXVxyXG5cclxuXHRcdG51bGxcclxuXHJcblx0X19jbG9uZXJGb3JUaW1pbmc6IChuZXdFbCkgLT5cclxuXHJcblx0XHRuZXdFbC5fcXVpdHRlcnNGb3JUaW1pbmcgPSBbXVxyXG5cclxuXHRfX3F1aXR0ZXJGb3JUaW1pbmc6IC0+XHJcblxyXG5cdFx0bG9vcFxyXG5cclxuXHRcdFx0cmV0dXJuIGlmIEBfcXVpdHRlcnNGb3JUaW1pbmcubGVuZ3RoIDwgMVxyXG5cclxuXHRcdFx0QF9xdWl0dGVyc0ZvclRpbWluZy5wb3AoKSgpXHJcblxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdHdhaXQ6IChtcywgcmVzdC4uLikgLT5cclxuXHJcblx0XHRAX2V2ZW50RW5hYmxlZE1ldGhvZCByZXN0LCAoY2IpID0+XHJcblxyXG5cdFx0XHR0aW1pbmcud2FpdCBtcywgPT5cclxuXHJcblx0XHRcdFx0Y2IuY2FsbCBAXHJcblxyXG5cdGltbWVkaWF0ZWx5OiAtPlxyXG5cclxuXHRcdEBfZXZlbnRFbmFibGVkTWV0aG9kIGFyZ3VtZW50cywgKGNiKSA9PlxyXG5cclxuXHRcdFx0dGltaW5nLm5leHRUaWNrID0+XHJcblxyXG5cdFx0XHRcdGNiLmNhbGwgQFxyXG5cclxuXHRlYWNoRnJhbWU6IC0+XHJcblxyXG5cdFx0QF9ldmVudEVuYWJsZWRNZXRob2QgYXJndW1lbnRzLCAoY2IpID0+XHJcblxyXG5cdFx0XHRzdGFydFRpbWUgPSBuZXcgSW50MzJBcnJheSAxXHJcblx0XHRcdHN0YXJ0VGltZVswXSA9IC0xXHJcblxyXG5cdFx0XHRjYW5jZWxlZCA9IG5vXHJcblxyXG5cdFx0XHRjYW5jZWxlciA9ID0+XHJcblxyXG5cdFx0XHRcdHJldHVybiBpZiBjYW5jZWxlZFxyXG5cclxuXHRcdFx0XHR0aW1pbmcuY2FuY2VsT25FYWNoRnJhbWUgdGhlQ2FsbGJhY2tcclxuXHJcblx0XHRcdFx0YXJyYXkucGx1Y2tPbmVJdGVtIEBfcXVpdHRlcnNGb3JUaW1pbmcsIGNhbmNlbGVyXHJcblxyXG5cdFx0XHRcdGNhbmNlbGVkID0geWVzXHJcblxyXG5cdFx0XHRAX3F1aXR0ZXJzRm9yVGltaW5nLnB1c2ggY2FuY2VsZXJcclxuXHJcblx0XHRcdHRoZUNhbGxiYWNrID0gKHQpID0+XHJcblxyXG5cdFx0XHRcdGlmIHN0YXJ0VGltZVswXSA8IDBcclxuXHJcblx0XHRcdFx0XHRzdGFydFRpbWVbMF0gPSB0XHJcblxyXG5cdFx0XHRcdFx0ZWxhcHNlZFRpbWUgPSAwXHJcblxyXG5cdFx0XHRcdGVsc2VcclxuXHJcblx0XHRcdFx0XHRlbGFwc2VkVGltZSA9IHQgLSBzdGFydFRpbWVbMF1cclxuXHJcblx0XHRcdFx0Y2IuY2FsbCBALCBlbGFwc2VkVGltZSwgY2FuY2VsZXJcclxuXHJcblx0XHRcdFx0bnVsbFxyXG5cclxuXHRcdFx0dGltaW5nLm9uRWFjaEZyYW1lIHRoZUNhbGxiYWNrXHJcblxyXG5cdHJ1bjogLT5cclxuXHJcblx0XHRAX2V2ZW50RW5hYmxlZE1ldGhvZCBhcmd1bWVudHMsIChjYikgPT5cclxuXHJcblx0XHRcdGNiLmNhbGwgQFxyXG5cclxuXHRcdEBcclxuXHJcblx0ZXZlcnk6IChtcywgYXJncy4uLikgLT5cclxuXHJcblx0XHRAX2V2ZW50RW5hYmxlZE1ldGhvZCBhcmdzLCAoY2IpID0+XHJcblxyXG5cdFx0XHRjYW5jZWxlZCA9IG5vXHJcblxyXG5cdFx0XHRjYW5jZWxlciA9ID0+XHJcblxyXG5cdFx0XHRcdHJldHVybiBpZiBjYW5jZWxlZFxyXG5cclxuXHRcdFx0XHR0aW1pbmcuY2FuY2VsRXZlcnkgdGhlQ2FsbGJhY2tcclxuXHJcblx0XHRcdFx0YXJyYXkucGx1Y2tPbmVJdGVtIEBfcXVpdHRlcnNGb3JUaW1pbmcsIGNhbmNlbGVyXHJcblxyXG5cdFx0XHRcdGNhbmNlbGVkID0geWVzXHJcblxyXG5cdFx0XHRAX3F1aXR0ZXJzRm9yVGltaW5nLnB1c2ggY2FuY2VsZXJcclxuXHJcblx0XHRcdHRoZUNhbGxiYWNrID0gPT5cclxuXHJcblx0XHRcdFx0Y2IuY2FsbCBALCBjYW5jZWxlclxyXG5cclxuXHRcdFx0dGltaW5nLmV2ZXJ5IG1zLCB0aGVDYWxsYmFja1xyXG5cclxuXHRldmVyeUFuZE5vdzogKG1zLCBhcmdzLi4uKSAtPlxyXG5cclxuXHRcdEBfZXZlbnRFbmFibGVkTWV0aG9kIGFyZ3MsIChjYikgPT5cclxuXHJcblx0XHRcdGNhbmNlbGVkID0gbm9cclxuXHJcblx0XHRcdGNhbmNlbGVyID0gPT5cclxuXHJcblx0XHRcdFx0cmV0dXJuIGlmIGNhbmNlbGVkXHJcblxyXG5cdFx0XHRcdHRpbWluZy5jYW5jZWxFdmVyeSB0aGVDYWxsYmFja1xyXG5cclxuXHRcdFx0XHRhcnJheS5wbHVja09uZUl0ZW0gQF9xdWl0dGVyc0ZvclRpbWluZywgY2FuY2VsZXJcclxuXHJcblx0XHRcdFx0Y2FuY2VsZWQgPSB5ZXNcclxuXHJcblx0XHRcdEBfcXVpdHRlcnNGb3JUaW1pbmcucHVzaCBjYW5jZWxlclxyXG5cclxuXHRcdFx0dGhlQ2FsbGJhY2sgPSA9PlxyXG5cclxuXHRcdFx0XHRjYi5jYWxsIEAsIGNhbmNlbGVyXHJcblxyXG5cdFx0XHR0aW1pbmcuZXZlcnkgbXMsIHRoZUNhbGxiYWNrXHJcblxyXG5cdFx0XHR0aW1pbmcuYWZ0ZXJOZXh0RnJhbWUgdGhlQ2FsbGJhY2siXX0=
},{"../../timing":127,"utila":110}],115:[function(require,module,exports){
var Fill_, Filters_, Generals_, Layout_, StyleSetter, Transforms_, Typography_, classic, object, _ref;

Generals_ = require('./mixin/Generals_');

Layout_ = require('./mixin/Layout_');

Fill_ = require('./mixin/Fill_');

Typography_ = require('./mixin/Typography_');

Transforms_ = require('./mixin/Transforms_');

Filters_ = require('./mixin/Filters_');

_ref = require('utila'), classic = _ref.classic, object = _ref.object;

module.exports = classic.mix(Generals_, Layout_, Fill_, Typography_, Transforms_, Filters_, StyleSetter = (function() {
  function StyleSetter(el) {
    this.el = el;
    this.node = this.el.node;
    this._styles = this.node.style;
    StyleSetter.__initMixinsFor(this);
  }

  StyleSetter.prototype._scheduleUpdate = function() {
    return this.el._scheduleUpdate();
  };

  StyleSetter.prototype.clone = function(el) {
    var key, newObj;
    newObj = Object.create(this.constructor.prototype);
    newObj.el = el;
    newObj.node = el.node;
    newObj._styles = el.node.style;
    StyleSetter.__applyClonersFor(this, [newObj]);
    for (key in this) {
      if (newObj[key] !== void 0) {
        continue;
      }
      if (this.hasOwnProperty(key)) {
        newObj[key] = object.clone(this[key], true);
      }
    }
    return newObj;
  };

  return StyleSetter;

})());

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3R5bGVTZXR0ZXIuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcZWxcXG1peGluXFxzdHlsZVNldHRlclxcU3R5bGVTZXR0ZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsaUdBQUE7O0FBQUEsU0FBQSxHQUFZLE9BQUEsQ0FBUSxtQkFBUixDQUFaLENBQUE7O0FBQUEsT0FDQSxHQUFVLE9BQUEsQ0FBUSxpQkFBUixDQURWLENBQUE7O0FBQUEsS0FFQSxHQUFRLE9BQUEsQ0FBUSxlQUFSLENBRlIsQ0FBQTs7QUFBQSxXQUdBLEdBQWMsT0FBQSxDQUFRLHFCQUFSLENBSGQsQ0FBQTs7QUFBQSxXQUlBLEdBQWMsT0FBQSxDQUFRLHFCQUFSLENBSmQsQ0FBQTs7QUFBQSxRQUtBLEdBQVcsT0FBQSxDQUFRLGtCQUFSLENBTFgsQ0FBQTs7QUFBQSxPQU1vQixPQUFBLENBQVEsT0FBUixDQUFwQixFQUFDLGVBQUEsT0FBRCxFQUFVLGNBQUEsTUFOVixDQUFBOztBQUFBLE1BUU0sQ0FBQyxPQUFQLEdBQWlCLE9BQU8sQ0FBQyxHQUFSLENBQVksU0FBWixFQUF1QixPQUF2QixFQUFnQyxLQUFoQyxFQUF1QyxXQUF2QyxFQUFvRCxXQUFwRCxFQUFpRSxRQUFqRSxFQUFpRjtBQUVwRixFQUFBLHFCQUFFLEVBQUYsR0FBQTtBQUVaLElBRmEsSUFBQyxDQUFBLEtBQUEsRUFFZCxDQUFBO0FBQUEsSUFBQSxJQUFDLENBQUEsSUFBRCxHQUFRLElBQUMsQ0FBQSxFQUFFLENBQUMsSUFBWixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsT0FBRCxHQUFXLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FGakIsQ0FBQTtBQUFBLElBSUEsV0FBVyxDQUFDLGVBQVosQ0FBNEIsSUFBNUIsQ0FKQSxDQUZZO0VBQUEsQ0FBYjs7QUFBQSx3QkFRQSxlQUFBLEdBQWlCLFNBQUEsR0FBQTtXQUViLElBQUMsQ0FBQSxFQUFFLENBQUMsZUFBUCxDQUFBLEVBRmdCO0VBQUEsQ0FSakIsQ0FBQTs7QUFBQSx3QkFZQSxLQUFBLEdBQU8sU0FBQyxFQUFELEdBQUE7QUFFTixRQUFBLFdBQUE7QUFBQSxJQUFBLE1BQUEsR0FBUyxNQUFNLENBQUMsTUFBUCxDQUFjLElBQUMsQ0FBQSxXQUFXLENBQUEsU0FBMUIsQ0FBVCxDQUFBO0FBQUEsSUFFQSxNQUFNLENBQUMsRUFBUCxHQUFZLEVBRlosQ0FBQTtBQUFBLElBR0EsTUFBTSxDQUFDLElBQVAsR0FBYyxFQUFFLENBQUMsSUFIakIsQ0FBQTtBQUFBLElBSUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUp6QixDQUFBO0FBQUEsSUFNQSxXQUFXLENBQUMsaUJBQVosQ0FBOEIsSUFBOUIsRUFBaUMsQ0FBQyxNQUFELENBQWpDLENBTkEsQ0FBQTtBQVFBLFNBQUEsV0FBQSxHQUFBO0FBRUMsTUFBQSxJQUFZLE1BQU8sQ0FBQSxHQUFBLENBQVAsS0FBaUIsTUFBN0I7QUFBQSxpQkFBQTtPQUFBO0FBRUEsTUFBQSxJQUFHLElBQUMsQ0FBQSxjQUFELENBQWdCLEdBQWhCLENBQUg7QUFFQyxRQUFBLE1BQU8sQ0FBQSxHQUFBLENBQVAsR0FBYyxNQUFNLENBQUMsS0FBUCxDQUFhLElBQUUsQ0FBQSxHQUFBLENBQWYsRUFBcUIsSUFBckIsQ0FBZCxDQUZEO09BSkQ7QUFBQSxLQVJBO1dBZ0JBLE9BbEJNO0VBQUEsQ0FaUCxDQUFBOztxQkFBQTs7SUFGZ0IsQ0FSakIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIkdlbmVyYWxzXyA9IHJlcXVpcmUgJy4vbWl4aW4vR2VuZXJhbHNfJ1xuTGF5b3V0XyA9IHJlcXVpcmUgJy4vbWl4aW4vTGF5b3V0XydcbkZpbGxfID0gcmVxdWlyZSAnLi9taXhpbi9GaWxsXydcblR5cG9ncmFwaHlfID0gcmVxdWlyZSAnLi9taXhpbi9UeXBvZ3JhcGh5XydcblRyYW5zZm9ybXNfID0gcmVxdWlyZSAnLi9taXhpbi9UcmFuc2Zvcm1zXydcbkZpbHRlcnNfID0gcmVxdWlyZSAnLi9taXhpbi9GaWx0ZXJzXydcbntjbGFzc2ljLCBvYmplY3R9ID0gcmVxdWlyZSAndXRpbGEnXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3NpYy5taXggR2VuZXJhbHNfLCBMYXlvdXRfLCBGaWxsXywgVHlwb2dyYXBoeV8sIFRyYW5zZm9ybXNfLCBGaWx0ZXJzXywgY2xhc3MgU3R5bGVTZXR0ZXJcblxuXHRjb25zdHJ1Y3RvcjogKEBlbCkgLT5cblxuXHRcdEBub2RlID0gQGVsLm5vZGVcblxuXHRcdEBfc3R5bGVzID0gQG5vZGUuc3R5bGVcblxuXHRcdFN0eWxlU2V0dGVyLl9faW5pdE1peGluc0ZvciBAXG5cblx0X3NjaGVkdWxlVXBkYXRlOiAtPlxuXG5cdFx0ZG8gQGVsLl9zY2hlZHVsZVVwZGF0ZVxuXG5cdGNsb25lOiAoZWwpIC0+XG5cblx0XHRuZXdPYmogPSBPYmplY3QuY3JlYXRlIEBjb25zdHJ1Y3Rvcjo6XG5cblx0XHRuZXdPYmouZWwgPSBlbFxuXHRcdG5ld09iai5ub2RlID0gZWwubm9kZVxuXHRcdG5ld09iai5fc3R5bGVzID0gZWwubm9kZS5zdHlsZVxuXG5cdFx0U3R5bGVTZXR0ZXIuX19hcHBseUNsb25lcnNGb3IgQCwgW25ld09ial1cblxuXHRcdGZvciBrZXkgb2YgQFxuXG5cdFx0XHRjb250aW51ZSBpZiBuZXdPYmpba2V5XSBpc250IHVuZGVmaW5lZFxuXG5cdFx0XHRpZiBAaGFzT3duUHJvcGVydHkga2V5XG5cblx0XHRcdFx0bmV3T2JqW2tleV0gPSBvYmplY3QuY2xvbmUgQFtrZXldLCB5ZXNcblxuXHRcdG5ld09iaiJdfQ==
},{"./mixin/Fill_":116,"./mixin/Filters_":117,"./mixin/Generals_":118,"./mixin/Layout_":119,"./mixin/Transforms_":120,"./mixin/Typography_":121,"utila":110}],116:[function(require,module,exports){
var ColorHolder, Fill_, css;

css = require('../../../../utility/css');

ColorHolder = require('../tools/ColorHolder');

module.exports = Fill_ = (function() {
  function Fill_() {}

  Fill_.prototype.__initMixinFill = function() {
    this.fill = new ColorHolder(this._getFillUpdater());
    return this._fill = {
      bgColor: 'none',
      color: 'inherit',
      border: 'none',
      opacity: 1
    };
  };

  Fill_.prototype.__clonerForFill = function(newStyleSetter) {
    newStyleSetter.fill = this.fill.clone(newStyleSetter._getFillUpdater());
  };

  Fill_.prototype._getFillUpdater = function() {
    return (function(_this) {
      return function() {
        _this._updateFill();
      };
    })(this);
  };

  Fill_.prototype._updateFill = function() {
    this._styles.backgroundColor = this._fill.bgColor = this.fill._color.toCss();
    return this;
  };

  Fill_.prototype.rotateFillHue = function(amount) {
    this._fill.bgColor.rotateHue(amount);
    return this._styles.backgroundColor = this._fill.bgColor.toCss();
  };

  Fill_.prototype.setTextColor = function(r, g, b) {
    this._styles.color = this._fill.color = css.rgb(r, g, b);
    return null;
  };

  Fill_.prototype.makeHollow = function() {
    return this._styles.bgColor = this._fill.bgColor = 'transparent';
  };

  Fill_.prototype.texturize = function(filename) {
    var addr;
    addr = "./images/" + filename;
    this._styles.background = 'url(' + addr + ')';
    return this;
  };

  Fill_.prototype.setTexturePosition = function(x, y) {
    this._styles.backgroundPosition = "" + x + "px " + y + "px";
    return this;
  };

  Fill_.prototype.setBorder = function(thickness, r, g, b) {
    if (thickness == null) {
      this._styles.border = this._fill.border = 'none';
    } else {
      this._styles.border = this._fill.border = "" + thickness + "px solid " + (css.rgb(r, g, b));
    }
    return this;
  };

  Fill_.prototype.removeBorder = function() {
    this._styles.border = this._fill.border = 'none';
    return this;
  };

  Fill_.prototype.setOpacity = function(d) {
    this._styles.opacity = this._fill.opacity = d;
    return this;
  };

  Fill_.prototype.adjustOpacity = function(d) {
    this._fill.opacity += d;
    this._styles.opacity = this._fill.opacity;
    return this;
  };

  return Fill_;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmlsbF8uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcc3R5bGVTZXR0ZXJcXG1peGluXFxGaWxsXy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSx1QkFBQTs7QUFBQSxHQUFBLEdBQU0sT0FBQSxDQUFRLHlCQUFSLENBQU4sQ0FBQTs7QUFBQSxXQUNBLEdBQWMsT0FBQSxDQUFRLHNCQUFSLENBRGQsQ0FBQTs7QUFBQSxNQUdNLENBQUMsT0FBUCxHQUF1QjtxQkFFdEI7O0FBQUEsa0JBQUEsZUFBQSxHQUFpQixTQUFBLEdBQUE7QUFFaEIsSUFBQSxJQUFDLENBQUEsSUFBRCxHQUFZLElBQUEsV0FBQSxDQUFZLElBQUMsQ0FBQSxlQUFELENBQUEsQ0FBWixDQUFaLENBQUE7V0FFQSxJQUFDLENBQUEsS0FBRCxHQUVDO0FBQUEsTUFBQSxPQUFBLEVBQVMsTUFBVDtBQUFBLE1BRUEsS0FBQSxFQUFPLFNBRlA7QUFBQSxNQUlBLE1BQUEsRUFBUSxNQUpSO0FBQUEsTUFNQSxPQUFBLEVBQVMsQ0FOVDtNQU5lO0VBQUEsQ0FBakIsQ0FBQTs7QUFBQSxrQkFjQSxlQUFBLEdBQWlCLFNBQUMsY0FBRCxHQUFBO0FBRWhCLElBQUEsY0FBYyxDQUFDLElBQWYsR0FBc0IsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFOLENBQVksY0FBYyxDQUFDLGVBQWYsQ0FBQSxDQUFaLENBQXRCLENBRmdCO0VBQUEsQ0FkakIsQ0FBQTs7QUFBQSxrQkFvQkEsZUFBQSxHQUFpQixTQUFBLEdBQUE7V0FFaEIsQ0FBQSxTQUFBLEtBQUEsR0FBQTthQUFBLFNBQUEsR0FBQTtBQUVDLFFBQUcsS0FBQyxDQUFBLFdBQUosQ0FBQSxDQUFBLENBRkQ7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxFQUZnQjtFQUFBLENBcEJqQixDQUFBOztBQUFBLGtCQTRCQSxXQUFB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LENBQUMsT0FBUCxJQUFrQixDQUFsQixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQVQsR0FBbUIsSUFBQyxDQUFBLEtBQUssQ0FBQyxPQUYxQixDQUFBO1dBSUEsS0FOYztFQUFBLENBeEZmLENBQUE7O2VBQUE7O0lBTEQsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImNzcyA9IHJlcXVpcmUgJy4uLy4uLy4uLy4uL3V0aWxpdHkvY3NzJ1xuQ29sb3JIb2xkZXIgPSByZXF1aXJlICcuLi90b29scy9Db2xvckhvbGRlcidcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBGaWxsX1xuXG5cdF9faW5pdE1peGluRmlsbDogLT5cblxuXHRcdEBmaWxsID0gbmV3IENvbG9ySG9sZGVyIEBfZ2V0RmlsbFVwZGF0ZXIoKVxuXG5cdFx0QF9maWxsID1cblxuXHRcdFx0YmdDb2xvcjogJ25vbmUnXG5cblx0XHRcdGNvbG9yOiAnaW5oZXJpdCdcblxuXHRcdFx0Ym9yZGVyOiAnbm9uZSdcblxuXHRcdFx0b3BhY2l0eTogMVxuXG5cdF9fY2xvbmVyRm9yRmlsbDogKG5ld1N0eWxlU2V0dGVyKSAtPlxuXG5cdFx0bmV3U3R5bGVTZXR0ZXIuZmlsbCA9IEBmaWxsLmNsb25lIG5ld1N0eWxlU2V0dGVyLl9nZXRGaWxsVXBkYXRlcigpXG5cblx0XHRyZXR1cm5cblxuXHRfZ2V0RmlsbFVwZGF0ZXI6IC0+XG5cblx0XHQ9PlxuXG5cdFx0XHRkbyBAX3VwZGF0ZUZpbGxcblxuXHRcdFx0cmV0dXJuXG5cblx0X3VwZGF0ZUZpbGw6IC0+XG5cblx0XHRAX3N0eWxlcy5iYWNrZ3JvdW5kQ29sb3IgPSBAX2ZpbGwuYmdDb2xvciA9IEBmaWxsLl9jb2xvci50b0NzcygpXG5cblx0XHRAXG5cblx0cm90YXRlRmlsbEh1ZTogKGFtb3VudCkgLT5cblxuXHRcdEBfZmlsbC5iZ0NvbG9yLnJvdGF0ZUh1ZSBhbW91bnRcblxuXHRcdEBfc3R5bGVzLmJhY2tncm91bmRDb2xvciA9IEBfZmlsbC5iZ0NvbG9yLnRvQ3NzKClcblxuXHRzZXRUZXh0Q29sb3I6IChyLCBnLCBiKSAtPlxuXG5cdFx0QF9zdHlsZXMuY29sb3IgPSBAX2ZpbGwuY29sb3IgPSBjc3MucmdiIHIsIGcsIGJcblxuXHRcdG51bGxcblxuXHRtYWtlSG9sbG93OiAtPlxuXG5cdFx0QF9zdHlsZXMuYmdDb2xvciA9IEBfZmlsbC5iZ0NvbG9yID0gJ3RyYW5zcGFyZW50J1xuXG5cdHRleHR1cml6ZTogKGZpbGVuYW1lKSAtPlxuXG5cdFx0YWRkciA9IFwiLi9pbWFnZXMvI3tmaWxlbmFtZX1cIlxuXG5cdFx0QF9zdHlsZXMuYmFja2dyb3VuZCA9ICd1cmwoJyArIGFkZHIgKyAnKSdcblxuXHRcdEBcblxuXHRzZXRUZXh0dXJlUG9zaXRpb246ICh4LCB5KSAtPlxuXG5cdFx0QF9zdHlsZXMuYmFja2dyb3VuZFBvc2l0aW9uID0gXCIje3h9cHggI3t5fXB4XCJcblxuXHRcdEBcblxuXHRzZXRCb3JkZXI6ICh0aGlja25lc3MsIHIsIGcsIGIpIC0+XG5cblx0XHR1bmxlc3MgdGhpY2tuZXNzP1xuXG5cdFx0XHRAX3N0eWxlcy5ib3JkZXIgPSBAX2ZpbGwuYm9yZGVyID0gJ25vbmUnXG5cblx0XHRlbHNlXG5cblx0XHRcdEBfc3R5bGVzLmJvcmRlciA9IEBfZmlsbC5ib3JkZXIgPSBcIiN7dGhpY2tuZXNzfXB4IHNvbGlkICN7Y3NzLnJnYihyLCBnLCBiKX1cIlxuXG5cdFx0QFxuXG5cdHJlbW92ZUJvcmRlcjogLT5cblxuXHRcdEBfc3R5bGVzLmJvcmRlciA9IEBfZmlsbC5ib3JkZXIgPSAnbm9uZSdcblxuXHRcdEBcblxuXHRzZXRPcGFjaXR5OiAoZCkgLT5cblxuXHRcdEBfc3R5bGVzLm9wYWNpdHkgPSBAX2ZpbGwub3BhY2l0eSA9IGRcblxuXHRcdEBcblxuXHRhZGp1c3RPcGFjaXR5OiAoZCkgLT5cblxuXHRcdEBfZmlsbC5vcGFjaXR5ICs9IGQ7XG5cblx0XHRAX3N0eWxlcy5vcGFjaXR5ID0gQF9maWxsLm9wYWNpdHlcblxuXHRcdEAiXX0=
},{"../../../../utility/css":128,"../tools/ColorHolder":122}],117:[function(require,module,exports){
var CSSFilter, ClassPrototype, Filters_, css, method, methodName, _fn, _ref;

CSSFilter = require('css-filter');

css = require('../../../../utility/css');

module.exports = Filters_ = (function() {
  function Filters_() {}

  Filters_.prototype.__initMixinFilters = function() {
    this._cssFilter = new CSSFilter;
    return this._shouldUpdateFilters = false;
  };

  Filters_.prototype.__clonerForFilters = function(newStyleSetter) {
    newStyleSetter._shouldUpdateFilters = false;
  };

  Filters_.prototype._updateFilters = function() {
    if (!this._shouldUpdateFilters) {
      return;
    }
    this._shouldUpdateFilters = false;
    return this._actuallyUpdateFilters();
  };

  Filters_.prototype._scheduleFiltersUpdate = function() {
    this._shouldUpdateFilters = true;
    return this._scheduleUpdate();
  };

  Filters_.prototype._actuallyUpdateFilters = function() {
    css.setCssFilter(this.node, this._cssFilter.toCss());
    return this;
  };

  return Filters_;

})();

ClassPrototype = Filters_.prototype;

_ref = CSSFilter.prototype;
_fn = function() {
  var _methodName;
  _methodName = methodName;
  if (method.length === 0) {
    return ClassPrototype[_methodName] = function() {
      this._cssFilter[_methodName]();
      this._scheduleFiltersUpdate();
      return this;
    };
  } else if (method.length === 1) {
    return ClassPrototype[_methodName] = function(arg0) {
      this._cssFilter[_methodName](arg0);
      this._scheduleFiltersUpdate();
      return this;
    };
  } else if (method.length === 2) {
    return ClassPrototype[_methodName] = function(arg0, arg1) {
      this._cssFilter[_methodName](arg0, arg1);
      this._scheduleFiltersUpdate();
      return this;
    };
  } else if (method.length === 3) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2) {
      this._cssFilter[_methodName](arg0, arg1, arg2);
      this._scheduleFiltersUpdate();
      return this;
    };
  } else if (method.length === 4) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3) {
      this._cssFilter[_methodName](arg0, arg1, arg2, arg3);
      this._scheduleFiltersUpdate();
      return this;
    };
  } else if (method.length === 5) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3, arg4) {
      this._cssFilter[_methodName](arg0, arg1, arg2, arg3, arg4);
      this._scheduleFiltersUpdate();
      return this;
    };
  } else {
    throw Error("Methods with more than 5 args are not supported.");
  }
};
for (methodName in _ref) {
  method = _ref[methodName];
  if (!(method instanceof Function)) {
    continue;
  }
  if (ClassPrototype[methodName] != null) {
    continue;
  }
  if (methodName[0] === '_') {
    continue;
  }
  if (methodName === 'toCss') {
    continue;
  }
  _fn();
}

Filters_;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmlsdGVyc18uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcc3R5bGVTZXR0ZXJcXG1peGluXFxGaWx0ZXJzXy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSx1RUFBQTs7QUFBQSxTQUFBLEdBQVksT0FBQSxDQUFRLFlBQVIsQ0FBWixDQUFBOztBQUFBLEdBQ0EsR0FBTSxPQUFBLENBQVEseUJBQVIsQ0FETixDQUFBOztBQUFBLE1BR00sQ0FBQyxPQUFQLEdBQXVCO3dCQUV0Qjs7QUFBQSxxQkFBQSxrQkFBQSxHQUFvQixTQUFBLEdBQUE7QUFFbkIsSUFBQSxJQUFDLENBQUEsVUFBRCxHQUFjLEdBQUEsQ0FBQSxTQUFkLENBQUE7V0FFQSxJQUFDLENBQUEsb0JBQUQsR0FBd0IsTUFKTDtFQUFBLENBQXBCLENBQUE7O0FBQUEscUJBTUEsa0JBQUEsR0FBb0IsU0FBQyxjQUFELEdBQUE7QUFFbkIsSUFBQSxjQUFjLENBQUMsb0JBQWYsR0FBc0MsS0FBdEMsQ0FGbUI7RUFBQSxDQU5wQixDQUFBOztBQUFBLHFCQVlBLGNBQUEsR0FBZ0IsU0FBQSxHQUFBO0FBRWYsSUFBQSxJQUFBLENBQUEsSUFBZSxDQUFBLG9CQUFmO0FBQUEsWUFBQSxDQUFBO0tBQUE7QUFBQSxJQUVBLElBQUMsQ0FBQSxvQkFBRCxHQUF3QixLQUZ4QixDQUFBO1dBSUcsSUFBQyxDQUFBLHNCQUFKLENBQUEsRUFOZTtFQUFBLENBWmhCLENBQUE7O0FBQUEscUJBb0JBLHNCQUFBLEdBQXdCLFNBQUEsR0FBQTtBQUV2QixJQUFBLElBQUMsQ0FBQSxvQkFBRCxHQUF3QixJQUF4QixDQUFBO1dBRUcsSUFBQyxDQUFBLGVBQUosQ0FBQSxFQUp1QjtFQUFBLENBcEJ4QixDQUFBOztBQUFBLHFCQTBCQSxzQkFBQSxHQUF3QixTQUFBLEdBQUE7QUFFdkIsSUFBQSxHQUFHLENBQUMsWUFB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QUFBLGtCQUFBOzRCQUFBO0FBRUMsRUFBQSxJQUFBLENBQUEsQ0FBZ0IsTUFBQSxZQUFrQixRQUFsQyxDQUFBO0FBQUEsYUFBQTtHQUFBO0FBRUEsRUFBQSxJQUFZLGtDQUFaO0FBQUEsYUFBQTtHQUZBO0FBSUEsRUFBQSxJQUFZLFVBQVcsQ0FBQSxDQUFBLENBQVgsS0FBaUIsR0FBN0I7QUFBQSxhQUFBO0dBSkE7QUFNQSxFQUFBLElBQVksVUFBQSxLQUFjLE9BQTFCO0FBQUEsYUFBQTtHQU5BO0FBQUEsT0FBQSxDQUZEO0FBQUEsQ0F2Q0E7O0FBQUEsUUFBQSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiQ1NTRmlsdGVyID0gcmVxdWlyZSAnY3NzLWZpbHRlcidcbmNzcyA9IHJlcXVpcmUgJy4uLy4uLy4uLy4uL3V0aWxpdHkvY3NzJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEZpbHRlcnNfXG5cblx0X19pbml0TWl4aW5GaWx0ZXJzOiAtPlxuXG5cdFx0QF9jc3NGaWx0ZXIgPSBuZXcgQ1NTRmlsdGVyXG5cblx0XHRAX3Nob3VsZFVwZGF0ZUZpbHRlcnMgPSBub1xuXG5cdF9fY2xvbmVyRm9yRmlsdGVyczogKG5ld1N0eWxlU2V0dGVyKSAtPlxuXG5cdFx0bmV3U3R5bGVTZXR0ZXIuX3Nob3VsZFVwZGF0ZUZpbHRlcnMgPSBub1xuXG5cdFx0cmV0dXJuXG5cblx0X3VwZGF0ZUZpbHRlcnM6IC0+XG5cblx0XHRyZXR1cm4gdW5sZXNzIEBfc2hvdWxkVXBkYXRlRmlsdGVyc1xuXG5cdFx0QF9zaG91bGRVcGRhdGVGaWx0ZXJzID0gbm9cblxuXHRcdGRvIEBfYWN0dWFsbHlVcGRhdGVGaWx0ZXJzXG5cblx0X3NjaGVkdWxlRmlsdGVyc1VwZGF0ZTogLT5cblxuXHRcdEBfc2hvdWxkVXBkYXRlRmlsdGVycyA9IHllc1xuXG5cdFx0ZG8gQF9zY2hlZHVsZVVwZGF0ZVxuXG5cdF9hY3R1YWxseVVwZGF0ZUZpbHRlcnM6IC0+XG5cblx0XHRjc3Muc2V0Q3NzRmlsdGVyIEBub2RlLCBAX2Nzc0ZpbHRlci50b0NzcygpXG5cblx0XHRAXG5cbkNsYXNzUHJvdG90eXBlID0gRmlsdGVyc18ucHJvdG90eXBlXG5cbmZvciBtZXRob2ROYW1lLCBtZXRob2Qgb2YgQ1NTRmlsdGVyLnByb3RvdHlwZVxuXG5cdGNvbnRpbnVlIHVubGVzcyBtZXRob2QgaW5zdGFuY2VvZiBGdW5jdGlvblxuXG5cdGNvbnRpbnVlIGlmIENsYXNzUHJvdG90eXBlW21ldGhvZE5hbWVdP1xuXG5cdGNvbnRpbnVlIGlmIG1ldGhvZE5hbWVbMF0gaXMgJ18nXG5cblx0Y29udGludWUgaWYgbWV0aG9kTmFtZSBpcyAndG9Dc3MnXG5cblx0ZG8gLT5cblxuXHRcdF9tZXRob2ROYW1lID0gbWV0aG9kTmFtZVxuXG5cdFx0aWYgbWV0aG9kLmxlbmd0aCBpcyAwXG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9ICAtPlxuXG5cdFx0XHRcdCMgVGhpcyBpcyBtb3JlIHBlcmZvcm1hbnQgdGhhbiBtZXRob2QuYXBwbHkoKVxuXHRcdFx0XHQjXG5cdFx0XHRcdCMgQXJndW1lbnQgc3BsYXRzIHdvbid0IHdvcmsgaGVyZSB0aG91Z2guXG5cdFx0XHRcdEBfY3NzRmlsdGVyW19tZXRob2ROYW1lXSgpXG5cblx0XHRcdFx0ZG8gQF9zY2hlZHVsZUZpbHRlcnNVcGRhdGVcblxuXHRcdFx0XHRAXG5cblx0XHRlbHNlIGlmIG1ldGhvZC5sZW5ndGggaXMgMVxuXG5cdFx0XHRDbGFzc1Byb3RvdHlwZVtfbWV0aG9kTmFtZV0gPSAoYXJnMCkgLT5cblxuXHRcdFx0XHRAX2Nzc0ZpbHRlcltfbWV0aG9kTmFtZV0gYXJnMFxuXG5cdFx0XHRcdGRvIEBfc2NoZWR1bGVGaWx0ZXJzVXBkYXRlXG5cblx0XHRcdFx0QFxuXG5cdFx0ZWxzZSBpZiBtZXRob2QubGVuZ3RoIGlzIDJcblxuXHRcdFx0Q2xhc3NQcm90b3R5cGVbX21ldGhvZE5hbWVdID0gKGFyZzAsIGFyZzEpIC0+XG5cblx0XHRcdFx0QF9jc3NGaWx0ZXJbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzFcblxuXHRcdFx0XHRkbyBAX3NjaGVkdWxlRmlsdGVyc1VwZGF0ZVxuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyAzXG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwLCBhcmcxLCBhcmcyKSAtPlxuXG5cdFx0XHRcdEBfY3NzRmlsdGVyW19tZXRob2ROYW1lXSBhcmcwLCBhcmcxLCBhcmcyXG5cblx0XHRcdFx0ZG8gQF9zY2hlZHVsZUZpbHRlcnNVcGRhdGVcblxuXHRcdFx0XHRAXG5cblx0XHRlbHNlIGlmIG1ldGhvZC5sZW5ndGggaXMgNFxuXG5cdFx0XHRDbGFzc1Byb3RvdHlwZVtfbWV0aG9kTmFtZV0gPSAoYXJnMCwgYXJnMSwgYXJnMiwgYXJnMykgLT5cblxuXHRcdFx0XHRAX2Nzc0ZpbHRlcltfbWV0aG9kTmFtZV0gYXJnMCwgYXJnMSwgYXJnMiwgYXJnM1xuXG5cdFx0XHRcdGRvIEBfc2NoZWR1bGVGaWx0ZXJzVXBkYXRlXG5cblx0XHRcdFx0QFxuXG5cdFx0ZWxzZSBpZiBtZXRob2QubGVuZ3RoIGlzIDVcblxuXHRcdFx0Q2xhc3NQcm90b3R5cGVbX21ldGhvZE5hbWVdID0gKGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzQpIC0+XG5cblx0XHRcdFx0QF9jc3NGaWx0ZXJbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzRcblxuXHRcdFx0XHRkbyBAX3NjaGVkdWxlRmlsdGVyc1VwZGF0ZVxuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2VcblxuXHRcdFx0dGhyb3cgRXJyb3IgXCJNZXRob2RzIHdpdGggbW9yZSB0aGFuIDUgYXJncyBhcmUgbm90IHN1cHBvcnRlZC5cIlxuXG5GaWx0ZXJzXyJdfQ==
},{"../../../../utility/css":128,"css-filter":78}],118:[function(require,module,exports){
var General_, css;

css = require('../../../../utility/css');

module.exports = General_ = (function() {
  function General_() {}

  General_.prototype.z = function(i) {
    this.node.style.zIndex = i;
    return this;
  };

  General_.prototype.css = function(prop, val) {
    this._styles[prop] = val;
    return this;
  };

  General_.prototype.addClass = function(c) {
    this.node.classList.add(c);
    return this;
  };

  General_.prototype.removeClass = function(c) {
    this.node.classList.remove(c);
    return this;
  };

  General_.prototype.toggleClass = function(c) {
    this.node.classList.toggle(c);
    return this;
  };

  General_.prototype.setClass = function(c) {
    this.node.className = c;
    return this;
  };

  return General_;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2VuZXJhbHNfLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi5cXC4uXFwuLlxcLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcbGliXFxlbFxcbWl4aW5cXHN0eWxlU2V0dGVyXFxtaXhpblxcR2VuZXJhbHNfLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLGFBQUE7O0FBQUEsR0FBQSxHQUFNLE9BQUEsQ0FBUSx5QkFBUixDQUFOLENBQUE7O0FBQUEsTUFFTSxDQUFDLE9BQVAsR0FBdUI7d0JBRXRCOztBQUFBLHFCQUFBLENBQUEsR0FBRyxTQUFDLENBQUQsR0FBQTtBQUVGLElBQUEsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBWixHQUFxQixDQUFyQixDQUFBO1dBRUEsS0FKRTtFQUFBLENBQUgsQ0FBQTs7QUFBQSxxQkFNQSxHQUFBLEdBQUssU0FBQyxJQUFELEVBQU8sR0FBUCxHQUFBO0FBRUosSUFBQSxJQUFDLENBQUEsT0FBUSxDQUFBLElBQUEsQ0FBVCxHQUFpQixHQUFqQixDQUFBO1dBRUEsS0FKSTtFQUFBLENBTkwsQ0FBQTs7QUFBQSxxQkFZQSxRQUFBLEdBQVUsU0FBQyxDQUFELEdBQUE7QUFFVCxJQUFBLElBQUMsQ0FBQSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQWhCLENBQW9CLENBQXBCLENBQUEsQ0FBQTtXQUVBLEtBSlM7RUFBQSxDQVpWLENBQUE7O0FBQUEscUJBa0JBLFdBQUEsR0FBYSxTQUFDLENBQUQsR0FBQTtBQUVaLElBQUEsSUFBQyxDQUFBLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBaEIsQ0FBdUIsQ0FBdkIsQ0FBQSxDQUFBO1dBRUEsS0FKWTtFQUFBLENBbEJiLENBQUE7O0FBQUEscUJBd0JBLFdBQUEsR0FBYSxTQUFDLENBQUQsR0FBQTtBQUVaLElBQUEsSUFBQyxDQUFBLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBaEIsQ0FBdUIsQ0FBdkIsQ0FBQSxDQUFBO1dBRUEsS0FKWTtFQUFBLENBeEJiLENBQUE7O0FBQUEscUJBOEJBLFFBQUEsR0FBVSxTQUFDLENBQUQsR0FBQTtBQUVULElBQUEsSUFBQyxDQUFBLElBQUksQ0FBQyxTQUFOLEdBQWtCLENBQWxCLENBQUE7V0FFQSxLQUpTO0VBQUEsQ0E5QlYsQ0FBQTs7a0JBQUE7O0lBSkQsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImNzcyA9IHJlcXVpcmUgJy4uLy4uLy4uLy4uL3V0aWxpdHkvY3NzJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEdlbmVyYWxfXG5cblx0ejogKGkpIC0+XG5cblx0XHRAbm9kZS5zdHlsZS56SW5kZXggPSBpXG5cblx0XHRAXG5cblx0Y3NzOiAocHJvcCwgdmFsKSAtPlxuXG5cdFx0QF9zdHlsZXNbcHJvcF0gPSB2YWxcblxuXHRcdEBcblxuXHRhZGRDbGFzczogKGMpIC0+XG5cblx0XHRAbm9kZS5jbGFzc0xpc3QuYWRkIGNcblxuXHRcdEBcblxuXHRyZW1vdmVDbGFzczogKGMpIC0+XG5cblx0XHRAbm9kZS5jbGFzc0xpc3QucmVtb3ZlIGNcblxuXHRcdEBcblxuXHR0b2dnbGVDbGFzczogKGMpIC0+XG5cblx0XHRAbm9kZS5jbGFzc0xpc3QudG9nZ2xlIGNcblxuXHRcdEBcblxuXHRzZXRDbGFzczogKGMpIC0+XG5cblx0XHRAbm9kZS5jbGFzc05hbWUgPSBjXG5cblx0XHRAIl19
},{"../../../../utility/css":128}],119:[function(require,module,exports){
var Layout_;

module.exports = Layout_ = (function() {
  function Layout_() {}

  Layout_.prototype.__initMixinLayout = function() {
    return this._layout = {
      width: null,
      height: null,
      clipLeft: 'auto',
      clipRight: 'auto',
      clipTop: 'auto',
      clipBottom: 'auto'
    };
  };

  Layout_.prototype.setWidth = function(w) {
    this._layout.width = w;
    this._styles.width = w + 'px';
    return this;
  };

  Layout_.prototype.setHeight = function(h) {
    this._layout.height = h;
    this._styles.height = h + 'px';
    return this;
  };

  Layout_.prototype.clip = function(top, right, bottom, left) {
    this._layout.clipTop = top;
    this._layout.clipRight = right;
    this._layout.clipBottom = bottom;
    this._layout.clipLeft = left;
    if (typeof top === 'number') {
      top += 'px';
    }
    if (typeof right === 'number') {
      right += 'px';
    }
    if (typeof bottom === 'number') {
      bottom += 'px';
    }
    if (typeof left === 'number') {
      left += 'px';
    }
    this._styles.clip = "rect(" + top + ", " + right + ", " + bottom + ", " + left + ")";
    return this;
  };

  Layout_.prototype.unclip = function() {
    this.clip('auto', 'auto', 'auto', 'auto');
    return this;
  };

  Layout_.prototype.clipTop = function(a) {
    return this.clip(a, this._layout.clipRight, this._layout.clipBottom, this._layout.clipLeft);
  };

  Layout_.prototype.clipRight = function(a) {
    return this.clip(this._layout.clipTop, a, this._layout.clipBottom, this._layout.clipLeft);
  };

  Layout_.prototype.clipBottom = function(a) {
    return this.clip(this._layout.clipTop, this._layout.clipRight, a, this._layout.clipLeft);
  };

  Layout_.prototype.clipLeft = function(a) {
    return this.clip(this._layout.clipTop, this._layout.clipRight, this._layout.clipBottom, a);
  };

  return Layout_;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGF5b3V0Xy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcZWxcXG1peGluXFxzdHlsZVNldHRlclxcbWl4aW5cXExheW91dF8uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsT0FBQTs7QUFBQSxNQUFNLENBQUMsT0FBUCxHQUF1Qjt1QkFFdEI7O0FBQUEsb0JBQUEsaUJBQUEsR0FBbUIsU0FBQSxHQUFBO1dBRWxCLElBQUMsQ0FBQSxPQUFELEdBRUM7QUFBQSxNQUFBLEtBQUEsRUFBTyxJQUFQO0FBQUEsTUFFQSxNQUFBLEVBQVEsSUFGUjtBQUFBLE1BSUEsUUFBQSxFQUFVLE1BSlY7QUFBQSxNQU1BLFNBQUEsRUFBVyxNQU5YO0FBQUEsTUFRQSxPQUFBLEVBQVMsTUFSVDtBQUFBLE1BVUEsVUFBQSxFQUFZLE1BVlo7TUFKaUI7RUFBQSxDQUFuQixDQUFBOztBQUFBLG9CQWdCQSxRQUFBLEdBQVUsU0FBQyxDQUFELEdBQUE7QUFFVCxJQUFBLElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBVCxHQUFpQixDQUFqQixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsT0FBTyxDQUFDLEtBQVQsR0FBaUIsQ0FBQSxHQUFJLElBRnJCLENBQUE7V0FJQSxLQU5TO0VBQUEsQ0FoQlYsQ0FBQTs7QUFBQSxvQkF3QkEsU0FBQSxHQUFXLFNBQUMsQ0FBRCxHQUFBO0FBRVYsSUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQVQsR0FBa0IsQ0FBbEIsQ0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULEdBQWtCLENBQUEsR0FBSSxJQUZ0QixDQUFBO1dBSUEsS0FOVTtFQUFBLENBeEJYLENBQUE7O0FBQUEsb0JBZ0NBLElBQUEsR0FBTSxTQUFDLEdBQUQsRUFBTSxLQUFOLEVBQWEsTUFBYixFQUFxQixJQUFyQixHQUFBO0FBRUwsSUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQVQsR0FBbUIsR0FBbkIsQ0FBQTtBQUFBLElBQ0EsSUFBQyxDQUFBLE9BQU8sQ0FBQyxTQUFULEdBQXFCLEtBRHJCLENBQUE7QUFBQSxJQUVBLElBQUMsQ0FBQSxPQUFPLENBQUMsVUFBVCxHQUFzQixNQUZ0QixDQUFBO0FBQUEsSUFHQSxJQUFDLENBQUEsT0FBTyxDQUFDLFFBQVQsR0FBb0IsSUFIcEIsQ0FBQTtBQUtBLElBQUEsSUFBRyxNQUFBLENBQUEsR0FBQSxLQUFjLFFBQWpCO0FBQStCLE1BQUEsR0FBQSxJQUFPLElBQVAsQ0FBL0I7S0FMQTtBQU1BLElBQUEsSUFBRyxNQUFBLENBQUEsS0FBQSxLQUFnQixRQUFuQjtBQUFpQyxNQUFBLEtBQUEsSUFBUyxJQUFULENBQWpDO0tBTkE7QUFPQSxJQUFBLElBQUcsTUFBQSxDQUFBLE1BQUEsS0FBaUIsUUFBcEI7QUFBa0MsTUFBQSxNQUFBLElBQVUsSUFBVixDQUFsQztLQVBBO0FBUUEsSUFBQSxJQUFHLE1BQUEsQ0FBQSxJQUFBLEtBQWUsUUFBbEI7QUFBZ0MsTUFBQSxJQUFBLElBQVEsSUFBUixDQUFoQztLQVJBO0FBQUEsSUFVQSxJQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsR0FBaUIsT0FBQSxHQUFNLEdBQU4sR0FBVyxJQUFYLEdBQWMsS0FBZCxHQUFxQixJQUFyQixHQUF3QixNQUF4QixHQUFnQyxJQUFoQyxHQUFtQyxJQUFuQyxHQUF5QyxHQVYxRCxDQUFBO1dBWUEsS0FkSztFQUFBLENBaENOLENBQUE7O0FBQUEsb0JBZ0RBLE1BQUEsR0FBUSxTQUFBLEdBQUE7QUFFUCxJQUFBLElBQUMsQ0FBQSxJQUFELENBQU0sTUFBTixFQUFjLE1BQWQsRUFBc0IsTUFBdEIsRUFBOEIsTUFBOUIsQ0FBQSxDQUFBO1dBRUEsS0FKTztFQUFBLENBaERSLENBQUE7O0FBQUEsb0JBc0RBLE9BQUEsR0FBUyxTQUFDLENBQUQsR0FBQTtXQUVSLElBQUMsQ0FBQSxJQUFELENBQU0sQ0FBTixFQUFTLElBQUMsQ0FBQSxPQUFPLENBQUMsU0FBbEIsRUFBNkIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxVQUF0QyxFQUFrRCxJQUFDLENBQUEsT0FBTyxDQUFDLFFBQTNELEVBRlE7RUFBQSxDQXREVCxDQUFBOztBQUFBLG9CQTBEQSxTQUFBLEdBQVcsU0FBQyxDQUFELEdBQUE7V0FFVixJQUFDLENBQUEsSUFBRCxDQUFNLElBQUMsQ0FBQSxPQUFPLENBQUMsT0FBZixFQUF3QixDQUF4QixFQUEyQixJQUFDLENBQUEsT0FBTyxDQUFDLFVBQXBDLEVBQWdELElBQUMsQ0FBQSxPQUFPLENBQUMsUUFBekQsRUFGVTtFQUFBLENBMURYLENBQUE7O0FBQUEsb0JBOERBLFVBQUEsR0FBWSxTQUFDLENBQUQsR0FBQTtXQUVYLElBQUMsQ0FBQSxJQUFELENBQU0sSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQUFmLEVBQXdCLElBQUMsQ0FBQSxPQUFPLENBQUMsU0FBakMsRUFBNEMsQ0FBNUMsRUFBK0MsSUFBQyxDQUFBLE9BQU8sQ0FBQyxRQUF4RCxFQUZXO0VBQUEsQ0E5RFosQ0FBQTs7QUFBQSxvQkFrRUEsUUFBQSxHQUFVLFNBQUMsQ0FBRCxHQUFBO1dBRVQsSUFBQyxDQUFBLElBQUQsQ0FBTSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQWYsRUFBd0IsSUFBQyxDQUFBLE9BQU8sQ0FBQyxTQUFqQyxFQUE0QyxJQUFDLENBQUEsT0FBTyxDQUFDLFVBQXJELEVBQWlFLENBQWpFLEVBRlM7RUFBQSxDQWxFVixDQUFBOztpQkFBQTs7SUFGRCxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBMYXlvdXRfXG5cblx0X19pbml0TWl4aW5MYXlvdXQ6IC0+XG5cblx0XHRAX2xheW91dCA9XG5cblx0XHRcdHdpZHRoOiBudWxsXG5cblx0XHRcdGhlaWdodDogbnVsbFxuXG5cdFx0XHRjbGlwTGVmdDogJ2F1dG8nXG5cblx0XHRcdGNsaXBSaWdodDogJ2F1dG8nXG5cblx0XHRcdGNsaXBUb3A6ICdhdXRvJ1xuXG5cdFx0XHRjbGlwQm90dG9tOiAnYXV0bydcblxuXHRzZXRXaWR0aDogKHcpIC0+XG5cblx0XHRAX2xheW91dC53aWR0aCA9IHdcblxuXHRcdEBfc3R5bGVzLndpZHRoID0gdyArICdweCdcblxuXHRcdEBcblxuXHRzZXRIZWlnaHQ6IChoKSAtPlxuXG5cdFx0QF9sYXlvdXQuaGVpZ2h0ID0gaFxuXG5cdFx0QF9zdHlsZXMuaGVpZ2h0ID0gaCArICdweCdcblxuXHRcdEBcblxuXHRjbGlwOiAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KSAtPlxuXG5cdFx0QF9sYXlvdXQuY2xpcFRvcCA9IHRvcFxuXHRcdEBfbGF5b3V0LmNsaXBSaWdodCA9IHJpZ2h0XG5cdFx0QF9sYXlvdXQuY2xpcEJvdHRvbSA9IGJvdHRvbVxuXHRcdEBfbGF5b3V0LmNsaXBMZWZ0ID0gbGVmdFxuXG5cdFx0aWYgdHlwZW9mIHRvcCBpcyAnbnVtYmVyJyB0aGVuIHRvcCArPSAncHgnXG5cdFx0aWYgdHlwZW9mIHJpZ2h0IGlzICdudW1iZXInIHRoZW4gcmlnaHQgKz0gJ3B4J1xuXHRcdGlmIHR5cGVvZiBib3R0b20gaXMgJ251bWJlcicgdGhlbiBib3R0b20gKz0gJ3B4J1xuXHRcdGlmIHR5cGVvZiBsZWZ0IGlzICdudW1iZXInIHRoZW4gbGVmdCArPSAncHgnXG5cblx0XHRAX3N0eWxlcy5jbGlwID0gXCJyZWN0KCN7dG9wfSwgI3tyaWdodH0sICN7Ym90dG9tfSwgI3tsZWZ0fSlcIlxuXG5cdFx0QFxuXG5cdHVuY2xpcDogLT5cblxuXHRcdEBjbGlwICdhdXRvJywgJ2F1dG8nLCAnYXV0bycsICdhdXRvJ1xuXG5cdFx0QFxuXG5cdGNsaXBUb3A6IChhKSAtPlxuXG5cdFx0QGNsaXAgYSwgQF9sYXlvdXQuY2xpcFJpZ2h0LCBAX2xheW91dC5jbGlwQm90dG9tLCBAX2xheW91dC5jbGlwTGVmdFxuXG5cdGNsaXBSaWdodDogKGEpIC0+XG5cblx0XHRAY2xpcCBAX2xheW91dC5jbGlwVG9wLCBhLCBAX2xheW91dC5jbGlwQm90dG9tLCBAX2xheW91dC5jbGlwTGVmdFxuXG5cdGNsaXBCb3R0b206IChhKSAtPlxuXG5cdFx0QGNsaXAgQF9sYXlvdXQuY2xpcFRvcCwgQF9sYXlvdXQuY2xpcFJpZ2h0LCBhLCBAX2xheW91dC5jbGlwTGVmdFxuXG5cdGNsaXBMZWZ0OiAoYSkgLT5cblxuXHRcdEBjbGlwIEBfbGF5b3V0LmNsaXBUb3AsIEBfbGF5b3V0LmNsaXBSaWdodCwgQF9sYXlvdXQuY2xpcEJvdHRvbSwgYSJdfQ==
},{}],120:[function(require,module,exports){
var ClassPrototype, Transformation, Transforms_, css, method, methodName, _fn, _ref;

Transformation = require('transformation');

css = require('../../../../utility/css');

module.exports = Transforms_ = (function() {
  function Transforms_() {}

  Transforms_.prototype.__initMixinTransforms = function() {
    this._transformer = new Transformation;
    this._origin = {
      x: null,
      y: null,
      z: null
    };
    this._shouldUpdateTransforms = false;
  };

  Transforms_.prototype.__clonerForTransforms = function(newStyleSetter) {
    newStyleSetter._shouldUpdateTransforms = false;
  };

  Transforms_.prototype._updateTransforms = function() {
    if (!this._shouldUpdateTransforms) {
      return;
    }
    this._shouldUpdateTransforms = false;
    return this._actuallyUpdateTransforms();
  };

  Transforms_.prototype._scheduleTransformsUpdate = function() {
    this._shouldUpdateTransforms = true;
    return this._scheduleUpdate();
  };

  Transforms_.prototype._actuallyUpdateTransforms = function() {
    css.setTransform(this.node, this._transformer.toPlainCss());
    return this;
  };

  Transforms_.prototype.go3d = function() {
    css.setTransformStyle(this.node, 'preserve-3d');
    return this;
  };

  Transforms_.prototype.goFlat = function() {
    css.setTransformStyle(this.node, 'flat');
    return this;
  };

  Transforms_.prototype.setOrigin = function(x, y, z) {
    if (x == null) {
      x = 0;
    }
    if (y == null) {
      y = 0;
    }
    if (z == null) {
      z = 0;
    }
    this._origin.x = x;
    this._origin.y = y;
    this._origin.z = z;
    css.setTransformOrigin(this.node, "" + this._origin.x + "px " + this._origin.y + "px " + this._origin.z + "px");
    return this;
  };

  Transforms_.prototype.originToBottom = function() {
    css.setTransformOrigin(this.node, "50% 100%");
    return this;
  };

  Transforms_.prototype.originToTop = function() {
    css.setTransformOrigin(this.node, "50% 0");
    return this;
  };

  Transforms_.prototype.pivot = function(x, y) {
    var _x, _y;
    if (x == null) {
      x = 0;
    }
    if (y == null) {
      y = 0;
    }
    if (x === -1) {
      _x = '0%';
    } else if (x === 0) {
      _x = '50%';
    } else if (x === 1) {
      _x = '100%';
    } else {
      throw Error("pivot() only takes -1, 0, and 1 for its arguments");
    }
    if (y === -1) {
      _y = '0%';
    } else if (y === 0) {
      _y = '50%';
    } else if (y === 1) {
      _y = '100%';
    } else {
      throw Error("pivot() only takes -1, 0, and 1 for its arguments");
    }
    css.setTransformOrigin(this.node, "" + _x + " " + _y);
    return this;
  };

  return Transforms_;

})();

ClassPrototype = Transforms_.prototype;

_ref = Transformation.prototype;
_fn = function() {
  var _methodName;
  _methodName = methodName;
  if (method.length === 0) {
    return ClassPrototype[_methodName] = function() {
      this._transformer[_methodName]();
      this._scheduleTransformsUpdate();
      return this;
    };
  } else if (method.length === 1) {
    return ClassPrototype[_methodName] = function(arg0) {
      this._transformer[_methodName](arg0);
      this._scheduleTransformsUpdate();
      return this;
    };
  } else if (method.length === 2) {
    return ClassPrototype[_methodName] = function(arg0, arg1) {
      this._transformer[_methodName](arg0, arg1);
      this._scheduleTransformsUpdate();
      return this;
    };
  } else if (method.length === 3) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2) {
      this._transformer[_methodName](arg0, arg1, arg2);
      this._scheduleTransformsUpdate();
      return this;
    };
  } else if (method.length === 4) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3) {
      this._transformer[_methodName](arg0, arg1, arg2, arg3);
      this._scheduleTransformsUpdate();
      return this;
    };
  } else if (method.length === 5) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3, arg4) {
      this._transformer[_methodName](arg0, arg1, arg2, arg3, arg4);
      this._scheduleTransformsUpdate();
      return this;
    };
  } else {
    throw Error("Methods with more than 5 args are not supported.");
  }
};
for (methodName in _ref) {
  method = _ref[methodName];
  if (!(method instanceof Function)) {
    continue;
  }
  if (ClassPrototype[methodName] != null) {
    continue;
  }
  if (methodName[0] === '_') {
    continue;
  }
  if (methodName === 'temporarily' || methodName === 'commit' || methodName === 'rollBack' || methodName === 'toCss' || methodName === 'toPlainCss' || methodName === 'toArray' || methodName === 'toMatrix') {
    continue;
  }
  _fn();
}

Transforms_;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNmb3Jtc18uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcc3R5bGVTZXR0ZXJcXG1peGluXFxUcmFuc2Zvcm1zXy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSwrRUFBQTs7QUFBQSxjQUFBLEdBQWlCLE9BQUEsQ0FBUSxnQkFBUixDQUFqQixDQUFBOztBQUFBLEdBQ0EsR0FBTSxPQUFBLENBQVEseUJBQVIsQ0FETixDQUFBOztBQUFBLE1BR00sQ0FBQyxPQUFQLEdBQXVCOzJCQUV0Qjs7QUFBQSx3QkFBQSxxQkFBQSxHQUF1QixTQUFBLEdBQUE7QUFFdEIsSUFBQSxJQUFDLENBQUEsWUFBRCxHQUFnQixHQUFBLENBQUEsY0FBaEIsQ0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLE9BQUQsR0FFQztBQUFBLE1BQUEsQ0FBQSxFQUFHLElBQUg7QUFBQSxNQUVBLENBQUEsRUFBRyxJQUZIO0FBQUEsTUFJQSxDQUFBLEVBQUcsSUFKSDtLQUpELENBQUE7QUFBQSxJQVVBLElBQUMsQ0FBQSx1QkFBRCxHQUEyQixLQVYzQixDQUZzQjtFQUFBLENBQXZCLENBQUE7O0FBQUEsd0JBZ0JBLHFCQUFBLEdBQXVCLFNBQUMsY0FBRCxHQUFBO0FBRXRCLElBQUEsY0FBYyxDQUFDLHVCQUFmLEdBQXlDLEtBQXpDLENBRnNCO0VBQUEsQ0FoQnZCLENBQUE7O0FBQUEsd0JBc0JBLGlCQUFBLEdBQW1CLFNBQUEsR0FBQTtBQUVsQixJQUFBLElBQUEsQ0FBQSxJQUFlLENBQUEsdUJBQWY7QUFBQSxZQUFBLENBQUE7S0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLHVCQUFELEdBQTJCLEtBRjNCLENBQUE7V0FJRyxJQUFDLENBQUEseUJBQUosQ0FBQSxFQU5rQjtFQUFBLENBdEJuQixDQUFBOztBQUFBLHdCQThCQSx5QkFBQSxHQUEyQixTQUFBLEdBQUE7QUFFMUIs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LGtEQUFOLENBQU4sQ0FaSTtHQXpESDtBQUFBLENBYko7QUFBQSxLQUFBLGtCQUFBOzRCQUFBO0FBRUMsRUFBQSxJQUFBLENBQUEsQ0FBZ0IsTUFBQSxZQUFrQixRQUFsQyxDQUFBO0FBQUEsYUFBQTtHQUFBO0FBRUEsRUFBQSxJQUFZLGtDQUFaO0FBQUEsYUFBQTtHQUZBO0FBSUEsRUFBQSxJQUFZLFVBQVcsQ0FBQSxDQUFBLENBQVgsS0FBaUIsR0FBN0I7QUFBQSxhQUFBO0dBSkE7QUFNQSxFQUFBLElBQVksVUFBQSxLQUFjLGFBQWQsSUFBK0IsVUFBQSxLQUFjLFFBQTdDLElBQ1gsVUFBQSxLQUFjLFVBREgsSUFDaUIsVUFBQSxLQUFjLE9BRC9CLElBRVgsVUFBQSxLQUFjLFlBRkgsSUFFbUIsVUFBQSxLQUFjLFNBRmpDLElBR1gsVUFBQSxLQUFjLFVBSGY7QUFBQSxhQUFBO0dBTkE7QUFBQSxPQUFBLENBRkQ7QUFBQSxDQW5JQTs7QUFBQSxXQUFBLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJUcmFuc2Zvcm1hdGlvbiA9IHJlcXVpcmUgJ3RyYW5zZm9ybWF0aW9uJ1xuY3NzID0gcmVxdWlyZSAnLi4vLi4vLi4vLi4vdXRpbGl0eS9jc3MnXG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgVHJhbnNmb3Jtc19cblxuXHRfX2luaXRNaXhpblRyYW5zZm9ybXM6IC0+XG5cblx0XHRAX3RyYW5zZm9ybWVyID0gbmV3IFRyYW5zZm9ybWF0aW9uXG5cblx0XHRAX29yaWdpbiA9XG5cblx0XHRcdHg6IG51bGxcblxuXHRcdFx0eTogbnVsbFxuXG5cdFx0XHR6OiBudWxsXG5cblx0XHRAX3Nob3VsZFVwZGF0ZVRyYW5zZm9ybXMgPSBub1xuXG5cdFx0cmV0dXJuXG5cblx0X19jbG9uZXJGb3JUcmFuc2Zvcm1zOiAobmV3U3R5bGVTZXR0ZXIpIC0+XG5cblx0XHRuZXdTdHlsZVNldHRlci5fc2hvdWxkVXBkYXRlVHJhbnNmb3JtcyA9IG5vXG5cblx0XHRyZXR1cm5cblxuXHRfdXBkYXRlVHJhbnNmb3JtczogLT5cblxuXHRcdHJldHVybiB1bmxlc3MgQF9zaG91bGRVcGRhdGVUcmFuc2Zvcm1zXG5cblx0XHRAX3Nob3VsZFVwZGF0ZVRyYW5zZm9ybXMgPSBub1xuXG5cdFx0ZG8gQF9hY3R1YWxseVVwZGF0ZVRyYW5zZm9ybXNcblxuXHRfc2NoZWR1bGVUcmFuc2Zvcm1zVXBkYXRlOiAtPlxuXG5cdFx0QF9zaG91bGRVcGRhdGVUcmFuc2Zvcm1zID0geWVzXG5cblx0XHRkbyBAX3NjaGVkdWxlVXBkYXRlXG5cblx0X2FjdHVhbGx5VXBkYXRlVHJhbnNmb3JtczogLT5cblxuXHRcdGNzcy5zZXRUcmFuc2Zvcm0gQG5vZGUsIEBfdHJhbnNmb3JtZXIudG9QbGFpbkNzcygpXG5cblx0XHRAXG5cblx0Z28zZDogLT5cblxuXHRcdGNzcy5zZXRUcmFuc2Zvcm1TdHlsZSBAbm9kZSwgJ3ByZXNlcnZlLTNkJ1xuXG5cdFx0QFxuXG5cdGdvRmxhdDogLT5cblxuXHRcdGNzcy5zZXRUcmFuc2Zvcm1TdHlsZSBAbm9kZSwgJ2ZsYXQnXG5cblx0XHRAXG5cblx0c2V0T3JpZ2luOiAoeCA9IDAsIHkgPSAwLCB6ID0gMCkgLT5cblxuXHRcdEBfb3JpZ2luLnggPSB4XG5cdFx0QF9vcmlnaW4ueSA9IHlcblx0XHRAX29yaWdpbi56ID0gelxuXG5cdFx0Y3NzLnNldFRyYW5zZm9ybU9yaWdpbiBAbm9kZSxcblxuXHRcdFx0XCIje0Bfb3JpZ2luLnh9cHggI3tAX29yaWdpbi55fXB4ICN7QF9vcmlnaW4uen1weFwiXG5cblx0XHRAXG5cblx0b3JpZ2luVG9Cb3R0b206IC0+XG5cblx0XHRjc3Muc2V0VHJhbnNmb3JtT3JpZ2luIEBub2RlLFxuXG5cdFx0XHRcIjUwJSAxMDAlXCJcblxuXHRcdEBcblxuXHRvcmlnaW5Ub1RvcDogLT5cblxuXHRcdGNzcy5zZXRUcmFuc2Zvcm1PcmlnaW4gQG5vZGUsXG5cblx0XHRcdFwiNTAlIDBcIlxuXG5cdFx0QFxuXG5cdHBpdm90OiAoeCA9IDAsIHkgPSAwKSAtPlxuXG5cdFx0aWYgeCBpcyAtMVxuXG5cdFx0XHRfeCA9ICcwJSdcblxuXHRcdGVsc2UgaWYgeCBpcyAwXG5cblx0XHRcdF94ID0gJzUwJSdcblxuXHRcdGVsc2UgaWYgeCBpcyAxXG5cblxuXHRcdFx0X3ggPSAnMTAwJSdcblxuXHRcdGVsc2VcblxuXHRcdFx0dGhyb3cgRXJyb3IgXCJwaXZvdCgpIG9ubHkgdGFrZXMgLTEsIDAsIGFuZCAxIGZvciBpdHMgYXJndW1lbnRzXCJcblxuXHRcdGlmIHkgaXMgLTFcblxuXHRcdFx0X3kgPSAnMCUnXG5cblx0XHRlbHNlIGlmIHkgaXMgMFxuXG5cdFx0XHRfeSA9ICc1MCUnXG5cblx0XHRlbHNlIGlmIHkgaXMgMVxuXG5cblx0XHRcdF95ID0gJzEwMCUnXG5cblx0XHRlbHNlXG5cblx0XHRcdHRocm93IEVycm9yIFwicGl2b3QoKSBvbmx5IHRha2VzIC0xLCAwLCBhbmQgMSBmb3IgaXRzIGFyZ3VtZW50c1wiXG5cblx0XHRjc3Muc2V0VHJhbnNmb3JtT3JpZ2luIEBub2RlLFxuXG5cdFx0XHRcIiN7X3h9ICN7X3l9XCJcblxuXHRcdEBcblxuQ2xhc3NQcm90b3R5cGUgPSBUcmFuc2Zvcm1zXy5wcm90b3R5cGVcblxuZm9yIG1ldGhvZE5hbWUsIG1ldGhvZCBvZiBUcmFuc2Zvcm1hdGlvbi5wcm90b3R5cGVcblxuXHRjb250aW51ZSB1bmxlc3MgbWV0aG9kIGluc3RhbmNlb2YgRnVuY3Rpb25cblxuXHRjb250aW51ZSBpZiBDbGFzc1Byb3RvdHlwZVttZXRob2ROYW1lXT9cblxuXHRjb250aW51ZSBpZiBtZXRob2ROYW1lWzBdIGlzICdfJ1xuXG5cdGNvbnRpbnVlIGlmIG1ldGhvZE5hbWUgaXMgJ3RlbXBvcmFyaWx5JyBvciBtZXRob2ROYW1lIGlzICdjb21taXQnIG9yXG5cdFx0bWV0aG9kTmFtZSBpcyAncm9sbEJhY2snIG9yIG1ldGhvZE5hbWUgaXMgJ3RvQ3NzJyBvclxuXHRcdG1ldGhvZE5hbWUgaXMgJ3RvUGxhaW5Dc3MnIG9yIG1ldGhvZE5hbWUgaXMgJ3RvQXJyYXknIG9yXG5cdFx0bWV0aG9kTmFtZSBpcyAndG9NYXRyaXgnXG5cblx0ZG8gLT5cblxuXHRcdF9tZXRob2ROYW1lID0gbWV0aG9kTmFtZVxuXG5cdFx0aWYgbWV0aG9kLmxlbmd0aCBpcyAwXG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9ICAtPlxuXG5cdFx0XHRcdCMgVGhpcyBpcyBtb3JlIHBlcmZvcm1hbnQgdGhhbiBtZXRob2QuYXBwbHkoKVxuXHRcdFx0XHQjXG5cdFx0XHRcdCMgQXJndW1lbnQgc3BsYXRzIHdvbid0IHdvcmsgaGVyZSB0aG91Z2guXG5cdFx0XHRcdEBfdHJhbnNmb3JtZXJbX21ldGhvZE5hbWVdKClcblxuXHRcdFx0XHRkbyBAX3NjaGVkdWxlVHJhbnNmb3Jtc1VwZGF0ZVxuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyAxXG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwKSAtPlxuXG5cdFx0XHRcdEBfdHJhbnNmb3JtZXJbX21ldGhvZE5hbWVdIGFyZzBcblxuXHRcdFx0XHRkbyBAX3NjaGVkdWxlVHJhbnNmb3Jtc1VwZGF0ZVxuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyAyXG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwLCBhcmcxKSAtPlxuXG5cdFx0XHRcdEBfdHJhbnNmb3JtZXJbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzFcblxuXHRcdFx0XHRkbyBAX3NjaGVkdWxlVHJhbnNmb3Jtc1VwZGF0ZVxuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyAzXG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwLCBhcmcxLCBhcmcyKSAtPlxuXG5cdFx0XHRcdEBfdHJhbnNmb3JtZXJbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzEsIGFyZzJcblxuXHRcdFx0XHRkbyBAX3NjaGVkdWxlVHJhbnNmb3Jtc1VwZGF0ZVxuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyA0XG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwLCBhcmcxLCBhcmcyLCBhcmczKSAtPlxuXG5cdFx0XHRcdEBfdHJhbnNmb3JtZXJbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzEsIGFyZzIsIGFyZzNcblxuXHRcdFx0XHRkbyBAX3NjaGVkdWxlVHJhbnNmb3Jtc1VwZGF0ZVxuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyA1XG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwLCBhcmcxLCBhcmcyLCBhcmczLCBhcmc0KSAtPlxuXG5cdFx0XHRcdEBfdHJhbnNmb3JtZXJbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzRcblxuXHRcdFx0XHRkbyBAX3NjaGVkdWxlVHJhbnNmb3Jtc1VwZGF0ZVxuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2VcblxuXHRcdFx0dGhyb3cgRXJyb3IgXCJNZXRob2RzIHdpdGggbW9yZSB0aGFuIDUgYXJncyBhcmUgbm90IHN1cHBvcnRlZC5cIlxuXG5UcmFuc2Zvcm1zXyJdfQ==
},{"../../../../utility/css":128,"transformation":101}],121:[function(require,module,exports){
var Typography_, css;

css = require('../../../../utility/css');

module.exports = Typography_ = (function() {
  function Typography_() {}

  Typography_.prototype.__initMixinTypography = function() {
    this._type = {
      face: Typography_.defaultFace,
      size: Typography_.defaultSize,
      color: Typography_.defaultColor
    };
    this._sizeSet = false;
  };

  Typography_.prototype._getSize = function() {
    if (!this._sizeSet) {
      this._type.size = parseFloat(getComputedStyle(this.node).fontSize);
      this._sizeSet = true;
    }
    return this._type.size;
  };

  Typography_.prototype._initTypography = function() {
    this.setSize();
    this.setFace();
    return this.setColor();
  };

  Typography_.prototype.setFace = function(face) {
    if (!face) {
      this._type.face = Typography_.defaultFace;
    } else {
      this._type.face = face;
    }
    this._applyFace();
    return this;
  };

  Typography_.prototype._applyFace = function() {
    this._styles.fontFamily = this._type.face;
    return this;
  };

  Typography_.prototype.setSize = function(size) {
    if (!size) {
      this._type.size = Typography_.defaultSize;
    } else {
      this._type.size = size;
    }
    this._applySize();
    return this;
  };

  Typography_.prototype._applySize = function() {
    this._styles.fontSize = this._type.size + 'px';
    return this;
  };

  Typography_.prototype.setColor = function(r, g, b) {
    if (arguments.length === 0) {
      this._type.color = Typography_.defaultColor;
    } else {
      this._type.color = css.rgb(r, g, b);
    }
    this._applyColor();
    return this;
  };

  Typography_.prototype._applyColor = function() {
    this._styles.color = this._type.color;
    this._applyStroke();
    return this;
  };

  Typography_.prototype._applyStroke = function() {
    if (Typography_.needsTextStroke() && this._getSize() < 50) {
      this._styles.webkitTextStroke = '1.5 ' + this._type.color;
    }
    return this;
  };

  Typography_.defaultFace = '"HelveticaNeueLT Std Thin"';

  Typography_.setDefaultFace = function(face) {
    if (face == null) {
      face = "HelveticaNeueLT Std Thin";
    }
    return this.defaultFace = face;
  };

  Typography_.defaultSize = 36;

  Typography_.setDefaultSize = function(size) {
    if (size == null) {
      size = 36;
    }
    return this.defaultSize = size;
  };

  Typography_.defaultColor = css.rgb(255, 255, 255);

  Typography_.setDefaultColor = function(r, g, b) {
    if (arguments.length === 0) {
      this.defaultColor = css.rgb(255, 255, 255);
    }
    return this.defaultColor = css.rgb(r, g, b);
  };

  Typography_.needsTextStroke = (function() {
    var _needsTextStroke;
    _needsTextStroke = null;
    return function() {
      if (_needsTextStroke === null) {
        if (navigator.appVersion.indexOf('Chrome') !== -1 && navigator.appVersion.indexOf('Windows') !== -1) {
          _needsTextStroke = true;
        } else {
          _needsTextStroke = false;
        }
      }
      return _needsTextStroke;
    };
  })();

  return Typography_;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHlwb2dyYXBoeV8uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcc3R5bGVTZXR0ZXJcXG1peGluXFxUeXBvZ3JhcGh5Xy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxnQkFBQTs7QUFBQSxHQUFBLEdBQU0sT0FBQSxDQUFRLHlCQUFSLENBQU4sQ0FBQTs7QUFBQSxNQUVNLENBQUMsT0FBUCxHQUF1QjsyQkFFdEI7O0FBQUEsd0JBQUEscUJBQUEsR0FBdUIsU0FBQSxHQUFBO0FBRXRCLElBQUEsSUFBQyxDQUFBLEtBQUQsR0FFQztBQUFBLE1BQUEsSUFBQSxFQUFNLFdBQVcsQ0FBQyxXQUFsQjtBQUFBLE1BRUEsSUFBQSxFQUFNLFdBQVcsQ0FBQyxXQUZsQjtBQUFBLE1BSUEsS0FBQSxFQUFPLFdBQVcsQ0FBQyxZQUpuQjtLQUZELENBQUE7QUFBQSxJQVFBLElBQUMsQ0FBQSxRQUFELEdBQVksS0FSWixDQUZzQjtFQUFBLENBQXZCLENBQUE7O0FBQUEsd0JBY0EsUUFBQSxHQUFVLFNBQUEsR0FBQTtBQUVULElBQUEsSUFBQSxDQUFBLElBQVEsQ0FBQSxRQUFSO0FBRUMsTUFBQSxJQUFDLENBQUEsS0FBSyxDQUFDLElBQVAsR0FBYyxVQUFBLENBQVcsZ0JBQUEsQ0FBaUIsSUFBQyxDQUFBLElBQWxCLENBQXVCLENBQUMsUUFBbkMsQ0FBZCxDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsUUFBRCxHQUFZLElBRlosQ0FGRDtLQUFBO1dBTUEsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQVJFO0VBQUEsQ0FkVixDQUFBOztBQUFBLHdCQXdCQSxlQUFBLEdBQWlCLFNBQUEsR0FBQTtBQUVoQixJQUFHLElBQUMsQ0FBQSxPQUFKLENBQUEsQ0FBQSxDQUFBO0FBQUEsSUFDRyxJQUFDLENBQUEsT0FBSixDQUFBLENBREEsQ0FBQTtXQUVHLElBQUMsQ0FBQSxR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b3VyY2VzQ29udGVudCI6WyJjc3MgPSByZXF1aXJlICcuLi8uLi8uLi8uLi91dGlsaXR5L2NzcydcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBUeXBvZ3JhcGh5X1xuXG5cdF9faW5pdE1peGluVHlwb2dyYXBoeTogLT5cblxuXHRcdEBfdHlwZSA9XG5cblx0XHRcdGZhY2U6IFR5cG9ncmFwaHlfLmRlZmF1bHRGYWNlXG5cblx0XHRcdHNpemU6IFR5cG9ncmFwaHlfLmRlZmF1bHRTaXplXG5cblx0XHRcdGNvbG9yOiBUeXBvZ3JhcGh5Xy5kZWZhdWx0Q29sb3JcblxuXHRcdEBfc2l6ZVNldCA9IG5vXG5cblx0XHRyZXR1cm5cblxuXHRfZ2V0U2l6ZTogLT5cblxuXHRcdHVubGVzcyBAX3NpemVTZXRcblxuXHRcdFx0QF90eXBlLnNpemUgPSBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoQG5vZGUpLmZvbnRTaXplKVxuXG5cdFx0XHRAX3NpemVTZXQgPSB5ZXNcblxuXHRcdEBfdHlwZS5zaXplXG5cblx0X2luaXRUeXBvZ3JhcGh5OiAtPlxuXG5cdFx0ZG8gQHNldFNpemVcblx0XHRkbyBAc2V0RmFjZVxuXHRcdGRvIEBzZXRDb2xvclxuXG5cdHNldEZhY2U6IChmYWNlKSAtPlxuXG5cdFx0dW5sZXNzIGZhY2VcblxuXHRcdFx0QF90eXBlLmZhY2UgPSBUeXBvZ3JhcGh5Xy5kZWZhdWx0RmFjZVxuXG5cdFx0ZWxzZVxuXG5cdFx0XHRAX3R5cGUuZmFjZSA9IGZhY2VcblxuXHRcdGRvIEBfYXBwbHlGYWNlXG5cblx0XHRAXG5cblx0X2FwcGx5RmFjZTogLT5cblxuXHRcdEBfc3R5bGVzLmZvbnRGYW1pbHkgPSBAX3R5cGUuZmFjZVxuXG5cdFx0QFxuXG5cdHNldFNpemU6IChzaXplKSAtPlxuXG5cdFx0dW5sZXNzIHNpemVcblxuXHRcdFx0QF90eXBlLnNpemUgPSBUeXBvZ3JhcGh5Xy5kZWZhdWx0U2l6ZVxuXG5cdFx0ZWxzZVxuXG5cdFx0XHRAX3R5cGUuc2l6ZSA9IHNpemVcblxuXHRcdGRvIEBfYXBwbHlTaXplXG5cblx0XHRAXG5cblx0X2FwcGx5U2l6ZTogLT5cblxuXHRcdEBfc3R5bGVzLmZvbnRTaXplID0gQF90eXBlLnNpemUgKyAncHgnXG5cblx0XHRAXG5cblx0c2V0Q29sb3I6IChyLCBnLCBiKSAtPlxuXG5cdFx0aWYgYXJndW1lbnRzLmxlbmd0aCBpcyAwXG5cblx0XHRcdEBfdHlwZS5jb2xvciA9IFR5cG9ncmFwaHlfLmRlZmF1bHRDb2xvclxuXG5cdFx0ZWxzZVxuXG5cdFx0XHRAX3R5cGUuY29sb3IgPSBjc3MucmdiKHIsIGcsIGIpXG5cblx0XHRkbyBAX2FwcGx5Q29sb3JcblxuXHRcdEBcblxuXHRfYXBwbHlDb2xvcjogLT5cblxuXHRcdEBfc3R5bGVzLmNvbG9yID0gQF90eXBlLmNvbG9yXG5cblx0XHRkbyBAX2FwcGx5U3Ryb2tlXG5cblx0XHRAXG5cblx0X2FwcGx5U3Ryb2tlOiAtPlxuXG5cdFx0aWYgVHlwb2dyYXBoeV8ubmVlZHNUZXh0U3Ryb2tlKCkgYW5kIEBfZ2V0U2l6ZSgpIDwgNTBcblxuXG5cblx0XHRcdEBfc3R5bGVzLndlYmtpdFRleHRTdHJva2UgPSAnMS41ICcgKyBAX3R5cGUuY29sb3JcblxuXHRcdEBcblxuXHRAZGVmYXVsdEZhY2UgPSAnXCJIZWx2ZXRpY2FOZXVlTFQgU3RkIFRoaW5cIidcblxuXHRAc2V0RGVmYXVsdEZhY2U6IChmYWNlID0gXCJIZWx2ZXRpY2FOZXVlTFQgU3RkIFRoaW5cIikgLT5cblxuXHRcdEBkZWZhdWx0RmFjZSA9IGZhY2VcblxuXHRAZGVmYXVsdFNpemUgPSAzNlxuXG5cdEBzZXREZWZhdWx0U2l6ZTogKHNpemUgPSAzNikgLT5cblxuXHRcdEBkZWZhdWx0U2l6ZSA9IHNpemVcblxuXHRAZGVmYXVsdENvbG9yID0gY3NzLnJnYigyNTUsIDI1NSwgMjU1KVxuXG5cdEBzZXREZWZhdWx0Q29sb3I6IChyLCBnLCBiKSAtPlxuXG5cdFx0aWYgYXJndW1lbnRzLmxlbmd0aCBpcyAwXG5cblx0XHRcdEBkZWZhdWx0Q29sb3IgPSBjc3MucmdiKDI1NSwgMjU1LCAyNTUpXG5cblx0XHRAZGVmYXVsdENvbG9yID0gY3NzLnJnYihyLCBnLCBiKVxuXG5cdCMgQXMgbG9uZyBhcyBjaHJvbWUgaGFzbid0IGltcGxlbWVudGVkIERpcmVjdFdyaXRlLCB0ZXh0IHdvbid0IGxvb2tcblx0IyBpdHMgYmVzdCBvbiB3aW5kb3dzLiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGVsbCB5b3UgaWYgeW91IG5lZWQgdG9cblx0IyBhcHBseSBhIC13ZWJraXQtdGV4dC1zdHJva2UgdG8gbWFrZSB0ZXh0IGxvb2sgYSBiaXQgc21vb3RoZXIgb25cblx0IyBjaHJvbWUvd2luLlxuXHRAbmVlZHNUZXh0U3Ryb2tlOiBkbyAtPlxuXG5cdFx0X25lZWRzVGV4dFN0cm9rZSA9IG51bGxcblxuXHRcdC0+XG5cblx0XHRcdGlmIF9uZWVkc1RleHRTdHJva2UgaXMgbnVsbFxuXG5cdFx0XHRcdGlmIG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ0Nocm9tZScpIGlzbnQgLTEgYW5kIG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ1dpbmRvd3MnKSBpc250IC0xXG5cblx0XHRcdFx0XHRfbmVlZHNUZXh0U3Ryb2tlID0geWVzXG5cblx0XHRcdFx0ZWxzZVxuXG5cdFx0XHRcdFx0X25lZWRzVGV4dFN0cm9rZSA9IG5vXG5cblx0XHRcdF9uZWVkc1RleHRTdHJva2UiXX0=
},{"../../../../utility/css":128}],122:[function(require,module,exports){
var CSSColor, ClassPrototype, ColorHolder, method, methodName, _fn, _ref;

CSSColor = require('css-color');

module.exports = ColorHolder = (function() {
  function ColorHolder(_callback) {
    this._callback = _callback;
    this._color = new CSSColor;
  }

  ColorHolder.prototype.withRgb = function(r, g, b) {
    this._color.fromRgb(r, g, b);
    this._callback();
    return this;
  };

  ColorHolder.prototype.withHsl = function(h, s, l) {
    this._color.fromHsl(h, s, l);
    this._callback();
    return this;
  };

  ColorHolder.prototype.clone = function(callback) {
    var newObj;
    newObj = Object.create(this.constructor.prototype);
    newObj._color = this._color.clone();
    newObj._callback = callback;
    return newObj;
  };

  return ColorHolder;

})();

ClassPrototype = ColorHolder.prototype;

_ref = CSSColor.prototype;
_fn = function() {
  var _methodName;
  _methodName = methodName;
  if (method.length === 0) {
    return ClassPrototype[_methodName] = function() {
      this._color[_methodName]();
      this._callback();
      return this;
    };
  } else if (method.length === 1) {
    return ClassPrototype[_methodName] = function(arg0) {
      this._color[_methodName](arg0);
      this._callback();
      return this;
    };
  } else if (method.length === 2) {
    return ClassPrototype[_methodName] = function(arg0, arg1) {
      this._color[_methodName](arg0, arg1);
      this._callback();
      return this;
    };
  } else if (method.length === 3) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2) {
      this._color[_methodName](arg0, arg1, arg2);
      this._callback();
      return this;
    };
  } else if (method.length === 4) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3) {
      this._color[_methodName](arg0, arg1, arg2, arg3);
      this._callback();
      return this;
    };
  } else if (method.length === 5) {
    return ClassPrototype[_methodName] = function(arg0, arg1, arg2, arg3, arg4) {
      this._color[_methodName](arg0, arg1, arg2, arg3, arg4);
      this._callback();
      return this;
    };
  } else {
    throw Error("Methods with more than 5 args are not supported.");
  }
};
for (methodName in _ref) {
  method = _ref[methodName];
  if (!(method instanceof Function)) {
    continue;
  }
  if (ClassPrototype[methodName] != null) {
    continue;
  }
  if (methodName[0] === '_') {
    continue;
  }
  if (methodName.substr(0, 2) === 'to') {
    continue;
  }
  _fn();
}

ColorHolder;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29sb3JIb2xkZXIuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcc3R5bGVTZXR0ZXJcXHRvb2xzXFxDb2xvckhvbGRlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxvRUFBQTs7QUFBQSxRQUFBLEdBQVcsT0FBQSxDQUFRLFdBQVIsQ0FBWCxDQUFBOztBQUFBLE1BRU0sQ0FBQyxPQUFQLEdBQXVCO0FBRVQsRUFBQSxxQkFBRSxTQUFGLEdBQUE7QUFFWixJQUZhLElBQUMsQ0FBQSxZQUFBLFNBRWQsQ0FBQTtBQUFBLElBQUEsSUFBQyxDQUFBLE1BQUQsR0FBVSxHQUFBLENBQUEsUUFBVixDQUZZO0VBQUEsQ0FBYjs7QUFBQSx3QkFJQSxPQUFBLEdBQVMsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsR0FBQTtBQUVSLElBQUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLENBQWdCLENBQWhCLEVBQW1CLENBQW5CLEVBQXNCLENBQXRCLENBQUEsQ0FBQTtBQUFBLElBRUcsSUFBQyxDQUFBLFNBQUosQ0FBQSxDQUZBLENBQUE7V0FJQSxLQU5RO0VBQUEsQ0FKVCxDQUFBOztBQUFBLHdCQVlBLE9BQUEsR0FBUyxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxHQUFBO0FBRVIsSUFBQSxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkIsRUFBc0IsQ0FBdEIsQ0FBQSxDQUFBO0FBQUEsSUFFRyxJQUFDLENBQUEsU0FBSixDQUFBLENBRkEsQ0FBQTtXQUlBLEtBTlE7RUFBQSxDQVpULENBQUE7O0FBQUEsd0JBb0JBLEtBQUEsR0FBTyxTQUFDLFFBQUQsR0FBQTtBQUVOLFFBQUEsTUFBQTtBQUFBLElBQUEsTUFBQSxHQUFTLE1BQU0sQ0FBQyxNQUFQLENBQWMsSUFBQyxDQUFBLFdBQVcsQ0FBQSxT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QSxDQUFNLGtEQUFOLENBQU4sQ0FaSTtHQXpESDtBQUFBLENBVko7QUFBQSxLQUFBLGtCQUFBOzRCQUFBO0FBRUMsRUFBQSxJQUFBLENBQUEsQ0FBZ0IsTUFBQSxZQUFrQixRQUFsQyxDQUFBO0FBQUEsYUFBQTtHQUFBO0FBRUEsRUFBQSxJQUFZLGtDQUFaO0FBQUEsYUFBQTtHQUZBO0FBSUEsRUFBQSxJQUFZLFVBQVcsQ0FBQSxDQUFBLENBQVgsS0FBaUIsR0FBN0I7QUFBQSxhQUFBO0dBSkE7QUFNQSxFQUFBLElBQVksVUFBVSxDQUFDLE1BQVgsQ0FBa0IsQ0FBbEIsRUFBcUIsQ0FBckIsQ0FBQSxLQUEyQixJQUF2QztBQUFBLGFBQUE7R0FOQTtBQUFBLE9BQUEsQ0FGRDtBQUFBLENBcENBOztBQUFBLFdBQUEsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIkNTU0NvbG9yID0gcmVxdWlyZSAnY3NzLWNvbG9yJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIENvbG9ySG9sZGVyXG5cblx0Y29uc3RydWN0b3I6IChAX2NhbGxiYWNrKSAtPlxuXG5cdFx0QF9jb2xvciA9IG5ldyBDU1NDb2xvclxuXG5cdHdpdGhSZ2I6IChyLCBnLCBiKSAtPlxuXG5cdFx0QF9jb2xvci5mcm9tUmdiIHIsIGcsIGJcblxuXHRcdGRvIEBfY2FsbGJhY2tcblxuXHRcdEBcblxuXHR3aXRoSHNsOiAoaCwgcywgbCkgLT5cblxuXHRcdEBfY29sb3IuZnJvbUhzbCBoLCBzLCBsXG5cblx0XHRkbyBAX2NhbGxiYWNrXG5cblx0XHRAXG5cblx0Y2xvbmU6IChjYWxsYmFjaykgLT5cblxuXHRcdG5ld09iaiA9IE9iamVjdC5jcmVhdGUgQGNvbnN0cnVjdG9yOjpcblxuXHRcdG5ld09iai5fY29sb3IgPSBAX2NvbG9yLmNsb25lKClcblxuXHRcdG5ld09iai5fY2FsbGJhY2sgPSBjYWxsYmFja1xuXG5cdFx0bmV3T2JqXG5cbkNsYXNzUHJvdG90eXBlID0gQ29sb3JIb2xkZXIucHJvdG90eXBlXG5cbmZvciBtZXRob2ROYW1lLCBtZXRob2Qgb2YgQ1NTQ29sb3IucHJvdG90eXBlXG5cblx0Y29udGludWUgdW5sZXNzIG1ldGhvZCBpbnN0YW5jZW9mIEZ1bmN0aW9uXG5cblx0Y29udGludWUgaWYgQ2xhc3NQcm90b3R5cGVbbWV0aG9kTmFtZV0/XG5cblx0Y29udGludWUgaWYgbWV0aG9kTmFtZVswXSBpcyAnXydcblxuXHRjb250aW51ZSBpZiBtZXRob2ROYW1lLnN1YnN0cigwLCAyKSBpcyAndG8nXG5cblx0ZG8gLT5cblxuXHRcdF9tZXRob2ROYW1lID0gbWV0aG9kTmFtZVxuXG5cdFx0aWYgbWV0aG9kLmxlbmd0aCBpcyAwXG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9ICAtPlxuXG5cdFx0XHRcdCMgVGhpcyBpcyBtb3JlIHBlcmZvcm1hbnQgdGhhbiBtZXRob2QuYXBwbHkoKVxuXHRcdFx0XHQjXG5cdFx0XHRcdCMgQXJndW1lbnQgc3BsYXRzIHdvbid0IHdvcmsgaGVyZSB0aG91Z2guXG5cdFx0XHRcdEBfY29sb3JbX21ldGhvZE5hbWVdKClcblxuXHRcdFx0XHRkbyBAX2NhbGxiYWNrXG5cblx0XHRcdFx0QFxuXG5cdFx0ZWxzZSBpZiBtZXRob2QubGVuZ3RoIGlzIDFcblxuXHRcdFx0Q2xhc3NQcm90b3R5cGVbX21ldGhvZE5hbWVdID0gKGFyZzApIC0+XG5cblx0XHRcdFx0QF9jb2xvcltfbWV0aG9kTmFtZV0gYXJnMFxuXG5cdFx0XHRcdGRvIEBfY2FsbGJhY2tcblxuXHRcdFx0XHRAXG5cblx0XHRlbHNlIGlmIG1ldGhvZC5sZW5ndGggaXMgMlxuXG5cdFx0XHRDbGFzc1Byb3RvdHlwZVtfbWV0aG9kTmFtZV0gPSAoYXJnMCwgYXJnMSkgLT5cblxuXHRcdFx0XHRAX2NvbG9yW19tZXRob2ROYW1lXSBhcmcwLCBhcmcxXG5cblx0XHRcdFx0ZG8gQF9jYWxsYmFja1xuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2UgaWYgbWV0aG9kLmxlbmd0aCBpcyAzXG5cblx0XHRcdENsYXNzUHJvdG90eXBlW19tZXRob2ROYW1lXSA9IChhcmcwLCBhcmcxLCBhcmcyKSAtPlxuXG5cdFx0XHRcdEBfY29sb3JbX21ldGhvZE5hbWVdIGFyZzAsIGFyZzEsIGFyZzJcblxuXHRcdFx0XHRkbyBAX2NhbGxiYWNrXG5cblx0XHRcdFx0QFxuXG5cdFx0ZWxzZSBpZiBtZXRob2QubGVuZ3RoIGlzIDRcblxuXHRcdFx0Q2xhc3NQcm90b3R5cGVbX21ldGhvZE5hbWVdID0gKGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMpIC0+XG5cblx0XHRcdFx0QF9jb2xvcltfbWV0aG9kTmFtZV0gYXJnMCwgYXJnMSwgYXJnMiwgYXJnM1xuXG5cdFx0XHRcdGRvIEBfY2FsbGJhY2tcblxuXHRcdFx0XHRAXG5cblx0XHRlbHNlIGlmIG1ldGhvZC5sZW5ndGggaXMgNVxuXG5cdFx0XHRDbGFzc1Byb3RvdHlwZVtfbWV0aG9kTmFtZV0gPSAoYXJnMCwgYXJnMSwgYXJnMiwgYXJnMywgYXJnNCkgLT5cblxuXHRcdFx0XHRAX2NvbG9yW19tZXRob2ROYW1lXSBhcmcwLCBhcmcxLCBhcmcyLCBhcmczLCBhcmc0XG5cblx0XHRcdFx0ZG8gQF9jYWxsYmFja1xuXG5cdFx0XHRcdEBcblxuXHRcdGVsc2VcblxuXHRcdFx0dGhyb3cgRXJyb3IgXCJNZXRob2RzIHdpdGggbW9yZSB0aGFuIDUgYXJncyBhcmUgbm90IHN1cHBvcnRlZC5cIlxuXG5Db2xvckhvbGRlciJdfQ==
},{"css-color":77}],123:[function(require,module,exports){
var Fill_, Layout_, Transforms_, Transitioner, classic, easing, object, timing, _ref;

Fill_ = require('./mixin/Fill_');

Transforms_ = require('./mixin/Transforms_');

Layout_ = require('./mixin/Layout_');

timing = require('../../../timing');

easing = require('timing-function');

_ref = require('utila'), classic = _ref.classic, object = _ref.object;

module.exports = classic.mix(Fill_, Transforms_, Layout_, Transitioner = (function() {
  function Transitioner(el) {
    this.el = el;
    this._styleSetter = this.el._styleSetter;
    this._enabled = false;
    this._duration = 1000;
    this._startTime = -1;
    Transitioner.__initMixinsFor(this);
    this._needsUpdate = {
      transformMovement: false,
      transformRotation: false,
      transformScale: false,
      transformPerspective: false,
      transformLocalMovement: false,
      opacity: false,
      width: false,
      height: false,
      clip: false
    };
    this._shouldUpdate = false;
    this.ease('cubic.easeOut');
  }

  Transitioner.prototype.ease = function(funcNameOrFirstNumOfCubicBezier, secondNum, thirdNum, fourthNum) {
    this._easing = easing.get.apply(easing, arguments);
    return this;
  };

  Transitioner.prototype.clone = function(el) {
    var key, newObj;
    newObj = Object.create(this.constructor.prototype);
    newObj.el = el;
    newObj._startTime = new Int32Array(1);
    newObj._startTime[0] = 0;
    newObj._styleSetter = el._styleSetter;
    newObj._needsUpdate = {
      transformMovement: false,
      transformRotation: false,
      transformScale: false,
      transformPerspective: false,
      transformLocalMovement: false,
      width: false,
      height: false,
      opacity: false,
      clip: false
    };
    Transitioner.__applyClonersFor(this, [newObj]);
    for (key in this) {
      if (newObj[key] !== void 0) {
        continue;
      }
      if (this.hasOwnProperty(key)) {
        newObj[key] = object.clone(this[key], true);
      }
    }
    return newObj;
  };

  Transitioner.prototype.enable = function(duration) {
    this._enabled = true;
    this._duration = duration;
    return this;
  };

  Transitioner.prototype.disable = function() {
    this._enabled = false;
    this._stop();
    return this;
  };

  Transitioner.prototype._stop = function() {
    this._shouldUpdate = false;
    this._disableTransitionForTransforms();
    this._disableTransitionForFill();
    this._disableTransitionForLayout();
  };

  Transitioner.prototype._update = function() {
    if (this._startTime === timing.time) {
      return;
    }
    this._startOver();
  };

  Transitioner.prototype._startOver = function() {
    this._startTime = timing.time;
    this._adjustFromValues();
    this._shouldUpdate = true;
    return this._scheduleUpdate();
  };

  Transitioner.prototype._adjustFromValues = function() {
    this._adjustFromValuesForTransforms();
    this._adjustFromValuesForFill();
    this._adjustFromValuesForLayout();
    return this;
  };

  Transitioner.prototype._scheduleUpdate = function() {
    return this.el._scheduleUpdate();
  };

  Transitioner.prototype._updateTransition = function() {
    if (!this._enabled || !this._shouldUpdate) {
      return;
    }
    return this._updateForTime(timing.time);
  };

  Transitioner.prototype._updateForTime = function(t) {
    var ellapsed, progress;
    ellapsed = t - this._startTime;
    progress = ellapsed / this._duration;
    if (progress >= 1) {
      progress = 1;
    } else {
      this._scheduleUpdate();
    }
    progress = this._ease(progress);
    this._updateByProgress(progress);
    if (progress === 1) {
      this._stop();
    }
  };

  Transitioner.prototype._updateByProgress = function(progress) {
    this._updateTransitionForTransforms(progress);
    this._updateTransitionForFill(progress);
    this._updateTransitionForLayout(progress);
    return null;
  };

  Transitioner.prototype._ease = function(progress) {
    return this._easing(progress);
  };

  return Transitioner;

})());

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNpdGlvbmVyLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcdHJhbnNpdGlvbmVyXFxUcmFuc2l0aW9uZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsZ0ZBQUE7O0FBQUEsS0FBQSxHQUFRLE9BQUEsQ0FBUSxlQUFSLENBQVIsQ0FBQTs7QUFBQSxXQUNBLEdBQWMsT0FBQSxDQUFRLHFCQUFSLENBRGQsQ0FBQTs7QUFBQSxPQUVBLEdBQVUsT0FBQSxDQUFRLGlCQUFSLENBRlYsQ0FBQTs7QUFBQSxNQUdBLEdBQVMsT0FBQSxDQUFRLGlCQUFSLENBSFQsQ0FBQTs7QUFBQSxNQUlBLEdBQVMsT0FBQSxDQUFRLGlCQUFSLENBSlQsQ0FBQTs7QUFBQSxPQUtvQixPQUFBLENBQVEsT0FBUixDQUFwQixFQUFDLGVBQUEsT0FBRCxFQUFVLGNBQUEsTUFMVixDQUFBOztBQUFBLE1BT00sQ0FBQyxPQUFQLEdBQWlCLE9BQU8sQ0FBQyxHQUFSLENBQVksS0FBWixFQUFtQixXQUFuQixFQUFnQyxPQUFoQyxFQUErQztBQUVsRCxFQUFBLHNCQUFFLEVBQUYsR0FBQTtBQUVaLElBRmEsSUFBQyxDQUFBLEtBQUEsRUFFZCxDQUFBO0FBQUEsSUFBQSxJQUFDLENBQUEsWUFBRCxHQUFnQixJQUFDLENBQUEsRUFBRSxDQUFDLFlBQXBCLENBQUE7QUFBQSxJQUVBLElBQUMsQ0FBQSxRQUFELEdBQVksS0FGWixDQUFBO0FBQUEsSUFJQSxJQUFDLENBQUEsU0FBRCxHQUFhLElBSmIsQ0FBQTtBQUFBLElBTUEsSUFBQyxDQUFBLFVBQUQsR0FBYyxDQUFBLENBTmQsQ0FBQTtBQUFBLElBUUEsWUFBWSxDQUFDLGVBQWIsQ0FBNkIsSUFBN0IsQ0FSQSxDQUFBO0FBQUEsSUFVQSxJQUFDLENBQUEsWUFBRCxHQUVDO0FBQUEsTUFBQSxpQkFBQSxFQUFtQixLQUFuQjtBQUFB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LCJzb3VyY2VzQ29udGVudCI6WyJGaWxsXyA9IHJlcXVpcmUgJy4vbWl4aW4vRmlsbF8nXHJcblRyYW5zZm9ybXNfID0gcmVxdWlyZSAnLi9taXhpbi9UcmFuc2Zvcm1zXydcclxuTGF5b3V0XyA9IHJlcXVpcmUgJy4vbWl4aW4vTGF5b3V0XydcclxudGltaW5nID0gcmVxdWlyZSAnLi4vLi4vLi4vdGltaW5nJ1xyXG5lYXNpbmcgPSByZXF1aXJlICd0aW1pbmctZnVuY3Rpb24nXHJcbntjbGFzc2ljLCBvYmplY3R9ID0gcmVxdWlyZSAndXRpbGEnXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzaWMubWl4IEZpbGxfLCBUcmFuc2Zvcm1zXywgTGF5b3V0XywgY2xhc3MgVHJhbnNpdGlvbmVyXHJcblxyXG5cdGNvbnN0cnVjdG9yOiAoQGVsKSAtPlxyXG5cclxuXHRcdEBfc3R5bGVTZXR0ZXIgPSBAZWwuX3N0eWxlU2V0dGVyXHJcblxyXG5cdFx0QF9lbmFibGVkID0gbm9cclxuXHJcblx0XHRAX2R1cmF0aW9uID0gMTAwMFxyXG5cclxuXHRcdEBfc3RhcnRUaW1lID0gLTFcclxuXHJcblx0XHRUcmFuc2l0aW9uZXIuX19pbml0TWl4aW5zRm9yIEBcclxuXHJcblx0XHRAX25lZWRzVXBkYXRlID1cclxuXHJcblx0XHRcdHRyYW5zZm9ybU1vdmVtZW50OiBub1xyXG5cdFx0XHR0cmFuc2Zvcm1Sb3RhdGlvbjogbm9cclxuXHRcdFx0dHJhbnNmb3JtU2NhbGU6IG5vXHJcblx0XHRcdHRyYW5zZm9ybVBlcnNwZWN0aXZlOiBub1xyXG5cdFx0XHR0cmFuc2Zvcm1Mb2NhbE1vdmVtZW50OiBub1xyXG5cdFx0XHRvcGFjaXR5OiBub1xyXG5cdFx0XHR3aWR0aDogbm9cclxuXHRcdFx0aGVpZ2h0OiBub1xyXG5cdFx0XHRjbGlwOiBub1xyXG5cclxuXHRcdEBfc2hvdWxkVXBkYXRlID0gbm9cclxuXHJcblx0XHRAZWFzZSAnY3ViaWMuZWFzZU91dCdcclxuXHJcblx0ZWFzZTogKGZ1bmNOYW1lT3JGaXJzdE51bU9mQ3ViaWNCZXppZXIsIHNlY29uZE51bSwgdGhpcmROdW0sIGZvdXJ0aE51bSkgLT5cclxuXHJcblx0XHRAX2Vhc2luZyA9IGVhc2luZy5nZXQuYXBwbHkgZWFzaW5nLCBhcmd1bWVudHNcclxuXHJcblx0XHRAXHJcblxyXG5cdGNsb25lOiAoZWwpIC0+XHJcblxyXG5cdFx0bmV3T2JqID0gT2JqZWN0LmNyZWF0ZSBAY29uc3RydWN0b3I6OlxyXG5cclxuXHRcdG5ld09iai5lbCA9IGVsXHJcblxyXG5cdFx0bmV3T2JqLl9zdGFydFRpbWUgPSBuZXcgSW50MzJBcnJheSAxXHJcblx0XHRuZXdPYmouX3N0YXJ0VGltZVswXSA9IDBcclxuXHJcblx0XHRuZXdPYmouX3N0eWxlU2V0dGVyID0gZWwuX3N0eWxlU2V0dGVyXHJcblxyXG5cdFx0bmV3T2JqLl9uZWVkc1VwZGF0ZSA9XHJcblxyXG5cdFx0XHR0cmFuc2Zvcm1Nb3ZlbWVudDogbm9cclxuXHRcdFx0dHJhbnNmb3JtUm90YXRpb246IG5vXHJcblx0XHRcdHRyYW5zZm9ybVNjYWxlOiBub1xyXG5cdFx0XHR0cmFuc2Zvcm1QZXJzcGVjdGl2ZTogbm9cclxuXHRcdFx0dHJhbnNmb3JtTG9jYWxNb3ZlbWVudDogbm9cclxuXHRcdFx0d2lkdGg6IG5vXHJcblx0XHRcdGhlaWdodDogbm9cclxuXHRcdFx0b3BhY2l0eTogbm9cclxuXHRcdFx0Y2xpcDogbm9cclxuXHJcblx0XHRUcmFuc2l0aW9uZXIuX19hcHBseUNsb25lcnNGb3IgQCwgW25ld09ial1cclxuXHJcblx0XHRmb3Iga2V5IG9mIEBcclxuXHJcblx0XHRcdGNvbnRpbnVlIGlmIG5ld09ialtrZXldIGlzbnQgdW5kZWZpbmVkXHJcblxyXG5cdFx0XHRpZiBAaGFzT3duUHJvcGVydHkga2V5XHJcblxyXG5cdFx0XHRcdG5ld09ialtrZXldID0gb2JqZWN0LmNsb25lIEBba2V5XSwgeWVzXHJcblxyXG5cdFx0bmV3T2JqXHJcblxyXG5cdGVuYWJsZTogKGR1cmF0aW9uKSAtPlxyXG5cclxuXHRcdEBfZW5hYmxlZCA9IHllc1xyXG5cclxuXHRcdEBfZHVyYXRpb24gPSBkdXJhdGlvblxyXG5cclxuXHRcdEBcclxuXHJcblx0ZGlzYWJsZTogLT5cclxuXHJcblx0XHRAX2VuYWJsZWQgPSBub1xyXG5cclxuXHRcdGRvIEBfc3RvcFxyXG5cclxuXHRcdEBcclxuXHJcblx0X3N0b3A6IC0+XHJcblxyXG5cdFx0QF9zaG91bGRVcGRhdGUgPSBub1xyXG5cclxuXHRcdGRvIEBfZGlzYWJsZVRyYW5zaXRpb25Gb3JUcmFuc2Zvcm1zXHJcblx0XHRkbyBAX2Rpc2FibGVUcmFuc2l0aW9uRm9yRmlsbFxyXG5cdFx0ZG8gQF9kaXNhYmxlVHJhbnNpdGlvbkZvckxheW91dFxyXG5cclxuXHRcdHJldHVyblxyXG5cclxuXHRfdXBkYXRlOiAtPlxyXG5cclxuXHRcdHJldHVybiBpZiBAX3N0YXJ0VGltZSBpcyB0aW1pbmcudGltZVxyXG5cclxuXHRcdGRvIEBfc3RhcnRPdmVyXHJcblxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdF9zdGFydE92ZXI6IC0+XHJcblxyXG5cdFx0QF9zdGFydFRpbWUgPSB0aW1pbmcudGltZVxyXG5cclxuXHRcdGRvIEBfYWRqdXN0RnJvbVZhbHVlc1xyXG5cclxuXHRcdEBfc2hvdWxkVXBkYXRlID0geWVzXHJcblxyXG5cdFx0ZG8gQF9zY2hlZHVsZVVwZGF0ZVxyXG5cclxuXHRfYWRqdXN0RnJvbVZhbHVlczogLT5cclxuXHJcblx0XHRkbyBAX2FkanVzdEZyb21WYWx1ZXNGb3JUcmFuc2Zvcm1zXHJcblxyXG5cdFx0ZG8gQF9hZGp1c3RGcm9tVmFsdWVzRm9yRmlsbFxyXG5cclxuXHRcdGRvIEBfYWRqdXN0RnJvbVZhbHVlc0ZvckxheW91dFxyXG5cclxuXHRcdEBcclxuXHJcblx0X3NjaGVkdWxlVXBkYXRlOiAtPlxyXG5cclxuXHRcdGRvIEBlbC5fc2NoZWR1bGVVcGRhdGVcclxuXHJcblx0X3VwZGF0ZVRyYW5zaXRpb246IC0+XHJcblxyXG5cdFx0cmV0dXJuIGlmIG5vdCBAX2VuYWJsZWQgb3Igbm90IEBfc2hvdWxkVXBkYXRlXHJcblxyXG5cdFx0QF91cGRhdGVGb3JUaW1lIHRpbWluZy50aW1lXHJcblxyXG5cdF91cGRhdGVGb3JUaW1lOiAodCkgLT5cclxuXHJcblx0XHRlbGxhcHNlZCA9ICh0IC0gQF9zdGFydFRpbWUpXHJcblxyXG5cdFx0cHJvZ3Jlc3MgPSBlbGxhcHNlZCAvIEBfZHVyYXRpb25cclxuXHJcblx0XHRpZiBwcm9ncmVzcyA+PSAxXHJcblxyXG5cdFx0XHRwcm9ncmVzcyA9IDFcclxuXHJcblx0XHRlbHNlXHJcblxyXG5cdFx0XHRkbyBAX3NjaGVkdWxlVXBkYXRlXHJcblxyXG5cdFx0cHJvZ3Jlc3MgPSBAX2Vhc2UgcHJvZ3Jlc3NcclxuXHJcblx0XHRAX3VwZGF0ZUJ5UHJvZ3Jlc3MgcHJvZ3Jlc3NcclxuXHJcblx0XHRpZiBwcm9ncmVzcyBpcyAxXHJcblxyXG5cdFx0XHRkbyBAX3N0b3BcclxuXHJcblx0XHRyZXR1cm5cclxuXHJcblx0X3VwZGF0ZUJ5UHJvZ3Jlc3M6IChwcm9ncmVzcykgLT5cclxuXHJcblx0XHRAX3VwZGF0ZVRyYW5zaXRpb25Gb3JUcmFuc2Zvcm1zIHByb2dyZXNzXHJcblxyXG5cdFx0QF91cGRhdGVUcmFuc2l0aW9uRm9yRmlsbCBwcm9ncmVzc1xyXG5cclxuXHRcdEBfdXBkYXRlVHJhbnNpdGlvbkZvckxheW91dCBwcm9ncmVzc1xyXG5cclxuXHRcdG51bGxcclxuXHJcblx0X2Vhc2U6IChwcm9ncmVzcykgLT5cclxuXHJcblx0XHRAX2Vhc2luZyBwcm9ncmVzcyJdfQ==
},{"../../../timing":127,"./mixin/Fill_":124,"./mixin/Layout_":125,"./mixin/Transforms_":126,"timing-function":100,"utila":110}],124:[function(require,module,exports){
var Fill_;

module.exports = Fill_ = (function() {
  function Fill_() {}

  Fill_.prototype.__initMixinFill = function() {
    this._fromFill = {
      opacity: null
    };
    this._toFill = {
      opacity: null
    };
    this._currentFill = this.el._styleSetter._fill;
  };

  Fill_.prototype.__clonerForFill = function(newTransitioner) {
    newTransitioner._currentFill = newTransitioner.el._styleSetter._fill;
  };

  Fill_.prototype._adjustFromValuesForFill = function() {
    this._fromFill.opacity = this._currentFill.opacity;
  };

  Fill_.prototype._disableTransitionForFill = function() {
    this._toFill.opacity = this._currentFill.opacity;
    this._needsUpdate.opacity = false;
  };

  Fill_.prototype._updateTransitionForFill = function(progress) {
    if (this._needsUpdate.opacity) {
      this._updateOpacity(progress);
    }
  };

  Fill_.prototype.setOpacity = function(d) {
    this._toFill.opacity = d;
    this._needsUpdate.opacity = true;
    this._update();
    return this;
  };

  Fill_.prototype.adjustOpacity = function(d) {
    this._toFill.opacity = this._currentFill.opacity + d;
    this._needsUpdate.opacity = true;
    this._update();
    return this;
  };

  Fill_.prototype._updateOpacity = function(progress) {
    this._styleSetter.setOpacity(this._fromFill.opacity + (this._toFill.opacity - this._fromFill.opacity) * progress);
  };

  return Fill_;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmlsbF8uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcdHJhbnNpdGlvbmVyXFxtaXhpblxcRmlsbF8uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsS0FBQTs7QUFBQSxNQUFNLENBQUMsT0FBUCxHQUF1QjtxQkFFdEI7O0FBQUEsa0JBQUEsZUFBQSxHQUFpQixTQUFBLEdBQUE7QUFFaEIsSUFBQSxJQUFDLENBQUEsU0FBRCxHQUVDO0FBQUEsTUFBQSxPQUFBLEVBQVMsSUFBVDtLQUZELENBQUE7QUFBQSxJQUlBLElBQUMsQ0FBQSxPQUFELEdBRUM7QUFBQSxNQUFBLE9BQUEsRUFBUyxJQUFUO0tBTkQsQ0FBQTtBQUFBLElBUUEsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsSUFBQyxDQUFBLEVBQUUsQ0FBQyxZQUFZLENBQUMsS0FSakMsQ0FGZ0I7RUFBQSxDQUFqQixDQUFBOztBQUFBLGtCQWNBLGVBQUEsR0FBaUIsU0FBQyxlQUFELEdBQUE7QUFFaEIsSUFBQSxlQUFlLENBQUMsWUFBaEIsR0FBK0IsZUFBZSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsS0FBL0QsQ0FGZ0I7RUFBQSxDQWRqQixDQUFBOztBQUFBLGtCQW9CQSx3QkFBQSxHQUEwQixTQUFBLEdBQUE7QUFFekIsSUFBQSxJQUFDLENBQUEsU0FBUyxDQUFDLE9BQVgsR0FBcUIsSUFBQyxDQUFBLFlBQVksQ0FBQyxPQUFuQyxDQUZ5QjtFQUFBLENBcEIxQixDQUFBOztBQUFBLGtCQTBCQSx5QkFBQSxHQUEyQixTQUFBLEdBQUE7QUFFMUIsSUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQVQsR0FBbUIsSUFBQyxDQUFBLFlBQVksQ0FBQyxPQUFqQyxDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsWUFBWSxDQUFDLE9BQWQsR0FBd0IsS0FGeEIsQ0FGMEI7RUFBQSxDQTFCM0IsQ0FBQTs7QUFBQSxrQkFrQ0Esd0JBQUEsR0FBMEIsU0FBQyxRQUFELEdBQUE7QUFFekIsSUFBQSxJQUFHLElBQUMsQ0FBQSxZQUFZLENBQUMsT0FBakI7QUFFQyxNQUFBLElBQUMsQ0FBQSxjQUFELENBQWdCLFFBQWhCLENBQUEsQ0FGRDtLQUZ5QjtFQUFBLENBbEMxQixDQUFBOztBQUFBLGtCQTBDQSxVQUFBLEdBQVksU0FBQyxDQUFELEdBQUE7QUFFWCxJQUFBLElBQUMsQ0FBQSxPQUFPLENBQUMsT0FBVCxHQUFtQixDQUFuQixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsWUFBWSxDQUFDLE9BQWQsR0FBd0IsSUFGeEIsQ0FBQTtBQUFBLElBSUcsSUFBQyxDQUFBLE9BQUosQ0FBQSxDQUpBLENBQUE7V0FNQSxLQVJXO0VBQUEsQ0ExQ1osQ0FBQTs7QUFBQSxrQkFvREEsYUFBQSxHQUFlLFNBQUMsQ0FBRCxHQUFBO0FBRWQsSUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQVQsR0FBbUIsSUFBQyxDQUFBLFlBQVksQ0FBQyxPQUFkLEdBQXdCLENBQTNDLENBQUE7QUFBQSxJQUVBLElBQUMsQ0FBQSxZQUFZLENBQUMsT0FBZCxHQUF3QixJQUZ4QixDQUFBO0FBQUEsSUFJRyxJQUFDLENBQUEsT0FBSixDQUFBLENBSkEsQ0FBQTtXQU1BLEtBUmM7RUFBQSxDQXBEZixDQUFBOztBQUFBLGtCQThEQSxjQUFBLEdBQWdCLFNBQUMsUUFBRCxHQUFBO0FBRWYsSUFBQSxJQUFDLENBQUEsWUFBWSxDQUFDLFVBQWQsQ0FFQyxJQUFDLENBQUEsU0FBUyxDQUFDLE9BQVgsR0FFQSxDQUFDLElBQUMsQ0FBQSxPQUFPLENBQUMsT0FBVCxHQUFtQixJQUFDLENBQUEsU0FBUyxDQUFDLE9BQS9CLENBQUEsR0FBMEMsUUFKM0MsQ0FBQSxDQUZlO0VBQUEsQ0E5RGhCLENBQUE7O2VBQUE7O0lBRkQsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gY2xhc3MgRmlsbF9cblxuXHRfX2luaXRNaXhpbkZpbGw6IC0+XG5cblx0XHRAX2Zyb21GaWxsID1cblxuXHRcdFx0b3BhY2l0eTogbnVsbFxuXG5cdFx0QF90b0ZpbGwgPVxuXG5cdFx0XHRvcGFjaXR5OiBudWxsXG5cblx0XHRAX2N1cnJlbnRGaWxsID0gQGVsLl9zdHlsZVNldHRlci5fZmlsbFxuXG5cdFx0cmV0dXJuXG5cblx0X19jbG9uZXJGb3JGaWxsOiAobmV3VHJhbnNpdGlvbmVyKSAtPlxuXG5cdFx0bmV3VHJhbnNpdGlvbmVyLl9jdXJyZW50RmlsbCA9IG5ld1RyYW5zaXRpb25lci5lbC5fc3R5bGVTZXR0ZXIuX2ZpbGxcblxuXHRcdHJldHVyblxuXG5cdF9hZGp1c3RGcm9tVmFsdWVzRm9yRmlsbDogLT5cblxuXHRcdEBfZnJvbUZpbGwub3BhY2l0eSA9IEBfY3VycmVudEZpbGwub3BhY2l0eVxuXG5cdFx0cmV0dXJuXG5cblx0X2Rpc2FibGVUcmFuc2l0aW9uRm9yRmlsbDogLT5cblxuXHRcdEBfdG9GaWxsLm9wYWNpdHkgPSBAX2N1cnJlbnRGaWxsLm9wYWNpdHlcblxuXHRcdEBfbmVlZHNVcGRhdGUub3BhY2l0eSA9IG5vXG5cblx0XHRyZXR1cm5cblxuXHRfdXBkYXRlVHJhbnNpdGlvbkZvckZpbGw6IChwcm9ncmVzcykgLT5cblxuXHRcdGlmIEBfbmVlZHNVcGRhdGUub3BhY2l0eVxuXG5cdFx0XHRAX3VwZGF0ZU9wYWNpdHkgcHJvZ3Jlc3NcblxuXHRcdHJldHVyblxuXG5cdHNldE9wYWNpdHk6IChkKSAtPlxuXG5cdFx0QF90b0ZpbGwub3BhY2l0eSA9IGRcblxuXHRcdEBfbmVlZHNVcGRhdGUub3BhY2l0eSA9IHllc1xuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRhZGp1c3RPcGFjaXR5OiAoZCkgLT5cblxuXHRcdEBfdG9GaWxsLm9wYWNpdHkgPSBAX2N1cnJlbnRGaWxsLm9wYWNpdHkgKyBkXG5cblx0XHRAX25lZWRzVXBkYXRlLm9wYWNpdHkgPSB5ZXNcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0X3VwZGF0ZU9wYWNpdHk6IChwcm9ncmVzcykgLT5cblxuXHRcdEBfc3R5bGVTZXR0ZXIuc2V0T3BhY2l0eSAoXG5cblx0XHRcdEBfZnJvbUZpbGwub3BhY2l0eSArXG5cblx0XHRcdChAX3RvRmlsbC5vcGFjaXR5IC0gQF9mcm9tRmlsbC5vcGFjaXR5KSAqIHByb2dyZXNzXG5cblx0XHQpXG5cblx0XHRyZXR1cm4iXX0=
},{}],125:[function(require,module,exports){
var Layout_;

module.exports = Layout_ = (function() {
  function Layout_() {}

  Layout_.prototype.__initMixinLayout = function() {
    this._fromLayout = {
      width: null,
      height: null,
      clipLeft: 'auto',
      clipRight: 'auto',
      clipTop: 'auto',
      clipBottom: 'auto'
    };
    this._toLayout = {
      width: null,
      height: null,
      clipLeft: 'auto',
      clipRight: 'auto',
      clipTop: 'auto',
      clipBottom: 'auto'
    };
    this._currentLayout = this.el._styleSetter._layout;
  };

  Layout_.prototype.__clonerForLayout = function(newTransitioner) {
    newTransitioner._currentLayout = newTransitioner.el._styleSetter._layout;
  };

  Layout_.prototype._adjustFromValuesForLayout = function() {
    this._fromLayout.width = this._currentLayout.width;
    this._fromLayout.height = this._currentLayout.height;
    this._fromLayout.clipTop = this._currentLayout.clipTop;
    this._fromLayout.clipRight = this._currentLayout.clipRight;
    this._fromLayout.clipBottom = this._currentLayout.clipBottom;
    this._fromLayout.clipLeft = this._currentLayout.clipLeft;
  };

  Layout_.prototype._disableTransitionForLayout = function() {
    this._toLayout.width = this._currentLayout.width;
    this._toLayout.height = this._currentLayout.height;
    this._toLayout.clipTop = this._currentLayout.clipTop;
    this._toLayout.clipRight = this._currentLayout.clipRight;
    this._toLayout.clipBottom = this._currentLayout.clipBottom;
    this._toLayout.clipLeft = this._currentLayout.clipLeft;
    this._needsUpdate.width = false;
    this._needsUpdate.height = false;
    this._needsUpdate.clip = false;
  };

  Layout_.prototype._updateTransitionForLayout = function(progress) {
    if (this._needsUpdate.width) {
      this._updateWidth(progress);
    }
    if (this._needsUpdate.height) {
      this._updateHeight(progress);
    }
    if (this._needsUpdate.clip) {
      this._updateClip(progress);
    }
  };

  Layout_.prototype._updateClip = function(progress) {
    this._styleSetter.clip(this._fromLayout.clipTop + (this._toLayout.clipTop - this._fromLayout.clipTop) * progress, this._fromLayout.clipRight + (this._toLayout.clipRight - this._fromLayout.clipRight) * progress, this._fromLayout.clipBottom + (this._toLayout.clipBottom - this._fromLayout.clipBottom) * progress, this._fromLayout.clipLeft + (this._toLayout.clipLeft - this._fromLayout.clipLeft) * progress);
  };

  Layout_.prototype._updateWidth = function(progress) {
    this._styleSetter.setWidth(this._fromLayout.width + (this._toLayout.width - this._fromLayout.width) * progress);
  };

  Layout_.prototype._updateHeight = function(progress) {
    this._styleSetter.setHeight(this._fromLayout.height + (this._toLayout.height - this._fromLayout.height) * progress);
  };

  Layout_.prototype.setWidth = function(d) {
    this._toLayout.width = d;
    this._needsUpdate.width = true;
    this._update();
    return this;
  };

  Layout_.prototype.setHeight = function(d) {
    this._toLayout.height = d;
    this._needsUpdate.height = true;
    this._update();
    return this;
  };

  Layout_.prototype.clip = function(t, r, b, l) {
    this._toLayout.clipTop = t;
    this._toLayout.clipRight = r;
    this._toLayout.clipBottom = b;
    this._toLayout.clipLeft = l;
    this._needsUpdate.clip = true;
    this._update();
    return this;
  };

  Layout_.prototype.clipTop = function(t) {
    this._toLayout.clipTop = t;
    this._needsUpdate.clip = true;
    this._update();
    return this;
  };

  Layout_.prototype.clipRight = function(r) {
    this._toLayout.clipRight = r;
    this._needsUpdate.clip = true;
    this._update();
    return this;
  };

  Layout_.prototype.clipBottom = function(b) {
    this._toLayout.clipBottom = b;
    this._needsUpdate.clip = true;
    this._update();
    return this;
  };

  Layout_.prototype.clipLeft = function(l) {
    this._toLayout.clipLeft = l;
    this._needsUpdate.clip = true;
    this._update();
    return this;
  };

  return Layout_;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGF5b3V0Xy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcZWxcXG1peGluXFx0cmFuc2l0aW9uZXJcXG1peGluXFxMYXlvdXRfLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLE9BQUE7O0FBQUEsTUFBTSxDQUFDLE9BQVAsR0FBdUI7dUJBRXRCOztBQUFBLG9CQUFBLGlCQUFBLEdBQW1CLFNBQUEsR0FBQTtBQUVsQixJQUFBLElBQUMsQ0FBQSxXQUFELEdBRUM7QUFBQSxNQUFBLEtBQUEsRUFBTyxJQUFQO0FBQUEsTUFFQSxNQUFBLEVBQVEsSUFGUjtBQUFBLE1BSUEsUUFBQSxFQUFVLE1BSlY7QUFBQSxNQU1BLFNBQUEsRUFBVyxNQU5YO0FBQUEsTUFRQSxPQUFBLEVBQVMsTUFSVDtBQUFBLE1BVUEsVUFBQSxFQUFZLE1BVlo7S0FGRCxDQUFBO0FBQUEsSUFjQSxJQUFDLENBQUEsU0FBRCxHQUVDO0FBQUEsTUFBQSxLQUFBLEVBQU8sSUFBUDtBQUFBLE1BRUEsTUFBQSxFQUFRLElBRlI7QUFBQSxNQUlBLFFBQUEsRUFBVSxNQUpWO0FBQUEsTUFNQSxTQUFBLEVBQVcsTUFOWDtBQUFBLE1BUUEsT0FBQSxFQUFTLE1BUlQ7QUFBQSxNQVVBLFVBQUEsRUFBWSxNQVZaO0tBaEJELENBQUE7QUFBQSxJQTRCQSxJQUFDLENBQUEsY0FBRCxHQUFrQixJQUFDLENBQUEsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQTVCbkMsQ0FGa0I7RUFBQSxDQUFuQixDQUFBOztBQUFBLG9CQWtDQSxpQkFBQSxHQUFtQixTQUFDLGVBQUQsR0FBQTtBQUVsQixJQUFBLGVBQWUsQ0FBQyxjQUFoQixHQUFpQyxlQUFlLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFqRSxDQUZrQjtFQUFBLENBbENuQixDQUFBOztBQUFBLG9CQXdDQSwwQkFBQSxHQUE0QixTQUFBLEdBQUE7QUFFM0IsSUFB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TUEsS0FSVTtFQUFBLENBaExYLENBQUE7O0FBQUEsb0JBMExBLFVBQUEsR0FBWSxTQUFDLENBQUQsR0FBQTtBQUVYLElBQUEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxVQUFYLEdBQXdCLENBQXhCLENBQUE7QUFBQSxJQUVBLElBQUMsQ0FBQSxZQUFZLENBQUMsSUFBZCxHQUFxQixJQUZyQixDQUFBO0FBQUEsSUFJRyxJQUFDLENBQUEsT0FBSixDQUFBLENBSkEsQ0FBQTtXQU1BLEtBUlc7RUFBQSxDQTFMWixDQUFBOztBQUFBLG9CQW9NQSxRQUFBLEdBQVUsU0FBQyxDQUFELEdBQUE7QUFFVCxJQUFBLElBQUMsQ0FBQSxTQUFTLENBQUMsUUFBWCxHQUFzQixDQUF0QixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsR0FBcUIsSUFGckIsQ0FBQTtBQUFBLElBSUcsSUFBQyxDQUFBLE9BQUosQ0FBQSxDQUpBLENBQUE7V0FNQSxLQVJTO0VBQUEsQ0FwTVYsQ0FBQTs7aUJBQUE7O0lBRkQsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gY2xhc3MgTGF5b3V0X1xuXG5cdF9faW5pdE1peGluTGF5b3V0OiAtPlxuXG5cdFx0QF9mcm9tTGF5b3V0ID1cblxuXHRcdFx0d2lkdGg6IG51bGxcblxuXHRcdFx0aGVpZ2h0OiBudWxsXG5cblx0XHRcdGNsaXBMZWZ0OiAnYXV0bydcblxuXHRcdFx0Y2xpcFJpZ2h0OiAnYXV0bydcblxuXHRcdFx0Y2xpcFRvcDogJ2F1dG8nXG5cblx0XHRcdGNsaXBCb3R0b206ICdhdXRvJ1xuXG5cdFx0QF90b0xheW91dCA9XG5cblx0XHRcdHdpZHRoOiBudWxsXG5cblx0XHRcdGhlaWdodDogbnVsbFxuXG5cdFx0XHRjbGlwTGVmdDogJ2F1dG8nXG5cblx0XHRcdGNsaXBSaWdodDogJ2F1dG8nXG5cblx0XHRcdGNsaXBUb3A6ICdhdXRvJ1xuXG5cdFx0XHRjbGlwQm90dG9tOiAnYXV0bydcblxuXHRcdEBfY3VycmVudExheW91dCA9IEBlbC5fc3R5bGVTZXR0ZXIuX2xheW91dFxuXG5cdFx0cmV0dXJuXG5cblx0X19jbG9uZXJGb3JMYXlvdXQ6IChuZXdUcmFuc2l0aW9uZXIpIC0+XG5cblx0XHRuZXdUcmFuc2l0aW9uZXIuX2N1cnJlbnRMYXlvdXQgPSBuZXdUcmFuc2l0aW9uZXIuZWwuX3N0eWxlU2V0dGVyLl9sYXlvdXRcblxuXHRcdHJldHVyblxuXG5cdF9hZGp1c3RGcm9tVmFsdWVzRm9yTGF5b3V0OiAtPlxuXG5cdFx0QF9mcm9tTGF5b3V0LndpZHRoID0gQF9jdXJyZW50TGF5b3V0LndpZHRoXG5cdFx0QF9mcm9tTGF5b3V0LmhlaWdodCA9IEBfY3VycmVudExheW91dC5oZWlnaHRcblxuXHRcdEBfZnJvbUxheW91dC5jbGlwVG9wID0gQF9jdXJyZW50TGF5b3V0LmNsaXBUb3Bcblx0XHRAX2Zyb21MYXlvdXQuY2xpcFJpZ2h0ID0gQF9jdXJyZW50TGF5b3V0LmNsaXBSaWdodFxuXHRcdEBfZnJvbUxheW91dC5jbGlwQm90dG9tID0gQF9jdXJyZW50TGF5b3V0LmNsaXBCb3R0b21cblx0XHRAX2Zyb21MYXlvdXQuY2xpcExlZnQgPSBAX2N1cnJlbnRMYXlvdXQuY2xpcExlZnRcblxuXG5cdFx0cmV0dXJuXG5cblx0X2Rpc2FibGVUcmFuc2l0aW9uRm9yTGF5b3V0OiAtPlxuXG5cdFx0QF90b0xheW91dC53aWR0aCA9IEBfY3VycmVudExheW91dC53aWR0aFxuXHRcdEBfdG9MYXlvdXQuaGVpZ2h0ID0gQF9jdXJyZW50TGF5b3V0LmhlaWdodFxuXG5cdFx0QF90b0xheW91dC5jbGlwVG9wID0gQF9jdXJyZW50TGF5b3V0LmNsaXBUb3Bcblx0XHRAX3RvTGF5b3V0LmNsaXBSaWdodCA9IEBfY3VycmVudExheW91dC5jbGlwUmlnaHRcblx0XHRAX3RvTGF5b3V0LmNsaXBCb3R0b20gPSBAX2N1cnJlbnRMYXlvdXQuY2xpcEJvdHRvbVxuXHRcdEBfdG9MYXlvdXQuY2xpcExlZnQgPSBAX2N1cnJlbnRMYXlvdXQuY2xpcExlZnRcblxuXHRcdEBfbmVlZHNVcGRhdGUud2lkdGggPSBub1xuXHRcdEBfbmVlZHNVcGRhdGUuaGVpZ2h0ID0gbm9cblx0XHRAX25lZWRzVXBkYXRlLmNsaXAgPSBub1xuXG5cdFx0cmV0dXJuXG5cblx0X3VwZGF0ZVRyYW5zaXRpb25Gb3JMYXlvdXQ6IChwcm9ncmVzcykgLT5cblxuXHRcdGlmIEBfbmVlZHNVcGRhdGUud2lkdGhcblxuXHRcdFx0QF91cGRhdGVXaWR0aCBwcm9ncmVzc1xuXG5cdFx0aWYgQF9uZWVkc1VwZGF0ZS5oZWlnaHRcblxuXHRcdFx0QF91cGRhdGVIZWlnaHQgcHJvZ3Jlc3NcblxuXHRcdGlmIEBfbmVlZHNVcGRhdGUuY2xpcFxuXG5cdFx0XHRAX3VwZGF0ZUNsaXAgcHJvZ3Jlc3NcblxuXHRcdHJldHVyblxuXG5cdF91cGRhdGVDbGlwOiAocHJvZ3Jlc3MpIC0+XG5cblx0XHRAX3N0eWxlU2V0dGVyLmNsaXAgKFxuXG5cdFx0XHRAX2Zyb21MYXlvdXQuY2xpcFRvcCArXG5cblx0XHRcdFx0KEBfdG9MYXlvdXQuY2xpcFRvcCAtIEBfZnJvbUxheW91dC5jbGlwVG9wKSAqIHByb2dyZXNzKSxcblxuXHRcdFx0KEBfZnJvbUxheW91dC5jbGlwUmlnaHQgK1xuXG5cdFx0XHRcdChAX3RvTGF5b3V0LmNsaXBSaWdodCAtIEBfZnJvbUxheW91dC5jbGlwUmlnaHQpICogcHJvZ3Jlc3MpLFxuXG5cdFx0XHQoQF9mcm9tTGF5b3V0LmNsaXBCb3R0b20gK1xuXG5cdFx0XHRcdChAX3RvTGF5b3V0LmNsaXBCb3R0b20gLSBAX2Zyb21MYXlvdXQuY2xpcEJvdHRvbSkgKiBwcm9ncmVzcyksXG5cblx0XHRcdChAX2Zyb21MYXlvdXQuY2xpcExlZnQgK1xuXG5cdFx0XHRcdChAX3RvTGF5b3V0LmNsaXBMZWZ0IC0gQF9mcm9tTGF5b3V0LmNsaXBMZWZ0KSAqIHByb2dyZXNzKVxuXG5cblxuXHRcdHJldHVyblxuXG5cdF91cGRhdGVXaWR0aDogKHByb2dyZXNzKSAtPlxuXG5cdFx0QF9zdHlsZVNldHRlci5zZXRXaWR0aCAoXG5cblx0XHRcdEBfZnJvbUxheW91dC53aWR0aCArXG5cblx0XHRcdChAX3RvTGF5b3V0LndpZHRoIC0gQF9mcm9tTGF5b3V0LndpZHRoKSAqIHByb2dyZXNzXG5cblx0XHQpXG5cblx0XHRyZXR1cm5cblxuXHRfdXBkYXRlSGVpZ2h0OiAocHJvZ3Jlc3MpIC0+XG5cblx0XHRAX3N0eWxlU2V0dGVyLnNldEhlaWdodCAoXG5cblx0XHRcdEBfZnJvbUxheW91dC5oZWlnaHQgK1xuXG5cdFx0XHQoQF90b0xheW91dC5oZWlnaHQgLSBAX2Zyb21MYXlvdXQuaGVpZ2h0KSAqIHByb2dyZXNzXG5cblx0XHQpXG5cblx0XHRyZXR1cm5cblxuXHRzZXRXaWR0aDogKGQpIC0+XG5cblx0XHRAX3RvTGF5b3V0LndpZHRoID0gZFxuXG5cdFx0QF9uZWVkc1VwZGF0ZS53aWR0aCA9IHllc1xuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRzZXRIZWlnaHQ6IChkKSAtPlxuXG5cdFx0QF90b0xheW91dC5oZWlnaHQgPSBkXG5cblx0XHRAX25lZWRzVXBkYXRlLmhlaWdodCA9IHllc1xuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRjbGlwOiAodCwgciwgYiwgbCkgLT5cblxuXHRcdEBfdG9MYXlvdXQuY2xpcFRvcCA9IHRcblx0XHRAX3RvTGF5b3V0LmNsaXBSaWdodCA9IHJcblx0XHRAX3RvTGF5b3V0LmNsaXBCb3R0b20gPSBiXG5cdFx0QF90b0xheW91dC5jbGlwTGVmdCA9IGxcblxuXHRcdEBfbmVlZHNVcGRhdGUuY2xpcCA9IHllc1xuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRjbGlwVG9wOiAodCkgLT5cblxuXHRcdEBfdG9MYXlvdXQuY2xpcFRvcCA9IHRcblxuXHRcdEBfbmVlZHNVcGRhdGUuY2xpcCA9IHllc1xuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRjbGlwUmlnaHQ6IChyKSAtPlxuXG5cdFx0QF90b0xheW91dC5jbGlwUmlnaHQgPSByXG5cblx0XHRAX25lZWRzVXBkYXRlLmNsaXAgPSB5ZXNcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0Y2xpcEJvdHRvbTogKGIpIC0+XG5cblx0XHRAX3RvTGF5b3V0LmNsaXBCb3R0b20gPSBiXG5cblx0XHRAX25lZWRzVXBkYXRlLmNsaXAgPSB5ZXNcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0Y2xpcExlZnQ6IChsKSAtPlxuXG5cdFx0QF90b0xheW91dC5jbGlwTGVmdCA9IGxcblxuXHRcdEBfbmVlZHNVcGRhdGUuY2xpcCA9IHllc1xuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEAiXX0=
},{}],126:[function(require,module,exports){
var Transformation, Transforms_;

Transformation = require('Transformation');

module.exports = Transforms_ = (function() {
  function Transforms_() {}

  Transforms_.prototype.__initMixinTransforms = function() {
    this._toMatrix = Transformation._emptyStack();
    this._fromMatrix = Transformation._emptyStack();
    return this._currentMatrix = this.el._styleSetter._transformer._current;
  };

  Transforms_.prototype.__clonerForTransforms = function(newTransitioner) {
    newTransitioner._currentMatrix = newTransitioner.el._styleSetter._transformer._current;
  };

  Transforms_.prototype._adjustFromValuesForTransforms = function() {
    this._fromMatrix[0] = this._currentMatrix[0];
    this._fromMatrix[1] = this._currentMatrix[1];
    this._fromMatrix[2] = this._currentMatrix[2];
    this._fromMatrix[3] = this._currentMatrix[3];
    this._fromMatrix[4] = this._currentMatrix[4];
    this._fromMatrix[5] = this._currentMatrix[5];
    this._fromMatrix[6] = this._currentMatrix[6];
    this._fromMatrix[7] = this._currentMatrix[7];
    this._fromMatrix[8] = this._currentMatrix[8];
    this._fromMatrix[9] = this._currentMatrix[9];
    this._fromMatrix[10] = this._currentMatrix[10];
    this._fromMatrix[11] = this._currentMatrix[11];
    this._fromMatrix[12] = this._currentMatrix[12];
    this._fromMatrix[13] = this._currentMatrix[13];
    this._fromMatrix[14] = this._currentMatrix[14];
    this._fromMatrix[15] = this._currentMatrix[15];
    return this;
  };

  Transforms_.prototype._disableTransitionForTransforms = function() {
    this._needsUpdate.transformMovement = false;
    this._toMatrix[0] = this._currentMatrix[0];
    this._toMatrix[1] = this._currentMatrix[1];
    this._toMatrix[2] = this._currentMatrix[2];
    this._needsUpdate.transformScale = false;
    this._toMatrix[3] = this._currentMatrix[3];
    this._toMatrix[4] = this._currentMatrix[4];
    this._toMatrix[5] = this._currentMatrix[5];
    this._needsUpdate.transformPerspective = false;
    this._toMatrix[6] = this._currentMatrix[6];
    this._needsUpdate.transformRotation = false;
    this._toMatrix[7] = this._currentMatrix[7];
    this._toMatrix[8] = this._currentMatrix[8];
    this._toMatrix[9] = this._currentMatrix[9];
    this._needsUpdate.transformLocalMovement = false;
    this._toMatrix[10] = this._currentMatrix[10];
    this._toMatrix[11] = this._currentMatrix[11];
    this._toMatrix[12] = this._currentMatrix[12];
    this._needsUpdate.transformLocalRotation = false;
    this._toMatrix[13] = this._currentMatrix[13];
    this._toMatrix[14] = this._currentMatrix[14];
    this._toMatrix[15] = this._currentMatrix[15];
    return this;
  };

  Transforms_.prototype._updateTransitionForTransforms = function(progress) {
    if (this._needsUpdate.transformMovement) {
      this._updateMovement(progress);
    }
    if (this._needsUpdate.transformRotation) {
      this._updateRotation(progress);
    }
    if (this._needsUpdate.transformScale) {
      this._updateScale(progress);
    }
    if (this._needsUpdate.transformPerspective) {
      this._updatePerspective(progress);
    }
    if (this._needsUpdate.transformLocalMovement) {
      this._updateLocalMovement(progress);
    }
    if (this._needsUpdate.transformLocalRotation) {
      this._updateLocalRotation(progress);
    }
  };

  Transforms_.prototype._updateMovement = function(progress) {
    this._styleSetter.moveTo(this._fromMatrix[0] + ((this._toMatrix[0] - this._fromMatrix[0]) * progress), this._fromMatrix[1] + ((this._toMatrix[1] - this._fromMatrix[1]) * progress), this._fromMatrix[2] + ((this._toMatrix[2] - this._fromMatrix[2]) * progress));
    return null;
  };

  Transforms_.prototype._reportUpdateForMove = function() {
    if (this._needsUpdate.transformMovement) {
      return;
    }
    this._needsUpdate.transformMovement = true;
    this._toMatrix[0] = this._currentMatrix[0];
    this._toMatrix[1] = this._currentMatrix[1];
    this._toMatrix[2] = this._currentMatrix[2];
  };

  Transforms_.prototype.resetMovement = function() {
    this._reportUpdateForMove();
    this._toMatrix[0] = 0;
    this._toMatrix[1] = 0;
    this._toMatrix[2] = 0;
    this._update();
    return this;
  };

  Transforms_.prototype.moveTo = function(x, y, z) {
    this._reportUpdateForMove();
    this._toMatrix[0] = x;
    this._toMatrix[1] = y;
    this._toMatrix[2] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.moveXTo = function(x) {
    this._reportUpdateForMove();
    this._toMatrix[0] = x;
    this._update();
    return this;
  };

  Transforms_.prototype.moveYTo = function(y) {
    this._reportUpdateForMove();
    this._toMatrix[1] = y;
    this._update();
    return this;
  };

  Transforms_.prototype.moveZTo = function(z) {
    this._reportUpdateForMove();
    this._toMatrix[2] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.move = function(x, y, z) {
    this._reportUpdateForMove();
    this._toMatrix[0] = this._currentMatrix[0] + x;
    this._toMatrix[1] = this._currentMatrix[1] + y;
    this._toMatrix[2] = this._currentMatrix[2] + z;
    this._update();
    return this;
  };

  Transforms_.prototype.moveX = function(x) {
    this._reportUpdateForMove();
    this._toMatrix[0] = this._currentMatrix[0] + x;
    this._update();
    return this;
  };

  Transforms_.prototype.moveY = function(y) {
    this._reportUpdateForMove();
    this._toMatrix[1] = this._currentMatrix[1] + y;
    this._update();
    return this;
  };

  Transforms_.prototype.moveZ = function(z) {
    this._reportUpdateForMove();
    this._toMatrix[2] = this._currentMatrix[2] + z;
    this._update();
    return this;
  };


  /*
  	Scale
   */

  Transforms_.prototype._updateScale = function(progress) {
    this._styleSetter.scaleTo(this._fromMatrix[3] + ((this._toMatrix[3] - this._fromMatrix[3]) * progress), this._fromMatrix[4] + ((this._toMatrix[4] - this._fromMatrix[4]) * progress), this._fromMatrix[5] + ((this._toMatrix[5] - this._fromMatrix[5]) * progress));
    return null;
  };

  Transforms_.prototype._reportUpdateForScale = function() {
    if (this._needsUpdate.transformScale) {
      return;
    }
    this._needsUpdate.transformScale = true;
    this._toMatrix[3] = this._currentMatrix[3];
    this._toMatrix[4] = this._currentMatrix[4];
    this._toMatrix[5] = this._currentMatrix[5];
  };

  Transforms_.prototype.resetScale = function() {
    this._reportUpdateForScale();
    this._toMatrix[3] = 1;
    this._toMatrix[4] = 1;
    this._toMatrix[5] = 1;
    this._update();
    return this;
  };

  Transforms_.prototype.scaleTo = function(x, y, z) {
    this._reportUpdateForScale();
    this._toMatrix[3] = x;
    this._toMatrix[4] = y;
    this._toMatrix[5] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.scaleXTo = function(x) {
    this._reportUpdateForScale();
    this._toMatrix[3] = x;
    this._update();
    return this;
  };

  Transforms_.prototype.scaleYTo = function(y) {
    this._reportUpdateForScale();
    this._toMatrix[4] = y;
    this._update();
    return this;
  };

  Transforms_.prototype.scaleZTo = function(z) {
    this._reportUpdateForScale();
    this._toMatrix[5] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.scale = function(x, y, z) {
    this._reportUpdateForScale();
    this._toMatrix[3] = this._currentMatrix[3] * x;
    this._toMatrix[4] = this._currentMatrix[4] * y;
    this._toMatrix[5] = this._currentMatrix[5] * z;
    this._update();
    return this;
  };

  Transforms_.prototype.scaleAllTo = function(x) {
    this._reportUpdateForScale();
    this._toMatrix[3] = this._toMatrix[4] = this._toMatrix[5] = x;
    this._update();
    return this;
  };

  Transforms_.prototype.scaleX = function(x) {
    this._reportUpdateForScale();
    this._toMatrix[3] = this._currentMatrix[3] * x;
    this._update();
    return this;
  };

  Transforms_.prototype.scaleY = function(y) {
    this._reportUpdateForScale();
    this._toMatrix[4] = this._currentMatrix[4] * y;
    this._update();
    return this;
  };

  Transforms_.prototype.scaleZ = function(z) {
    this._reportUpdateForScale();
    this._toMatrix[5] = this._currentMatrix[5] * z;
    this._update();
    return this;
  };

  Transforms_.prototype._reportUpdateForPerspective = function() {
    if (this._needsUpdate.transformPerspective) {
      return;
    }
    this._needsUpdate.transformPerspective = true;
    this._toMatrix[6] = this._currentMatrix[6];
  };


  /*
  	Perspective
   */

  Transforms_.prototype._updatePerspective = function(progress) {
    this._styleSetter.perspective(this._fromMatrix[6] + ((this._toMatrix[6] - this._fromMatrix[6]) * progress));
    return null;
  };

  Transforms_.prototype.resetPerspective = function() {
    this._reportUpdateForPerspective();
    this._toMatrix[6] = 0;
    this._update();
    return this;
  };

  Transforms_.prototype.perspective = function(d) {
    this._reportUpdateForPerspective();
    this._toMatrix[6] = d;
    this._update();
    return this;
  };


  /*
  	Rotation
   */

  Transforms_.prototype._updateRotation = function(progress) {
    this._styleSetter.rotateTo(this._fromMatrix[7] + ((this._toMatrix[7] - this._fromMatrix[7]) * progress), this._fromMatrix[8] + ((this._toMatrix[8] - this._fromMatrix[8]) * progress), this._fromMatrix[9] + ((this._toMatrix[9] - this._fromMatrix[9]) * progress));
    return null;
  };

  Transforms_.prototype._reportUpdateForRotation = function() {
    if (this._needsUpdate.transformRotation) {
      return;
    }
    this._needsUpdate.transformRotation = true;
    this._toMatrix[7] = this._currentMatrix[7];
    this._toMatrix[8] = this._currentMatrix[8];
    this._toMatrix[9] = this._currentMatrix[9];
  };

  Transforms_.prototype.resetRotation = function() {
    this._reportUpdateForRotation();
    this._toMatrix[7] = 0;
    this._toMatrix[8] = 0;
    this._toMatrix[9] = 0;
    this._update();
    return this;
  };

  Transforms_.prototype.rotateTo = function(x, y, z) {
    this._reportUpdateForRotation();
    this._toMatrix[7] = x;
    this._toMatrix[8] = y;
    this._toMatrix[9] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.rotateXTo = function(x) {
    this._reportUpdateForRotation();
    this._toMatrix[7] = x;
    this._update();
    return this;
  };

  Transforms_.prototype.rotateYTo = function(y) {
    this._reportUpdateForRotation();
    this._toMatrix[8] = y;
    this._update();
    return this;
  };

  Transforms_.prototype.rotateZTo = function(z) {
    this._reportUpdateForRotation();
    this._toMatrix[9] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.rotate = function(x, y, z) {
    this._reportUpdateForRotation();
    this._toMatrix[7] = this._currentMatrix[7] + x;
    this._toMatrix[8] = this._currentMatrix[8] + y;
    this._toMatrix[9] = this._currentMatrix[9] + z;
    this._update();
    return this;
  };

  Transforms_.prototype.rotateX = function(x) {
    this._reportUpdateForRotation();
    this._toMatrix[7] = this._currentMatrix[7] + x;
    this._update();
    return this;
  };

  Transforms_.prototype.rotateY = function(y) {
    this._reportUpdateForRotation();
    this._toMatrix[8] = this._currentMatrix[8] + y;
    this._update();
    return this;
  };

  Transforms_.prototype.rotateZ = function(z) {
    this._reportUpdateForRotation();
    this._toMatrix[9] = this._currentMatrix[9] + z;
    this._update();
    return this;
  };


  /*
  	LocalMovement
   */

  Transforms_.prototype._updateLocalMovement = function(progress) {
    this._styleSetter.localMoveTo(this._fromMatrix[10] + ((this._toMatrix[10] - this._fromMatrix[10]) * progress), this._fromMatrix[11] + ((this._toMatrix[11] - this._fromMatrix[11]) * progress), this._fromMatrix[12] + ((this._toMatrix[12] - this._fromMatrix[12]) * progress));
    return null;
  };

  Transforms_.prototype._reportUpdateForLocalMovement = function() {
    if (this._needsUpdate.transformLocalMovement) {
      return;
    }
    this._needsUpdate.transformLocalMovement = true;
    this._toMatrix[10] = this._currentMatrix[10];
    this._toMatrix[11] = this._currentMatrix[11];
    this._toMatrix[12] = this._currentMatrix[12];
  };

  Transforms_.prototype.resetLocalMovement = function() {
    this._reportUpdateForLocalMovement();
    this._toMatrix[10] = 0;
    this._toMatrix[11] = 0;
    this._toMatrix[12] = 0;
    this._update();
    return this;
  };

  Transforms_.prototype.localMoveTo = function(x, y, z) {
    this._reportUpdateForLocalMovement();
    this._toMatrix[10] = x;
    this._toMatrix[11] = y;
    this._toMatrix[12] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.localMoveXTo = function(x) {
    this._reportUpdateForLocalMovement();
    this._toMatrix[10] = x;
    this._update();
    return this;
  };

  Transforms_.prototype.localMoveYTo = function(y) {
    this._reportUpdateForLocalMovement();
    this._toMatrix[11] = y;
    this._update();
    return this;
  };

  Transforms_.prototype.localMoveZTo = function(z) {
    this._reportUpdateForLocalMovement();
    this._toMatrix[12] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.localMove = function(x, y, z) {
    this._reportUpdateForLocalMovement();
    this._toMatrix[10] = this._currentMatrix[10] + x;
    this._toMatrix[11] = this._currentMatrix[11] + y;
    this._toMatrix[12] = this._currentMatrix[12] + z;
    this._update();
    return this;
  };

  Transforms_.prototype.localMoveX = function(x) {
    this._reportUpdateForLocalMovement();
    this._toMatrix[10] = this._currentMatrix[10] + x;
    this._update();
    return this;
  };

  Transforms_.prototype.localMoveY = function(y) {
    this._reportUpdateForLocalMovement();
    this._toMatrix[11] = this._currentMatrix[11] + y;
    this._update();
    return this;
  };

  Transforms_.prototype.localMoveZ = function(z) {
    this._reportUpdateForLocalMovement();
    this._toMatrix[12] = this._currentMatrix[12] + z;
    this._update();
    return this;
  };


  /*
  	Rotation
   */

  Transforms_.prototype._updateLocalRotation = function(progress) {
    this._styleSetter.localRotateTo(this._fromMatrix[13] + ((this._toMatrix[13] - this._fromMatrix[13]) * progress), this._fromMatrix[14] + ((this._toMatrix[14] - this._fromMatrix[14]) * progress), this._fromMatrix[15] + ((this._toMatrix[15] - this._fromMatrix[15]) * progress));
    return null;
  };

  Transforms_.prototype._reportUpdateForLocalRotation = function() {
    if (this._needsUpdate.transformLocalRotation) {
      return;
    }
    this._needsUpdate.transformLocalRotation = true;
    this._toMatrix[13] = this._currentMatrix[13];
    this._toMatrix[14] = this._currentMatrix[14];
    this._toMatrix[15] = this._currentMatrix[15];
  };

  Transforms_.prototype.resetLocalRotation = function() {
    this._reportUpdateForLocalRotation();
    this._toMatrix[13] = 0;
    this._toMatrix[14] = 0;
    this._toMatrix[15] = 0;
    this._update();
    return this;
  };

  Transforms_.prototype.localRotateTo = function(x, y, z) {
    this._reportUpdateForLocalRotation();
    this._toMatrix[13] = x;
    this._toMatrix[14] = y;
    this._toMatrix[15] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.localRotateXTo = function(x) {
    this._reportUpdateForLocalRotation();
    this._toMatrix[13] = x;
    this._update();
    return this;
  };

  Transforms_.prototype.localRotateYTo = function(y) {
    this._reportUpdateForLocalRotation();
    this._toMatrix[14] = y;
    this._update();
    return this;
  };

  Transforms_.prototype.localRotateZTo = function(z) {
    this._reportUpdateForLocalRotation();
    this._toMatrix[15] = z;
    this._update();
    return this;
  };

  Transforms_.prototype.localRotate = function(x, y, z) {
    this._reportUpdateForLocalRotation();
    this._toMatrix[13] = this._currentMatrix[13] + x;
    this._toMatrix[14] = this._currentMatrix[14] + y;
    this._toMatrix[15] = this._currentMatrix[15] + z;
    this._update();
    return this;
  };

  Transforms_.prototype.localRotateX = function(x) {
    this._reportUpdateForLocalRotation();
    this._toMatrix[13] = this._currentMatrix[13] + x;
    this._update();
    return this;
  };

  Transforms_.prototype.localRotateY = function(y) {
    this._reportUpdateForLocalRotation();
    this._toMatrix[14] = this._currentMatrix[14] + y;
    this._update();
    return this;
  };

  Transforms_.prototype.localRotateZ = function(z) {
    this._reportUpdateForLocalRotation();
    this._toMatrix[15] = this._currentMatrix[15] + z;
    this._update();
    return this;
  };

  Transforms_.prototype.resetAll = function() {
    this.resetMovement();
    this.resetScale();
    this.resetPerspective();
    this.resetRotation();
    this.resetLocalMovement();
    return this.resetLocalRotation();
  };

  return Transforms_;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNmb3Jtc18uanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXGVsXFxtaXhpblxcdHJhbnNpdGlvbmVyXFxtaXhpblxcVHJhbnNmb3Jtc18uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsMkJBQUE7O0FBQUEsY0FBQSxHQUFpQixPQUFBLENBQVEsZ0JBQVIsQ0FBakIsQ0FBQTs7QUFBQSxNQUVNLENBQUMsT0FBUCxHQUF1QjsyQkFFdEI7O0FBQUEsd0JBQUEscUJBQUEsR0FBdUIsU0FBQSxHQUFBO0FBRXRCLElBQUEsSUFBQyxDQUFBLFNBQUQsR0FBYSxjQUFjLENBQUMsV0FBZixDQUFBLENBQWIsQ0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLFdBQUQsR0FBZSxjQUFjLENBQUMsV0FBZixDQUFBLENBRmYsQ0FBQTtXQUlBLElBQUMsQ0FBQSxjQUFELEdBQWtCLElBQUMsQ0FBQSxFQUFFLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxTQU4xQjtFQUFBLENBQXZCLENBQUE7O0FBQUEsd0JBUUEscUJBQUEsR0FBdUIsU0FBQyxlQUFELEdBQUE7QUFFdEIsSUFBQSxlQUFlLENBQUMsY0FBaEIsR0FBaUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLFFBQTlFLENBRnNCO0VBQUEsQ0FSdkIsQ0FBQTs7QUFBQSx3QkFjQSw4QkFBQSxHQUFnQyxTQUFBLEdBQUE7QUFFL0IsSUFBQSxJQUFDLENBQUEsV0FBWSxDQUFBLENBQUEsQ0FBYixHQUFrQixJQUFDLENBQUEsY0FBZSxDQUFBLENBQUEsQ0FBbEMsQ0FBQTtBQUFBLElBQ0EsSUFBQyxDQUFBLFdBQVksQ0FBQSxDQUFBLENBQWIsR0FBa0IsSUFBQyxDQUFBLGNBQWUsQ0FBQSxDQUFBLENBRGxDLENBQUE7QUFBQSxJQUVBLElBQUMsQ0FBQSxXQUFZLENBQUEsQ0FBQSxDQUFiLEdBQWtCLElB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O1dBTUEsS0FSYTtFQUFBLENBaHhCZCxDQUFBOztBQUFBLHdCQTB4QkEsUUFBQSxHQUFVLFNBQUEsR0FBQTtBQUVULElBQUcsSUFBQyxDQUFBLGFBQUosQ0FBQSxDQUFBLENBQUE7QUFBQSxJQUNHLElBQUMsQ0FBQSxVQUFKLENBQUEsQ0FEQSxDQUFBO0FBQUEsSUFFRyxJQUFDLENBQUEsZ0JBQUosQ0FBQSxDQUZBLENBQUE7QUFBQSxJQUdHLElBQUMsQ0FBQSxhQUFKLENBQUEsQ0FIQSxDQUFBO0FBQUEsSUFJRyxJQUFDLENBQUEsa0JBQUosQ0FBQSxDQUpBLENBQUE7V0FLRyxJQUFDLENBQUEsa0JBQUosQ0FBQSxFQVBTO0VBQUEsQ0ExeEJWLENBQUE7O3FCQUFBOztJQUpELENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJUcmFuc2Zvcm1hdGlvbiA9IHJlcXVpcmUgJ1RyYW5zZm9ybWF0aW9uJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFRyYW5zZm9ybXNfXG5cblx0X19pbml0TWl4aW5UcmFuc2Zvcm1zOiAtPlxuXG5cdFx0QF90b01hdHJpeCA9IFRyYW5zZm9ybWF0aW9uLl9lbXB0eVN0YWNrKClcblxuXHRcdEBfZnJvbU1hdHJpeCA9IFRyYW5zZm9ybWF0aW9uLl9lbXB0eVN0YWNrKClcblxuXHRcdEBfY3VycmVudE1hdHJpeCA9IEBlbC5fc3R5bGVTZXR0ZXIuX3RyYW5zZm9ybWVyLl9jdXJyZW50XG5cblx0X19jbG9uZXJGb3JUcmFuc2Zvcm1zOiAobmV3VHJhbnNpdGlvbmVyKSAtPlxuXG5cdFx0bmV3VHJhbnNpdGlvbmVyLl9jdXJyZW50TWF0cml4ID0gbmV3VHJhbnNpdGlvbmVyLmVsLl9zdHlsZVNldHRlci5fdHJhbnNmb3JtZXIuX2N1cnJlbnRcblxuXHRcdHJldHVyblxuXG5cdF9hZGp1c3RGcm9tVmFsdWVzRm9yVHJhbnNmb3JtczogLT5cblxuXHRcdEBfZnJvbU1hdHJpeFswXSA9IEBfY3VycmVudE1hdHJpeFswXVxuXHRcdEBfZnJvbU1hdHJpeFsxXSA9IEBfY3VycmVudE1hdHJpeFsxXVxuXHRcdEBfZnJvbU1hdHJpeFsyXSA9IEBfY3VycmVudE1hdHJpeFsyXVxuXG5cdFx0QF9mcm9tTWF0cml4WzNdID0gQF9jdXJyZW50TWF0cml4WzNdXG5cdFx0QF9mcm9tTWF0cml4WzRdID0gQF9jdXJyZW50TWF0cml4WzRdXG5cdFx0QF9mcm9tTWF0cml4WzVdID0gQF9jdXJyZW50TWF0cml4WzVdXG5cblx0XHRAX2Zyb21NYXRyaXhbNl0gPSBAX2N1cnJlbnRNYXRyaXhbNl1cblxuXHRcdEBfZnJvbU1hdHJpeFs3XSA9IEBfY3VycmVudE1hdHJpeFs3XVxuXHRcdEBfZnJvbU1hdHJpeFs4XSA9IEBfY3VycmVudE1hdHJpeFs4XVxuXHRcdEBfZnJvbU1hdHJpeFs5XSA9IEBfY3VycmVudE1hdHJpeFs5XVxuXG5cdFx0QF9mcm9tTWF0cml4WzEwXSA9IEBfY3VycmVudE1hdHJpeFsxMF1cblx0XHRAX2Zyb21NYXRyaXhbMTFdID0gQF9jdXJyZW50TWF0cml4WzExXVxuXHRcdEBfZnJvbU1hdHJpeFsxMl0gPSBAX2N1cnJlbnRNYXRyaXhbMTJdXG5cblx0XHRAX2Zyb21NYXRyaXhbMTNdID0gQF9jdXJyZW50TWF0cml4WzEzXVxuXHRcdEBfZnJvbU1hdHJpeFsxNF0gPSBAX2N1cnJlbnRNYXRyaXhbMTRdXG5cdFx0QF9mcm9tTWF0cml4WzE1XSA9IEBfY3VycmVudE1hdHJpeFsxNV1cblxuXHRcdEBcblxuXHRfZGlzYWJsZVRyYW5zaXRpb25Gb3JUcmFuc2Zvcm1zOiAtPlxuXG5cdFx0QF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1Nb3ZlbWVudCA9IG5vXG5cdFx0QF90b01hdHJpeFswXSA9IEBfY3VycmVudE1hdHJpeFswXVxuXHRcdEBfdG9NYXRyaXhbMV0gPSBAX2N1cnJlbnRNYXRyaXhbMV1cblx0XHRAX3RvTWF0cml4WzJdID0gQF9jdXJyZW50TWF0cml4WzJdXG5cblx0XHRAX25lZWRzVXBkYXRlLnRyYW5zZm9ybVNjYWxlID0gbm9cblx0XHRAX3RvTWF0cml4WzNdID0gQF9jdXJyZW50TWF0cml4WzNdXG5cdFx0QF90b01hdHJpeFs0XSA9IEBfY3VycmVudE1hdHJpeFs0XVxuXHRcdEBfdG9NYXRyaXhbNV0gPSBAX2N1cnJlbnRNYXRyaXhbNV1cblxuXHRcdEBfbmVlZHNVcGRhdGUudHJhbnNmb3JtUGVyc3BlY3RpdmUgPSBub1xuXHRcdEBfdG9NYXRyaXhbNl0gPSBAX2N1cnJlbnRNYXRyaXhbNl1cblxuXHRcdEBfbmVlZHNVcGRhdGUudHJhbnNmb3JtUm90YXRpb24gPSBub1xuXHRcdEBfdG9NYXRyaXhbN10gPSBAX2N1cnJlbnRNYXRyaXhbN11cblx0XHRAX3RvTWF0cml4WzhdID0gQF9jdXJyZW50TWF0cml4WzhdXG5cdFx0QF90b01hdHJpeFs5XSA9IEBfY3VycmVudE1hdHJpeFs5XVxuXG5cdFx0QF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1Mb2NhbE1vdmVtZW50ID0gbm9cblx0XHRAX3RvTWF0cml4WzEwXSA9IEBfY3VycmVudE1hdHJpeFsxMF1cblx0XHRAX3RvTWF0cml4WzExXSA9IEBfY3VycmVudE1hdHJpeFsxMV1cblx0XHRAX3RvTWF0cml4WzEyXSA9IEBfY3VycmVudE1hdHJpeFsxMl1cblxuXHRcdEBfbmVlZHNVcGRhdGUudHJhbnNmb3JtTG9jYWxSb3RhdGlvbiA9IG5vXG5cdFx0QF90b01hdHJpeFsxM10gPSBAX2N1cnJlbnRNYXRyaXhbMTNdXG5cdFx0QF90b01hdHJpeFsxNF0gPSBAX2N1cnJlbnRNYXRyaXhbMTRdXG5cdFx0QF90b01hdHJpeFsxNV0gPSBAX2N1cnJlbnRNYXRyaXhbMTVdXG5cblx0XHRAXG5cblx0X3VwZGF0ZVRyYW5zaXRpb25Gb3JUcmFuc2Zvcm1zOiAocHJvZ3Jlc3MpIC0+XG5cblx0XHRpZiBAX25lZWRzVXBkYXRlLnRyYW5zZm9ybU1vdmVtZW50XG5cblx0XHRcdEBfdXBkYXRlTW92ZW1lbnQgcHJvZ3Jlc3NcblxuXHRcdGlmIEBfbmVlZHNVcGRhdGUudHJhbnNmb3JtUm90YXRpb25cblxuXHRcdFx0QF91cGRhdGVSb3RhdGlvbiBwcm9ncmVzc1xuXG5cdFx0aWYgQF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1TY2FsZVxuXG5cdFx0XHRAX3VwZGF0ZVNjYWxlIHByb2dyZXNzXG5cblx0XHRpZiBAX25lZWRzVXBkYXRlLnRyYW5zZm9ybVBlcnNwZWN0aXZlXG5cblx0XHRcdEBfdXBkYXRlUGVyc3BlY3RpdmUgcHJvZ3Jlc3NcblxuXHRcdGlmIEBfbmVlZHNVcGRhdGUudHJhbnNmb3JtTG9jYWxNb3ZlbWVudFxuXG5cdFx0XHRAX3VwZGF0ZUxvY2FsTW92ZW1lbnQgcHJvZ3Jlc3NcblxuXHRcdGlmIEBfbmVlZHNVcGRhdGUudHJhbnNmb3JtTG9jYWxSb3RhdGlvblxuXG5cdFx0XHRAX3VwZGF0ZUxvY2FsUm90YXRpb24gcHJvZ3Jlc3NcblxuXHRcdHJldHVyblxuXG5cdF91cGRhdGVNb3ZlbWVudDogKHByb2dyZXNzKSAtPlxuXG5cdFx0QF9zdHlsZVNldHRlci5tb3ZlVG8gKFxuXHRcdFx0XHRAX2Zyb21NYXRyaXhbMF0gK1xuXHRcdFx0XHQoKEBfdG9NYXRyaXhbMF0gLSBAX2Zyb21NYXRyaXhbMF0pICogcHJvZ3Jlc3MpXG5cdFx0XHQpLFxuXHRcdFx0KFxuXHRcdFx0XHRAX2Zyb21NYXRyaXhbMV0gK1xuXHRcdFx0XHQoKEBfdG9NYXRyaXhbMV0gLSBAX2Zyb21NYXRyaXhbMV0pICogcHJvZ3Jlc3MpXG5cdFx0XHQpLFxuXHRcdFx0KFxuXHRcdFx0XHRAX2Zyb21NYXRyaXhbMl0gK1xuXHRcdFx0XHQoKEBfdG9NYXRyaXhbMl0gLSBAX2Zyb21NYXRyaXhbMl0pICogcHJvZ3Jlc3MpXG5cdFx0XHQpXG5cblx0XHRudWxsXG5cblx0X3JlcG9ydFVwZGF0ZUZvck1vdmU6IC0+XG5cblx0XHRyZXR1cm4gaWYgQF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1Nb3ZlbWVudFxuXG5cdFx0QF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1Nb3ZlbWVudCA9IHllc1xuXG5cdFx0QF90b01hdHJpeFswXSA9IEBfY3VycmVudE1hdHJpeFswXVxuXHRcdEBfdG9NYXRyaXhbMV0gPSBAX2N1cnJlbnRNYXRyaXhbMV1cblx0XHRAX3RvTWF0cml4WzJdID0gQF9jdXJyZW50TWF0cml4WzJdXG5cblx0XHRyZXR1cm5cblxuXHRyZXNldE1vdmVtZW50OiAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JNb3ZlXG5cblx0XHRAX3RvTWF0cml4WzBdID0gMFxuXHRcdEBfdG9NYXRyaXhbMV0gPSAwXG5cdFx0QF90b01hdHJpeFsyXSA9IDBcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0bW92ZVRvOiAoeCwgeSwgeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTW92ZVxuXG5cdFx0QF90b01hdHJpeFswXSA9IHhcblx0XHRAX3RvTWF0cml4WzFdID0geVxuXHRcdEBfdG9NYXRyaXhbMl0gPSB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdG1vdmVYVG86ICh4KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JNb3ZlXG5cblx0XHRAX3RvTWF0cml4WzBdID0geFxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRtb3ZlWVRvOiAoeSkgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTW92ZVxuXG5cdFx0QF90b01hdHJpeFsxXSA9IHlcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0bW92ZVpUbzogKHopIC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvck1vdmVcblxuXHRcdEBfdG9NYXRyaXhbMl0gPSB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdG1vdmU6ICh4LCB5LCB6KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JNb3ZlXG5cblx0XHRAX3RvTWF0cml4WzBdID0gQF9jdXJyZW50TWF0cml4WzBdICsgeFxuXHRcdEBfdG9NYXRyaXhbMV0gPSBAX2N1cnJlbnRNYXRyaXhbMV0gKyB5XG5cdFx0QF90b01hdHJpeFsyXSA9IEBfY3VycmVudE1hdHJpeFsyXSArIHpcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0bW92ZVg6ICh4KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JNb3ZlXG5cblx0XHRAX3RvTWF0cml4WzBdID0gQF9jdXJyZW50TWF0cml4WzBdICsgeFxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRtb3ZlWTogKHkpIC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvck1vdmVcblxuXHRcdEBfdG9NYXRyaXhbMV0gPSBAX2N1cnJlbnRNYXRyaXhbMV0gKyB5XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdG1vdmVaOiAoeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTW92ZVxuXG5cdFx0QF90b01hdHJpeFsyXSA9IEBfY3VycmVudE1hdHJpeFsyXSArIHpcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0IyMjXG5cdFNjYWxlXG5cdCMjI1xuXG5cdF91cGRhdGVTY2FsZTogKHByb2dyZXNzKSAtPlxuXG5cdFx0QF9zdHlsZVNldHRlci5zY2FsZVRvIChcblx0XHRcdFx0QF9mcm9tTWF0cml4WzNdICtcblx0XHRcdFx0KChAX3RvTWF0cml4WzNdIC0gQF9mcm9tTWF0cml4WzNdKSAqIHByb2dyZXNzKVxuXHRcdFx0KSxcblx0XHRcdChcblx0XHRcdFx0QF9mcm9tTWF0cml4WzRdICtcblx0XHRcdFx0KChAX3RvTWF0cml4WzRdIC0gQF9mcm9tTWF0cml4WzRdKSAqIHByb2dyZXNzKVxuXHRcdFx0KSxcblx0XHRcdChcblx0XHRcdFx0QF9mcm9tTWF0cml4WzVdICtcblx0XHRcdFx0KChAX3RvTWF0cml4WzVdIC0gQF9mcm9tTWF0cml4WzVdKSAqIHByb2dyZXNzKVxuXHRcdFx0KVxuXG5cdFx0bnVsbFxuXG5cdF9yZXBvcnRVcGRhdGVGb3JTY2FsZTogLT5cblxuXHRcdHJldHVybiBpZiBAX25lZWRzVXBkYXRlLnRyYW5zZm9ybVNjYWxlXG5cblx0XHRAX25lZWRzVXBkYXRlLnRyYW5zZm9ybVNjYWxlID0geWVzXG5cblx0XHRAX3RvTWF0cml4WzNdID0gQF9jdXJyZW50TWF0cml4WzNdXG5cdFx0QF90b01hdHJpeFs0XSA9IEBfY3VycmVudE1hdHJpeFs0XVxuXHRcdEBfdG9NYXRyaXhbNV0gPSBAX2N1cnJlbnRNYXRyaXhbNV1cblxuXHRcdHJldHVyblxuXG5cdHJlc2V0U2NhbGU6IC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvclNjYWxlXG5cblx0XHRAX3RvTWF0cml4WzNdID0gMVxuXHRcdEBfdG9NYXRyaXhbNF0gPSAxXG5cdFx0QF90b01hdHJpeFs1XSA9IDFcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0c2NhbGVUbzogKHgsIHksIHopIC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvclNjYWxlXG5cblx0XHRAX3RvTWF0cml4WzNdID0geFxuXHRcdEBfdG9NYXRyaXhbNF0gPSB5XG5cdFx0QF90b01hdHJpeFs1XSA9IHpcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0c2NhbGVYVG86ICh4KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JTY2FsZVxuXG5cdFx0QF90b01hdHJpeFszXSA9IHhcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0c2NhbGVZVG86ICh5KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JTY2FsZVxuXG5cdFx0QF90b01hdHJpeFs0XSA9IHlcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0c2NhbGVaVG86ICh6KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JTY2FsZVxuXG5cdFx0QF90b01hdHJpeFs1XSA9IHpcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0c2NhbGU6ICh4LCB5LCB6KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JTY2FsZVxuXG5cdFx0QF90b01hdHJpeFszXSA9IEBfY3VycmVudE1hdHJpeFszXSAqIHhcblx0XHRAX3RvTWF0cml4WzRdID0gQF9jdXJyZW50TWF0cml4WzRdICogeVxuXHRcdEBfdG9NYXRyaXhbNV0gPSBAX2N1cnJlbnRNYXRyaXhbNV0gKiB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdHNjYWxlQWxsVG86ICh4KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JTY2FsZVxuXG5cdFx0QF90b01hdHJpeFszXSA9IEBfdG9NYXRyaXhbNF0gPSBAX3RvTWF0cml4WzVdID0geFxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRzY2FsZVg6ICh4KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JTY2FsZVxuXG5cdFx0QF90b01hdHJpeFszXSA9IEBfY3VycmVudE1hdHJpeFszXSAqIHhcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0c2NhbGVZOiAoeSkgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yU2NhbGVcblxuXHRcdEBfdG9NYXRyaXhbNF0gPSBAX2N1cnJlbnRNYXRyaXhbNF0gKiB5XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdHNjYWxlWjogKHopIC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvclNjYWxlXG5cblx0XHRAX3RvTWF0cml4WzVdID0gQF9jdXJyZW50TWF0cml4WzVdICogelxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRfcmVwb3J0VXBkYXRlRm9yUGVyc3BlY3RpdmU6IC0+XG5cblx0XHRyZXR1cm4gaWYgQF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1QZXJzcGVjdGl2ZVxuXG5cdFx0QF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1QZXJzcGVjdGl2ZSA9IHllc1xuXG5cdFx0QF90b01hdHJpeFs2XSA9IEBfY3VycmVudE1hdHJpeFs2XVxuXG5cdFx0cmV0dXJuXG5cblx0IyMjXG5cdFBlcnNwZWN0aXZlXG5cdCMjI1xuXG5cdF91cGRhdGVQZXJzcGVjdGl2ZTogKHByb2dyZXNzKSAtPlxuXG5cdFx0QF9zdHlsZVNldHRlci5wZXJzcGVjdGl2ZSAoXG5cdFx0XHRcdEBfZnJvbU1hdHJpeFs2XSArXG5cdFx0XHRcdCgoQF90b01hdHJpeFs2XSAtIEBfZnJvbU1hdHJpeFs2XSkgKiBwcm9ncmVzcylcblx0XHRcdClcblxuXHRcdG51bGxcblxuXHRyZXNldFBlcnNwZWN0aXZlOiAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JQZXJzcGVjdGl2ZVxuXG5cdFx0QF90b01hdHJpeFs2XSA9IDBcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0cGVyc3BlY3RpdmU6IChkKSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JQZXJzcGVjdGl2ZVxuXG5cdFx0QF90b01hdHJpeFs2XSA9IGRcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0IyMjXG5cdFJvdGF0aW9uXG5cdCMjI1xuXG5cdF91cGRhdGVSb3RhdGlvbjogKHByb2dyZXNzKSAtPlxuXG5cdFx0QF9zdHlsZVNldHRlci5yb3RhdGVUbyAoXG5cdFx0XHRcdEBfZnJvbU1hdHJpeFs3XSArXG5cdFx0XHRcdCgoQF90b01hdHJpeFs3XSAtIEBfZnJvbU1hdHJpeFs3XSkgKiBwcm9ncmVzcylcblx0XHRcdCksXG5cdFx0XHQoXG5cdFx0XHRcdEBfZnJvbU1hdHJpeFs4XSArXG5cdFx0XHRcdCgoQF90b01hdHJpeFs4XSAtIEBfZnJvbU1hdHJpeFs4XSkgKiBwcm9ncmVzcylcblx0XHRcdCksXG5cdFx0XHQoXG5cdFx0XHRcdEBfZnJvbU1hdHJpeFs5XSArXG5cdFx0XHRcdCgoQF90b01hdHJpeFs5XSAtIEBfZnJvbU1hdHJpeFs5XSkgKiBwcm9ncmVzcylcblx0XHRcdClcblxuXHRcdG51bGxcblxuXHRfcmVwb3J0VXBkYXRlRm9yUm90YXRpb246IC0+XG5cblx0XHRyZXR1cm4gaWYgQF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1Sb3RhdGlvblxuXG5cdFx0QF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1Sb3RhdGlvbiA9IHllc1xuXG5cdFx0QF90b01hdHJpeFs3XSA9IEBfY3VycmVudE1hdHJpeFs3XVxuXHRcdEBfdG9NYXRyaXhbOF0gPSBAX2N1cnJlbnRNYXRyaXhbOF1cblx0XHRAX3RvTWF0cml4WzldID0gQF9jdXJyZW50TWF0cml4WzldXG5cblx0XHRyZXR1cm5cblxuXHRyZXNldFJvdGF0aW9uOiAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFs3XSA9IDBcblx0XHRAX3RvTWF0cml4WzhdID0gMFxuXHRcdEBfdG9NYXRyaXhbOV0gPSAwXG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdHJvdGF0ZVRvOiAoeCwgeSwgeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yUm90YXRpb25cblxuXHRcdEBfdG9NYXRyaXhbN10gPSB4XG5cdFx0QF90b01hdHJpeFs4XSA9IHlcblx0XHRAX3RvTWF0cml4WzldID0gelxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRyb3RhdGVYVG86ICh4KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFs3XSA9IHhcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0cm90YXRlWVRvOiAoeSkgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yUm90YXRpb25cblxuXHRcdEBfdG9NYXRyaXhbOF0gPSB5XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdHJvdGF0ZVpUbzogKHopIC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvclJvdGF0aW9uXG5cblx0XHRAX3RvTWF0cml4WzldID0gelxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRyb3RhdGU6ICh4LCB5LCB6KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFs3XSA9IEBfY3VycmVudE1hdHJpeFs3XSArIHhcblx0XHRAX3RvTWF0cml4WzhdID0gQF9jdXJyZW50TWF0cml4WzhdICsgeVxuXHRcdEBfdG9NYXRyaXhbOV0gPSBAX2N1cnJlbnRNYXRyaXhbOV0gKyB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdHJvdGF0ZVg6ICh4KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFs3XSA9IEBfY3VycmVudE1hdHJpeFs3XSArIHhcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0cm90YXRlWTogKHkpIC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvclJvdGF0aW9uXG5cblx0XHRAX3RvTWF0cml4WzhdID0gQF9jdXJyZW50TWF0cml4WzhdICsgeVxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRyb3RhdGVaOiAoeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yUm90YXRpb25cblxuXHRcdEBfdG9NYXRyaXhbOV0gPSBAX2N1cnJlbnRNYXRyaXhbOV0gKyB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdCMjI1xuXHRMb2NhbE1vdmVtZW50XG5cdCMjI1xuXG5cdF91cGRhdGVMb2NhbE1vdmVtZW50OiAocHJvZ3Jlc3MpIC0+XG5cblx0XHRAX3N0eWxlU2V0dGVyLmxvY2FsTW92ZVRvIChcblx0XHRcdFx0QF9mcm9tTWF0cml4WzEwXSArXG5cdFx0XHRcdCgoQF90b01hdHJpeFsxMF0gLSBAX2Zyb21NYXRyaXhbMTBdKSAqIHByb2dyZXNzKVxuXHRcdFx0KSxcblx0XHRcdChcblx0XHRcdFx0QF9mcm9tTWF0cml4WzExXSArXG5cdFx0XHRcdCgoQF90b01hdHJpeFsxMV0gLSBAX2Zyb21NYXRyaXhbMTFdKSAqIHByb2dyZXNzKVxuXHRcdFx0KSxcblx0XHRcdChcblx0XHRcdFx0QF9mcm9tTWF0cml4WzEyXSArXG5cdFx0XHRcdCgoQF90b01hdHJpeFsxMl0gLSBAX2Zyb21NYXRyaXhbMTJdKSAqIHByb2dyZXNzKVxuXHRcdFx0KVxuXG5cdFx0bnVsbFxuXG5cdF9yZXBvcnRVcGRhdGVGb3JMb2NhbE1vdmVtZW50OiAtPlxuXG5cdFx0cmV0dXJuIGlmIEBfbmVlZHNVcGRhdGUudHJhbnNmb3JtTG9jYWxNb3ZlbWVudFxuXG5cdFx0QF9uZWVkc1VwZGF0ZS50cmFuc2Zvcm1Mb2NhbE1vdmVtZW50ID0geWVzXG5cblx0XHRAX3RvTWF0cml4WzEwXSA9IEBfY3VycmVudE1hdHJpeFsxMF1cblx0XHRAX3RvTWF0cml4WzExXSA9IEBfY3VycmVudE1hdHJpeFsxMV1cblx0XHRAX3RvTWF0cml4WzEyXSA9IEBfY3VycmVudE1hdHJpeFsxMl1cblxuXHRcdHJldHVyblxuXG5cdHJlc2V0TG9jYWxNb3ZlbWVudDogLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxNb3ZlbWVudFxuXG5cdFx0QF90b01hdHJpeFsxMF0gPSAwXG5cdFx0QF90b01hdHJpeFsxMV0gPSAwXG5cdFx0QF90b01hdHJpeFsxMl0gPSAwXG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdGxvY2FsTW92ZVRvOiAoeCwgeSwgeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxNb3ZlbWVudFxuXG5cdFx0QF90b01hdHJpeFsxMF0gPSB4XG5cdFx0QF90b01hdHJpeFsxMV0gPSB5XG5cdFx0QF90b01hdHJpeFsxMl0gPSB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdGxvY2FsTW92ZVhUbzogKHgpIC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvckxvY2FsTW92ZW1lbnRcblxuXHRcdEBfdG9NYXRyaXhbMTBdID0geFxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRsb2NhbE1vdmVZVG86ICh5KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JMb2NhbE1vdmVtZW50XG5cblx0XHRAX3RvTWF0cml4WzExXSA9IHlcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0bG9jYWxNb3ZlWlRvOiAoeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxNb3ZlbWVudFxuXG5cdFx0QF90b01hdHJpeFsxMl0gPSB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdGxvY2FsTW92ZTogKHgsIHksIHopIC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvckxvY2FsTW92ZW1lbnRcblxuXHRcdEBfdG9NYXRyaXhbMTBdID0gQF9jdXJyZW50TWF0cml4WzEwXSArIHhcblx0XHRAX3RvTWF0cml4WzExXSA9IEBfY3VycmVudE1hdHJpeFsxMV0gKyB5XG5cdFx0QF90b01hdHJpeFsxMl0gPSBAX2N1cnJlbnRNYXRyaXhbMTJdICsgelxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRsb2NhbE1vdmVYOiAoeCkgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxNb3ZlbWVudFxuXG5cdFx0QF90b01hdHJpeFsxMF0gPSBAX2N1cnJlbnRNYXRyaXhbMTBdICsgeFxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRsb2NhbE1vdmVZOiAoeSkgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxNb3ZlbWVudFxuXG5cdFx0QF90b01hdHJpeFsxMV0gPSBAX2N1cnJlbnRNYXRyaXhbMTFdICsgeVxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRsb2NhbE1vdmVaOiAoeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxNb3ZlbWVudFxuXG5cdFx0QF90b01hdHJpeFsxMl0gPSBAX2N1cnJlbnRNYXRyaXhbMTJdICsgelxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHQjIyNcblx0Um90YXRpb25cblx0IyMjXG5cblx0X3VwZGF0ZUxvY2FsUm90YXRpb246IChwcm9ncmVzcykgLT5cblxuXHRcdEBfc3R5bGVTZXR0ZXIubG9jYWxSb3RhdGVUbyAoXG5cdFx0XHRcdEBfZnJvbU1hdHJpeFsxM10gK1xuXHRcdFx0XHQoKEBfdG9NYXRyaXhbMTNdIC0gQF9mcm9tTWF0cml4WzEzXSkgKiBwcm9ncmVzcylcblx0XHRcdCksXG5cdFx0XHQoXG5cdFx0XHRcdEBfZnJvbU1hdHJpeFsxNF0gK1xuXHRcdFx0XHQoKEBfdG9NYXRyaXhbMTRdIC0gQF9mcm9tTWF0cml4WzE0XSkgKiBwcm9ncmVzcylcblx0XHRcdCksXG5cdFx0XHQoXG5cdFx0XHRcdEBfZnJvbU1hdHJpeFsxNV0gK1xuXHRcdFx0XHQoKEBfdG9NYXRyaXhbMTVdIC0gQF9mcm9tTWF0cml4WzE1XSkgKiBwcm9ncmVzcylcblx0XHRcdClcblxuXHRcdG51bGxcblxuXHRfcmVwb3J0VXBkYXRlRm9yTG9jYWxSb3RhdGlvbjogLT5cblxuXHRcdHJldHVybiBpZiBAX25lZWRzVXBkYXRlLnRyYW5zZm9ybUxvY2FsUm90YXRpb25cblxuXHRcdEBfbmVlZHNVcGRhdGUudHJhbnNmb3JtTG9jYWxSb3RhdGlvbiA9IHllc1xuXG5cdFx0QF90b01hdHJpeFsxM10gPSBAX2N1cnJlbnRNYXRyaXhbMTNdXG5cdFx0QF90b01hdHJpeFsxNF0gPSBAX2N1cnJlbnRNYXRyaXhbMTRdXG5cdFx0QF90b01hdHJpeFsxNV0gPSBAX2N1cnJlbnRNYXRyaXhbMTVdXG5cblx0XHRyZXR1cm5cblxuXHRyZXNldExvY2FsUm90YXRpb246IC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvckxvY2FsUm90YXRpb25cblxuXHRcdEBfdG9NYXRyaXhbMTNdID0gMFxuXHRcdEBfdG9NYXRyaXhbMTRdID0gMFxuXHRcdEBfdG9NYXRyaXhbMTVdID0gMFxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRsb2NhbFJvdGF0ZVRvOiAoeCwgeSwgeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFsxM10gPSB4XG5cdFx0QF90b01hdHJpeFsxNF0gPSB5XG5cdFx0QF90b01hdHJpeFsxNV0gPSB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdGxvY2FsUm90YXRlWFRvOiAoeCkgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFsxM10gPSB4XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdGxvY2FsUm90YXRlWVRvOiAoeSkgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFsxNF0gPSB5XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdGxvY2FsUm90YXRlWlRvOiAoeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFsxNV0gPSB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdGxvY2FsUm90YXRlOiAoeCwgeSwgeikgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFsxM10gPSBAX2N1cnJlbnRNYXRyaXhbMTNdICsgeFxuXHRcdEBfdG9NYXRyaXhbMTRdID0gQF9jdXJyZW50TWF0cml4WzE0XSArIHlcblx0XHRAX3RvTWF0cml4WzE1XSA9IEBfY3VycmVudE1hdHJpeFsxNV0gKyB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdGxvY2FsUm90YXRlWDogKHgpIC0+XG5cblx0XHRkbyBAX3JlcG9ydFVwZGF0ZUZvckxvY2FsUm90YXRpb25cblxuXHRcdEBfdG9NYXRyaXhbMTNdID0gQF9jdXJyZW50TWF0cml4WzEzXSArIHhcblxuXHRcdGRvIEBfdXBkYXRlXG5cblx0XHRAXG5cblx0bG9jYWxSb3RhdGVZOiAoeSkgLT5cblxuXHRcdGRvIEBfcmVwb3J0VXBkYXRlRm9yTG9jYWxSb3RhdGlvblxuXG5cdFx0QF90b01hdHJpeFsxNF0gPSBAX2N1cnJlbnRNYXRyaXhbMTRdICsgeVxuXG5cdFx0ZG8gQF91cGRhdGVcblxuXHRcdEBcblxuXHRsb2NhbFJvdGF0ZVo6ICh6KSAtPlxuXG5cdFx0ZG8gQF9yZXBvcnRVcGRhdGVGb3JMb2NhbFJvdGF0aW9uXG5cblx0XHRAX3RvTWF0cml4WzE1XSA9IEBfY3VycmVudE1hdHJpeFsxNV0gKyB6XG5cblx0XHRkbyBAX3VwZGF0ZVxuXG5cdFx0QFxuXG5cdHJlc2V0QWxsOiAtPlxuXG5cdFx0ZG8gQHJlc2V0TW92ZW1lbnRcblx0XHRkbyBAcmVzZXRTY2FsZVxuXHRcdGRvIEByZXNldFBlcnNwZWN0aXZlXG5cdFx0ZG8gQHJlc2V0Um90YXRpb25cblx0XHRkbyBAcmVzZXRMb2NhbE1vdmVtZW50XG5cdFx0ZG8gQHJlc2V0TG9jYWxSb3RhdGlvbiJdfQ==
},{"Transformation":72}],127:[function(require,module,exports){
var Timing, timing;

Timing = require('raf-timing');

timing = new Timing;

timing.start();

module.exports = timing;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltaW5nLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXHRpbWluZy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxjQUFBOztBQUFBLE1BQUEsR0FBUyxPQUFBLENBQVEsWUFBUixDQUFULENBQUE7O0FBQUEsTUFFQSxHQUFTLEdBQUEsQ0FBQSxNQUZULENBQUE7O0FBQUEsTUFHTSxDQUFDLEtBQVAsQ0FBQSxDQUhBLENBQUE7O0FBQUEsTUFLTSxDQUFDLE9BQVAsR0FBaUIsTUFMakIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIlRpbWluZyA9IHJlcXVpcmUgJ3JhZi10aW1pbmcnXHJcblxyXG50aW1pbmcgPSBuZXcgVGltaW5nXHJcbnRpbWluZy5zdGFydCgpXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHRpbWluZyJdfQ==
},{"raf-timing":93}],128:[function(require,module,exports){
var css, cssPropertySetter, getCSSProp, getPossiblePropsFor;

getCSSProp = (function() {
  var el, p;
  p = null;
  el = document.createElement('div');
  return function(possibleProps) {
    var prop, _i, _len;
    for (_i = 0, _len = possibleProps.length; _i < _len; _i++) {
      prop = possibleProps[_i];
      if (el.style[prop] !== void 0) {
        return prop;
      }
    }
    return false;
  };
})();

cssPropertySetter = function(prop) {
  var actualProp;
  actualProp = getCSSProp(getPossiblePropsFor(prop));
  if (!actualProp) {
    return (function() {});
  }
  return function(el, v) {
    return el.style[actualProp] = v;
  };
};

getPossiblePropsFor = function(prop) {
  return ['webkit' + prop[0].toUpperCase() + prop.substr(1, prop.length), 'moz' + prop[0].toUpperCase() + prop.substr(1, prop.length), prop];
};

module.exports = css = {
  setTransform: cssPropertySetter('transform'),
  setTransformStyle: cssPropertySetter('transformStyle'),
  setTransformOrigin: cssPropertySetter('transformOrigin'),
  setCssFilter: cssPropertySetter('filter'),
  setTransitionDuration: cssPropertySetter('transitionDuration'),
  setTransitionTimingFunction: cssPropertySetter('transitionTimingFunction'),
  rgb: function(r, g, b) {
    return 'rgb(' + r + ', ' + g + ', ' + b + ')';
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3NzLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcbGliXFx1dGlsaXR5XFxjc3MuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsdURBQUE7O0FBQUEsVUFBQSxHQUFnQixDQUFBLFNBQUEsR0FBQTtBQUVmLE1BQUEsS0FBQTtBQUFBLEVBQUEsQ0FBQSxHQUFJLElBQUosQ0FBQTtBQUFBLEVBRUEsRUFBQSxHQUFLLFFBQVEsQ0FBQyxhQUFULENBQXVCLEtBQXZCLENBRkwsQ0FBQTtTQUlBLFNBQUMsYUFBRCxHQUFBO0FBRUMsUUFBQSxjQUFBO0FBQUEsU0FBQSxvREFBQTsrQkFBQTtBQUVDLE1BQUEsSUFBZSxFQUFFLENBQUMsS0FBTSxDQUFBLElBQUEsQ0FBVCxLQUFvQixNQUFuQztBQUFBLGVBQU8sSUFBUCxDQUFBO09BRkQ7QUFBQSxLQUFBO1dBSUEsTUFORDtFQUFBLEVBTmU7QUFBQSxDQUFBLENBQUgsQ0FBQSxDQUFiLENBQUE7O0FBQUEsaUJBY0EsR0FBb0IsU0FBQyxJQUFELEdBQUE7QUFFbkIsTUFBQSxVQUFBO0FBQUEsRUFBQSxVQUFBLEdBQWEsVUFBQSxDQUFXLG1CQUFBLENBQW9CLElBQXBCLENBQVgsQ0FBYixDQUFBO0FBRUEsRUFBQSxJQUFBLENBQUEsVUFBQTtBQUFBLFdBQU8sQ0FBQyxTQUFBLEdBQUEsQ0FBRCxDQUFQLENBQUE7R0FGQTtTQUlBLFNBQUMsRUFBRCxFQUFLLENBQUwsR0FBQTtXQUFXLEVBQUUsQ0FBQyxLQUFNLENBQUEsVUFBQSxDQUFULEdBQXVCLEVBQWxDO0VBQUEsRUFObUI7QUFBQSxDQWRwQixDQUFBOztBQUFBLG1CQXNCQSxHQUFzQixTQUFDLElBQUQsR0FBQTtTQUVyQixDQUNDLFFBQUEsR0FBVyxJQUFLLENBQUEsQ0FBQSxDQUFFLENBQUMsV0FBUixDQUFBLENBQVgsR0FBbUMsSUFBSSxDQUFDLE1BQUwsQ0FBWSxDQUFaLEVBQWUsSUFBSSxDQUFDLE1BQXBCLENBRHBDLEVBR0MsS0FBQSxHQUFRLElBQUssQ0FBQSxDQUFBLENBQUUsQ0FBQyxXQUFSLENBQUEsQ0FBUixHQUFnQyxJQUFJLENBQUMsTUFBTCxDQUFZLENBQVosRUFBZSxJQUFJLENBQUMsTUFBcEIsQ0FIakMsRUFLQyxJQUxELEVBRnFCO0FBQUEsQ0F0QnRCLENBQUE7O0FBQUEsTUFnQ00sQ0FBQyxPQUFQLEdBQWlCLEdBQUEsR0FFaEI7QUFBQSxFQUFBLFlBQUEsRUFBYyxpQkFBQSxDQUFrQixXQUFsQixDQUFkO0FBQUEsRUFFQSxpQkFBQSxFQUFtQixpQkFBQSxDQUFrQixnQkFBbEIsQ0FGbkI7QUFBQSxFQUlBLGtCQUFBLEVBQW9CLGlCQUFBLENBQWtCLGlCQUFsQixDQUpwQjtBQUFBLEVBTUEsWUFBQSxFQUFjLGlCQUFBLENBQWtCLFFBQWxCLENBTmQ7QUFBQSxFQVFBLHFCQUFBLEVBQXVCLGlCQUFBLENBQWtCLG9CQUFsQixDQVJ2QjtBQUFBLEVBVUEsMkJBQUEsRUFBNkIsaUJBQUEsQ0FBa0IsMEJBQWxCLENBVjdCO0FBQUEsRUFhQSxHQUFBLEVBQUssU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsR0FBQTtXQUVKLE1BQUEsR0FBUyxDQUFULEdBQWEsSUFBYixHQUFvQixDQUFwQixHQUF3QixJQUF4QixHQUErQixDQUEvQixHQUFtQyxJQUYvQjtFQUFBLENBYkw7Q0FsQ0QsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImdldENTU1Byb3AgPSBkbyAtPlxuXG5cdHAgPSBudWxsXG5cblx0ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICdkaXYnXG5cblx0KHBvc3NpYmxlUHJvcHMpIC0+XG5cblx0XHRmb3IgcHJvcCBpbiBwb3NzaWJsZVByb3BzXG5cblx0XHRcdHJldHVybiBwcm9wIGlmIGVsLnN0eWxlW3Byb3BdIGlzbnQgdW5kZWZpbmVkXG5cblx0XHRmYWxzZVxuXG5jc3NQcm9wZXJ0eVNldHRlciA9IChwcm9wKSAtPlxuXG5cdGFjdHVhbFByb3AgPSBnZXRDU1NQcm9wIGdldFBvc3NpYmxlUHJvcHNGb3IgcHJvcFxuXG5cdHJldHVybiAoLT4pIHVubGVzcyBhY3R1YWxQcm9wXG5cblx0KGVsLCB2KSAtPiBlbC5zdHlsZVthY3R1YWxQcm9wXSA9IHZcblxuZ2V0UG9zc2libGVQcm9wc0ZvciA9IChwcm9wKSAtPlxuXG5cdFtcblx0XHQnd2Via2l0JyArIHByb3BbMF0udG9VcHBlckNhc2UoKSArIHByb3Auc3Vic3RyKDEsIHByb3AubGVuZ3RoKSxcblxuXHRcdCdtb3onICsgcHJvcFswXS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zdWJzdHIoMSwgcHJvcC5sZW5ndGgpLFxuXG5cdFx0cHJvcFxuXHRdXG5cbm1vZHVsZS5leHBvcnRzID0gY3NzID1cblxuXHRzZXRUcmFuc2Zvcm06IGNzc1Byb3BlcnR5U2V0dGVyICd0cmFuc2Zvcm0nXG5cblx0c2V0VHJhbnNmb3JtU3R5bGU6IGNzc1Byb3BlcnR5U2V0dGVyICd0cmFuc2Zvcm1TdHlsZSdcblxuXHRzZXRUcmFuc2Zvcm1PcmlnaW46IGNzc1Byb3BlcnR5U2V0dGVyICd0cmFuc2Zvcm1PcmlnaW4nXG5cblx0c2V0Q3NzRmlsdGVyOiBjc3NQcm9wZXJ0eVNldHRlciAnZmlsdGVyJ1xuXG5cdHNldFRyYW5zaXRpb25EdXJhdGlvbjogY3NzUHJvcGVydHlTZXR0ZXIgJ3RyYW5zaXRpb25EdXJhdGlvbidcblxuXHRzZXRUcmFuc2l0aW9uVGltaW5nRnVuY3Rpb246IGNzc1Byb3BlcnR5U2V0dGVyICd0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24nXG5cblx0IyBUdXJucyBudW1iZXJzIHRvIGNzcyByZ2IgcmVwcmVzZW50YXRpb25cblx0cmdiOiAociwgZywgYikgLT5cblxuXHRcdCdyZ2IoJyArIHIgKyAnLCAnICsgZyArICcsICcgKyBiICsgJyknIl19
},{}],129:[function(require,module,exports){
var lazyValues;

module.exports = lazyValues = {};

lazyValues.getLazyValue = function(val) {
  if ((val._isLazy != null) && val._isLazy) {
    return val();
  } else {
    return val;
  }
};

lazyValues.getLazyValues = function(ar) {
  var item, _i, _len, _results;
  _results = [];
  for (_i = 0, _len = ar.length; _i < _len; _i++) {
    item = ar[_i];
    _results.push(lazyValues.getLazyValue(item));
  }
  return _results;
};

lazyValues.returnLazily = function(fn) {
  return function() {
    var args, ret;
    args = arguments;
    ret = (function(_this) {
      return function() {
        return fn.apply(_this, args);
      };
    })(this);
    ret._isLazy = true;
    return ret;
  };
};

lazyValues.acceptLazyArgs = function(fn) {
  return function() {
    var args;
    args = lazyValues.getLazyValues(arguments);
    return fn.apply(this, args);
  };
};

lazyValues.acceptAndReturnLazily = function(fn) {
  return lazyValues.returnLazily(lazyValues.acceptLazyArgs(fn));
};

lazyValues;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF6eVZhbHVlcy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGxpYlxcdXRpbGl0eVxcbGF6eVZhbHVlcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxVQUFBOztBQUFBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFVBQUEsR0FBYSxFQUE5QixDQUFBOztBQUFBLFVBRVUsQ0FBQyxZQUFYLEdBQTBCLFNBQUMsR0FBRCxHQUFBO0FBRXpCLEVBQUEsSUFBRyxxQkFBQSxJQUFpQixHQUFHLENBQUMsT0FBeEI7QUFFQyxXQUFVLEdBQUgsQ0FBQSxDQUFQLENBRkQ7R0FBQSxNQUFBO0FBTUMsV0FBTyxHQUFQLENBTkQ7R0FGeUI7QUFBQSxDQUYxQixDQUFBOztBQUFBLFVBWVUsQ0FBQyxhQUFYLEdBQTJCLFNBQUMsRUFBRCxHQUFBO0FBRTFCLE1BQUEsd0JBQUE7QUFBQTtPQUFBLHlDQUFBO2tCQUFBO0FBQUEsa0JBQUEsVUFBVSxDQUFDLFlBQVgsQ0FBd0IsSUFBeEIsRUFBQSxDQUFBO0FBQUE7a0JBRjBCO0FBQUEsQ0FaM0IsQ0FBQTs7QUFBQSxVQWdCVSxDQUFDLFlBQVgsR0FBMEIsU0FBQyxFQUFELEdBQUE7U0FFekIsU0FBQSxHQUFBO0FBRUMsUUFBQSxTQUFBO0FBQUEsSUFBQSxJQUFBLEdBQU8sU0FBUCxDQUFBO0FBQUEsSUFFQSxHQUFBLEdBQU0sQ0FBQSxTQUFBLEtBQUEsR0FBQTthQUFBLFNBQUEsR0FBQTtlQUVMLEVBQUUsQ0FBQyxLQUFILENBQVMsS0FBVCxFQUFZLElBQVosRUFGSztNQUFBLEVBQUE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRk4sQ0FBQTtBQUFBLElBTUEsR0FBRyxDQUFDLE9BQUosR0FBYyxJQU5kLENBQUE7V0FRQSxJQVZEO0VBQUEsRUFGeUI7QUFBQSxDQWhCMUIsQ0FBQTs7QUFBQSxVQThCVSxDQUFDLGNBQVgsR0FBNEIsU0FBQyxFQUFELEdBQUE7U0FFM0IsU0FBQSxHQUFBO0FBRUMsUUFBQSxJQUFBO0FBQUEsSUFBQSxJQUFBLEdBQU8sVUFBVSxDQUFDLGFBQVgsQ0FBeUIsU0FBekIsQ0FBUCxDQUFBO1dBRUEsRUFBRSxDQUFDLEtBQUgsQ0FBUyxJQUFULEVBQVksSUFBWixFQUpEO0VBQUEsRUFGMkI7QUFBQSxDQTlCNUIsQ0FBQTs7QUFBQSxVQXNDVSxDQUFDLHFCQUFYLEdBQW1DLFNBQUMsRUFBRCxHQUFBO1NBRWxDLFVBQVUsQ0FBQyxZQUFYLENBQXdCLFVBQVUsQ0FBQyxjQUFYLENBQTBCLEVBQTFCLENBQXhCLEVBRmtDO0FBQUEsQ0F0Q25DLENBQUE7O0FBQUEsVUFBQSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBsYXp5VmFsdWVzID0ge31cclxuXHJcbmxhenlWYWx1ZXMuZ2V0TGF6eVZhbHVlID0gKHZhbCkgLT5cclxuXHJcblx0aWYgdmFsLl9pc0xhenk/IGFuZCB2YWwuX2lzTGF6eVxyXG5cclxuXHRcdHJldHVybiBkbyB2YWxcclxuXHJcblx0ZWxzZVxyXG5cclxuXHRcdHJldHVybiB2YWxcclxuXHJcbmxhenlWYWx1ZXMuZ2V0TGF6eVZhbHVlcyA9IChhcikgLT5cclxuXHJcblx0bGF6eVZhbHVlcy5nZXRMYXp5VmFsdWUgaXRlbSBmb3IgaXRlbSBpbiBhclxyXG5cclxubGF6eVZhbHVlcy5yZXR1cm5MYXppbHkgPSAoZm4pIC0+XHJcblxyXG5cdC0+XHJcblxyXG5cdFx0YXJncyA9IGFyZ3VtZW50c1xyXG5cclxuXHRcdHJldCA9ID0+XHJcblxyXG5cdFx0XHRmbi5hcHBseSBALCBhcmdzXHJcblxyXG5cdFx0cmV0Ll9pc0xhenkgPSB5ZXNcclxuXHJcblx0XHRyZXRcclxuXHJcbmxhenlWYWx1ZXMuYWNjZXB0TGF6eUFyZ3MgPSAoZm4pIC0+XHJcblxyXG5cdC0+XHJcblxyXG5cdFx0YXJncyA9IGxhenlWYWx1ZXMuZ2V0TGF6eVZhbHVlcyBhcmd1bWVudHNcclxuXHJcblx0XHRmbi5hcHBseSBALCBhcmdzXHJcblxyXG5sYXp5VmFsdWVzLmFjY2VwdEFuZFJldHVybkxhemlseSA9IChmbikgLT5cclxuXHJcblx0bGF6eVZhbHVlcy5yZXR1cm5MYXppbHkgbGF6eVZhbHVlcy5hY2NlcHRMYXp5QXJncyBmblxyXG5cclxubGF6eVZhbHVlcyJdfQ==
},{}],130:[function(require,module,exports){
module.exports=require(4)
},{}],131:[function(require,module,exports){
arguments[4][57][0].apply(exports,arguments)
},{"./kilid/Scope":132,"utila/scripts/js/lib/array":130}],132:[function(require,module,exports){
arguments[4][58][0].apply(exports,arguments)
},{"./map":133,"./scope/ComboListener":134,"./scope/NoKeyListener":135,"utila/scripts/js/lib/array":130}],133:[function(require,module,exports){
module.exports=require(59)
},{}],134:[function(require,module,exports){
module.exports=require(60)
},{"./_Listener":136}],135:[function(require,module,exports){
module.exports=require(61)
},{"./_Listener":136}],136:[function(require,module,exports){
module.exports=require(62)
},{}],137:[function(require,module,exports){
module.exports=require(4)
},{}],138:[function(require,module,exports){
var ButtonManager, HoverManager, Moosh, WheelManager, array,
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
  __slice = [].slice;

HoverManager = require('./moosh/HoverManager');

WheelManager = require('./moosh/WheelManager');

ButtonManager = require('./moosh/ButtonManager');

array = require('utila/scripts/js/lib/array');

module.exports = Moosh = (function() {
  var self;

  self = Moosh;

  Moosh._instanceCounter = 0;

  function Moosh(rootNode, _kilidScope) {
    var body;
    this.rootNode = rootNode != null ? rootNode : document.body;
    this._kilidScope = _kilidScope;
    if (this.rootNode.node != null) {
      this.rootNode = this.rootNode.node;
    }
    this.id = ++self._instanceCounter;
    this._nodesData = [];
    this._openModals = [];
    this._nodesToIgnore = [];
    this._hovers = new HoverManager(this);
    this._wheels = new WheelManager(this);
    this._lefts = new ButtonManager(this, 'left', 0);
    this._middles = new ButtonManager(this, 'middle', 1);
    this._rights = new ButtonManager(this, 'right', 2);
    body = document.body;
    body.addEventListener('mousedown', (function(_this) {
      return function(e) {
        return _this._mousedown(e);
      };
    })(this));
    body.addEventListener('mouseup', (function(_this) {
      return function(e) {
        return _this._mouseup(e);
      };
    })(this));
    body.addEventListener('mousemove', (function(_this) {
      return function(e) {
        return _this._mousemove(e);
      };
    })(this));
    body.addEventListener('mousewheel', (function(_this) {
      return function(e) {
        return _this._mousewheel(e);
      };
    })(this), false);
  }

  Moosh.prototype._getHtmlNode = function(node) {
    if (node.node != null) {
      node = node.node;
    }
    if (!(node instanceof Element)) {
      throw Error("node must either be a Foxie instance or an element");
    }
    return node;
  };

  Moosh.prototype._assignIdToNode = function(node) {
    var id;
    id = node.getAttribute("data-moosh-" + this.id + "-id");
    if (id == null) {
      id = this._nodesData.length;
      node.setAttribute("data-moosh-" + this.id + "-id", id);
      this._nodesData.push({
        id: id,
        node: node,
        hoverListeners: [],
        wheelListeners: [],
        left: {
          clickListeners: [],
          dragListeners: []
        },
        right: {
          clickListeners: [],
          dragListeners: []
        },
        middle: {
          clickListeners: [],
          dragListeners: []
        },
        callbacksForClickOutside: []
      });
    }
    return parseInt(id);
  };

  Moosh.prototype.forgetNode = function(node) {
    var data, id, l, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _len5, _len6, _len7, _m, _n, _o, _p, _ref, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;
    node = this._getHtmlNode(node);
    id = this._getNodeId(node);
    if (id != null) {
      data = this._nodesData[id];
      _ref = data.hoverListeners;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        l = _ref[_i];
        l.detach();
      }
      _ref1 = data.wheelListeners;
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        l = _ref1[_j];
        l.detach();
      }
      _ref2 = data.left.clickListeners;
      for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
        l = _ref2[_k];
        l.detach();
      }
      _ref3 = data.left.dragListeners;
      for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {
        l = _ref3[_l];
        l.detach();
      }
      _ref4 = data.right.clickListeners;
      for (_m = 0, _len4 = _ref4.length; _m < _len4; _m++) {
        l = _ref4[_m];
        l.detach();
      }
      _ref5 = data.right.dragListeners;
      for (_n = 0, _len5 = _ref5.length; _n < _len5; _n++) {
        l = _ref5[_n];
        l.detach();
      }
      _ref6 = data.middle.clickListeners;
      for (_o = 0, _len6 = _ref6.length; _o < _len6; _o++) {
        l = _ref6[_o];
        l.detach();
      }
      _ref7 = data.middle.dragListeners;
      for (_p = 0, _len7 = _ref7.length; _p < _len7; _p++) {
        l = _ref7[_p];
        l.detach();
      }
      node.removeAttribute("data-moosh-" + this.id + "-id");
      this._nodesData[id] = null;
    }
    return this;
  };

  Moosh.prototype._getNodeId = function(node) {
    var id;
    id = node.getAttribute("data-moosh-" + this.id + "-id");
    if (id == null) {
      return null;
    }
    return parseInt(id);
  };

  Moosh.prototype._getNodeAncestors = function(node) {
    var ancestors, id;
    ancestors = [];
    while (true) {
      if (node == null) {
        break;
      }
      id = this._getNodeId(node);
      if (id != null) {
        ancestors.push(this._nodesData[id]);
      }
      if (node === this.rootNode) {
        break;
      }
      node = node.parentNode;
    }
    return ancestors;
  };

  Moosh.prototype._mousemove = function(e) {
    var ancestors;
    ancestors = this._getNodeAncestors(e.target);
    this._hovers.handleMouseMove(e, ancestors);
    this._lefts.handleMouseMove(e, ancestors);
    this._rights.handleMouseMove(e, ancestors);
    this._middles.handleMouseMove(e, ancestors);
  };

  Moosh.prototype._mousedown = function(e) {
    var ancestors, _ref;
    ancestors = this._getNodeAncestors(e.target);
    if (_ref = ancestors[0], __indexOf.call(this._nodesToIgnore, _ref) >= 0) {
      ancestors.shift();
    }
    if (e.button === 0) {
      this._closeModalsIfNecessary(e, ancestors);
      this._lefts.handleMouseDown(e, ancestors);
    } else if (e.button === 1) {
      this._middles.handleMouseDown(e, ancestors);
    } else if (e.button === 2) {
      this._rights.handleMouseDown(e, ancestors);
    }
  };

  Moosh.prototype._mouseup = function(e) {
    var ancestors;
    ancestors = this._getNodeAncestors(e.target);
    if (e.button === 0) {
      this._lefts.handleMouseUp(e, ancestors);
    } else if (e.button === 1) {
      this._middles.handleMouseUp(e, ancestors);
    } else if (e.button === 2) {
      this._rights.handleMouseUp(e, ancestors);
    }
  };

  Moosh.prototype._mousewheel = function(e) {
    var ancestors;
    ancestors = this._getNodeAncestors(e.target);
    return this._wheels.handleMouseWheel(e, ancestors);
  };

  Moosh.prototype._getNodeDataForListeners = function(node) {
    var data, id;
    node = this._getHtmlNode(node);
    id = this._assignIdToNode(node);
    return data = this._nodesData[id];
  };

  Moosh.prototype._closeModalsIfNecessary = function(e, ancestors) {
    var cb, i, nodeData, _i, _len, _ref;
    i = 0;
    while (true) {
      nodeData = this._openModals[i];
      if (nodeData == null) {
        return;
      }
      if (ancestors.indexOf(nodeData) === -1) {
        _ref = nodeData.callbacksForClickOutside;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          cb = _ref[_i];
          cb(e);
        }
        nodeData.callbacksForClickOutside.length = 0;
        array.pluck(this._openModals, i);
      } else {
        i++;
      }
    }
  };

  Moosh.prototype.onClickOutside = function(node, cb) {
    var nodeData;
    nodeData = this._getNodeDataForListeners(node);
    if (this._openModals.indexOf(nodeData) === -1) {
      this._openModals.push(nodeData);
    }
    nodeData.callbacksForClickOutside.push(cb);
  };

  Moosh.prototype.discardClickOutside = function(node) {
    var nodeData;
    nodeData = this._getNodeDataForListeners(node);
    if (this._openModals.indexOf(nodeData) !== -1) {
      array.pluckOneItem(this._openModals, nodeData);
      nodeData.callbacksForClickOutside.length = 0;
    }
  };

  Moosh.prototype.onHover = function() {
    var data, node, rest;
    node = arguments[0], rest = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    data = this._getNodeDataForListeners(node);
    return this._hovers.onHover(data, rest);
  };

  Moosh.prototype.onWheel = function() {
    var data, node, rest;
    node = arguments[0], rest = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    data = this._getNodeDataForListeners(node);
    return this._wheels.onWheel(data, rest);
  };

  Moosh.prototype.onLeftClick = function() {
    var data, node, rest;
    node = arguments[0], rest = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    data = this._getNodeDataForListeners(node);
    return this._lefts.onClick(data, rest);
  };

  Moosh.prototype.onRightClick = function() {
    var data, node, rest;
    node = arguments[0], rest = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    data = this._getNodeDataForListeners(node);
    return this._rights.onClick(data, rest);
  };

  Moosh.prototype.onMiddleClick = function() {
    var data, node, rest;
    node = arguments[0], rest = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    data = this._getNodeDataForListeners(node);
    return this._middles.onClick(data, rest);
  };

  Moosh.prototype.onLeftDrag = function() {
    var data, node, rest;
    node = arguments[0], rest = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    data = this._getNodeDataForListeners(node);
    return this._lefts.onDrag(data, rest);
  };

  Moosh.prototype.onRightDrag = function() {
    var data, node, rest;
    node = arguments[0], rest = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    data = this._getNodeDataForListeners(node);
    return this._rights.onDrag(data, rest);
  };

  Moosh.prototype.onMiddleDrag = function() {
    var data, node, rest;
    node = arguments[0], rest = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    data = this._getNodeDataForListeners(node);
    return this._middles.onDrag(data, rest);
  };

  Moosh.prototype.ignore = function(node) {
    var data;
    data = this._getNodeDataForListeners(node);
    if (__indexOf.call(this._nodesToIgnore, data) >= 0) {
      return;
    }
    this._nodesToIgnore.push(data);
    return this;
  };

  Moosh.prototype.unignore = function(node) {
    var data;
    data = this._getNodeDataForListeners(node);
    if (__indexOf.call(this._nodesToIgnore, data) < 0) {
      return;
    }
    array.pluckOneItem(this._nodesToIgnore, data);
    return this;
  };

  return Moosh;

})();

Moosh.prototype.onDrag = Moosh.prototype.onLeftDrag;

Moosh.prototype.onClick = Moosh.prototype.onLeftClick;

},{"./moosh/ButtonManager":139,"./moosh/HoverManager":140,"./moosh/WheelManager":141,"utila/scripts/js/lib/array":137}],139:[function(require,module,exports){
var ButtonManager, ClickListener, DragListener, array;

array = require('utila/scripts/js/lib/array');

DragListener = require('./buttonManager/DragListener');

ClickListener = require('./buttonManager/ClickListener');

module.exports = ButtonManager = (function() {
  function ButtonManager(clickManager, keyName, keyCode) {
    this.clickManager = clickManager;
    this.keyName = keyName;
    this.keyCode = keyCode;
    this._kilidScope = this.clickManager._kilidScope;
    this._activeListeners = [];
  }

  ButtonManager.prototype._removeListenerFromActiveListenersList = function(listener) {
    array.pluckOneItem(this._activeListeners, listener);
  };

  ButtonManager.prototype._addListenerToActiveListenersList = function(listener) {
    this._activeListeners.push(listener);
  };

  ButtonManager.prototype.handleMouseDown = function(e, ancestors) {
    var listener, nodeData, _i, _j, _k, _len, _len1, _len2, _ref, _ref1;
    for (_i = 0, _len = ancestors.length; _i < _len; _i++) {
      nodeData = ancestors[_i];
      _ref = nodeData[this.keyName].clickListeners;
      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
        listener = _ref[_j];
        listener._handleMouseDown(e);
      }
      _ref1 = nodeData[this.keyName].dragListeners;
      for (_k = 0, _len2 = _ref1.length; _k < _len2; _k++) {
        listener = _ref1[_k];
        listener._handleMouseDown(e);
      }
      if (this._activeListeners.length > 0) {
        return;
      }
    }
  };

  ButtonManager.prototype.handleMouseMove = function(e, ancestors) {
    var i, lastLength, listener, newLength;
    lastLength = this._activeListeners.length;
    i = 0;
    while (lastLength > 0) {
      listener = this._activeListeners[i];
      if (listener == null) {
        return;
      }
      listener._handleMouseMove(e);
      newLength = this._activeListeners.length;
      i += newLength - lastLength + 1;
      lastLength = newLength;
    }
  };

  ButtonManager.prototype.handleMouseUp = function(e, ancestors) {
    var i, lastLength, listener, newLength;
    lastLength = this._activeListeners.length;
    i = 0;
    while (lastLength > 0) {
      listener = this._activeListeners[i];
      if (listener == null) {
        return;
      }
      listener._handleMouseUp(e);
      newLength = this._activeListeners.length;
      i += newLength - lastLength + 1;
      lastLength = newLength;
    }
  };

  ButtonManager.prototype.onClick = function(nodeData, args) {
    var l;
    l = new ClickListener(this, nodeData, args);
    nodeData[this.keyName].clickListeners.push(l);
    return l;
  };

  ButtonManager.prototype.onDrag = function(nodeData, args) {
    var l;
    l = new DragListener(this, nodeData, args);
    nodeData[this.keyName].dragListeners.push(l);
    return l;
  };

  return ButtonManager;

})();

},{"./buttonManager/ClickListener":143,"./buttonManager/DragListener":144,"utila/scripts/js/lib/array":137}],140:[function(require,module,exports){
var HoverListener, HoverManager, array;

array = require('utila/scripts/js/lib/array');

HoverListener = require('./hoverManager/HoverListener');

module.exports = HoverManager = (function() {
  function HoverManager(clickManager) {
    this.clickManager = clickManager;
    this._kilidScope = this.clickManager._kilidScope;
    this._activeListeners = [];
  }

  HoverManager.prototype.onHover = function(nodeData, args) {
    var l;
    l = new HoverListener(this, nodeData, args);
    nodeData.hoverListeners.push(l);
    return l;
  };

  HoverManager.prototype.handleMouseMove = function(e, ancestors) {
    var listener, nodeData, _i, _j, _len, _len1, _ref;
    this._checkMouseLeaveForActiveListeners(e, ancestors);
    for (_i = 0, _len = ancestors.length; _i < _len; _i++) {
      nodeData = ancestors[_i];
      _ref = nodeData.hoverListeners;
      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
        listener = _ref[_j];
        listener._handleMouseMove(e);
      }
    }
  };

  HoverManager.prototype._checkMouseLeaveForActiveListeners = function(e, ancestors) {
    var listener, _i, _len, _ref;
    _ref = this._activeListeners.slice(0);
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener._checkIfShouldLeave(e, ancestors);
    }
  };

  HoverManager.prototype._removeListenerFromActiveListenersList = function(listener) {
    array.pluckOneItem(this._activeListeners, listener);
  };

  HoverManager.prototype._addListenerToActiveListenersList = function(listener) {
    this._activeListeners.push(listener);
  };

  return HoverManager;

})();

},{"./hoverManager/HoverListener":145,"utila/scripts/js/lib/array":137}],141:[function(require,module,exports){
var WheelListener, WheelManager, array;

array = require('utila/scripts/js/lib/array');

WheelListener = require('./wheelManager/WheelListener');

module.exports = WheelManager = (function() {
  function WheelManager(clickManager) {
    this.clickManager = clickManager;
    this._kilidScope = this.clickManager._kilidScope;
  }

  WheelManager.prototype.onWheel = function(nodeData, args) {
    var l;
    l = new WheelListener(this, nodeData, args);
    nodeData.wheelListeners.push(l);
    return l;
  };

  WheelManager.prototype.handleMouseWheel = function(e, ancestors) {
    var listener, nodeData, _i, _j, _len, _len1, _ref;
    for (_i = 0, _len = ancestors.length; _i < _len; _i++) {
      nodeData = ancestors[_i];
      _ref = nodeData.wheelListeners;
      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
        listener = _ref[_j];
        listener._handleMouseWheel(e);
      }
    }
  };

  return WheelManager;

})();

},{"./wheelManager/WheelListener":146,"utila/scripts/js/lib/array":137}],142:[function(require,module,exports){
var _Listener;

module.exports = _Listener = (function() {
  function _Listener(manager) {
    this.enabled = true;
    this._kilidScope = manager._kilidScope;
    this._locked = false;
    setTimeout((function(_this) {
      return function() {
        return _this._locked = true;
      };
    })(this), 0);
    this._keyBinding = null;
    this._hasCombo = false;
    this._comboSatisfies = true;
    this._event = {
      pageX: 0,
      pageY: 0,
      screenX: 0,
      screenY: 0,
      layerX: 0,
      layerY: 0,
      clientRect: null,
      preventDefault: (function(_this) {
        return function() {
          return _this._lastReceivedMouseEvent.preventDefault();
        };
      })(this),
      originalEvent: null
    };
  }

  _Listener.prototype.enable = function() {
    if (this.enabled) {
      throw Error("This listener is already enabled");
    }
    this.enabled = true;
    return this;
  };

  _Listener.prototype.disable = function() {
    if (!this.enabled) {
      throw Error("This listener is already disabled");
    }
    this.enabled = false;
    return this;
  };

  _Listener.prototype.useKilidScope = function(scope) {
    if (this._locked) {
      throw Error("You can only set key combos on the same tick this listener was created");
    }
    if (this._hasCombo) {
      throw Error("Keyboard combo is already set on this event listener");
    }
    this._kilidScope = scope;
  };

  _Listener.prototype._modifyEvent = function() {
    var e, rect;
    e = this._lastReceivedMouseEvent;
    this._event.screenX = e.screenX;
    this._event.screenY = e.screenY;
    this._event.clientX = e.clientX;
    this._event.clientY = e.clientY;
    this._event.pageX = e.pageX;
    this._event.pageY = e.pageY;
    rect = this._nodeData.node.getBoundingClientRect();
    this._event.clientRect = rect;
    this._event.layerX = e.clientX - rect.left;
    this._event.layerY = e.clientY - rect.top;
    this._event.fractionX = this._event.layerX / rect.width;
    this._event.fractionY = this._event.layerY / rect.height;
    this._event.originalEvent = e;
  };

  _Listener.prototype.withNoKeys = function() {
    if (this._locked) {
      throw Error("You can only set key combos on the same tick this listener was created");
    }
    if (this._hasCombo) {
      throw Error("Keyboard combo is already set on this event listener");
    }
    this._comboSatisfies = false;
    this._hasCombo = true;
    this._keyBinding = this._kilidScope.on('').onStart((function(_this) {
      return function() {
        if (_this._comboSatisfies) {
          return;
        }
        _this._comboSatisfies = true;
        return _this._startCombo();
      };
    })(this)).onEnd((function(_this) {
      return function() {
        if (!_this._comboSatisfies) {
          return;
        }
        _this._comboSatisfies = false;
        return _this._endCombo();
      };
    })(this));
    return this;
  };

  _Listener.prototype.withKeys = function(combo) {
    if (this._locked) {
      throw Error("You can only set key combos on the same tick this listener was created");
    }
    if (this._hasCombo) {
      throw Error("Keyboard combo is already set on this event listener");
    }
    this._comboSatisfies = false;
    this._hasCombo = true;
    combo = String(combo);
    if (typeof combo !== 'string') {
      throw Error("Bad combo '" + combo + "'");
    }
    this._keyBinding = this._kilidScope.on(combo).beExclusive().onStart((function(_this) {
      return function() {
        if (_this._comboSatisfies) {
          return;
        }
        _this._comboSatisfies = true;
        return _this._startCombo();
      };
    })(this)).onEnd((function(_this) {
      return function() {
        if (!_this._comboSatisfies) {
          return;
        }
        _this._comboSatisfies = false;
        return _this._endCombo();
      };
    })(this));
    return this;
  };

  _Listener.prototype._startCombo = function() {};

  _Listener.prototype._endCombo = function() {};

  _Listener.prototype.detach = function() {
    if (this._keyBinding != null) {
      this._keyBinding.detach();
    }
  };

  return _Listener;

})();

},{}],143:[function(require,module,exports){
var ClickListener, _Listener,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Listener = require('../_Listener');

module.exports = ClickListener = (function(_super) {
  __extends(ClickListener, _super);

  function ClickListener(_manager, _nodeData, args) {
    this._manager = _manager;
    this._nodeData = _nodeData;
    this._downCallback = null;
    this._upCallback = null;
    this._cancelCallback = null;
    this._doneCallback = null;
    this._active = false;
    this._repeats = 1;
    this._lastRepeatCheckTimeout = null;
    this._startPageX = 0;
    this._startPageY = 0;
    ClickListener.__super__.constructor.apply(this, arguments);
    if (args[0] instanceof Function) {
      this.onDone(args[0]);
    }
    this._event.cancel = (function(_this) {
      return function() {
        return _this._cancel();
      };
    })(this);
  }

  ClickListener.prototype.onDown = function(cb) {
    this._downCallback = cb;
    return this;
  };

  ClickListener.prototype.onUp = function(cb) {
    this._upCallback = cb;
    return this;
  };

  ClickListener.prototype.onCancel = function(cb) {
    this._cancelCallback = cb;
    return this;
  };

  ClickListener.prototype.onDone = function(cb) {
    this._doneCallback = cb;
  };

  ClickListener.prototype.repeatedBy = function(n) {
    if (this._locked) {
      throw Error("Cannot call repeat when the listener is already set up");
    }
    this._repeats = parseInt(n);
    if (!Number.isFinite(this._repeats)) {
      throw Error("Invalid number for repeat");
    }
    return this;
  };

  ClickListener.prototype._endCombo = function() {
    this._cancel();
  };

  ClickListener.prototype._handleMouseMove = function(e) {
    if (!this.enabled) {
      return;
    }
    if (!this._active) {
      throw Error("called _handleMouseMove when inactive");
    }
    if (Math.abs(Math.abs(e.pageX) - Math.abs(this._startPageX)) > 5 || Math.abs(Math.abs(e.pageY) - Math.abs(this._startPageY)) > 5) {
      this._cancel();
    }
  };

  ClickListener.prototype._cancel = function() {
    if (this._active) {
      this._active = false;
      this._manager._removeListenerFromActiveListenersList(this);
      if (this._cancelCallback) {
        this._cancelCallback(this._event);
      }
    }
  };

  ClickListener.prototype._handleMouseDown = function(e) {
    if (!this.enabled) {
      return;
    }
    this._lastReceivedMouseEvent = e;
    if (!this._active) {
      if (!this._comboSatisfies) {
        return;
      }
      this._active = true;
      this._manager._addListenerToActiveListenersList(this);
      this._startPageX = e.pageX;
      this._startPageY = e.pageY;
    }
    this._modifyEvent();
    if (this._downCallback != null) {
      this._downCallback(this._event);
    }
    if (this._repeats > 1) {
      if (this._lastRepeatCheckTimeout != null) {
        clearTimeout(this._lastRepeatCheckTimeout);
      }
      this._lastRepeatCheckTimeout = setTimeout((function(_this) {
        return function() {
          return _this._cancel();
        };
      })(this), 300);
    }
  };

  ClickListener.prototype._handleMouseUp = function(e) {
    if (!(this._active && this.enabled)) {
      return;
    }
    this._lastReceivedMouseEvent = e;
    this._modifyEvent();
    this._event.repeats = e.detail;
    if (this._upCallback != null) {
      this._upCallback(this._event);
    }
    if (e.detail >= this._repeats) {
      this._manager._removeListenerFromActiveListenersList(this);
      this._active = false;
      if (this._doneCallback != null) {
        this._doneCallback(this._event);
      }
      clearTimeout(this._lastRepeatCheckTimeout);
    }
  };

  ClickListener.prototype._modifyEvent = function() {
    ClickListener.__super__._modifyEvent.apply(this, arguments);
    this._lastReceivedMouseEvent.preventDefault();
  };

  ClickListener.prototype.detach = function() {
    this._cancel();
    ClickListener.__super__.detach.apply(this, arguments);
  };

  ClickListener.prototype.disable = function() {
    ClickListener.__super__.disable.apply(this, arguments);
    this._cancel();
    return this;
  };

  return ClickListener;

})(_Listener);

},{"../_Listener":142}],144:[function(require,module,exports){
var DragListener, _Listener,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Listener = require('../_Listener');

module.exports = DragListener = (function(_super) {
  __extends(DragListener, _super);

  function DragListener(_manager, _nodeData) {
    this._manager = _manager;
    this._nodeData = _nodeData;
    this._downCallback = null;
    this._upCallback = null;
    this._cancelCallback = null;
    this._dragCallback = null;
    this._startPageX = 0;
    this._startPageY = 0;
    this._lastPageX = 0;
    this._lastPageY = 0;
    this._mightBe = false;
    DragListener.__super__.constructor.apply(this, arguments);
    this._event.cancel = (function(_this) {
      return function() {
        return _this._cancel();
      };
    })(this);
  }

  DragListener.prototype._modifyEvent = function() {
    DragListener.__super__._modifyEvent.apply(this, arguments);
    this._lastReceivedMouseEvent.preventDefault();
    this._event.absX = this._event.pageX - this._startPageX;
    this._event.absY = this._event.pageY - this._startPageY;
    this._event.relX = this._event.pageX - this._lastPageX;
    this._event.relY = this._event.pageY - this._lastPageY;
    this._lastPageX = this._event.pageX;
    this._lastPageY = this._event.pageY;
  };

  DragListener.prototype.onDown = function(cb) {
    this._downCallback = cb;
    return this;
  };

  DragListener.prototype.onUp = function(cb) {
    this._upCallback = cb;
    return this;
  };

  DragListener.prototype.onCancel = function(cb) {
    this._cancelCallback = cb;
    return this;
  };

  DragListener.prototype.onDrag = function(cb) {
    this._dragCallback = cb;
    return this;
  };

  DragListener.prototype._endCombo = function() {
    this._cancel();
  };

  DragListener.prototype._cancel = function() {
    if (this._mightBe) {
      this._end();
      if (this._cancelCallback != null) {
        this._cancelCallback(this._event);
      }
    }
  };

  DragListener.prototype._handleMouseDown = function(e) {
    if (!this.enabled) {
      return;
    }
    this._lastReceivedMouseEvent = e;
    if (!this._comboSatisfies) {
      return;
    }
    this._mightBe = true;
    this._manager._addListenerToActiveListenersList(this);
    this._startPageX = e.pageX;
    this._startPageY = e.pageY;
    this._lastPageX = e.pageX;
    this._lastPageY = e.pageY;
    this._modifyEvent();
    if (this._downCallback != null) {
      this._downCallback(this._event);
    }
  };

  DragListener.prototype._handleMouseUp = function(e) {
    if (!(this._mightBe && this.enabled)) {
      return;
    }
    this._lastReceivedMouseEvent = e;
    this._modifyEvent();
    if (this._upCallback != null) {
      this._upCallback(this._event);
    }
    this._end();
  };

  DragListener.prototype._handleMouseMove = function(e) {
    if (!(this._mightBe && this.enabled)) {
      return;
    }
    this._lastReceivedMouseEvent = e;
    this._modifyEvent();
    if (this._dragCallback != null) {
      this._dragCallback(this._event);
    }
  };

  DragListener.prototype.detach = function() {
    this._cancel();
    DragListener.__super__.detach.apply(this, arguments);
  };

  DragListener.prototype.disable = function() {
    DragListener.__super__.disable.apply(this, arguments);
    this._cancel();
    return this;
  };

  DragListener.prototype._end = function() {
    this._mightBe = false;
    this._manager._removeListenerFromActiveListenersList(this);
  };

  return DragListener;

})(_Listener);

},{"../_Listener":142}],145:[function(require,module,exports){
var HoverListener, _Listener,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Listener = require('../_Listener');

module.exports = HoverListener = (function(_super) {
  __extends(HoverListener, _super);

  function HoverListener(_manager, _nodeData) {
    this._manager = _manager;
    this._nodeData = _nodeData;
    HoverListener.__super__.constructor.apply(this, arguments);
    this._mouseIsOverNode = false;
    this._enterCallback = null;
    this._moveCallback = null;
    this._leaveCallback = null;
    this._lastReceivedMouseEvent = null;
  }

  HoverListener.prototype._startCombo = function() {
    if (this._mouseIsOverNode) {
      this._enter();
    }
  };

  HoverListener.prototype._endCombo = function() {
    if (this._mouseIsOverNode) {
      this._leave();
    }
  };

  HoverListener.prototype._enter = function() {
    this._modifyEvent();
    if (this._enterCallback != null) {
      this._enterCallback(this._event);
    }
  };

  HoverListener.prototype._move = function() {
    this._modifyEvent();
    if (this._moveCallback != null) {
      this._moveCallback(this._event);
    }
  };

  HoverListener.prototype._leave = function() {
    this._modifyEvent();
    if (this._leaveCallback != null) {
      this._leaveCallback(this._event);
    }
  };

  HoverListener.prototype._checkIfShouldLeave = function(e, ancestors) {
    if (!this.enabled) {
      return;
    }
    this._lastReceivedMouseEvent = e;
    if (!this._mouseIsOverNode) {
      throw Error("called _checkIfShouldLeave() when listener is not active");
    }
    if (ancestors.indexOf(this._nodeData) === -1) {
      this._deactivate();
      if (this._comboSatisfies) {
        this._leave();
      }
    }
  };

  HoverListener.prototype._handleMouseMove = function(e) {
    if (!this.enabled) {
      return;
    }
    this._lastReceivedMouseEvent = e;
    if (this._mouseIsOverNode) {
      if (this._comboSatisfies) {
        this._move();
      }
    } else {
      this._activate();
      if (this._comboSatisfies) {
        this._enter();
      }
    }
  };

  HoverListener.prototype._activate = function() {
    if (this._mouseIsOverNode) {
      throw Error("Cannot call _activate when listener is already active");
    }
    this._mouseIsOverNode = true;
    this._manager._addListenerToActiveListenersList(this);
  };

  HoverListener.prototype._deactivate = function() {
    if (!this._mouseIsOverNode) {
      throw Error("Cannot call _deactivate when listener is not active");
    }
    this._mouseIsOverNode = false;
    this._manager._removeListenerFromActiveListenersList(this);
  };

  HoverListener.prototype.onEnter = function(cb) {
    this._enterCallback = cb;
    return this;
  };

  HoverListener.prototype.onMove = function(cb) {
    this._moveCallback = cb;
    return this;
  };

  HoverListener.prototype.onLeave = function(cb) {
    this._leaveCallback = cb;
    return this;
  };

  HoverListener.prototype.detach = function() {
    if (this._mouseIsOverNode && this._comboSatisfies) {
      this._leave();
    }
    HoverListener.__super__.detach.apply(this, arguments);
  };

  HoverListener.prototype.disable = function() {
    HoverListener.__super__.disable.apply(this, arguments);
    if (this._mouseIsOverNode && this._comboSatisfies) {
      this._leave();
    }
    return this;
  };

  return HoverListener;

})(_Listener);

},{"../_Listener":142}],146:[function(require,module,exports){
var WheelListener, _Listener,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Listener = require('../_Listener');

module.exports = WheelListener = (function(_super) {
  __extends(WheelListener, _super);

  function WheelListener(_manager, _nodeData) {
    this._manager = _manager;
    this._nodeData = _nodeData;
    WheelListener.__super__.constructor.apply(this, arguments);
    this._callback = null;
    this._preventDefault = true;
  }

  WheelListener.prototype.preventDefault = function() {
    return this._preventDefault = true;
  };

  WheelListener.prototype.allowDefault = function() {
    return this._preventDefault = false;
  };

  WheelListener.prototype.onWheel = function(cb) {
    this._callback = cb;
    return this;
  };

  WheelListener.prototype._modifyEvent = function() {
    var e;
    WheelListener.__super__._modifyEvent.apply(this, arguments);
    e = this._lastReceivedMouseEvent;
    this._event.delta = e.wheelDelta;
    this._event.deltaX = e.wheelDeltaX;
    return this._event.deltaY = e.wheelDeltaY;
  };

  WheelListener.prototype._handleMouseWheel = function(e) {
    if (!this.enabled) {
      return;
    }
    this._lastReceivedMouseEvent = e;
    if (!this._comboSatisfies) {
      return;
    }
    if (this._preventDefault) {
      e.preventDefault();
    }
    this._modifyEvent();
    if (this._callback != null) {
      this._callback(this._event);
    }
  };

  return WheelListener;

})(_Listener);

},{"../_Listener":142}],147:[function(require,module,exports){
/*! Socket.IO.js build:0.9.16, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */

var io = ('undefined' === typeof module ? {} : module.exports);
(function() {

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, global) {

  /**
   * IO namespace.
   *
   * @namespace
   */

  var io = exports;

  /**
   * Socket.IO version
   *
   * @api public
   */

  io.version = '0.9.16';

  /**
   * Protocol implemented.
   *
   * @api public
   */

  io.protocol = 1;

  /**
   * Available transports, these will be populated with the available transports
   *
   * @api public
   */

  io.transports = [];

  /**
   * Keep track of jsonp callbacks.
   *
   * @api private
   */

  io.j = [];

  /**
   * Keep track of our io.Sockets
   *
   * @api private
   */
  io.sockets = {};


  /**
   * Manages connections to hosts.
   *
   * @param {String} uri
   * @Param {Boolean} force creation of new socket (defaults to false)
   * @api public
   */

  io.connect = function (host, details) {
    var uri = io.util.parseUri(host)
      , uuri
      , socket;

    if (global && global.location) {
      uri.protocol = uri.protocol || global.location.protocol.slice(0, -1);
      uri.host = uri.host || (global.document
        ? global.document.domain : global.location.hostname);
      uri.port = uri.port || global.location.port;
    }

    uuri = io.util.uniqueUri(uri);

    var options = {
        host: uri.host
      , secure: 'https' == uri.protocol
      , port: uri.port || ('https' == uri.protocol ? 443 : 80)
      , query: uri.query || ''
    };

    io.util.merge(options, details);

    if (options['force new connection'] || !io.sockets[uuri]) {
      socket = new io.Socket(options);
    }

    if (!options['force new connection'] && socket) {
      io.sockets[uuri] = socket;
    }

    socket = socket || io.sockets[uuri];

    // if path is different from '' or /
    return socket.of(uri.path.length > 1 ? uri.path : '');
  };

})('object' === typeof module ? module.exports : (this.io = {}), this);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, global) {

  /**
   * Utilities namespace.
   *
   * @namespace
   */

  var util = exports.util = {};

  /**
   * Parses an URI
   *
   * @author Steven Levithan <stevenlevithan.com> (MIT license)
   * @api public
   */

  var re = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;

  var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password',
               'host', 'port', 'relative', 'path', 'directory', 'file', 'query',
               'anchor'];

  util.parseUri = function (str) {
    var m = re.exec(str || '')
      , uri = {}
      , i = 14;

    while (i--) {
      uri[parts[i]] = m[i] || '';
    }

    return uri;
  };

  /**
   * Produces a unique url that identifies a Socket.IO connection.
   *
   * @param {Object} uri
   * @api public
   */

  util.uniqueUri = function (uri) {
    var protocol = uri.protocol
      , host = uri.host
      , port = uri.port;

    if ('document' in global) {
      host = host || document.domain;
      port = port || (protocol == 'https'
        && document.location.protocol !== 'https:' ? 443 : document.location.port);
    } else {
      host = host || 'localhost';

      if (!port && protocol == 'https') {
        port = 443;
      }
    }

    return (protocol || 'http') + '://' + host + ':' + (port || 80);
  };

  /**
   * Mergest 2 query strings in to once unique query string
   *
   * @param {String} base
   * @param {String} addition
   * @api public
   */

  util.query = function (base, addition) {
    var query = util.chunkQuery(base || '')
      , components = [];

    util.merge(query, util.chunkQuery(addition || ''));
    for (var part in query) {
      if (query.hasOwnProperty(part)) {
        components.push(part + '=' + query[part]);
      }
    }

    return components.length ? '?' + components.join('&') : '';
  };

  /**
   * Transforms a querystring in to an object
   *
   * @param {String} qs
   * @api public
   */

  util.chunkQuery = function (qs) {
    var query = {}
      , params = qs.split('&')
      , i = 0
      , l = params.length
      , kv;

    for (; i < l; ++i) {
      kv = params[i].split('=');
      if (kv[0]) {
        query[kv[0]] = kv[1];
      }
    }

    return query;
  };

  /**
   * Executes the given function when the page is loaded.
   *
   *     io.util.load(function () { console.log('page loaded'); });
   *
   * @param {Function} fn
   * @api public
   */

  var pageLoaded = false;

  util.load = function (fn) {
    if ('document' in global && document.readyState === 'complete' || pageLoaded) {
      return fn();
    }

    util.on(global, 'load', fn, false);
  };

  /**
   * Adds an event.
   *
   * @api private
   */

  util.on = function (element, event, fn, capture) {
    if (element.attachEvent) {
      element.attachEvent('on' + event, fn);
    } else if (element.addEventListener) {
      element.addEventListener(event, fn, capture);
    }
  };

  /**
   * Generates the correct `XMLHttpRequest` for regular and cross domain requests.
   *
   * @param {Boolean} [xdomain] Create a request that can be used cross domain.
   * @returns {XMLHttpRequest|false} If we can create a XMLHttpRequest.
   * @api private
   */

  util.request = function (xdomain) {

    if (xdomain && 'undefined' != typeof XDomainRequest && !util.ua.hasCORS) {
      return new XDomainRequest();
    }

    if ('undefined' != typeof XMLHttpRequest && (!xdomain || util.ua.hasCORS)) {
      return new XMLHttpRequest();
    }

    if (!xdomain) {
      try {
        return new window[(['Active'].concat('Object').join('X'))]('Microsoft.XMLHTTP');
      } catch(e) { }
    }

    return null;
  };

  /**
   * XHR based transport constructor.
   *
   * @constructor
   * @api public
   */

  /**
   * Change the internal pageLoaded value.
   */

  if ('undefined' != typeof window) {
    util.load(function () {
      pageLoaded = true;
    });
  }

  /**
   * Defers a function to ensure a spinner is not displayed by the browser
   *
   * @param {Function} fn
   * @api public
   */

  util.defer = function (fn) {
    if (!util.ua.webkit || 'undefined' != typeof importScripts) {
      return fn();
    }

    util.load(function () {
      setTimeout(fn, 100);
    });
  };

  /**
   * Merges two objects.
   *
   * @api public
   */

  util.merge = function merge (target, additional, deep, lastseen) {
    var seen = lastseen || []
      , depth = typeof deep == 'undefined' ? 2 : deep
      , prop;

    for (prop in additional) {
      if (additional.hasOwnProperty(prop) && util.indexOf(seen, prop) < 0) {
        if (typeof target[prop] !== 'object' || !depth) {
          target[prop] = additional[prop];
          seen.push(additional[prop]);
        } else {
          util.merge(target[prop], additional[prop], depth - 1, seen);
        }
      }
    }

    return target;
  };

  /**
   * Merges prototypes from objects
   *
   * @api public
   */

  util.mixin = function (ctor, ctor2) {
    util.merge(ctor.prototype, ctor2.prototype);
  };

  /**
   * Shortcut for prototypical and static inheritance.
   *
   * @api private
   */

  util.inherit = function (ctor, ctor2) {
    function f() {};
    f.prototype = ctor2.prototype;
    ctor.prototype = new f;
  };

  /**
   * Checks if the given object is an Array.
   *
   *     io.util.isArray([]); // true
   *     io.util.isArray({}); // false
   *
   * @param Object obj
   * @api public
   */

  util.isArray = Array.isArray || function (obj) {
    return Object.prototype.toString.call(obj) === '[object Array]';
  };

  /**
   * Intersects values of two arrays into a third
   *
   * @api public
   */

  util.intersect = function (arr, arr2) {
    var ret = []
      , longest = arr.length > arr2.length ? arr : arr2
      , shortest = arr.length > arr2.length ? arr2 : arr;

    for (var i = 0, l = shortest.length; i < l; i++) {
      if (~util.indexOf(longest, shortest[i]))
        ret.push(shortest[i]);
    }

    return ret;
  };

  /**
   * Array indexOf compatibility.
   *
   * @see bit.ly/a5Dxa2
   * @api public
   */

  util.indexOf = function (arr, o, i) {

    for (var j = arr.length, i = i < 0 ? i + j < 0 ? 0 : i + j : i || 0;
         i < j && arr[i] !== o; i++) {}

    return j <= i ? -1 : i;
  };

  /**
   * Converts enumerables to array.
   *
   * @api public
   */

  util.toArray = function (enu) {
    var arr = [];

    for (var i = 0, l = enu.length; i < l; i++)
      arr.push(enu[i]);

    return arr;
  };

  /**
   * UA / engines detection namespace.
   *
   * @namespace
   */

  util.ua = {};

  /**
   * Whether the UA supports CORS for XHR.
   *
   * @api public
   */

  util.ua.hasCORS = 'undefined' != typeof XMLHttpRequest && (function () {
    try {
      var a = new XMLHttpRequest();
    } catch (e) {
      return false;
    }

    return a.withCredentials != undefined;
  })();

  /**
   * Detect webkit.
   *
   * @api public
   */

  util.ua.webkit = 'undefined' != typeof navigator
    && /webkit/i.test(navigator.userAgent);

   /**
   * Detect iPad/iPhone/iPod.
   *
   * @api public
   */

  util.ua.iDevice = 'undefined' != typeof navigator
      && /iPad|iPhone|iPod/i.test(navigator.userAgent);

})('undefined' != typeof io ? io : module.exports, this);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Expose constructor.
   */

  exports.EventEmitter = EventEmitter;

  /**
   * Event emitter constructor.
   *
   * @api public.
   */

  function EventEmitter () {};

  /**
   * Adds a listener
   *
   * @api public
   */

  EventEmitter.prototype.on = function (name, fn) {
    if (!this.$events) {
      this.$events = {};
    }

    if (!this.$events[name]) {
      this.$events[name] = fn;
    } else if (io.util.isArray(this.$events[name])) {
      this.$events[name].push(fn);
    } else {
      this.$events[name] = [this.$events[name], fn];
    }

    return this;
  };

  EventEmitter.prototype.addListener = EventEmitter.prototype.on;

  /**
   * Adds a volatile listener.
   *
   * @api public
   */

  EventEmitter.prototype.once = function (name, fn) {
    var self = this;

    function on () {
      self.removeListener(name, on);
      fn.apply(this, arguments);
    };

    on.listener = fn;
    this.on(name, on);

    return this;
  };

  /**
   * Removes a listener.
   *
   * @api public
   */

  EventEmitter.prototype.removeListener = function (name, fn) {
    if (this.$events && this.$events[name]) {
      var list = this.$events[name];

      if (io.util.isArray(list)) {
        var pos = -1;

        for (var i = 0, l = list.length; i < l; i++) {
          if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {
            pos = i;
            break;
          }
        }

        if (pos < 0) {
          return this;
        }

        list.splice(pos, 1);

        if (!list.length) {
          delete this.$events[name];
        }
      } else if (list === fn || (list.listener && list.listener === fn)) {
        delete this.$events[name];
      }
    }

    return this;
  };

  /**
   * Removes all listeners for an event.
   *
   * @api public
   */

  EventEmitter.prototype.removeAllListeners = function (name) {
    if (name === undefined) {
      this.$events = {};
      return this;
    }

    if (this.$events && this.$events[name]) {
      this.$events[name] = null;
    }

    return this;
  };

  /**
   * Gets all listeners for a certain event.
   *
   * @api publci
   */

  EventEmitter.prototype.listeners = function (name) {
    if (!this.$events) {
      this.$events = {};
    }

    if (!this.$events[name]) {
      this.$events[name] = [];
    }

    if (!io.util.isArray(this.$events[name])) {
      this.$events[name] = [this.$events[name]];
    }

    return this.$events[name];
  };

  /**
   * Emits an event.
   *
   * @api public
   */

  EventEmitter.prototype.emit = function (name) {
    if (!this.$events) {
      return false;
    }

    var handler = this.$events[name];

    if (!handler) {
      return false;
    }

    var args = Array.prototype.slice.call(arguments, 1);

    if ('function' == typeof handler) {
      handler.apply(this, args);
    } else if (io.util.isArray(handler)) {
      var listeners = handler.slice();

      for (var i = 0, l = listeners.length; i < l; i++) {
        listeners[i].apply(this, args);
      }
    } else {
      return false;
    }

    return true;
  };

})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

/**
 * Based on JSON2 (http://www.JSON.org/js.html).
 */

(function (exports, nativeJSON) {
  "use strict";

  // use native JSON if it's available
  if (nativeJSON && nativeJSON.parse){
    return exports.JSON = {
      parse: nativeJSON.parse
    , stringify: nativeJSON.stringify
    };
  }

  var JSON = exports.JSON = {};

  function f(n) {
      // Format integers to have at least two digits.
      return n < 10 ? '0' + n : n;
  }

  function date(d, key) {
    return isFinite(d.valueOf()) ?
        d.getUTCFullYear()     + '-' +
        f(d.getUTCMonth() + 1) + '-' +
        f(d.getUTCDate())      + 'T' +
        f(d.getUTCHours())     + ':' +
        f(d.getUTCMinutes())   + ':' +
        f(d.getUTCSeconds())   + 'Z' : null;
  };

  var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
      escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
      gap,
      indent,
      meta = {    // table of character substitutions
          '\b': '\\b',
          '\t': '\\t',
          '\n': '\\n',
          '\f': '\\f',
          '\r': '\\r',
          '"' : '\\"',
          '\\': '\\\\'
      },
      rep;


  function quote(string) {

// If the string contains no control characters, no quote characters, and no
// backslash characters, then we can safely slap some quotes around it.
// Otherwise we must also replace the offending characters with safe escape
// sequences.

      escapable.lastIndex = 0;
      return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
          var c = meta[a];
          return typeof c === 'string' ? c :
              '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
      }) + '"' : '"' + string + '"';
  }


  function str(key, holder) {

// Produce a string from holder[key].

      var i,          // The loop counter.
          k,          // The member key.
          v,          // The member value.
          length,
          mind = gap,
          partial,
          value = holder[key];

// If the value has a toJSON method, call it to obtain a replacement value.

      if (value instanceof Date) {
          value = date(key);
      }

// If we were called with a replacer function, then call the replacer to
// obtain a replacement value.

      if (typeof rep === 'function') {
          value = rep.call(holder, key, value);
      }

// What happens next depends on the value's type.

      switch (typeof value) {
      case 'string':
          return quote(value);

      case 'number':

// JSON numbers must be finite. Encode non-finite numbers as null.

          return isFinite(value) ? String(value) : 'null';

      case 'boolean':
      case 'null':

// If the value is a boolean or null, convert it to a string. Note:
// typeof null does not produce 'null'. The case is included here in
// the remote chance that this gets fixed someday.

          return String(value);

// If the type is 'object', we might be dealing with an object or an array or
// null.

      case 'object':

// Due to a specification blunder in ECMAScript, typeof null is 'object',
// so watch out for that case.

          if (!value) {
              return 'null';
          }

// Make an array to hold the partial results of stringifying this object value.

          gap += indent;
          partial = [];

// Is the value an array?

          if (Object.prototype.toString.apply(value) === '[object Array]') {

// The value is an array. Stringify every element. Use null as a placeholder
// for non-JSON values.

              length = value.length;
              for (i = 0; i < length; i += 1) {
                  partial[i] = str(i, value) || 'null';
              }

// Join all of the elements together, separated with commas, and wrap them in
// brackets.

              v = partial.length === 0 ? '[]' : gap ?
                  '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']' :
                  '[' + partial.join(',') + ']';
              gap = mind;
              return v;
          }

// If the replacer is an array, use it to select the members to be stringified.

          if (rep && typeof rep === 'object') {
              length = rep.length;
              for (i = 0; i < length; i += 1) {
                  if (typeof rep[i] === 'string') {
                      k = rep[i];
                      v = str(k, value);
                      if (v) {
                          partial.push(quote(k) + (gap ? ': ' : ':') + v);
                      }
                  }
              }
          } else {

// Otherwise, iterate through all of the keys in the object.

              for (k in value) {
                  if (Object.prototype.hasOwnProperty.call(value, k)) {
                      v = str(k, value);
                      if (v) {
                          partial.push(quote(k) + (gap ? ': ' : ':') + v);
                      }
                  }
              }
          }

// Join all of the member texts together, separated with commas,
// and wrap them in braces.

          v = partial.length === 0 ? '{}' : gap ?
              '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}' :
              '{' + partial.join(',') + '}';
          gap = mind;
          return v;
      }
  }

// If the JSON object does not yet have a stringify method, give it one.

  JSON.stringify = function (value, replacer, space) {

// The stringify method takes a value and an optional replacer, and an optional
// space parameter, and returns a JSON text. The replacer can be a function
// that can replace values, or an array of strings that will select the keys.
// A default replacer method can be provided. Use of the space parameter can
// produce text that is more easily readable.

      var i;
      gap = '';
      indent = '';

// If the space parameter is a number, make an indent string containing that
// many spaces.

      if (typeof space === 'number') {
          for (i = 0; i < space; i += 1) {
              indent += ' ';
          }

// If the space parameter is a string, it will be used as the indent string.

      } else if (typeof space === 'string') {
          indent = space;
      }

// If there is a replacer, it must be a function or an array.
// Otherwise, throw an error.

      rep = replacer;
      if (replacer && typeof replacer !== 'function' &&
              (typeof replacer !== 'object' ||
              typeof replacer.length !== 'number')) {
          throw new Error('JSON.stringify');
      }

// Make a fake root object containing our value under the key of ''.
// Return the result of stringifying the value.

      return str('', {'': value});
  };

// If the JSON object does not yet have a parse method, give it one.

  JSON.parse = function (text, reviver) {
  // The parse method takes a text and an optional reviver function, and returns
  // a JavaScript value if the text is a valid JSON text.

      var j;

      function walk(holder, key) {

  // The walk method is used to recursively walk the resulting structure so
  // that modifications can be made.

          var k, v, value = holder[key];
          if (value && typeof value === 'object') {
              for (k in value) {
                  if (Object.prototype.hasOwnProperty.call(value, k)) {
                      v = walk(value, k);
                      if (v !== undefined) {
                          value[k] = v;
                      } else {
                          delete value[k];
                      }
                  }
              }
          }
          return reviver.call(holder, key, value);
      }


  // Parsing happens in four stages. In the first stage, we replace certain
  // Unicode characters with escape sequences. JavaScript handles many characters
  // incorrectly, either silently deleting them, or treating them as line endings.

      text = String(text);
      cx.lastIndex = 0;
      if (cx.test(text)) {
          text = text.replace(cx, function (a) {
              return '\\u' +
                  ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
          });
      }

  // In the second stage, we run the text against regular expressions that look
  // for non-JSON patterns. We are especially concerned with '()' and 'new'
  // because they can cause invocation, and '=' because it can cause mutation.
  // But just to be safe, we want to reject all unexpected forms.

  // We split the second stage into 4 regexp operations in order to work around
  // crippling inefficiencies in IE's and Safari's regexp engines. First we
  // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we
  // replace all simple value tokens with ']' characters. Third, we delete all
  // open brackets that follow a colon or comma or that begin the text. Finally,
  // we look to see that the remaining characters are only whitespace or ']' or
  // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.

      if (/^[\],:{}\s]*$/
              .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                  .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                  .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

  // In the third stage we use the eval function to compile the text into a
  // JavaScript structure. The '{' operator is subject to a syntactic ambiguity
  // in JavaScript: it can begin a block or an object literal. We wrap the text
  // in parens to eliminate the ambiguity.

          j = eval('(' + text + ')');

  // In the optional fourth stage, we recursively walk the new structure, passing
  // each name/value pair to a reviver function for possible transformation.

          return typeof reviver === 'function' ?
              walk({'': j}, '') : j;
      }

  // If the text is not JSON parseable, then a SyntaxError is thrown.

      throw new SyntaxError('JSON.parse');
  };

})(
    'undefined' != typeof io ? io : module.exports
  , typeof JSON !== 'undefined' ? JSON : undefined
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Parser namespace.
   *
   * @namespace
   */

  var parser = exports.parser = {};

  /**
   * Packet types.
   */

  var packets = parser.packets = [
      'disconnect'
    , 'connect'
    , 'heartbeat'
    , 'message'
    , 'json'
    , 'event'
    , 'ack'
    , 'error'
    , 'noop'
  ];

  /**
   * Errors reasons.
   */

  var reasons = parser.reasons = [
      'transport not supported'
    , 'client not handshaken'
    , 'unauthorized'
  ];

  /**
   * Errors advice.
   */

  var advice = parser.advice = [
      'reconnect'
  ];

  /**
   * Shortcuts.
   */

  var JSON = io.JSON
    , indexOf = io.util.indexOf;

  /**
   * Encodes a packet.
   *
   * @api private
   */

  parser.encodePacket = function (packet) {
    var type = indexOf(packets, packet.type)
      , id = packet.id || ''
      , endpoint = packet.endpoint || ''
      , ack = packet.ack
      , data = null;

    switch (packet.type) {
      case 'error':
        var reason = packet.reason ? indexOf(reasons, packet.reason) : ''
          , adv = packet.advice ? indexOf(advice, packet.advice) : '';

        if (reason !== '' || adv !== '')
          data = reason + (adv !== '' ? ('+' + adv) : '');

        break;

      case 'message':
        if (packet.data !== '')
          data = packet.data;
        break;

      case 'event':
        var ev = { name: packet.name };

        if (packet.args && packet.args.length) {
          ev.args = packet.args;
        }

        data = JSON.stringify(ev);
        break;

      case 'json':
        data = JSON.stringify(packet.data);
        break;

      case 'connect':
        if (packet.qs)
          data = packet.qs;
        break;

      case 'ack':
        data = packet.ackId
          + (packet.args && packet.args.length
              ? '+' + JSON.stringify(packet.args) : '');
        break;
    }

    // construct packet with required fragments
    var encoded = [
        type
      , id + (ack == 'data' ? '+' : '')
      , endpoint
    ];

    // data fragment is optional
    if (data !== null && data !== undefined)
      encoded.push(data);

    return encoded.join(':');
  };

  /**
   * Encodes multiple messages (payload).
   *
   * @param {Array} messages
   * @api private
   */

  parser.encodePayload = function (packets) {
    var decoded = '';

    if (packets.length == 1)
      return packets[0];

    for (var i = 0, l = packets.length; i < l; i++) {
      var packet = packets[i];
      decoded += '\ufffd' + packet.length + '\ufffd' + packets[i];
    }

    return decoded;
  };

  /**
   * Decodes a packet
   *
   * @api private
   */

  var regexp = /([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;

  parser.decodePacket = function (data) {
    var pieces = data.match(regexp);

    if (!pieces) return {};

    var id = pieces[2] || ''
      , data = pieces[5] || ''
      , packet = {
            type: packets[pieces[1]]
          , endpoint: pieces[4] || ''
        };

    // whether we need to acknowledge the packet
    if (id) {
      packet.id = id;
      if (pieces[3])
        packet.ack = 'data';
      else
        packet.ack = true;
    }

    // handle different packet types
    switch (packet.type) {
      case 'error':
        var pieces = data.split('+');
        packet.reason = reasons[pieces[0]] || '';
        packet.advice = advice[pieces[1]] || '';
        break;

      case 'message':
        packet.data = data || '';
        break;

      case 'event':
        try {
          var opts = JSON.parse(data);
          packet.name = opts.name;
          packet.args = opts.args;
        } catch (e) { }

        packet.args = packet.args || [];
        break;

      case 'json':
        try {
          packet.data = JSON.parse(data);
        } catch (e) { }
        break;

      case 'connect':
        packet.qs = data || '';
        break;

      case 'ack':
        var pieces = data.match(/^([0-9]+)(\+)?(.*)/);
        if (pieces) {
          packet.ackId = pieces[1];
          packet.args = [];

          if (pieces[3]) {
            try {
              packet.args = pieces[3] ? JSON.parse(pieces[3]) : [];
            } catch (e) { }
          }
        }
        break;

      case 'disconnect':
      case 'heartbeat':
        break;
    };

    return packet;
  };

  /**
   * Decodes data payload. Detects multiple messages
   *
   * @return {Array} messages
   * @api public
   */

  parser.decodePayload = function (data) {
    // IE doesn't like data[i] for unicode chars, charAt works fine
    if (data.charAt(0) == '\ufffd') {
      var ret = [];

      for (var i = 1, length = ''; i < data.length; i++) {
        if (data.charAt(i) == '\ufffd') {
          ret.push(parser.decodePacket(data.substr(i + 1).substr(0, length)));
          i += Number(length) + 1;
          length = '';
        } else {
          length += data.charAt(i);
        }
      }

      return ret;
    } else {
      return [parser.decodePacket(data)];
    }
  };

})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Expose constructor.
   */

  exports.Transport = Transport;

  /**
   * This is the transport template for all supported transport methods.
   *
   * @constructor
   * @api public
   */

  function Transport (socket, sessid) {
    this.socket = socket;
    this.sessid = sessid;
  };

  /**
   * Apply EventEmitter mixin.
   */

  io.util.mixin(Transport, io.EventEmitter);


  /**
   * Indicates whether heartbeats is enabled for this transport
   *
   * @api private
   */

  Transport.prototype.heartbeats = function () {
    return true;
  };

  /**
   * Handles the response from the server. When a new response is received
   * it will automatically update the timeout, decode the message and
   * forwards the response to the onMessage function for further processing.
   *
   * @param {String} data Response from the server.
   * @api private
   */

  Transport.prototype.onData = function (data) {
    this.clearCloseTimeout();

    // If the connection in currently open (or in a reopening state) reset the close
    // timeout since we have just received data. This check is necessary so
    // that we don't reset the timeout on an explicitly disconnected connection.
    if (this.socket.connected || this.socket.connecting || this.socket.reconnecting) {
      this.setCloseTimeout();
    }

    if (data !== '') {
      // todo: we should only do decodePayload for xhr transports
      var msgs = io.parser.decodePayload(data);

      if (msgs && msgs.length) {
        for (var i = 0, l = msgs.length; i < l; i++) {
          this.onPacket(msgs[i]);
        }
      }
    }

    return this;
  };

  /**
   * Handles packets.
   *
   * @api private
   */

  Transport.prototype.onPacket = function (packet) {
    this.socket.setHeartbeatTimeout();

    if (packet.type == 'heartbeat') {
      return this.onHeartbeat();
    }

    if (packet.type == 'connect' && packet.endpoint == '') {
      this.onConnect();
    }

    if (packet.type == 'error' && packet.advice == 'reconnect') {
      this.isOpen = false;
    }

    this.socket.onPacket(packet);

    return this;
  };

  /**
   * Sets close timeout
   *
   * @api private
   */

  Transport.prototype.setCloseTimeout = function () {
    if (!this.closeTimeout) {
      var self = this;

      this.closeTimeout = setTimeout(function () {
        self.onDisconnect();
      }, this.socket.closeTimeout);
    }
  };

  /**
   * Called when transport disconnects.
   *
   * @api private
   */

  Transport.prototype.onDisconnect = function () {
    if (this.isOpen) this.close();
    this.clearTimeouts();
    this.socket.onDisconnect();
    return this;
  };

  /**
   * Called when transport connects
   *
   * @api private
   */

  Transport.prototype.onConnect = function () {
    this.socket.onConnect();
    return this;
  };

  /**
   * Clears close timeout
   *
   * @api private
   */

  Transport.prototype.clearCloseTimeout = function () {
    if (this.closeTimeout) {
      clearTimeout(this.closeTimeout);
      this.closeTimeout = null;
    }
  };

  /**
   * Clear timeouts
   *
   * @api private
   */

  Transport.prototype.clearTimeouts = function () {
    this.clearCloseTimeout();

    if (this.reopenTimeout) {
      clearTimeout(this.reopenTimeout);
    }
  };

  /**
   * Sends a packet
   *
   * @param {Object} packet object.
   * @api private
   */

  Transport.prototype.packet = function (packet) {
    this.send(io.parser.encodePacket(packet));
  };

  /**
   * Send the received heartbeat message back to server. So the server
   * knows we are still connected.
   *
   * @param {String} heartbeat Heartbeat response from the server.
   * @api private
   */

  Transport.prototype.onHeartbeat = function (heartbeat) {
    this.packet({ type: 'heartbeat' });
  };

  /**
   * Called when the transport opens.
   *
   * @api private
   */

  Transport.prototype.onOpen = function () {
    this.isOpen = true;
    this.clearCloseTimeout();
    this.socket.onOpen();
  };

  /**
   * Notifies the base when the connection with the Socket.IO server
   * has been disconnected.
   *
   * @api private
   */

  Transport.prototype.onClose = function () {
    var self = this;

    /* FIXME: reopen delay causing a infinit loop
    this.reopenTimeout = setTimeout(function () {
      self.open();
    }, this.socket.options['reopen delay']);*/

    this.isOpen = false;
    this.socket.onClose();
    this.onDisconnect();
  };

  /**
   * Generates a connection url based on the Socket.IO URL Protocol.
   * See <https://github.com/learnboost/socket.io-node/> for more details.
   *
   * @returns {String} Connection url
   * @api private
   */

  Transport.prototype.prepareUrl = function () {
    var options = this.socket.options;

    return this.scheme() + '://'
      + options.host + ':' + options.port + '/'
      + options.resource + '/' + io.protocol
      + '/' + this.name + '/' + this.sessid;
  };

  /**
   * Checks if the transport is ready to start a connection.
   *
   * @param {Socket} socket The socket instance that needs a transport
   * @param {Function} fn The callback
   * @api private
   */

  Transport.prototype.ready = function (socket, fn) {
    fn.call(this);
  };
})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io, global) {

  /**
   * Expose constructor.
   */

  exports.Socket = Socket;

  /**
   * Create a new `Socket.IO client` which can establish a persistent
   * connection with a Socket.IO enabled server.
   *
   * @api public
   */

  function Socket (options) {
    this.options = {
        port: 80
      , secure: false
      , document: 'document' in global ? document : false
      , resource: 'socket.io'
      , transports: io.transports
      , 'connect timeout': 10000
      , 'try multiple transports': true
      , 'reconnect': true
      , 'reconnection delay': 500
      , 'reconnection limit': Infinity
      , 'reopen delay': 3000
      , 'max reconnection attempts': 10
      , 'sync disconnect on unload': false
      , 'auto connect': true
      , 'flash policy port': 10843
      , 'manualFlush': false
    };

    io.util.merge(this.options, options);

    this.connected = false;
    this.open = false;
    this.connecting = false;
    this.reconnecting = false;
    this.namespaces = {};
    this.buffer = [];
    this.doBuffer = false;

    if (this.options['sync disconnect on unload'] &&
        (!this.isXDomain() || io.util.ua.hasCORS)) {
      var self = this;
      io.util.on(global, 'beforeunload', function () {
        self.disconnectSync();
      }, false);
    }

    if (this.options['auto connect']) {
      this.connect();
    }
};

  /**
   * Apply EventEmitter mixin.
   */

  io.util.mixin(Socket, io.EventEmitter);

  /**
   * Returns a namespace listener/emitter for this socket
   *
   * @api public
   */

  Socket.prototype.of = function (name) {
    if (!this.namespaces[name]) {
      this.namespaces[name] = new io.SocketNamespace(this, name);

      if (name !== '') {
        this.namespaces[name].packet({ type: 'connect' });
      }
    }

    return this.namespaces[name];
  };

  /**
   * Emits the given event to the Socket and all namespaces
   *
   * @api private
   */

  Socket.prototype.publish = function () {
    this.emit.apply(this, arguments);

    var nsp;

    for (var i in this.namespaces) {
      if (this.namespaces.hasOwnProperty(i)) {
        nsp = this.of(i);
        nsp.$emit.apply(nsp, arguments);
      }
    }
  };

  /**
   * Performs the handshake
   *
   * @api private
   */

  function empty () { };

  Socket.prototype.handshake = function (fn) {
    var self = this
      , options = this.options;

    function complete (data) {
      if (data instanceof Error) {
        self.connecting = false;
        self.onError(data.message);
      } else {
        fn.apply(null, data.split(':'));
      }
    };

    var url = [
          'http' + (options.secure ? 's' : '') + ':/'
        , options.host + ':' + options.port
        , options.resource
        , io.protocol
        , io.util.query(this.options.query, 't=' + +new Date)
      ].join('/');

    if (this.isXDomain() && !io.util.ua.hasCORS) {
      var insertAt = document.getElementsByTagName('script')[0]
        , script = document.createElement('script');

      script.src = url + '&jsonp=' + io.j.length;
      insertAt.parentNode.insertBefore(script, insertAt);

      io.j.push(function (data) {
        complete(data);
        script.parentNode.removeChild(script);
      });
    } else {
      var xhr = io.util.request();

      xhr.open('GET', url, true);
      if (this.isXDomain()) {
        xhr.withCredentials = true;
      }
      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
          xhr.onreadystatechange = empty;

          if (xhr.status == 200) {
            complete(xhr.responseText);
          } else if (xhr.status == 403) {
            self.onError(xhr.responseText);
          } else {
            self.connecting = false;            
            !self.reconnecting && self.onError(xhr.responseText);
          }
        }
      };
      xhr.send(null);
    }
  };

  /**
   * Find an available transport based on the options supplied in the constructor.
   *
   * @api private
   */

  Socket.prototype.getTransport = function (override) {
    var transports = override || this.transports, match;

    for (var i = 0, transport; transport = transports[i]; i++) {
      if (io.Transport[transport]
        && io.Transport[transport].check(this)
        && (!this.isXDomain() || io.Transport[transport].xdomainCheck(this))) {
        return new io.Transport[transport](this, this.sessionid);
      }
    }

    return null;
  };

  /**
   * Connects to the server.
   *
   * @param {Function} [fn] Callback.
   * @returns {io.Socket}
   * @api public
   */

  Socket.prototype.connect = function (fn) {
    if (this.connecting) {
      return this;
    }

    var self = this;
    self.connecting = true;
    
    this.handshake(function (sid, heartbeat, close, transports) {
      self.sessionid = sid;
      self.closeTimeout = close * 1000;
      self.heartbeatTimeout = heartbeat * 1000;
      if(!self.transports)
          self.transports = self.origTransports = (transports ? io.util.intersect(
              transports.split(',')
            , self.options.transports
          ) : self.options.transports);

      self.setHeartbeatTimeout();

      function connect (transports){
        if (self.transport) self.transport.clearTimeouts();

        self.transport = self.getTransport(transports);
        if (!self.transport) return self.publish('connect_failed');

        // once the transport is ready
        self.transport.ready(self, function () {
          self.connecting = true;
          self.publish('connecting', self.transport.name);
          self.transport.open();

          if (self.options['connect timeout']) {
            self.connectTimeoutTimer = setTimeout(function () {
              if (!self.connected) {
                self.connecting = false;

                if (self.options['try multiple transports']) {
                  var remaining = self.transports;

                  while (remaining.length > 0 && remaining.splice(0,1)[0] !=
                         self.transport.name) {}

                    if (remaining.length){
                      connect(remaining);
                    } else {
                      self.publish('connect_failed');
                    }
                }
              }
            }, self.options['connect timeout']);
          }
        });
      }

      connect(self.transports);

      self.once('connect', function (){
        clearTimeout(self.connectTimeoutTimer);

        fn && typeof fn == 'function' && fn();
      });
    });

    return this;
  };

  /**
   * Clears and sets a new heartbeat timeout using the value given by the
   * server during the handshake.
   *
   * @api private
   */

  Socket.prototype.setHeartbeatTimeout = function () {
    clearTimeout(this.heartbeatTimeoutTimer);
    if(this.transport && !this.transport.heartbeats()) return;

    var self = this;
    this.heartbeatTimeoutTimer = setTimeout(function () {
      self.transport.onClose();
    }, this.heartbeatTimeout);
  };

  /**
   * Sends a message.
   *
   * @param {Object} data packet.
   * @returns {io.Socket}
   * @api public
   */

  Socket.prototype.packet = function (data) {
    if (this.connected && !this.doBuffer) {
      this.transport.packet(data);
    } else {
      this.buffer.push(data);
    }

    return this;
  };

  /**
   * Sets buffer state
   *
   * @api private
   */

  Socket.prototype.setBuffer = function (v) {
    this.doBuffer = v;

    if (!v && this.connected && this.buffer.length) {
      if (!this.options['manualFlush']) {
        this.flushBuffer();
      }
    }
  };

  /**
   * Flushes the buffer data over the wire.
   * To be invoked manually when 'manualFlush' is set to true.
   *
   * @api public
   */

  Socket.prototype.flushBuffer = function() {
    this.transport.payload(this.buffer);
    this.buffer = [];
  };
  

  /**
   * Disconnect the established connect.
   *
   * @returns {io.Socket}
   * @api public
   */

  Socket.prototype.disconnect = function () {
    if (this.connected || this.connecting) {
      if (this.open) {
        this.of('').packet({ type: 'disconnect' });
      }

      // handle disconnection immediately
      this.onDisconnect('booted');
    }

    return this;
  };

  /**
   * Disconnects the socket with a sync XHR.
   *
   * @api private
   */

  Socket.prototype.disconnectSync = function () {
    // ensure disconnection
    var xhr = io.util.request();
    var uri = [
        'http' + (this.options.secure ? 's' : '') + ':/'
      , this.options.host + ':' + this.options.port
      , this.options.resource
      , io.protocol
      , ''
      , this.sessionid
    ].join('/') + '/?disconnect=1';

    xhr.open('GET', uri, false);
    xhr.send(null);

    // handle disconnection immediately
    this.onDisconnect('booted');
  };

  /**
   * Check if we need to use cross domain enabled transports. Cross domain would
   * be a different port or different domain name.
   *
   * @returns {Boolean}
   * @api private
   */

  Socket.prototype.isXDomain = function () {

    var port = global.location.port ||
      ('https:' == global.location.protocol ? 443 : 80);

    return this.options.host !== global.location.hostname 
      || this.options.port != port;
  };

  /**
   * Called upon handshake.
   *
   * @api private
   */

  Socket.prototype.onConnect = function () {
    if (!this.connected) {
      this.connected = true;
      this.connecting = false;
      if (!this.doBuffer) {
        // make sure to flush the buffer
        this.setBuffer(false);
      }
      this.emit('connect');
    }
  };

  /**
   * Called when the transport opens
   *
   * @api private
   */

  Socket.prototype.onOpen = function () {
    this.open = true;
  };

  /**
   * Called when the transport closes.
   *
   * @api private
   */

  Socket.prototype.onClose = function () {
    this.open = false;
    clearTimeout(this.heartbeatTimeoutTimer);
  };

  /**
   * Called when the transport first opens a connection
   *
   * @param text
   */

  Socket.prototype.onPacket = function (packet) {
    this.of(packet.endpoint).onPacket(packet);
  };

  /**
   * Handles an error.
   *
   * @api private
   */

  Socket.prototype.onError = function (err) {
    if (err && err.advice) {
      if (err.advice === 'reconnect' && (this.connected || this.connecting)) {
        this.disconnect();
        if (this.options.reconnect) {
          this.reconnect();
        }
      }
    }

    this.publish('error', err && err.reason ? err.reason : err);
  };

  /**
   * Called when the transport disconnects.
   *
   * @api private
   */

  Socket.prototype.onDisconnect = function (reason) {
    var wasConnected = this.connected
      , wasConnecting = this.connecting;

    this.connected = false;
    this.connecting = false;
    this.open = false;

    if (wasConnected || wasConnecting) {
      this.transport.close();
      this.transport.clearTimeouts();
      if (wasConnected) {
        this.publish('disconnect', reason);

        if ('booted' != reason && this.options.reconnect && !this.reconnecting) {
          this.reconnect();
        }
      }
    }
  };

  /**
   * Called upon reconnection.
   *
   * @api private
   */

  Socket.prototype.reconnect = function () {
    this.reconnecting = true;
    this.reconnectionAttempts = 0;
    this.reconnectionDelay = this.options['reconnection delay'];

    var self = this
      , maxAttempts = this.options['max reconnection attempts']
      , tryMultiple = this.options['try multiple transports']
      , limit = this.options['reconnection limit'];

    function reset () {
      if (self.connected) {
        for (var i in self.namespaces) {
          if (self.namespaces.hasOwnProperty(i) && '' !== i) {
              self.namespaces[i].packet({ type: 'connect' });
          }
        }
        self.publish('reconnect', self.transport.name, self.reconnectionAttempts);
      }

      clearTimeout(self.reconnectionTimer);

      self.removeListener('connect_failed', maybeReconnect);
      self.removeListener('connect', maybeReconnect);

      self.reconnecting = false;

      delete self.reconnectionAttempts;
      delete self.reconnectionDelay;
      delete self.reconnectionTimer;
      delete self.redoTransports;

      self.options['try multiple transports'] = tryMultiple;
    };

    function maybeReconnect () {
      if (!self.reconnecting) {
        return;
      }

      if (self.connected) {
        return reset();
      };

      if (self.connecting && self.reconnecting) {
        return self.reconnectionTimer = setTimeout(maybeReconnect, 1000);
      }

      if (self.reconnectionAttempts++ >= maxAttempts) {
        if (!self.redoTransports) {
          self.on('connect_failed', maybeReconnect);
          self.options['try multiple transports'] = true;
          self.transports = self.origTransports;
          self.transport = self.getTransport();
          self.redoTransports = true;
          self.connect();
        } else {
          self.publish('reconnect_failed');
          reset();
        }
      } else {
        if (self.reconnectionDelay < limit) {
          self.reconnectionDelay *= 2; // exponential back off
        }

        self.connect();
        self.publish('reconnecting', self.reconnectionDelay, self.reconnectionAttempts);
        self.reconnectionTimer = setTimeout(maybeReconnect, self.reconnectionDelay);
      }
    };

    this.options['try multiple transports'] = false;
    this.reconnectionTimer = setTimeout(maybeReconnect, this.reconnectionDelay);

    this.on('connect', maybeReconnect);
  };

})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
  , this
);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Expose constructor.
   */

  exports.SocketNamespace = SocketNamespace;

  /**
   * Socket namespace constructor.
   *
   * @constructor
   * @api public
   */

  function SocketNamespace (socket, name) {
    this.socket = socket;
    this.name = name || '';
    this.flags = {};
    this.json = new Flag(this, 'json');
    this.ackPackets = 0;
    this.acks = {};
  };

  /**
   * Apply EventEmitter mixin.
   */

  io.util.mixin(SocketNamespace, io.EventEmitter);

  /**
   * Copies emit since we override it
   *
   * @api private
   */

  SocketNamespace.prototype.$emit = io.EventEmitter.prototype.emit;

  /**
   * Creates a new namespace, by proxying the request to the socket. This
   * allows us to use the synax as we do on the server.
   *
   * @api public
   */

  SocketNamespace.prototype.of = function () {
    return this.socket.of.apply(this.socket, arguments);
  };

  /**
   * Sends a packet.
   *
   * @api private
   */

  SocketNamespace.prototype.packet = function (packet) {
    packet.endpoint = this.name;
    this.socket.packet(packet);
    this.flags = {};
    return this;
  };

  /**
   * Sends a message
   *
   * @api public
   */

  SocketNamespace.prototype.send = function (data, fn) {
    var packet = {
        type: this.flags.json ? 'json' : 'message'
      , data: data
    };

    if ('function' == typeof fn) {
      packet.id = ++this.ackPackets;
      packet.ack = true;
      this.acks[packet.id] = fn;
    }

    return this.packet(packet);
  };

  /**
   * Emits an event
   *
   * @api public
   */
  
  SocketNamespace.prototype.emit = function (name) {
    var args = Array.prototype.slice.call(arguments, 1)
      , lastArg = args[args.length - 1]
      , packet = {
            type: 'event'
          , name: name
        };

    if ('function' == typeof lastArg) {
      packet.id = ++this.ackPackets;
      packet.ack = 'data';
      this.acks[packet.id] = lastArg;
      args = args.slice(0, args.length - 1);
    }

    packet.args = args;

    return this.packet(packet);
  };

  /**
   * Disconnects the namespace
   *
   * @api private
   */

  SocketNamespace.prototype.disconnect = function () {
    if (this.name === '') {
      this.socket.disconnect();
    } else {
      this.packet({ type: 'disconnect' });
      this.$emit('disconnect');
    }

    return this;
  };

  /**
   * Handles a packet
   *
   * @api private
   */

  SocketNamespace.prototype.onPacket = function (packet) {
    var self = this;

    function ack () {
      self.packet({
          type: 'ack'
        , args: io.util.toArray(arguments)
        , ackId: packet.id
      });
    };

    switch (packet.type) {
      case 'connect':
        this.$emit('connect');
        break;

      case 'disconnect':
        if (this.name === '') {
          this.socket.onDisconnect(packet.reason || 'booted');
        } else {
          this.$emit('disconnect', packet.reason);
        }
        break;

      case 'message':
      case 'json':
        var params = ['message', packet.data];

        if (packet.ack == 'data') {
          params.push(ack);
        } else if (packet.ack) {
          this.packet({ type: 'ack', ackId: packet.id });
        }

        this.$emit.apply(this, params);
        break;

      case 'event':
        var params = [packet.name].concat(packet.args);

        if (packet.ack == 'data')
          params.push(ack);

        this.$emit.apply(this, params);
        break;

      case 'ack':
        if (this.acks[packet.ackId]) {
          this.acks[packet.ackId].apply(this, packet.args);
          delete this.acks[packet.ackId];
        }
        break;

      case 'error':
        if (packet.advice){
          this.socket.onError(packet);
        } else {
          if (packet.reason == 'unauthorized') {
            this.$emit('connect_failed', packet.reason);
          } else {
            this.$emit('error', packet.reason);
          }
        }
        break;
    }
  };

  /**
   * Flag interface.
   *
   * @api private
   */

  function Flag (nsp, name) {
    this.namespace = nsp;
    this.name = name;
  };

  /**
   * Send a message
   *
   * @api public
   */

  Flag.prototype.send = function () {
    this.namespace.flags[this.name] = true;
    this.namespace.send.apply(this.namespace, arguments);
  };

  /**
   * Emit an event
   *
   * @api public
   */

  Flag.prototype.emit = function () {
    this.namespace.flags[this.name] = true;
    this.namespace.emit.apply(this.namespace, arguments);
  };

})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io, global) {

  /**
   * Expose constructor.
   */

  exports.websocket = WS;

  /**
   * The WebSocket transport uses the HTML5 WebSocket API to establish an
   * persistent connection with the Socket.IO server. This transport will also
   * be inherited by the FlashSocket fallback as it provides a API compatible
   * polyfill for the WebSockets.
   *
   * @constructor
   * @extends {io.Transport}
   * @api public
   */

  function WS (socket) {
    io.Transport.apply(this, arguments);
  };

  /**
   * Inherits from Transport.
   */

  io.util.inherit(WS, io.Transport);

  /**
   * Transport name
   *
   * @api public
   */

  WS.prototype.name = 'websocket';

  /**
   * Initializes a new `WebSocket` connection with the Socket.IO server. We attach
   * all the appropriate listeners to handle the responses from the server.
   *
   * @returns {Transport}
   * @api public
   */

  WS.prototype.open = function () {
    var query = io.util.query(this.socket.options.query)
      , self = this
      , Socket


    if (!Socket) {
      Socket = global.MozWebSocket || global.WebSocket;
    }

    this.websocket = new Socket(this.prepareUrl() + query);

    this.websocket.onopen = function () {
      self.onOpen();
      self.socket.setBuffer(false);
    };
    this.websocket.onmessage = function (ev) {
      self.onData(ev.data);
    };
    this.websocket.onclose = function () {
      self.onClose();
      self.socket.setBuffer(true);
    };
    this.websocket.onerror = function (e) {
      self.onError(e);
    };

    return this;
  };

  /**
   * Send a message to the Socket.IO server. The message will automatically be
   * encoded in the correct message format.
   *
   * @returns {Transport}
   * @api public
   */

  // Do to a bug in the current IDevices browser, we need to wrap the send in a 
  // setTimeout, when they resume from sleeping the browser will crash if 
  // we don't allow the browser time to detect the socket has been closed
  if (io.util.ua.iDevice) {
    WS.prototype.send = function (data) {
      var self = this;
      setTimeout(function() {
         self.websocket.send(data);
      },0);
      return this;
    };
  } else {
    WS.prototype.send = function (data) {
      this.websocket.send(data);
      return this;
    };
  }

  /**
   * Payload
   *
   * @api private
   */

  WS.prototype.payload = function (arr) {
    for (var i = 0, l = arr.length; i < l; i++) {
      this.packet(arr[i]);
    }
    return this;
  };

  /**
   * Disconnect the established `WebSocket` connection.
   *
   * @returns {Transport}
   * @api public
   */

  WS.prototype.close = function () {
    this.websocket.close();
    return this;
  };

  /**
   * Handle the errors that `WebSocket` might be giving when we
   * are attempting to connect or send messages.
   *
   * @param {Error} e The error.
   * @api private
   */

  WS.prototype.onError = function (e) {
    this.socket.onError(e);
  };

  /**
   * Returns the appropriate scheme for the URI generation.
   *
   * @api private
   */
  WS.prototype.scheme = function () {
    return this.socket.options.secure ? 'wss' : 'ws';
  };

  /**
   * Checks if the browser has support for native `WebSockets` and that
   * it's not the polyfill created for the FlashSocket transport.
   *
   * @return {Boolean}
   * @api public
   */

  WS.check = function () {
    return ('WebSocket' in global && !('__addTask' in WebSocket))
          || 'MozWebSocket' in global;
  };

  /**
   * Check if the `WebSocket` transport support cross domain communications.
   *
   * @returns {Boolean}
   * @api public
   */

  WS.xdomainCheck = function () {
    return true;
  };

  /**
   * Add the transport to your public io.transports array.
   *
   * @api private
   */

  io.transports.push('websocket');

})(
    'undefined' != typeof io ? io.Transport : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
  , this
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Expose constructor.
   */

  exports.flashsocket = Flashsocket;

  /**
   * The FlashSocket transport. This is a API wrapper for the HTML5 WebSocket
   * specification. It uses a .swf file to communicate with the server. If you want
   * to serve the .swf file from a other server than where the Socket.IO script is
   * coming from you need to use the insecure version of the .swf. More information
   * about this can be found on the github page.
   *
   * @constructor
   * @extends {io.Transport.websocket}
   * @api public
   */

  function Flashsocket () {
    io.Transport.websocket.apply(this, arguments);
  };

  /**
   * Inherits from Transport.
   */

  io.util.inherit(Flashsocket, io.Transport.websocket);

  /**
   * Transport name
   *
   * @api public
   */

  Flashsocket.prototype.name = 'flashsocket';

  /**
   * Disconnect the established `FlashSocket` connection. This is done by adding a 
   * new task to the FlashSocket. The rest will be handled off by the `WebSocket` 
   * transport.
   *
   * @returns {Transport}
   * @api public
   */

  Flashsocket.prototype.open = function () {
    var self = this
      , args = arguments;

    WebSocket.__addTask(function () {
      io.Transport.websocket.prototype.open.apply(self, args);
    });
    return this;
  };
  
  /**
   * Sends a message to the Socket.IO server. This is done by adding a new
   * task to the FlashSocket. The rest will be handled off by the `WebSocket` 
   * transport.
   *
   * @returns {Transport}
   * @api public
   */

  Flashsocket.prototype.send = function () {
    var self = this, args = arguments;
    WebSocket.__addTask(function () {
      io.Transport.websocket.prototype.send.apply(self, args);
    });
    return this;
  };

  /**
   * Disconnects the established `FlashSocket` connection.
   *
   * @returns {Transport}
   * @api public
   */

  Flashsocket.prototype.close = function () {
    WebSocket.__tasks.length = 0;
    io.Transport.websocket.prototype.close.call(this);
    return this;
  };

  /**
   * The WebSocket fall back needs to append the flash container to the body
   * element, so we need to make sure we have access to it. Or defer the call
   * until we are sure there is a body element.
   *
   * @param {Socket} socket The socket instance that needs a transport
   * @param {Function} fn The callback
   * @api private
   */

  Flashsocket.prototype.ready = function (socket, fn) {
    function init () {
      var options = socket.options
        , port = options['flash policy port']
        , path = [
              'http' + (options.secure ? 's' : '') + ':/'
            , options.host + ':' + options.port
            , options.resource
            , 'static/flashsocket'
            , 'WebSocketMain' + (socket.isXDomain() ? 'Insecure' : '') + '.swf'
          ];

      // Only start downloading the swf file when the checked that this browser
      // actually supports it
      if (!Flashsocket.loaded) {
        if (typeof WEB_SOCKET_SWF_LOCATION === 'undefined') {
          // Set the correct file based on the XDomain settings
          WEB_SOCKET_SWF_LOCATION = path.join('/');
        }

        if (port !== 843) {
          WebSocket.loadFlashPolicyFile('xmlsocket://' + options.host + ':' + port);
        }

        WebSocket.__initialize();
        Flashsocket.loaded = true;
      }

      fn.call(self);
    }

    var self = this;
    if (document.body) return init();

    io.util.load(init);
  };

  /**
   * Check if the FlashSocket transport is supported as it requires that the Adobe
   * Flash Player plug-in version `10.0.0` or greater is installed. And also check if
   * the polyfill is correctly loaded.
   *
   * @returns {Boolean}
   * @api public
   */

  Flashsocket.check = function () {
    if (
        typeof WebSocket == 'undefined'
      || !('__initialize' in WebSocket) || !swfobject
    ) return false;

    return swfobject.getFlashPlayerVersion().major >= 10;
  };

  /**
   * Check if the FlashSocket transport can be used as cross domain / cross origin 
   * transport. Because we can't see which type (secure or insecure) of .swf is used
   * we will just return true.
   *
   * @returns {Boolean}
   * @api public
   */

  Flashsocket.xdomainCheck = function () {
    return true;
  };

  /**
   * Disable AUTO_INITIALIZATION
   */

  if (typeof window != 'undefined') {
    WEB_SOCKET_DISABLE_AUTO_INITIALIZATION = true;
  }

  /**
   * Add the transport to your public io.transports array.
   *
   * @api private
   */

  io.transports.push('flashsocket');
})(
    'undefined' != typeof io ? io.Transport : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
if ('undefined' != typeof window) {
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O[(['Active'].concat('Object').join('X'))]!=D){try{var ad=new window[(['Active'].concat('Object').join('X'))](W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?(['Active'].concat('').join('X')):"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();
}
// Copyright: Hiroshi Ichikawa <http://gimite.net/en/>
// License: New BSD License
// Reference: http://dev.w3.org/html5/websockets/
// Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol

(function() {
  
  if ('undefined' == typeof window || window.WebSocket) return;

  var console = window.console;
  if (!console || !console.log || !console.error) {
    console = {log: function(){ }, error: function(){ }};
  }
  
  if (!swfobject.hasFlashPlayerVersion("10.0.0")) {
    console.error("Flash Player >= 10.0.0 is required.");
    return;
  }
  if (location.protocol == "file:") {
    console.error(
      "WARNING: web-socket-js doesn't work in file:///... URL " +
      "unless you set Flash Security Settings properly. " +
      "Open the page via Web server i.e. http://...");
  }

  /**
   * This class represents a faux web socket.
   * @param {string} url
   * @param {array or string} protocols
   * @param {string} proxyHost
   * @param {int} proxyPort
   * @param {string} headers
   */
  WebSocket = function(url, protocols, proxyHost, proxyPort, headers) {
    var self = this;
    self.__id = WebSocket.__nextId++;
    WebSocket.__instances[self.__id] = self;
    self.readyState = WebSocket.CONNECTING;
    self.bufferedAmount = 0;
    self.__events = {};
    if (!protocols) {
      protocols = [];
    } else if (typeof protocols == "string") {
      protocols = [protocols];
    }
    // Uses setTimeout() to make sure __createFlash() runs after the caller sets ws.onopen etc.
    // Otherwise, when onopen fires immediately, onopen is called before it is set.
    setTimeout(function() {
      WebSocket.__addTask(function() {
        WebSocket.__flash.create(
            self.__id, url, protocols, proxyHost || null, proxyPort || 0, headers || null);
      });
    }, 0);
  };

  /**
   * Send data to the web socket.
   * @param {string} data  The data to send to the socket.
   * @return {boolean}  True for success, false for failure.
   */
  WebSocket.prototype.send = function(data) {
    if (this.readyState == WebSocket.CONNECTING) {
      throw "INVALID_STATE_ERR: Web Socket connection has not been established";
    }
    // We use encodeURIComponent() here, because FABridge doesn't work if
    // the argument includes some characters. We don't use escape() here
    // because of this:
    // https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Functions#escape_and_unescape_Functions
    // But it looks decodeURIComponent(encodeURIComponent(s)) doesn't
    // preserve all Unicode characters either e.g. "\uffff" in Firefox.
    // Note by wtritch: Hopefully this will not be necessary using ExternalInterface.  Will require
    // additional testing.
    var result = WebSocket.__flash.send(this.__id, encodeURIComponent(data));
    if (result < 0) { // success
      return true;
    } else {
      this.bufferedAmount += result;
      return false;
    }
  };

  /**
   * Close this web socket gracefully.
   */
  WebSocket.prototype.close = function() {
    if (this.readyState == WebSocket.CLOSED || this.readyState == WebSocket.CLOSING) {
      return;
    }
    this.readyState = WebSocket.CLOSING;
    WebSocket.__flash.close(this.__id);
  };

  /**
   * Implementation of {@link <a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration">DOM 2 EventTarget Interface</a>}
   *
   * @param {string} type
   * @param {function} listener
   * @param {boolean} useCapture
   * @return void
   */
  WebSocket.prototype.addEventListener = function(type, listener, useCapture) {
    if (!(type in this.__events)) {
      this.__events[type] = [];
    }
    this.__events[type].push(listener);
  };

  /**
   * Implementation of {@link <a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration">DOM 2 EventTarget Interface</a>}
   *
   * @param {string} type
   * @param {function} listener
   * @param {boolean} useCapture
   * @return void
   */
  WebSocket.prototype.removeEventListener = function(type, listener, useCapture) {
    if (!(type in this.__events)) return;
    var events = this.__events[type];
    for (var i = events.length - 1; i >= 0; --i) {
      if (events[i] === listener) {
        events.splice(i, 1);
        break;
      }
    }
  };

  /**
   * Implementation of {@link <a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration">DOM 2 EventTarget Interface</a>}
   *
   * @param {Event} event
   * @return void
   */
  WebSocket.prototype.dispatchEvent = function(event) {
    var events = this.__events[event.type] || [];
    for (var i = 0; i < events.length; ++i) {
      events[i](event);
    }
    var handler = this["on" + event.type];
    if (handler) handler(event);
  };

  /**
   * Handles an event from Flash.
   * @param {Object} flashEvent
   */
  WebSocket.prototype.__handleEvent = function(flashEvent) {
    if ("readyState" in flashEvent) {
      this.readyState = flashEvent.readyState;
    }
    if ("protocol" in flashEvent) {
      this.protocol = flashEvent.protocol;
    }
    
    var jsEvent;
    if (flashEvent.type == "open" || flashEvent.type == "error") {
      jsEvent = this.__createSimpleEvent(flashEvent.type);
    } else if (flashEvent.type == "close") {
      // TODO implement jsEvent.wasClean
      jsEvent = this.__createSimpleEvent("close");
    } else if (flashEvent.type == "message") {
      var data = decodeURIComponent(flashEvent.message);
      jsEvent = this.__createMessageEvent("message", data);
    } else {
      throw "unknown event type: " + flashEvent.type;
    }
    
    this.dispatchEvent(jsEvent);
  };
  
  WebSocket.prototype.__createSimpleEvent = function(type) {
    if (document.createEvent && window.Event) {
      var event = document.createEvent("Event");
      event.initEvent(type, false, false);
      return event;
    } else {
      return {type: type, bubbles: false, cancelable: false};
    }
  };
  
  WebSocket.prototype.__createMessageEvent = function(type, data) {
    if (document.createEvent && window.MessageEvent && !window.opera) {
      var event = document.createEvent("MessageEvent");
      event.initMessageEvent("message", false, false, data, null, null, window, null);
      return event;
    } else {
      // IE and Opera, the latter one truncates the data parameter after any 0x00 bytes.
      return {type: type, data: data, bubbles: false, cancelable: false};
    }
  };
  
  /**
   * Define the WebSocket readyState enumeration.
   */
  WebSocket.CONNECTING = 0;
  WebSocket.OPEN = 1;
  WebSocket.CLOSING = 2;
  WebSocket.CLOSED = 3;

  WebSocket.__flash = null;
  WebSocket.__instances = {};
  WebSocket.__tasks = [];
  WebSocket.__nextId = 0;
  
  /**
   * Load a new flash security policy file.
   * @param {string} url
   */
  WebSocket.loadFlashPolicyFile = function(url){
    WebSocket.__addTask(function() {
      WebSocket.__flash.loadManualPolicyFile(url);
    });
  };

  /**
   * Loads WebSocketMain.swf and creates WebSocketMain object in Flash.
   */
  WebSocket.__initialize = function() {
    if (WebSocket.__flash) return;
    
    if (WebSocket.__swfLocation) {
      // For backword compatibility.
      window.WEB_SOCKET_SWF_LOCATION = WebSocket.__swfLocation;
    }
    if (!window.WEB_SOCKET_SWF_LOCATION) {
      console.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");
      return;
    }
    var container = document.createElement("div");
    container.id = "webSocketContainer";
    // Hides Flash box. We cannot use display: none or visibility: hidden because it prevents
    // Flash from loading at least in IE. So we move it out of the screen at (-100, -100).
    // But this even doesn't work with Flash Lite (e.g. in Droid Incredible). So with Flash
    // Lite, we put it at (0, 0). This shows 1x1 box visible at left-top corner but this is
    // the best we can do as far as we know now.
    container.style.position = "absolute";
    if (WebSocket.__isFlashLite()) {
      container.style.left = "0px";
      container.style.top = "0px";
    } else {
      container.style.left = "-100px";
      container.style.top = "-100px";
    }
    var holder = document.createElement("div");
    holder.id = "webSocketFlash";
    container.appendChild(holder);
    document.body.appendChild(container);
    // See this article for hasPriority:
    // http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c36cfb8137124318eebc6-7ffd.html
    swfobject.embedSWF(
      WEB_SOCKET_SWF_LOCATION,
      "webSocketFlash",
      "1" /* width */,
      "1" /* height */,
      "10.0.0" /* SWF version */,
      null,
      null,
      {hasPriority: true, swliveconnect : true, allowScriptAccess: "always"},
      null,
      function(e) {
        if (!e.success) {
          console.error("[WebSocket] swfobject.embedSWF failed");
        }
      });
  };
  
  /**
   * Called by Flash to notify JS that it's fully loaded and ready
   * for communication.
   */
  WebSocket.__onFlashInitialized = function() {
    // We need to set a timeout here to avoid round-trip calls
    // to flash during the initialization process.
    setTimeout(function() {
      WebSocket.__flash = document.getElementById("webSocketFlash");
      WebSocket.__flash.setCallerUrl(location.href);
      WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);
      for (var i = 0; i < WebSocket.__tasks.length; ++i) {
        WebSocket.__tasks[i]();
      }
      WebSocket.__tasks = [];
    }, 0);
  };
  
  /**
   * Called by Flash to notify WebSockets events are fired.
   */
  WebSocket.__onFlashEvent = function() {
    setTimeout(function() {
      try {
        // Gets events using receiveEvents() instead of getting it from event object
        // of Flash event. This is to make sure to keep message order.
        // It seems sometimes Flash events don't arrive in the same order as they are sent.
        var events = WebSocket.__flash.receiveEvents();
        for (var i = 0; i < events.length; ++i) {
          WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i]);
        }
      } catch (e) {
        console.error(e);
      }
    }, 0);
    return true;
  };
  
  // Called by Flash.
  WebSocket.__log = function(message) {
    console.log(decodeURIComponent(message));
  };
  
  // Called by Flash.
  WebSocket.__error = function(message) {
    console.error(decodeURIComponent(message));
  };
  
  WebSocket.__addTask = function(task) {
    if (WebSocket.__flash) {
      task();
    } else {
      WebSocket.__tasks.push(task);
    }
  };
  
  /**
   * Test if the browser is running flash lite.
   * @return {boolean} True if flash lite is running, false otherwise.
   */
  WebSocket.__isFlashLite = function() {
    if (!window.navigator || !window.navigator.mimeTypes) {
      return false;
    }
    var mimeType = window.navigator.mimeTypes["application/x-shockwave-flash"];
    if (!mimeType || !mimeType.enabledPlugin || !mimeType.enabledPlugin.filename) {
      return false;
    }
    return mimeType.enabledPlugin.filename.match(/flashlite/i) ? true : false;
  };
  
  if (!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION) {
    if (window.addEventListener) {
      window.addEventListener("load", function(){
        WebSocket.__initialize();
      }, false);
    } else {
      window.attachEvent("onload", function(){
        WebSocket.__initialize();
      });
    }
  }
  
})();

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io, global) {

  /**
   * Expose constructor.
   *
   * @api public
   */

  exports.XHR = XHR;

  /**
   * XHR constructor
   *
   * @costructor
   * @api public
   */

  function XHR (socket) {
    if (!socket) return;

    io.Transport.apply(this, arguments);
    this.sendBuffer = [];
  };

  /**
   * Inherits from Transport.
   */

  io.util.inherit(XHR, io.Transport);

  /**
   * Establish a connection
   *
   * @returns {Transport}
   * @api public
   */

  XHR.prototype.open = function () {
    this.socket.setBuffer(false);
    this.onOpen();
    this.get();

    // we need to make sure the request succeeds since we have no indication
    // whether the request opened or not until it succeeded.
    this.setCloseTimeout();

    return this;
  };

  /**
   * Check if we need to send data to the Socket.IO server, if we have data in our
   * buffer we encode it and forward it to the `post` method.
   *
   * @api private
   */

  XHR.prototype.payload = function (payload) {
    var msgs = [];

    for (var i = 0, l = payload.length; i < l; i++) {
      msgs.push(io.parser.encodePacket(payload[i]));
    }

    this.send(io.parser.encodePayload(msgs));
  };

  /**
   * Send data to the Socket.IO server.
   *
   * @param data The message
   * @returns {Transport}
   * @api public
   */

  XHR.prototype.send = function (data) {
    this.post(data);
    return this;
  };

  /**
   * Posts a encoded message to the Socket.IO server.
   *
   * @param {String} data A encoded message.
   * @api private
   */

  function empty () { };

  XHR.prototype.post = function (data) {
    var self = this;
    this.socket.setBuffer(true);

    function stateChange () {
      if (this.readyState == 4) {
        this.onreadystatechange = empty;
        self.posting = false;

        if (this.status == 200){
          self.socket.setBuffer(false);
        } else {
          self.onClose();
        }
      }
    }

    function onload () {
      this.onload = empty;
      self.socket.setBuffer(false);
    };

    this.sendXHR = this.request('POST');

    if (global.XDomainRequest && this.sendXHR instanceof XDomainRequest) {
      this.sendXHR.onload = this.sendXHR.onerror = onload;
    } else {
      this.sendXHR.onreadystatechange = stateChange;
    }

    this.sendXHR.send(data);
  };

  /**
   * Disconnects the established `XHR` connection.
   *
   * @returns {Transport}
   * @api public
   */

  XHR.prototype.close = function () {
    this.onClose();
    return this;
  };

  /**
   * Generates a configured XHR request
   *
   * @param {String} url The url that needs to be requested.
   * @param {String} method The method the request should use.
   * @returns {XMLHttpRequest}
   * @api private
   */

  XHR.prototype.request = function (method) {
    var req = io.util.request(this.socket.isXDomain())
      , query = io.util.query(this.socket.options.query, 't=' + +new Date);

    req.open(method || 'GET', this.prepareUrl() + query, true);

    if (method == 'POST') {
      try {
        if (req.setRequestHeader) {
          req.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');
        } else {
          // XDomainRequest
          req.contentType = 'text/plain';
        }
      } catch (e) {}
    }

    return req;
  };

  /**
   * Returns the scheme to use for the transport URLs.
   *
   * @api private
   */

  XHR.prototype.scheme = function () {
    return this.socket.options.secure ? 'https' : 'http';
  };

  /**
   * Check if the XHR transports are supported
   *
   * @param {Boolean} xdomain Check if we support cross domain requests.
   * @returns {Boolean}
   * @api public
   */

  XHR.check = function (socket, xdomain) {
    try {
      var request = io.util.request(xdomain),
          usesXDomReq = (global.XDomainRequest && request instanceof XDomainRequest),
          socketProtocol = (socket && socket.options && socket.options.secure ? 'https:' : 'http:'),
          isXProtocol = (global.location && socketProtocol != global.location.protocol);
      if (request && !(usesXDomReq && isXProtocol)) {
        return true;
      }
    } catch(e) {}

    return false;
  };

  /**
   * Check if the XHR transport supports cross domain requests.
   *
   * @returns {Boolean}
   * @api public
   */

  XHR.xdomainCheck = function (socket) {
    return XHR.check(socket, true);
  };

})(
    'undefined' != typeof io ? io.Transport : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
  , this
);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Expose constructor.
   */

  exports.htmlfile = HTMLFile;

  /**
   * The HTMLFile transport creates a `forever iframe` based transport
   * for Internet Explorer. Regular forever iframe implementations will 
   * continuously trigger the browsers buzy indicators. If the forever iframe
   * is created inside a `htmlfile` these indicators will not be trigged.
   *
   * @constructor
   * @extends {io.Transport.XHR}
   * @api public
   */

  function HTMLFile (socket) {
    io.Transport.XHR.apply(this, arguments);
  };

  /**
   * Inherits from XHR transport.
   */

  io.util.inherit(HTMLFile, io.Transport.XHR);

  /**
   * Transport name
   *
   * @api public
   */

  HTMLFile.prototype.name = 'htmlfile';

  /**
   * Creates a new Ac...eX `htmlfile` with a forever loading iframe
   * that can be used to listen to messages. Inside the generated
   * `htmlfile` a reference will be made to the HTMLFile transport.
   *
   * @api private
   */

  HTMLFile.prototype.get = function () {
    this.doc = new window[(['Active'].concat('Object').join('X'))]('htmlfile');
    this.doc.open();
    this.doc.write('<html></html>');
    this.doc.close();
    this.doc.parentWindow.s = this;

    var iframeC = this.doc.createElement('div');
    iframeC.className = 'socketio';

    this.doc.body.appendChild(iframeC);
    this.iframe = this.doc.createElement('iframe');

    iframeC.appendChild(this.iframe);

    var self = this
      , query = io.util.query(this.socket.options.query, 't='+ +new Date);

    this.iframe.src = this.prepareUrl() + query;

    io.util.on(window, 'unload', function () {
      self.destroy();
    });
  };

  /**
   * The Socket.IO server will write script tags inside the forever
   * iframe, this function will be used as callback for the incoming
   * information.
   *
   * @param {String} data The message
   * @param {document} doc Reference to the context
   * @api private
   */

  HTMLFile.prototype._ = function (data, doc) {
    // unescape all forward slashes. see GH-1251
    data = data.replace(/\\\//g, '/');
    this.onData(data);
    try {
      var script = doc.getElementsByTagName('script')[0];
      script.parentNode.removeChild(script);
    } catch (e) { }
  };

  /**
   * Destroy the established connection, iframe and `htmlfile`.
   * And calls the `CollectGarbage` function of Internet Explorer
   * to release the memory.
   *
   * @api private
   */

  HTMLFile.prototype.destroy = function () {
    if (this.iframe){
      try {
        this.iframe.src = 'about:blank';
      } catch(e){}

      this.doc = null;
      this.iframe.parentNode.removeChild(this.iframe);
      this.iframe = null;

      CollectGarbage();
    }
  };

  /**
   * Disconnects the established connection.
   *
   * @returns {Transport} Chaining.
   * @api public
   */

  HTMLFile.prototype.close = function () {
    this.destroy();
    return io.Transport.XHR.prototype.close.call(this);
  };

  /**
   * Checks if the browser supports this transport. The browser
   * must have an `Ac...eXObject` implementation.
   *
   * @return {Boolean}
   * @api public
   */

  HTMLFile.check = function (socket) {
    if (typeof window != "undefined" && (['Active'].concat('Object').join('X')) in window){
      try {
        var a = new window[(['Active'].concat('Object').join('X'))]('htmlfile');
        return a && io.Transport.XHR.check(socket);
      } catch(e){}
    }
    return false;
  };

  /**
   * Check if cross domain requests are supported.
   *
   * @returns {Boolean}
   * @api public
   */

  HTMLFile.xdomainCheck = function () {
    // we can probably do handling for sub-domains, we should
    // test that it's cross domain but a subdomain here
    return false;
  };

  /**
   * Add the transport to your public io.transports array.
   *
   * @api private
   */

  io.transports.push('htmlfile');

})(
    'undefined' != typeof io ? io.Transport : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io, global) {

  /**
   * Expose constructor.
   */

  exports['xhr-polling'] = XHRPolling;

  /**
   * The XHR-polling transport uses long polling XHR requests to create a
   * "persistent" connection with the server.
   *
   * @constructor
   * @api public
   */

  function XHRPolling () {
    io.Transport.XHR.apply(this, arguments);
  };

  /**
   * Inherits from XHR transport.
   */

  io.util.inherit(XHRPolling, io.Transport.XHR);

  /**
   * Merge the properties from XHR transport
   */

  io.util.merge(XHRPolling, io.Transport.XHR);

  /**
   * Transport name
   *
   * @api public
   */

  XHRPolling.prototype.name = 'xhr-polling';

  /**
   * Indicates whether heartbeats is enabled for this transport
   *
   * @api private
   */

  XHRPolling.prototype.heartbeats = function () {
    return false;
  };

  /** 
   * Establish a connection, for iPhone and Android this will be done once the page
   * is loaded.
   *
   * @returns {Transport} Chaining.
   * @api public
   */

  XHRPolling.prototype.open = function () {
    var self = this;

    io.Transport.XHR.prototype.open.call(self);
    return false;
  };

  /**
   * Starts a XHR request to wait for incoming messages.
   *
   * @api private
   */

  function empty () {};

  XHRPolling.prototype.get = function () {
    if (!this.isOpen) return;

    var self = this;

    function stateChange () {
      if (this.readyState == 4) {
        this.onreadystatechange = empty;

        if (this.status == 200) {
          self.onData(this.responseText);
          self.get();
        } else {
          self.onClose();
        }
      }
    };

    function onload () {
      this.onload = empty;
      this.onerror = empty;
      self.retryCounter = 1;
      self.onData(this.responseText);
      self.get();
    };

    function onerror () {
      self.retryCounter ++;
      if(!self.retryCounter || self.retryCounter > 3) {
        self.onClose();  
      } else {
        self.get();
      }
    };

    this.xhr = this.request();

    if (global.XDomainRequest && this.xhr instanceof XDomainRequest) {
      this.xhr.onload = onload;
      this.xhr.onerror = onerror;
    } else {
      this.xhr.onreadystatechange = stateChange;
    }

    this.xhr.send(null);
  };

  /**
   * Handle the unclean close behavior.
   *
   * @api private
   */

  XHRPolling.prototype.onClose = function () {
    io.Transport.XHR.prototype.onClose.call(this);

    if (this.xhr) {
      this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = empty;
      try {
        this.xhr.abort();
      } catch(e){}
      this.xhr = null;
    }
  };

  /**
   * Webkit based browsers show a infinit spinner when you start a XHR request
   * before the browsers onload event is called so we need to defer opening of
   * the transport until the onload event is called. Wrapping the cb in our
   * defer method solve this.
   *
   * @param {Socket} socket The socket instance that needs a transport
   * @param {Function} fn The callback
   * @api private
   */

  XHRPolling.prototype.ready = function (socket, fn) {
    var self = this;

    io.util.defer(function () {
      fn.call(self);
    });
  };

  /**
   * Add the transport to your public io.transports array.
   *
   * @api private
   */

  io.transports.push('xhr-polling');

})(
    'undefined' != typeof io ? io.Transport : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
  , this
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io, global) {
  /**
   * There is a way to hide the loading indicator in Firefox. If you create and
   * remove a iframe it will stop showing the current loading indicator.
   * Unfortunately we can't feature detect that and UA sniffing is evil.
   *
   * @api private
   */

  var indicator = global.document && "MozAppearance" in
    global.document.documentElement.style;

  /**
   * Expose constructor.
   */

  exports['jsonp-polling'] = JSONPPolling;

  /**
   * The JSONP transport creates an persistent connection by dynamically
   * inserting a script tag in the page. This script tag will receive the
   * information of the Socket.IO server. When new information is received
   * it creates a new script tag for the new data stream.
   *
   * @constructor
   * @extends {io.Transport.xhr-polling}
   * @api public
   */

  function JSONPPolling (socket) {
    io.Transport['xhr-polling'].apply(this, arguments);

    this.index = io.j.length;

    var self = this;

    io.j.push(function (msg) {
      self._(msg);
    });
  };

  /**
   * Inherits from XHR polling transport.
   */

  io.util.inherit(JSONPPolling, io.Transport['xhr-polling']);

  /**
   * Transport name
   *
   * @api public
   */

  JSONPPolling.prototype.name = 'jsonp-polling';

  /**
   * Posts a encoded message to the Socket.IO server using an iframe.
   * The iframe is used because script tags can create POST based requests.
   * The iframe is positioned outside of the view so the user does not
   * notice it's existence.
   *
   * @param {String} data A encoded message.
   * @api private
   */

  JSONPPolling.prototype.post = function (data) {
    var self = this
      , query = io.util.query(
             this.socket.options.query
          , 't='+ (+new Date) + '&i=' + this.index
        );

    if (!this.form) {
      var form = document.createElement('form')
        , area = document.createElement('textarea')
        , id = this.iframeId = 'socketio_iframe_' + this.index
        , iframe;

      form.className = 'socketio';
      form.style.position = 'absolute';
      form.style.top = '0px';
      form.style.left = '0px';
      form.style.display = 'none';
      form.target = id;
      form.method = 'POST';
      form.setAttribute('accept-charset', 'utf-8');
      area.name = 'd';
      form.appendChild(area);
      document.body.appendChild(form);

      this.form = form;
      this.area = area;
    }

    this.form.action = this.prepareUrl() + query;

    function complete () {
      initIframe();
      self.socket.setBuffer(false);
    };

    function initIframe () {
      if (self.iframe) {
        self.form.removeChild(self.iframe);
      }

      try {
        // ie6 dynamic iframes with target="" support (thanks Chris Lambacher)
        iframe = document.createElement('<iframe name="'+ self.iframeId +'">');
      } catch (e) {
        iframe = document.createElement('iframe');
        iframe.name = self.iframeId;
      }

      iframe.id = self.iframeId;

      self.form.appendChild(iframe);
      self.iframe = iframe;
    };

    initIframe();

    // we temporarily stringify until we figure out how to prevent
    // browsers from turning `\n` into `\r\n` in form inputs
    this.area.value = io.JSON.stringify(data);

    try {
      this.form.submit();
    } catch(e) {}

    if (this.iframe.attachEvent) {
      iframe.onreadystatechange = function () {
        if (self.iframe.readyState == 'complete') {
          complete();
        }
      };
    } else {
      this.iframe.onload = complete;
    }

    this.socket.setBuffer(true);
  };

  /**
   * Creates a new JSONP poll that can be used to listen
   * for messages from the Socket.IO server.
   *
   * @api private
   */

  JSONPPolling.prototype.get = function () {
    var self = this
      , script = document.createElement('script')
      , query = io.util.query(
             this.socket.options.query
          , 't='+ (+new Date) + '&i=' + this.index
        );

    if (this.script) {
      this.script.parentNode.removeChild(this.script);
      this.script = null;
    }

    script.async = true;
    script.src = this.prepareUrl() + query;
    script.onerror = function () {
      self.onClose();
    };

    var insertAt = document.getElementsByTagName('script')[0];
    insertAt.parentNode.insertBefore(script, insertAt);
    this.script = script;

    if (indicator) {
      setTimeout(function () {
        var iframe = document.createElement('iframe');
        document.body.appendChild(iframe);
        document.body.removeChild(iframe);
      }, 100);
    }
  };

  /**
   * Callback function for the incoming message stream from the Socket.IO server.
   *
   * @param {String} data The message
   * @api private
   */

  JSONPPolling.prototype._ = function (msg) {
    this.onData(msg);
    if (this.isOpen) {
      this.get();
    }
    return this;
  };

  /**
   * The indicator hack only works after onload
   *
   * @param {Socket} socket The socket instance that needs a transport
   * @param {Function} fn The callback
   * @api private
   */

  JSONPPolling.prototype.ready = function (socket, fn) {
    var self = this;
    if (!indicator) return fn.call(this);

    io.util.load(function () {
      fn.call(self);
    });
  };

  /**
   * Checks if browser supports this transport.
   *
   * @return {Boolean}
   * @api public
   */

  JSONPPolling.check = function () {
    return 'document' in global;
  };

  /**
   * Check if cross domain requests are supported
   *
   * @returns {Boolean}
   * @api public
   */

  JSONPPolling.xdomainCheck = function () {
    return true;
  };

  /**
   * Add the transport to your public io.transports array.
   *
   * @api private
   */

  io.transports.push('jsonp-polling');

})(
    'undefined' != typeof io ? io.Transport : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
  , this
);

if (typeof define === "function" && define.amd) {
  define([], function () { return io; });
}
})();
},{}],148:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
/*
 * Source: http://stackoverflow.com/a/11697909/607997
 * http://codepen.io/onedayitwillmake/details/EHDmw
 * by Mario Gonzalez
*/

/*
 * Solver for cubic bezier curve with implicit control points at (0,0) and (1.0, 1.0)
*/

var UnitBezier;

module.exports = UnitBezier = (function() {
  function UnitBezier(p1x, p1y, p2x, p2y) {
    this.set(p1x, p1y, p2x, p2y);
  }

  UnitBezier.prototype.set = function(p1x, p1y, p2x, p2y) {
    this.cx = 3.0 * p1x;
    this.bx = 3.0 * (p2x - p1x) - this.cx;
    this.ax = 1.0 - this.cx - this.bx;
    this.cy = 3.0 * p1y;
    this.by = 3.0 * (p2y - p1y) - this.cy;
    this.ay = 1.0 - this.cy - this.by;
  };

  UnitBezier.epsilon = 1e-6;

  UnitBezier.prototype.sampleCurveX = function(t) {
    return ((this.ax * t + this.bx) * t + this.cx) * t;
  };

  UnitBezier.prototype.sampleCurveY = function(t) {
    return ((this.ay * t + this.by) * t + this.cy) * t;
  };

  UnitBezier.prototype.sampleCurveDerivativeX = function(t) {
    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;
  };

  UnitBezier.prototype.solveCurveX = function(x, epsilon) {
    var d2, i, t0, t1, t2, x2;
    t0 = void 0;
    t1 = void 0;
    t2 = void 0;
    x2 = void 0;
    d2 = void 0;
    i = void 0;
    t2 = x;
    i = 0;
    while (i < 8) {
      x2 = this.sampleCurveX(t2) - x;
      if (Math.abs(x2) < epsilon) {
        return t2;
      }
      d2 = this.sampleCurveDerivativeX(t2);
      if (Math.abs(d2) < epsilon) {
        break;
      }
      t2 = t2 - x2 / d2;
      i++;
    }
    t0 = 0.0;
    t1 = 1.0;
    t2 = x;
    if (t2 < t0) {
      return t0;
    }
    if (t2 > t1) {
      return t1;
    }
    while (t0 < t1) {
      x2 = this.sampleCurveX(t2);
      if (Math.abs(x2 - x) < epsilon) {
        return t2;
      }
      if (x > x2) {
        t0 = t2;
      } else {
        t1 = t2;
      }
      t2 = (t1 - t0) * .5 + t0;
    }
    return t2;
  };

  UnitBezier.prototype.solve = function(x, epsilon) {
    return this.sampleCurveY(this.solveCurveX(x, epsilon));
  };

  UnitBezier.prototype.solveSimple = function(x) {
    return this.sampleCurveY(this.solveCurveX(x, 1e-6));
  };

  return UnitBezier;

})();

},{}],149:[function(require,module,exports){
module.exports=require(4)
},{}],150:[function(require,module,exports){
module.exports=require(67)
},{}],151:[function(require,module,exports){
var DynamicTimeline, EventsController, IncrementalIsolate, PropOfArray, PropOfObject, array, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

array = require('utila/scripts/js/lib/array');

_Emitter = require('./_Emitter');

PropOfArray = require('./dynamicTimeline/PropOfArray');

PropOfObject = require('./dynamicTimeline/PropOfObject');

EventsController = require('./dynamicTimeline/EventsController');

IncrementalIsolate = require('./dynamicTimeline/IncrementalIsolate');

module.exports = DynamicTimeline = (function(_super) {
  __extends(DynamicTimeline, _super);

  function DynamicTimeline(fps) {
    if (fps == null) {
      fps = 60;
    }
    DynamicTimeline.__super__.constructor.apply(this, arguments);
    this.t = 1000;
    if (!Number.isFinite(fps)) {
      throw Error("Fps must be a finite integer");
    }
    this.fps = parseInt(fps);
    this._frameLength = 1000 / this.fps;
    this._fpsT = this._calcuateFpsT(this.t);
    this._arrays = {};
    this._objects = {};
    this._incrementalIsolates = {};
    this._allProps = {};
    this._regularProps = {};
    this._eventControllers = {};
    this.duration = 0;
  }

  DynamicTimeline.prototype.setRootModel = function(rootModel) {
    this.rootModel = rootModel;
  };

  DynamicTimeline.prototype.serialize = function() {
    var name, prop, se, _ref;
    se = {
      _allProps: {}
    };
    _ref = this._allProps;
    for (name in _ref) {
      prop = _ref[name];
      se._allProps[name] = prop.serialize();
    }
    return se;
  };

  DynamicTimeline.prototype.loadFrom = function(se) {
    var name, prop, propData, _ref;
    if (se._allProps == null) {
      return;
    }
    _ref = this._allProps;
    for (name in _ref) {
      prop = _ref[name];
      propData = se._allProps[name];
      if (propData == null) {
        if (this.rootModel.debug) {
          console.log("Prop '" + name + "' isn't found in the received serialized data");
        }
        continue;
      }
      prop.loadFrom(propData);
    }
  };

  DynamicTimeline.prototype._calcuateFpsT = function(t) {
    return parseInt(Math.floor(t / this._frameLength) * this._frameLength);
  };

  DynamicTimeline.prototype._maximizeDuration = function(dur) {
    if (dur > this.duration) {
      this.duration = dur;
      this._emit('duration-change');
    }
  };

  DynamicTimeline.prototype.addArray = function(name, array) {
    if (this._arrays[name] != null) {
      throw Error("An array named '" + name + "' already exists");
    }
    this._arrays[name] = array;
    return this;
  };

  DynamicTimeline.prototype.addObject = function(name, obj) {
    if (this._objects[name] != null) {
      throw Error("An object named '" + name + "' already exists");
    }
    this._objects[name] = obj;
    return this;
  };

  DynamicTimeline.prototype.addPropOfArray = function(id, arrayName, indexInArray) {
    if (this._allProps[id] != null) {
      throw Error("A prop named '" + id + "' already exists");
    }
    if (this._arrays[arrayName] == null) {
      throw Error("Couldn't find array named '" + arrayName + "'");
    }
    if (this._arrays[arrayName][indexInArray] == null) {
      throw Error("Array '" + arrayName + "' doesn't have an index of '" + indexInArray + "'");
    }
    return this._regularProps[id] = this._allProps[id] = new PropOfArray(this, id, arrayName, indexInArray);
  };

  DynamicTimeline.prototype.addPropOfObject = function(id, objectName, setter, initial) {
    if (this._allProps[id] != null) {
      throw Error("A prop named '" + id + "' already exists");
    }
    if (this._objects[objectName] == null) {
      throw Error("Couldn't find object named '" + objectName + "'");
    }
    if (this._objects[objectName][setter] == null) {
      throw Error("Object '" + objectName + "' doesn't have '" + setter + "'");
    }
    return this._regularProps[id] = this._allProps[id] = new PropOfObject(this, id, objectName, setter, initial);
  };

  DynamicTimeline.prototype.defineIncrementalIsolate = function(id, isolate) {
    if (this._incrementalIsolates[id] != null) {
      throw Error("Another incremental isolate already exists with id '" + id + "'");
    }
    return this._incrementalIsolates[id] = new IncrementalIsolate(this, id, isolate);
  };

  DynamicTimeline.prototype.getIncrementalIsolate = function(id) {
    return this._incrementalIsolates[id];
  };

  DynamicTimeline.prototype.getProp = function(id) {
    return this._regularProps[id];
  };

  DynamicTimeline.prototype.addEventController = function(id) {
    if (this._eventControllers[id] != null) {
      throw Error("An event controller named " + id + " already exists");
    }
    return this._eventControllers[id] = new EventsController(this, id);
  };

  DynamicTimeline.prototype.tick = function(t) {
    var ic, name, _ref;
    if (t < this.t) {
      this._tickBackward(t);
    } else {
      this._tickForward(t);
    }
    _ref = this._incrementalIsolates;
    for (name in _ref) {
      ic = _ref[name];
      ic._tickForTimeline(t);
    }
    this._fpsT = this._calcuateFpsT(t);
    this.t = t;
    this._emit('tick');
  };

  DynamicTimeline.prototype._pluckFromRegularProps = function(prop) {
    delete this._regularProps[prop.id];
  };

  DynamicTimeline.prototype._tickForward = function(t) {
    var c, name, prop, _ref, _ref1;
    _ref = this._regularProps;
    for (name in _ref) {
      prop = _ref[name];
      prop._tickForward(t);
    }
    _ref1 = this._eventControllers;
    for (name in _ref1) {
      c = _ref1[name];
      c._tickForward(t);
    }
  };

  DynamicTimeline.prototype._tickBackward = function(t) {
    var c, name, prop, _ref, _ref1;
    _ref = this._regularProps;
    for (name in _ref) {
      prop = _ref[name];
      prop._tickBackward(t);
    }
    _ref1 = this._eventControllers;
    for (name in _ref1) {
      c = _ref1[name];
      c._tickBackward(t);
    }
  };

  return DynamicTimeline;

})(_Emitter);

},{"./_Emitter":155,"./dynamicTimeline/EventsController":156,"./dynamicTimeline/IncrementalIsolate":157,"./dynamicTimeline/PropOfArray":159,"./dynamicTimeline/PropOfObject":160,"utila/scripts/js/lib/array":149}],152:[function(require,module,exports){
var AudioDrivenTimeControl, Communicator, EditorModel, GraphModel, MainBoxModel, TimeControlModel, TimelineEditorModel, WorkspaceManagerModel, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Emitter = require('./_Emitter');

GraphModel = require('./editorModel/GraphModel');

Communicator = require('./editorModel/Communicator');

MainBoxModel = require('./editorModel/MainBoxModel');

TimeControlModel = require('./editorModel/TimeControlModel');

TimelineEditorModel = require('./editorModel/TimelineEditorModel');

WorkspaceManagerModel = require('./editorModel/WorkspaceManagerModel');

AudioDrivenTimeControl = require('audio-driven-time-control');

module.exports = EditorModel = (function(_super) {
  __extends(EditorModel, _super);

  function EditorModel(id, timeline, debug) {
    this.id = id != null ? id : 'timeline';
    this.timeline = timeline;
    this.debug = debug != null ? debug : false;
    EditorModel.__super__.constructor.apply(this, arguments);
    this.timeline.setRootModel(this);
    this.audio = new AudioDrivenTimeControl(null, this.id + '-audio');
    this.graph = new GraphModel(this);
    this.mainBox = new MainBoxModel(this);
    this.workspaces = new WorkspaceManagerModel(this);
    this.timeControl = new TimeControlModel(this);
    this.timelineEditor = new TimelineEditorModel(this);
  }

  EditorModel.prototype._tick = function(t) {
    return this.timeControl._tick(t);
  };

  EditorModel.prototype.serialize = function() {
    var se;
    se = {};
    se.id = this.id;
    se.timeline = this.timeline.serialize();
    se.mainBox = this.mainBox.serialize();
    se.workspaces = this.workspaces.serialize();
    se.timeControl = this.timeControl.serialize();
    se.timelineEditor = this.timelineEditor.serialize();
    return se;
  };

  EditorModel.prototype.loadFrom = function(se) {
    if (se.timeline != null) {
      this.timeline.loadFrom(se.timeline);
    }
    if (se.mainBox != null) {
      this.mainBox.loadFrom(se.mainBox);
    }
    if (se.workspaces != null) {
      this.workspaces.loadFrom(se.workspaces);
    }
    if (se.timeControl != null) {
      this.timeControl.loadFrom(se.timeControl);
    }
    if (se.timelineEditor != null) {
      this.timelineEditor.loadFrom(se.timelineEditor);
    }
    return this;
  };

  EditorModel.prototype.communicateWith = function(server, namespace, password) {
    if (this.communicator != null) {
      throw Error("Editor '" + this.id + "' already has a communicator set up");
    }
    this.communicator = new Communicator(this, server, namespace, password);
    return this;
  };

  EditorModel.prototype.run = function() {
    if (this._isRunning) {
      throw Error("Already running");
    }
    this._isRunning = true;
    this._emit('run');
    return this;
  };

  EditorModel.prototype.isRunning = function() {
    return this._isRunning;
  };

  return EditorModel;

})(_Emitter);

},{"./_Emitter":155,"./editorModel/Communicator":171,"./editorModel/GraphModel":172,"./editorModel/MainBoxModel":173,"./editorModel/TimeControlModel":174,"./editorModel/TimelineEditorModel":175,"./editorModel/WorkspaceManagerModel":176,"audio-driven-time-control":68}],153:[function(require,module,exports){
var ControlsView, CursorControl, EditorView, Foxie, GraphView, Kilid, MainBoxView, Moosh,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Foxie = require('foxie');

Moosh = require('moosh');

Kilid = require('kilid');

GraphView = require('./editorView/GraphView');

MainBoxView = require('./editorView/MainBoxView');

ControlsView = require('./editorView/ControlsView');

CursorControl = require('./tools/CursorControl');

module.exports = EditorView = (function() {
  function EditorView(model, parentNode) {
    this.model = model;
    this.parentNode = parentNode;
    this.tick = __bind(this.tick, this);
    this.id = this.model.id;
    this._prepareNode();
    this.cursor = new CursorControl;
    this.kilid = new Kilid(null, this.id + '-kilid').getRootScope();
    this.moosh = new Moosh(document.body, this.kilid);
    this.graph = new GraphView(this);
    this.mainBox = new MainBoxView(this);
    this.controls = new ControlsView(this);
    this.model.on('run', (function(_this) {
      return function() {
        return _this._run();
      };
    })(this));
  }

  EditorView.prototype.tick = function(t) {
    this.model._tick(t);
  };

  EditorView.prototype._prepareNode = function() {
    this.node = Foxie('.theatrejs');
    if (navigator.product === 'Gecko' && navigator.platform === 'Win32') {
      this.node.addClass('badFirefoxScrollbar');
    }
  };

  EditorView.prototype._run = function() {
    this.node.putIn(this.parentNode);
    return this.graph.prepare();
  };

  return EditorView;

})();

},{"./editorView/ControlsView":185,"./editorView/GraphView":186,"./editorView/MainBoxView":187,"./tools/CursorControl":202,"foxie":111,"kilid":131,"moosh":138}],154:[function(require,module,exports){
var fn, _DynamicModel, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Emitter = require('./_Emitter');

fn = require('./tools/fn');

module.exports = _DynamicModel = (function(_super) {
  __extends(_DynamicModel, _super);

  function _DynamicModel() {
    _DynamicModel.__super__.constructor.apply(this, arguments);
    this._shouldReportLocalChange = true;
    this.__wireLocalChange = fn.throttle(this.__wireLocalChange.bind(this), 250);
  }

  _DynamicModel.prototype.loadFrom = function(se) {
    this._shouldReportLocalChange = false;
    this._loadFrom(se);
    return this._shouldReportLocalChange = true;
  };

  _DynamicModel.prototype._reportLocalChange = function() {
    if (!this._shouldReportLocalChange) {
      return;
    }
    return this.__wireLocalChange();
  };

  _DynamicModel.prototype.__wireLocalChange = function() {
    var _ref, _ref1;
    if (this._serializedAddress == null) {
      throw Error("A dynamic model must have a @_serializedAddress");
    }
    if (typeof this._serializedAddress === 'string') {
      this._serializedAddress = [this._serializedAddress];
    }
    if ((_ref = this.rootModel) != null) {
      if ((_ref1 = _ref.communicator) != null) {
        _ref1.wireLocalChange(this._serializedAddress, this.serialize());
      }
    }
  };

  return _DynamicModel;

})(_Emitter);

},{"./_Emitter":155,"./tools/fn":203}],155:[function(require,module,exports){
module.exports=require(70)
},{"utila/scripts/js/lib/array":149}],156:[function(require,module,exports){
var EventType, Events, EventsController, _TimelineRow, _queuedItems,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Events = require('./eventsController/Events');

EventType = require('./eventsController/EventType');

_TimelineRow = require('./_TimelineRow');

_queuedItems = [];

module.exports = EventsController = (function(_super) {
  __extends(EventsController, _super);

  function EventsController() {
    this._serializedAddress = ['timeline', '_eventsControllers', this.id];
    EventsController.__super__.constructor.apply(this, arguments);
    this._types = {};
    this.events = new Events(this);
    this._chronology = this.events.chronology;
    this._lastRanIndex = -1;
  }

  EventsController.prototype._tickForward = function(t) {};

  EventsController.prototype._tickBackward = function(t) {};

  EventsController.prototype.defineType = function(id, options) {
    if (this._types[id] != null) {
      throw Error("An event-type named '" + id + "' already exists");
    }
    this._types[id] = new EventType(this, id, options);
    return this;
  };

  EventsController.prototype.getType = function(id) {
    return this._types[id];
  };

  EventsController.prototype._tickForward = function(t) {
    var i, item, nextIndex, nextItem, _i, _len;
    if (this._chronology.length === 0) {
      return;
    }
    nextIndex = this._lastRanIndex + 1;
    while ((nextItem = this._chronology[nextIndex]) && (nextItem != null)) {
      if (nextItem.t > t) {
        break;
      }
      _queuedItems.push(nextItem);
      nextIndex++;
    }
    for (i = _i = 0, _len = _queuedItems.length; _i < _len; i = ++_i) {
      item = _queuedItems[i];
      item.tickAt(t, i === _queuedItems.length - 1);
    }
    if (_queuedItems.length > 0) {
      _queuedItems.length = 0;
      this._lastRanIndex = nextIndex - 1;
    }
  };

  EventsController.prototype._tickBackward = function(t) {
    var i, item, nextIndex, _i, _len;
    nextIndex = this._lastRanIndex;
    while (true) {
      item = this._chronology[nextIndex];
      if ((item == null) || item.t < t) {
        break;
      }
      _queuedItems.push(item);
      nextIndex--;
    }
    for (i = _i = 0, _len = _queuedItems.length; _i < _len; i = ++_i) {
      item = _queuedItems[i];
      item.tickAt(t, i === _queuedItems.length - 1);
    }
    if (_queuedItems.length > 0) {
      _queuedItems.length = 0;
      this._lastRanIndex = nextIndex;
    }
  };

  return EventsController;

})(_TimelineRow);

},{"./_TimelineRow":162,"./eventsController/EventType":163,"./eventsController/Events":164}],157:[function(require,module,exports){
var IncrementalIsolate;

module.exports = IncrementalIsolate = (function() {
  function IncrementalIsolate(timeline, id, isolate) {
    this.timeline = timeline;
    this.id = id;
    this.isolate = isolate;
    this._props = [];
    this._hadChanges = false;
    this._changedFrom = Infinity;
    this.t = 0;
  }

  IncrementalIsolate.prototype._addProp = function(prop) {
    this._props.push(prop);
  };

  IncrementalIsolate.prototype._reportChange = function(from, to) {
    this._hadChanges = true;
    this._changedFrom = Math.min(this._changedFrom, from);
  };

  IncrementalIsolate.prototype._tickForTimeline = function(t) {
    this.isolate.requestTick(t, this._hadChanges, this._changedFrom);
    this._hadChanges = false;
    this._changedFrom = Infinity;
  };

  IncrementalIsolate.prototype.tick = function(t) {
    if (t < this.t) {
      this._tickBackward(t);
    } else {
      this._tickForward(t);
    }
    this.t = t;
  };

  IncrementalIsolate.prototype._tickForward = function(t) {
    var name, prop, _ref;
    _ref = this._props;
    for (name in _ref) {
      prop = _ref[name];
      prop._tickForward(t);
    }
  };

  IncrementalIsolate.prototype._tickBackward = function(t) {
    var name, prop, _ref;
    _ref = this._props;
    for (name in _ref) {
      prop = _ref[name];
      prop._tickBackward(t);
    }
  };

  return IncrementalIsolate;

})();

},{}],158:[function(require,module,exports){
var Pacs, Prop, _TimelineRow,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Pacs = require('./prop/Pacs');

_TimelineRow = require('./_TimelineRow');

module.exports = Prop = (function(_super) {
  __extends(Prop, _super);

  function Prop(timeline, id) {
    this.timeline = timeline;
    this.id = id;
    this._serializedAddress = ['timeline', '_allProps', this.id];
    Prop.__super__.constructor.apply(this, arguments);
    this.pacs = new Pacs(this);
    this._chronology = this.pacs.chronology;
    this._nextIndexToCheck = 0;
  }

  Prop.prototype.serialize = function() {
    var se;
    se = {
      pacs: this.pacs.serialize()
    };
    return se;
  };

  Prop.prototype._loadFrom = function(se) {
    this.pacs.loadFrom(se.pacs);
  };

  Prop.prototype._getInitial = function() {
    var firstPoint;
    firstPoint = this._chronology[0];
    if (firstPoint != null) {
      return firstPoint.value;
    } else {
      return this.initial;
    }
  };

  Prop.prototype.getValueAt = function(t) {
    var v;
    v = this.pacs.getValueAt(t);
    if (v != null) {
      return v;
    }
    return this._getInitial();
  };

  Prop.prototype._tickForward = function(t) {
    var item, nextIndex, nextItem;
    item = this._chronology[this._nextIndexToCheck];
    if (item == null) {
      return;
    }
    if (item.t > t) {
      if (this._nextIndexToCheck === 0) {
        this._set(this._getInitial());
        this._nextIndexToCheck = 1;
      }
      return;
    }
    nextIndex = this._nextIndexToCheck + 1;
    while ((nextItem = this._chronology[nextIndex]) && (nextItem != null)) {
      if (nextItem.t > t) {
        break;
      }
      item = nextItem;
      this._nextIndexToCheck = nextIndex;
      nextIndex++;
    }
    if (item.isPoint()) {
      this._nextIndexToCheck++;
    }
    this._set(item.tickAt(t));
  };

  Prop.prototype._tickBackward = function(t) {
    var indexToCheck, item;
    item = this._chronology[this._nextIndexToCheck];
    if ((item != null) && item.t <= t) {
      return this._tickForward(t);
    }
    indexToCheck = this._nextIndexToCheck;
    while (true) {
      indexToCheck--;
      item = this._chronology[indexToCheck];
      if (item == null) {
        this._nextIndexToCheck = 0;
        this._set(this._getInitial());
        return;
      }
      if (item.t < t) {
        this._set(item.tickAt(t));
        this._nextIndexToCheck = indexToCheck;
        if (item.isPoint()) {
          this._nextIndexToCheck++;
        }
        return;
      }
    }
  };

  return Prop;

})(_TimelineRow);

},{"./_TimelineRow":162,"./prop/Pacs":166}],159:[function(require,module,exports){
var Prop, PropOfArray,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Prop = require('./Prop');

module.exports = PropOfArray = (function(_super) {
  __extends(PropOfArray, _super);

  function PropOfArray(timeline, id, arrayName, arrayIndex) {
    this.arrayName = arrayName;
    this.arrayIndex = arrayIndex;
    PropOfArray.__super__.constructor.apply(this, arguments);
    this.array = this.timeline._arrays[this.arrayName];
    this.initial = this.array[this.arrayIndex];
  }

  PropOfArray.prototype._set = function(val) {
    this.array[this.arrayIndex] = val;
  };

  return PropOfArray;

})(Prop);

},{"./Prop":158}],160:[function(require,module,exports){
var Prop, PropOfObject,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Prop = require('./Prop');

module.exports = PropOfObject = (function(_super) {
  __extends(PropOfObject, _super);

  function PropOfObject(timeline, id, objectName, _objectSetterName, initial) {
    this.objectName = objectName;
    this._objectSetterName = _objectSetterName;
    this.initial = initial != null ? initial : 0.0;
    PropOfObject.__super__.constructor.apply(this, arguments);
    this.object = this.timeline._objects[this.objectName];
  }

  PropOfObject.prototype._set = function(val) {
    this.object[this._objectSetterName](val);
  };

  return PropOfObject;

})(Prop);

},{"./Prop":158}],161:[function(require,module,exports){
var array, _ChronologyContainer, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Emitter = require('../_Emitter');

array = require('utila/scripts/js/lib/array');

module.exports = _ChronologyContainer = (function(_super) {
  __extends(_ChronologyContainer, _super);

  function _ChronologyContainer(parent) {
    this.parent = parent;
    _ChronologyContainer.__super__.constructor.apply(this, arguments);
    this.chronology = [];
    this.chronologyLength = 0;
    this._changeRange = [Infinity, -Infinity];
    this._idCounter = -1;
  }

  _ChronologyContainer.prototype._getIndexOfItemBeforeOrAt = function(t) {
    var index, item, lastIndex, _i, _len, _ref;
    lastIndex = -1;
    _ref = this.chronology;
    for (index = _i = 0, _len = _ref.length; _i < _len; index = ++_i) {
      item = _ref[index];
      if (item.t > t) {
        break;
      }
      lastIndex = index;
    }
    return lastIndex;
  };

  _ChronologyContainer.prototype._setUpdateRange = function(from, to) {
    this._changeRange[0] = Math.min(this._changeRange[0], from);
    this._changeRange[1] = Math.max(this._changeRange[1], to);
  };

  _ChronologyContainer.prototype._reportChange = function() {
    if (this._changeRange[0] === Infinity && this._changeRange[1] === -Infinity) {
      this.parent._reportIneffectiveChange();
      return;
    }
    this.parent._reportChange(this._changeRange[0], this._changeRange[1]);
    this._changeRange[0] = Infinity;
    this._changeRange[1] = -Infinity;
  };

  _ChronologyContainer.prototype._getItemByIndex = function(index) {
    return this.chronology[index];
  };

  _ChronologyContainer.prototype._getItemIndex = function(item) {
    return this.chronology.indexOf(item);
  };

  _ChronologyContainer.prototype._getItemAt = function(t) {
    var index, item;
    index = this._getIndexOfItemBeforeOrAt(t);
    item = this._getItemByIndex(index);
    if (item == null) {
      return;
    }
    if (item.t !== t) {
      return;
    }
    return item;
  };

  _ChronologyContainer.prototype._itemExistsAt = function(t) {
    return this._getItemAt(t) != null;
  };

  _ChronologyContainer.prototype._injectItemOn = function(item, index) {
    array.injectInIndex(this.chronology, index, item);
  };

  _ChronologyContainer.prototype._pluckItemOn = function(index) {
    array.pluck(this.chronology, index);
  };

  _ChronologyContainer.prototype._recalculateLength = function() {
    var lastItem;
    lastItem = this.chronology[this.chronology.length - 1];
    if (lastItem != null) {
      this.timeline._maximizeDuration(lastItem.t);
      if (lastItem.t !== this.chronologyLength) {
        this.chronologyLength = lastItem.t;
        this._emit('duration-change');
      }
    }
  };

  _ChronologyContainer.prototype.getItemsInRange = function(from, to) {
    var item, items, _i, _len, _ref;
    items = [];
    _ref = this.chronology;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      if (item.t > to) {
        break;
      }
      if (item.t < from) {
        continue;
      }
      items.push(item);
    }
    return items;
  };

  _ChronologyContainer.prototype.done = function() {
    this._recalculateLength();
    this._reportChange();
  };

  return _ChronologyContainer;

})(_Emitter);

},{"../_Emitter":155,"utila/scripts/js/lib/array":149}],162:[function(require,module,exports){
var _DynamicModel, _TimelineRow,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

_DynamicModel = require('../_DynamicModel');

module.exports = _TimelineRow = (function(_super) {
  __extends(_TimelineRow, _super);

  function _TimelineRow(timeline, id) {
    this.timeline = timeline;
    this.id = id;
    this.rootModel = this.timeline.rootModel;
    _TimelineRow.__super__.constructor.apply(this, arguments);
    this._incrementalIsolates = [];
  }

  _TimelineRow.prototype.attachToIncrementalIsolate = function(id) {
    var isolate;
    isolate = this.timeline.getIncrementalIsolate(id);
    if (isolate == null) {
      throw Error("Couldn't find incremental isolate '" + id + "'");
    }
    if (__indexOf.call(this._incrementalIsolates, isolate) >= 0) {
      throw Error("Prop '" + this.id + "' is already attached to isolate '" + isolate.id + "'");
    }
    this._incrementalIsolates.push(isolate);
    this.timeline._pluckFromRegularProps(this);
    isolate._addProp(this);
    return this;
  };

  _TimelineRow.prototype._reportIneffectiveChange = function() {
    return this._reportLocalChange();
  };

  _TimelineRow.prototype._reportChange = function(from, to) {
    var ic, _i, _len, _ref;
    this._reportLocalChange();
    this._emit('change');
    _ref = this._incrementalIsolates;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      ic = _ref[_i];
      ic._reportChange(from, to);
    }
    return this._nextIndexToCheck = 0;
  };

  return _TimelineRow;

})(_DynamicModel);

},{"../_DynamicModel":154}],163:[function(require,module,exports){
var EventType;

module.exports = EventType = (function() {
  function EventType(controller, id, options) {
    this.controller = controller;
    this.id = id;
    this._hasValidator = false;
    this._hasFilter = false;
    if (typeof options === 'function') {
      this._fn = options;
    } else if (typeof options === 'object') {
      this._fn = options.fn;
      if (typeof this._fn !== 'function') {
        throw Error("Event type must have an fn defined");
      }
      if (typeof options.validate === 'function') {
        this._hasValidator = true;
        this._validate = options.validate;
      }
      if (typeof options.filter === 'function') {
        this._hasFilter = true;
        this._filter = options.filter;
      }
    } else {
      throw Error("Invalid options: " + options);
    }
    if (!this._hasFilter) {
      this._filter = function() {};
    }
    if (!this._hasValidator) {
      this._validate = function() {};
    }
  }

  EventType.prototype.validate = function(arg) {
    if (this._hasValidator) {
      return this._validate(arg);
    } else {
      return true;
    }
  };

  EventType.prototype.filter = function(arg) {
    if (this._hasFilter) {
      return this._filter(arg);
    } else {
      return arg;
    }
  };

  EventType.prototype.run = function(forward, last, supposedT, currentT, args) {
    this._fn(forward, last, supposedT, currentT, args);
  };

  return EventType;

})();

},{}],164:[function(require,module,exports){
var Event, Events, array, _ChronologyContainer,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

array = require('utila/scripts/js/lib/array');

Event = require('./events/Event');

_ChronologyContainer = require('../_ChronologyContainer');

module.exports = Events = (function(_super) {
  __extends(Events, _super);

  function Events(controller) {
    this.controller = controller;
    this.timeline = this.controller.timeline;
    Events.__super__.constructor.apply(this, arguments);
  }

  Events.prototype.add = function(typeId, t, arg) {
    var e, id;
    this._idCounter++;
    id = this.controller.id + '-event-' + this._idCounter;
    e = new Event(this, id, typeId, t, arg);
    this._addEvent(e);
    return e;
  };

  Events.prototype._addEvent = function(e) {
    this._emit('new-event', e);
  };

  Events.prototype.done = function() {
    return Events.__super__.done.apply(this, arguments);
  };

  return Events;

})(_ChronologyContainer);

},{"../_ChronologyContainer":161,"./events/Event":165,"utila/scripts/js/lib/array":149}],165:[function(require,module,exports){
var Event, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Emitter = require('../../../_Emitter');

module.exports = Event = (function(_super) {
  __extends(Event, _super);

  function Event(events, id, typeId, t, arg) {
    var index, next, prevIndex;
    this.events = events;
    this.id = id;
    this.typeId = typeId;
    this.t = t;
    Event.__super__.constructor.apply(this, arguments);
    this._eventType = this.events.controller.getType(this.typeId);
    if (this._eventType == null) {
      throw Error("Event type '" + this.typeId + "' doesn't exist");
    }
    if (this.events._itemExistsAt(this.t)) {
      throw Error("Another event sits at '" + this.t + "'");
    }
    prevIndex = this.events._getIndexOfItemBeforeOrAt(this.t);
    index = prevIndex + 1;
    this.events._injectItemOn(this, index);
    next = this.events._getItemByIndex(index + 1);
    this.events._setUpdateRange(this.t, next != null ? next.t : Infinity);
    this._arg = null;
    this._filteredArg = null;
    this.setArg(arg);
  }

  Event.prototype.setArg = function(newArg) {
    var result;
    result = this._eventType.validate(newArg);
    if (result !== true) {
      return result;
    }
    this._filteredArg = this._eventType.filter(result);
    this._emit('arg-changed');
    return true;
  };

  Event.prototype.tickAt = function(t, asLast) {
    var forward;
    forward = t >= this.t;
    this._eventType.run(forward, asLast, this.t, t, this._filteredArg);
  };

  return Event;

})(_Emitter);

},{"../../../_Emitter":155}],166:[function(require,module,exports){
var Connector, PacSelection, Pacs, Point, array, _ChronologyContainer,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

array = require('utila/scripts/js/lib/array');

Point = require('./pacs/Point');

Connector = require('./pacs/Connector');

PacSelection = require('./pacs/PacSelection');

_ChronologyContainer = require('../_ChronologyContainer');

module.exports = Pacs = (function(_super) {
  __extends(Pacs, _super);

  function Pacs(prop) {
    this.prop = prop;
    this.timeline = this.prop.timeline;
    Pacs.__super__.constructor.apply(this, arguments);
    this.peak = this.prop.initial;
    this.bottom = this.prop.initial;
    if (!(Number.isFinite(this.bottom) && Number.isFinite(this.peak))) {
      this.bottom = 0;
      this.peak = 100;
    }
    if (this.peak === this.bottom) {
      if (this.bottom === 0) {
        this.peak = 100;
      } else {
        this.peak = Math.abs(this.bottom) * 2;
      }
    }
  }

  Pacs.prototype.serialize = function() {
    var connectors, item, points, se, _i, _j, _len, _len1, _ref, _ref1;
    se = {};
    se._idCounter = this._idCounter;
    se.chronologyLength = this.chronologyLength;
    se.chronology = {};
    se.chronology.points = points = [];
    _ref = this.chronology;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      if (item instanceof Point) {
        points.push(item.serialize());
      }
    }
    se.chronology.connectors = connectors = [];
    _ref1 = this.chronology;
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      item = _ref1[_j];
      if (item instanceof Connector) {
        connectors.push(item.serialize());
      }
    }
    return se;
  };

  Pacs.prototype.loadFrom = function(se) {
    var item, _i, _j, _len, _len1, _ref, _ref1;
    this._idCounter = se._idCounter;
    this.chronologyLength = Number(se.chronologyLength);
    _ref = se.chronology.points;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      Point.constructFrom(item, this);
    }
    _ref1 = se.chronology.connectors;
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      item = _ref1[_j];
      Connector.constructFrom(item, this);
    }
    this.done();
  };

  Pacs.prototype._pointExistsAt = function(t) {
    return this._getPointAt(t) != null;
  };

  Pacs.prototype._getPointAt = function(t) {
    var index, item;
    index = this._getIndexOfItemBeforeOrAt(t);
    item = this._getItemByIndex(index);
    if (item == null) {
      return;
    }
    if (item.isConnector()) {
      item = this._getItemByIndex(index - 1);
    }
    if (item.t !== t) {
      return null;
    }
    return item;
  };

  Pacs.prototype._connectorExistsAt = function(t) {
    var index, item;
    index = this._getIndexOfItemBeforeOrAt(t);
    item = this._getItemByIndex(index);
    if (item == null) {
      return false;
    }
    if (!item.isConnector()) {
      return false;
    }
    return item.t === t;
  };

  Pacs.prototype._injectPointOn = function(point, index) {
    this._injectItemOn(point, index);
  };

  Pacs.prototype._injectConnectorOn = function(connector, index) {
    this._injectItemOn(connector, index);
  };

  Pacs.prototype._pluckPointOn = function(point, index) {
    this._pluckItemOn(index);
  };

  Pacs.prototype._pluckConnectorOn = function(connector, index) {
    this._pluckItemOn(index);
  };

  Pacs.prototype.addPoint = function(t, val, leftHandlerX, leftHandlerY, rightHandlerX, rightHandlerY) {
    var p;
    this._idCounter++;
    p = new Point(this, this.prop.id + '-point-' + this._idCounter, t, val, leftHandlerX, leftHandlerY, rightHandlerX, rightHandlerY);
    this._addPoint(p);
    return p;
  };

  Pacs.prototype._addPoint = function(p) {
    this._emit('new-point', p);
  };

  Pacs.prototype.addConnector = function(t) {
    var c;
    this._idCounter++;
    c = new Connector(this, this.prop.id + '-connector-' + this._idCounter, t);
    this._addConnector(c);
    return c;
  };

  Pacs.prototype._addConnector = function(c) {
    this._emit('new-connector', c);
  };

  Pacs.prototype.done = function() {
    this._recalculatePeakAndBottom();
    Pacs.__super__.done.apply(this, arguments);
  };

  Pacs.prototype._recalculatePeakAndBottom = function() {
    var bottom, item, peak, vals, _i, _len, _ref;
    bottom = this.prop.initial;
    peak = this.prop.initial;
    if (this.chronology.length === 0) {
      bottom = 0;
      peak = 100;
    } else {
      vals = [];
      _ref = this.chronology;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        item = _ref[_i];
        if (item instanceof Connector) {
          continue;
        }
        vals.push(item.value);
        vals.push(item.value + item.leftHandler[1]);
        vals.push(item.value + item.rightHandler[1]);
      }
      peak = Math.max.apply(Math, vals);
      bottom = Math.min.apply(Math, vals);
      if (!(Number.isFinite(peak) && Number.isFinite(bottom))) {
        bottom = 0;
        peak = 100;
      } else if (peak === bottom) {
        if (bottom === 0) {
          peak = 100;
        } else {
          peak = bottom * 2;
        }
      }
    }
    if (!(bottom === this.bottom && peak === this.peak)) {
      this.peak = peak;
      this.bottom = bottom;
      this._emit('peak-and-bottom-change');
    }
  };

  Pacs.prototype.getPointsInRange = function(from, to) {
    var item, points, _i, _len, _ref;
    points = [];
    _ref = this.chronology;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      if (item.t > to) {
        break;
      }
      if (item.t < from) {
        continue;
      }
      if (!item.isPoint()) {
        continue;
      }
      points.push(item);
    }
    return points;
  };

  Pacs.prototype.getOrMakePointOnOrInVicinity = function(t, tolerance) {
    var distance, lastDistance, p, point, points, val, _i, _len;
    points = this.getPointsInRange(t - tolerance, t + tolerance);
    point = null;
    lastDistance = Infinity;
    for (_i = 0, _len = points.length; _i < _len; _i++) {
      p = points[_i];
      distance = Math.abs(p.t - t);
      if (distance < lastDistance) {
        point = p;
        lastDistance = distance;
      }
    }
    if (point == null) {
      val = this.prop.getValueAt(t);
      point = this.addPoint(t, val, 10, 0, 10, 0);
    }
    return point;
  };

  Pacs.prototype.getSelection = function(from, to) {
    return new PacSelection(this, from, to);
  };

  Pacs.prototype.getValueAt = function(t) {
    var index, item;
    index = this._getIndexOfItemBeforeOrAt(t);
    item = this._getItemByIndex(index);
    if (item == null) {
      return;
    }
    if (item.isPoint()) {
      return item.value;
    }
    return item.tickAt(t);
  };

  return Pacs;

})(_ChronologyContainer);

},{"../_ChronologyContainer":161,"./pacs/Connector":167,"./pacs/PacSelection":168,"./pacs/Point":169,"utila/scripts/js/lib/array":149}],167:[function(require,module,exports){
var Connector, UnitBezier, _PacItem,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_PacItem = require('./_PacItem');

UnitBezier = require('timing-function/scripts/js/lib/UnitBezier');

module.exports = Connector = (function(_super) {
  var self;

  __extends(Connector, _super);

  self = Connector;

  function Connector(pacs, id, t) {
    var nextPoint, nextPointIndex, prevPoint, prevPointIndex;
    this.pacs = pacs;
    this.id = id;
    this.t = t;
    Connector.__super__.constructor.apply(this, arguments);
    if (this.pacs._connectorExistsAt(t)) {
      throw Error("Another connector already exists at t");
    }
    prevPointIndex = this.pacs._getIndexOfItemBeforeOrAt(t);
    prevPoint = this.pacs._getItemByIndex(prevPointIndex);
    if (!((prevPoint != null) && prevPoint.t === t)) {
      throw Error("No point sits at this t");
    }
    nextPointIndex = prevPointIndex + 1;
    nextPoint = this.pacs._getItemByIndex(nextPointIndex);
    if (!((nextPoint != null) && nextPoint.isPoint())) {
      throw Error("There is no point to come after the connector");
    }
    this.pacs._injectConnectorOn(this, nextPointIndex);
    this.pacs._setUpdateRange(t, nextPoint.t);
    this.bezier = new UnitBezier(0, 0, 0, 0);
    this._recalculateBezier();
  }

  Connector.prototype.serialize = function() {
    var se;
    se = {};
    se.t = this.t;
    se.id = this.id;
    return se;
  };

  Connector.constructFrom = function(se, pacs) {
    var c;
    c = new self(pacs, se.id, se.t);
    pacs._addConnector(c);
  };

  Connector.prototype.isConnector = function() {
    return true;
  };

  Connector.prototype.isPoint = function() {
    return false;
  };

  Connector.prototype.remove = function() {
    this.pacs._setUpdateRange(this.getLeftPoint().t, this.getRightPoint().t);
    this.pacs._pluckConnectorOn(this, this.getIndex());
    this._remove();
  };

  Connector.prototype._remove = function() {
    this._emit('remove');
  };

  Connector.prototype.getIndex = function() {
    return this.pacs._getItemIndex(this);
  };

  Connector.prototype.getLeftPoint = function() {
    return this.pacs._getItemByIndex(this.getIndex() - 1);
  };

  Connector.prototype.getRightPoint = function() {
    return this.pacs._getItemByIndex(this.getIndex() + 1);
  };

  Connector.prototype._bezierShouldChange = function() {
    this._recalculateBezier();
    this._emit('bezier-change');
  };

  Connector.prototype._recalculateBezier = function() {
    var leftPoint, rightPoint, x1, x2, y1, y2;
    leftPoint = this.getLeftPoint();
    rightPoint = this.getRightPoint();
    this.leftHandler = leftPoint.rightHandler;
    this.rightHandler = rightPoint.leftHandler;
    this.leftValue = leftPoint.value;
    this.rightValue = rightPoint.value;
    this._valDiff = this.rightValue - this.leftValue;
    if (this._valDiff === 0) {
      this._valDiff = 1e-6;
    }
    this.leftT = leftPoint.t;
    this.rightT = rightPoint.t;
    this._timeDiff = this.rightT - this.leftT;
    x1 = this.leftHandler[0] / this._timeDiff;
    x2 = 1 - (this.rightHandler[0] / this._timeDiff);
    y1 = this.leftHandler[1] / this._valDiff;
    y2 = 1 + (this.rightHandler[1] / this._valDiff);
    this.badBezier = x1 < 0 || x1 > 1 || x2 < 0 || x2 > 1;
    if (x1 < 0) {
      x1 = 0;
    }
    if (x1 > 1) {
      x1 = 1;
    }
    if (x2 < 0) {
      x2 = 0;
    }
    if (x2 > 1) {
      x2 = 1;
    }
    this.bezier.set(x1, y1, x2, y2);
  };

  Connector.prototype.tickAt = function(t) {
    var prog;
    prog = (t - this.leftT) / this._timeDiff;
    return this.leftValue + (this._valDiff * this.bezier.solve(prog, 1e-6));
  };

  return Connector;

})(_PacItem);

},{"./_PacItem":170,"timing-function/scripts/js/lib/UnitBezier":148}],168:[function(require,module,exports){
var Connector, PacSelection, Point,
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

Point = require('./Point');

Connector = require('./Connector');

module.exports = PacSelection = (function() {
  function PacSelection(pacs, from, to) {
    this.pacs = pacs;
    this.from = from;
    this.to = to;
    this._init();
  }

  PacSelection.prototype._init = function() {
    var lastItem;
    this._items = this.pacs.getItemsInRange(this.from, this.to);
    this._firstPoint = null;
    this._lastPoint = null;
    this.empty = this._items.length === 0;
    this.realFrom = this.from;
    this.realTo = this.to;
    if (!this.empty) {
      this._firstPoint = this._items[0];
      lastItem = this._items[this._items.length - 1];
      if (lastItem.isConnector()) {
        this._lastPoint = this._items[this._items.length - 2];
        this._items.pop();
      } else {
        this._lastPoint = lastItem;
      }
      this.realFrom = this._firstPoint.t;
      return this.realTo = this._lastPoint.t;
    }
  };

  PacSelection.prototype.canMoveBy = function(delta) {
    var item, nextConnector, residingItems, _i, _len;
    if (this.empty) {
      return true;
    }
    residingItems = this.pacs.getItemsInRange(this.realFrom + delta, this.realTo + delta);
    nextConnector = this._lastPoint.getRightConnector();
    for (_i = 0, _len = residingItems.length; _i < _len; _i++) {
      item = residingItems[_i];
      if (!(__indexOf.call(this._items, item) >= 0 || item === nextConnector)) {
        return false;
      }
    }
    return true;
  };

  PacSelection.prototype.moveBy = function(delta) {
    var c, connectors, item, p, pointAfter, pointBefore, points, se, toRemove, wasConnectedToTheLeft, wasConnectedToTheRight, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref;
    if (this.empty) {
      return;
    }
    pointBefore = this._firstPoint.getLeftPoint();
    wasConnectedToTheLeft = this._firstPoint.isConnectedToTheLeft();
    wasConnectedToTheRight = this._lastPoint.isConnectedToTheRight();
    pointAfter = this._lastPoint.getRightPoint();
    points = [];
    connectors = [];
    toRemove = [];
    _ref = this._items;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      se = item.serialize();
      if (item.isPoint()) {
        points.push(se);
        toRemove.push(item);
      } else {
        connectors.push(se);
        toRemove.unshift(item);
      }
    }
    for (_j = 0, _len1 = toRemove.length; _j < _len1; _j++) {
      item = toRemove[_j];
      item.remove();
    }
    for (_k = 0, _len2 = points.length; _k < _len2; _k++) {
      p = points[_k];
      p.t += delta;
      Point.constructFrom(p, this.pacs);
    }
    for (_l = 0, _len3 = connectors.length; _l < _len3; _l++) {
      c = connectors[_l];
      c.t += delta;
      Connector.constructFrom(c, this.pacs);
    }
    this.from += delta;
    this.to += delta;
    this._init();
    if (wasConnectedToTheLeft && this.realFrom > pointBefore.t && ((pointAfter == null) || this.realTo < pointAfter.t)) {
      this._firstPoint.connectToTheLeft();
    }
    if (wasConnectedToTheRight && this.realTo < pointAfter.t && ((pointBefore == null) || this.realFrom > pointBefore.t)) {
      this._lastPoint.connectToTheRight();
    }
  };

  return PacSelection;

})();

},{"./Connector":167,"./Point":169}],169:[function(require,module,exports){
var Point, _PacItem,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_PacItem = require('./_PacItem');

module.exports = Point = (function(_super) {
  var self;

  __extends(Point, _super);

  self = Point;

  function Point(pacs, id, t, value, leftHandlerX, leftHandlerY, rightHandlerX, rightHandlerY) {
    this.pacs = pacs;
    this.id = id;
    this.t = t;
    this.value = value;
    this.handler = new Float32Array(4);
    this.leftHandler = this.handler.subarray(0, 2);
    this.rightHandler = this.handler.subarray(2, 4);
    this._setHandlers(leftHandlerX, leftHandlerY, rightHandlerX, rightHandlerY);
    Point.__super__.constructor.apply(this, arguments);
    this._putOnTime();
  }

  Point.prototype.serialize = function() {
    var se;
    se = {};
    se.t = this.t;
    se.value = this.value;
    se.id = this.id;
    se.handler = Array.prototype.slice.call(this.handler, 0);
    return se;
  };

  Point.constructFrom = function(se, pacs) {
    var p;
    p = new self(pacs, se.id, se.t, se.value, se.handler[0], se.handler[1], se.handler[2], se.handler[3]);
    pacs._addPoint(p);
  };

  Point.prototype._putOnTime = function() {
    var index, newConnectorIndex, nextItem, nextPoint, prevIndex, prevItem, prevPoint;
    if (this.pacs._pointExistsAt(this.t)) {
      throw Error("Another point already exists at t:" + this.t);
    }
    prevIndex = this.pacs._getIndexOfItemBeforeOrAt(this.t);
    prevItem = this.pacs._getItemByIndex(prevIndex);
    index = prevIndex + 1;
    if ((prevItem != null) && prevItem.isConnector()) {
      this.pacs._injectPointOn(this, index);
      prevItem._bezierShouldChange();
      newConnectorIndex = index + 1;
      this.pacs.addConnector(this.t);
      prevPoint = this.pacs._getItemByIndex(prevIndex - 1);
      nextPoint = this.pacs._getItemByIndex(newConnectorIndex + 1);
      return this.pacs._setUpdateRange(prevPoint.t, nextPoint.t);
    } else {
      this.pacs._injectPointOn(this, index);
      nextItem = this.pacs._getItemByIndex(index + 1);
      return this.pacs._setUpdateRange(this.t, nextItem != null ? nextItem.t : Infinity);
    }
  };

  Point.prototype.remove = function() {
    var updatedFrom, updatedTo;
    updatedFrom = this.t;
    updatedTo = Infinity;
    if (this.hasLeftPoint() && this.isConnectedToTheLeft()) {
      this.getLeftConnector().remove();
      updatedFrom = this.getLeftPoint().t;
    }
    if (this.isConnectedToTheRight()) {
      this.getRightConnector().remove();
      updatedTo = this.getRightPoint().t;
    } else if (this.hasRightPoint()) {
      updatedTo = this.getRightPoint().t;
    }
    this.pacs._setUpdateRange(updatedFrom, updatedTo);
    this.pacs._pluckPointOn(this, this._getIndex());
    this._remove();
  };

  Point.prototype._remove = function() {
    this._emit('remove');
    this.pacs = null;
  };

  Point.prototype.isConnector = function() {
    return false;
  };

  Point.prototype.isPoint = function() {
    return true;
  };

  Point.prototype._getIndex = function() {
    var i;
    i = this.pacs._getItemIndex(this);
    if (i === -1) {
      throw Error("This point doesn't reside in the timeline anymore");
    }
    return i;
  };

  Point.prototype.getLeftConnector = function() {
    var item;
    item = this.pacs._getItemByIndex(this._getIndex() - 1);
    if ((item != null) && item.isConnector()) {
      return item;
    }
  };

  Point.prototype.getRightConnector = function() {
    var item;
    item = this.pacs._getItemByIndex(this._getIndex() + 1);
    if ((item != null) && item.isConnector()) {
      return item;
    }
  };

  Point.prototype.isConnectedToTheLeft = function() {
    return this.getLeftConnector() != null;
  };

  Point.prototype.isConnectedToTheRight = function() {
    return this.getRightConnector() != null;
  };

  Point.prototype.getLeftPoint = function() {
    if (this.isConnectedToTheLeft()) {
      return this.pacs._getItemByIndex(this._getIndex() - 2);
    } else {
      return this.pacs._getItemByIndex(this._getIndex() - 1);
    }
  };

  Point.prototype.hasLeftPoint = function() {
    return this.getLeftPoint() != null;
  };

  Point.prototype.getRightPoint = function() {
    if (this.isConnectedToTheRight()) {
      return this.pacs._getItemByIndex(this._getIndex() + 2);
    } else {
      return this.pacs._getItemByIndex(this._getIndex() + 1);
    }
  };

  Point.prototype.hasRightPoint = function() {
    return this.getRightPoint() != null;
  };

  Point.prototype.canConnect = function() {
    return this.canConnectToLeft() || this.canConnectToRight();
  };

  Point.prototype.canConnectToLeft = function() {
    return this.hasLeftPoint() && !this.isConnectedToTheLeft();
  };

  Point.prototype.canConnectToRight = function() {
    return this.hasRightPoint() && !this.isConnectedToTheRight();
  };

  Point.prototype.connectToTheRight = function() {
    if (!this.canConnectToRight()) {
      throw Error("Cannot connect to right");
    }
    this.pacs.addConnector(this.t);
    return this;
  };

  Point.prototype.connectToTheLeft = function() {
    if (!this.canConnectToLeft()) {
      throw Error("Cannot connect to left");
    }
    this.pacs.addConnector(this.getLeftPoint().t);
    return this;
  };

  Point.prototype.setValue = function(value) {
    var nextPoint, updatedFrom, updatedTo;
    if (value === this.value) {
      return;
    }
    this.value = value;
    updatedFrom = this.t;
    updatedTo = Infinity;
    if (this.isConnectedToTheLeft()) {
      updatedFrom = this.getLeftPoint().t;
    }
    nextPoint = this.getRightPoint();
    if (nextPoint != null) {
      updatedTo = nextPoint.t;
    }
    this.pacs._setUpdateRange(updatedFrom, updatedTo);
    this._emit('value-change');
    if (this.isConnectedToTheLeft()) {
      this.getLeftConnector()._bezierShouldChange();
    }
    if (this.isConnectedToTheRight()) {
      this.getRightConnector()._bezierShouldChange();
    }
  };

  Point.prototype._setHandlers = function(x1, y1, x2, y2) {
    this._setLeftHandler(x1, y1);
    this._setRightHandler(x2, y2);
  };

  Point.prototype._setLeftHandler = function(x, y) {
    if (!(Number.isFinite(x) && Number.isFinite(y))) {
      throw Error("Handlers should both be finite numbers. Given: '" + x + ", " + y + "'");
    }
    if (x < 0) {
      throw Error("Handler must be a positive number");
    }
    this.leftHandler[0] = x;
    this.leftHandler[1] = y;
  };

  Point.prototype._setRightHandler = function(x, y) {
    if (!(Number.isFinite(x) && Number.isFinite(y))) {
      throw Error("Handlers should both be finite numbers. Given: '" + x + ", " + y + "'");
    }
    if (x < 0) {
      throw Error("Handler must be a positive number");
    }
    this.rightHandler[0] = x;
    this.rightHandler[1] = y;
  };

  Point.prototype.setLeftHandler = function(x, y) {
    this._setLeftHandler(x, y);
    this._emit('handler-change');
    if (this.isConnectedToTheLeft()) {
      this.getLeftConnector()._bezierShouldChange();
      this.pacs._setUpdateRange(this.getLeftPoint().t, this.t);
    }
  };

  Point.prototype.setRightHandler = function(x, y) {
    var updatedFrom, updatedTo;
    this._setRightHandler(x, y);
    this._emit('handler-change');
    updatedFrom = this.t;
    updatedTo = Infinity;
    if (this.isConnectedToTheRight()) {
      this.getRightConnector()._bezierShouldChange();
      updatedTo = this.getRightPoint().t;
      this.pacs._setUpdateRange(updatedFrom, updatedTo);
    }
  };

  Point.prototype.setBothHandlers = function(x1, y1, x2, y2) {
    var updatedFrom, updatedTo;
    this._setHandlers(x1, y1, x2, y2);
    this._emit('handler-change');
    updatedFrom = this.t;
    updatedTo = Infinity;
    if (this.isConnectedToTheRight()) {
      this.getRightConnector()._bezierShouldChange();
      updatedTo = this.getRightPoint().t;
    }
    if (this.isConnectedToTheLeft()) {
      this.getLeftConnector()._bezierShouldChange();
      updatedFrom = this.getLeftPoint().t;
    }
    if (this.isConnectedToTheLeft() || this.isConnectedToTheRight()) {
      this.pacs._setUpdateRange(updatedFrom, updatedTo);
    }
  };

  Point.prototype.tickAt = function(t) {
    return this.value;
  };

  Point.prototype.setTime = function(t) {
    var diff, leftBound, oldLeftPoint, oldRightPoint, oldT, rightBound, wasConnectedToLeft, wasConnectedToRight, _ref;
    oldT = this.t;
    diff = t - this.t;
    wasConnectedToLeft = this.isConnectedToTheLeft();
    wasConnectedToRight = this.isConnectedToTheRight();
    leftBound = 0;
    rightBound = Infinity;
    if (this.hasLeftPoint()) {
      oldLeftPoint = this.getLeftPoint();
      leftBound = oldLeftPoint.t;
    }
    if (this.hasRightPoint()) {
      oldRightPoint = this.getRightPoint();
      rightBound = oldRightPoint.t;
    }
    if (wasConnectedToLeft) {
      this.getLeftConnector().remove();
    }
    if (wasConnectedToRight) {
      this.getRightConnector().remove();
    }
    this.pacs._pluckPointOn(this, this._getIndex());
    this.t = t;
    this._putOnTime();
    if ((leftBound < (_ref = this.t) && _ref < rightBound)) {
      if (wasConnectedToLeft) {
        this.pacs.addConnector(oldLeftPoint.t);
      }
      if (wasConnectedToRight) {
        this.pacs.addConnector(this.t);
      }
    } else {
      if (wasConnectedToLeft && wasConnectedToRight) {
        this.pacs.addConnector(oldLeftPoint.t);
      }
      if (diff < 0) {
        if (wasConnectedToLeft && oldLeftPoint.getLeftPoint() === this && !this.isConnectedToTheRight()) {
          this.pacs.addConnector(this.t);
        }
      } else {
        if (wasConnectedToRight && oldRightPoint.getRightPoint() === this && !this.isConnectedToTheLeft()) {
          this.pacs.addConnector(oldRightPoint.t);
        }
      }
    }
    this._emit('time-change');
    return this;
  };

  return Point;

})(_PacItem);

},{"./_PacItem":170}],170:[function(require,module,exports){
var _Emitter, _PacItem,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Emitter = require('../../../_Emitter');

module.exports = _PacItem = (function(_super) {
  __extends(_PacItem, _super);

  function _PacItem() {
    return _PacItem.__super__.constructor.apply(this, arguments);
  }

  return _PacItem;

})(_Emitter);

},{"../../../_Emitter":155}],171:[function(require,module,exports){
var Communicator, ConnectionToServer,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ConnectionToServer = require('./communicator/ConnectionToServer');

module.exports = Communicator = (function() {
  function Communicator(editor, _server, _namespaceName, _password) {
    this.editor = editor;
    this._server = _server;
    this._namespaceName = _namespaceName;
    this._password = _password;
    this._load = __bind(this._load, this);
    this.connection = new ConnectionToServer(this);
    this.connection.connect().then(this._load);
    this._loaded = false;
  }

  Communicator.prototype._load = function() {
    if (this.editor.debug) {
      console.log('asking for head-data');
    }
    return this.connection.request('head-data').then((function(_this) {
      return function(data) {
        if (_this.editor.debug) {
          console.log('received head-data', data);
        }
        _this.editor.loadFrom(data);
        return _this._loaded = true;
      };
    })(this));
  };

  Communicator.prototype.wireLocalChange = function(address, newData) {
    var req;
    if (!this._loaded) {
      if (this.editor.debug) {
        console.log('cannot wire anything when not loaded');
      }
      return;
    }
    if (this.editor.debug) {
      console.info('local change', address, newData);
      console.info('wiring local change for', address);
    }
    req = {
      address: address,
      newData: newData
    };
    this.connection.request('replace-part-of-head', req).then((function(_this) {
      return function(response) {
        if (_this.editor.debug) {
          console.log('server responded for', address, response);
        }
      };
    })(this));
  };

  return Communicator;

})();

},{"./communicator/ConnectionToServer":177}],172:[function(require,module,exports){
var GraphModel, GroupModel;

GroupModel = require('./graphModel/GroupModel');

module.exports = GraphModel = (function() {
  function GraphModel(editor) {
    this.editor = editor;
    this.categories = {};
    this._actorProps = {};
  }

  GraphModel.prototype.getGroup = function(name) {
    var cat;
    if (this.categories[name] == null) {
      this.categories[name] = cat = new GroupModel(this, name);
    }
    return this.categories[name];
  };

  GraphModel.prototype.getCategories = function() {
    return this.categories;
  };

  GraphModel.prototype._addActorProp = function(id, actorProp) {
    if (this._actorProps[id] != null) {
      throw Error("ActorProp with '" + id + "' is already in the graph");
    }
    this._actorProps[id] = actorProp;
  };

  GraphModel.prototype.getActorPropById = function(id) {
    return this._actorProps[id];
  };

  return GraphModel;

})();

},{"./graphModel/GroupModel":178}],173:[function(require,module,exports){
var MainBoxModel, _DynamicModel,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_DynamicModel = require('../_DynamicModel');

module.exports = MainBoxModel = (function(_super) {
  __extends(MainBoxModel, _super);

  function MainBoxModel(editor) {
    this.editor = editor;
    MainBoxModel.__super__.constructor.apply(this, arguments);
    this._serializedAddress = 'mainBox';
    this.rootModel = this.editor;
    this.height = 400;
    this._isVisible = true;
  }

  MainBoxModel.prototype.isVisible = function() {
    return this._isVisible;
  };

  MainBoxModel.prototype.setVisibility = function(newVisibility) {
    newVisibility = Boolean(newVisibility);
    if (newVisibility === this._isVisible) {
      return;
    }
    this._isVisible = newVisibility;
    this._emit('visibility-toggle');
    return this._reportLocalChange();
  };

  MainBoxModel.prototype.toggleVisibility = function() {
    this.setVisibility(!this._isVisible);
  };

  MainBoxModel.prototype.serialize = function() {
    var se;
    se = {
      height: this.height,
      _isVisible: this._isVisible
    };
    return se;
  };

  MainBoxModel.prototype._loadFrom = function(se) {
    this.setHeight(se.height);
    this.setVisibility(Boolean(se._isVisible));
  };

  MainBoxModel.prototype.setHeight = function(newH) {
    if (this.height === newH) {
      return;
    }
    this.height = newH;
    this._emit('height-change');
    this._reportLocalChange();
  };

  return MainBoxModel;

})(_DynamicModel);

},{"../_DynamicModel":154}],174:[function(require,module,exports){
var TimeControlModel, _DynamicModel,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_DynamicModel = require('../_DynamicModel');

module.exports = TimeControlModel = (function(_super) {
  __extends(TimeControlModel, _super);

  function TimeControlModel(editor) {
    this.editor = editor;
    this.rootModel = this.editor;
    this._serializedAddress = ['timeControl'];
    TimeControlModel.__super__.constructor.apply(this, arguments);
    this.audio = this.editor.audio;
    this.timeline = this.editor.timeline;
    this.duration = 0;
    this.audio.on('duration-change', (function(_this) {
      return function() {
        return _this._recheckAudioDuration();
      };
    })(this));
    this._recheckAudioDuration();
    this.timeline.on('duration-change', (function(_this) {
      return function() {
        return _this._recheckTimelineDuration();
      };
    })(this));
    this._recheckTimelineDuration();
    this.audio.on('play', (function(_this) {
      return function() {
        return _this._updatePlayState();
      };
    })(this));
    this.audio.on('pause', (function(_this) {
      return function() {
        return _this._updatePlayState();
      };
    })(this));
    this.audio.on('scheduled-to-play', (function(_this) {
      return function() {
        return _this._updatePlayState();
      };
    })(this));
    this.t = 0;
    this._focus = {
      from: 0,
      to: 1000,
      duration: 1000
    };
    this.audio.on('tick', (function(_this) {
      return function(t) {
        return _this.timeline.tick(t);
      };
    })(this));
    this.timeline.on('tick', (function(_this) {
      return function() {
        return _this._updateT();
      };
    })(this));
    this._updateT();
    this._lastPlayedTickAt = 0;
    setTimeout((function(_this) {
      return function() {
        return _this.tick(0);
      };
    })(this), 0);
  }

  TimeControlModel.prototype.serialize = function() {
    var se;
    se = {};
    se.t = this.t;
    se._focus = {
      from: this._focus.from,
      to: this._focus.to
    };
    se._lastPlayedTickAt = this._lastPlayedTickAt;
    return se;
  };

  TimeControlModel.prototype._loadFrom = function(se) {
    this.pause();
    this.changeFocusArea(se._focus.from, se._focus.to);
    this.tick(Number(se.t));
  };

  TimeControlModel.prototype._recheckTimelineDuration = function() {
    return this.audio.maximizeDuration(this.timeline.duration + 5000);
  };

  TimeControlModel.prototype._recheckAudioDuration = function() {
    return this._setDuration(this.audio.duration);
  };

  TimeControlModel.prototype._setDuration = function(duration) {
    this.duration = duration;
    this._emit('duration-change');
  };

  TimeControlModel.prototype._updateT = function() {
    if (this.timeline.t !== this.t) {
      this.t = this.timeline.t;
      this._emit('time-change');
      this._reportLocalChange();
    }
  };

  TimeControlModel.prototype.tick = function(t) {
    this.audio.seekTo(t);
  };

  TimeControlModel.prototype.tickOnSpot = function() {
    this.timeline.tick(this.timeline.t);
  };

  TimeControlModel.prototype.changeFocusArea = function(from, to) {
    this._focus.from = from;
    this._focus.to = to;
    this._focus.duration = to - from;
    this._emit('focus-change');
    this._reportLocalChange();
  };

  TimeControlModel.prototype.getFocusArea = function() {
    if (this._focus.duration === 0) {
      this._focus.to = this.timeline.duration;
      this._focus.duration = this.timeline.duration;
    }
    return this._focus;
  };

  TimeControlModel.prototype._tick = function(t) {
    this.audio.tick(t);
  };

  TimeControlModel.prototype._updatePlayState = function() {
    return this._emit('play-state-change');
  };

  TimeControlModel.prototype.isPlaying = function() {
    return this.audio.isPlaying();
  };

  TimeControlModel.prototype.togglePlayState = function() {
    this.audio.togglePlay();
  };

  TimeControlModel.prototype.play = function() {
    this.audio.play();
    this._emit('play-state-change');
  };

  TimeControlModel.prototype.pause = function() {
    this.audio.pause();
    this._emit('play-state-change');
  };

  TimeControlModel.prototype.seekBy = function(amount) {
    this.audio.seek(amount);
  };

  TimeControlModel.prototype.jumpToBeginning = function() {
    this.audio.seekTo(0);
  };

  TimeControlModel.prototype.jumpToEnd = function() {
    this.audio.seekTo(this.duration);
  };

  TimeControlModel.prototype.jumpToFocusBeginning = function() {
    this.audio.seekTo(this._focus.from + 1);
  };

  TimeControlModel.prototype.jumpToFocusEnd = function() {
    this.audio.seekTo(this._focus.to - 1);
  };

  return TimeControlModel;

})(_DynamicModel);

},{"../_DynamicModel":154}],175:[function(require,module,exports){
var GuidesManagerModel, TimelineEditorModel, array, _DynamicModel,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_DynamicModel = require('../_DynamicModel');

GuidesManagerModel = require('./timelineEditorModel/GuidesManagerModel');

array = require('utila/scripts/js/lib/array');

module.exports = TimelineEditorModel = (function(_super) {
  __extends(TimelineEditorModel, _super);

  function TimelineEditorModel(editor) {
    this.editor = editor;
    this.rootModel = this.editor;
    this._serializedAddress = 'timelineEditor';
    TimelineEditorModel.__super__.constructor.apply(this, arguments);
    this.workspaces = this.editor.workspaces;
    this.timeControl = this.editor.timeControl;
    this.focusArea = this.timeControl.getFocusArea();
    this.timeControl.on('focus-change', (function(_this) {
      return function() {
        _this.focusArea = _this.timeControl.getFocusArea();
        return _this._emit('focus-change');
      };
    })(this));
    this.workspaces.on('active-workspace-change', (function(_this) {
      return function() {
        return _this._relist();
      };
    })(this));
    this.workspaces.on('prop-add', (function(_this) {
      return function(propHolder) {
        return _this._add(propHolder);
      };
    })(this));
    this.workspaces.on('prop-remove', (function(_this) {
      return function(propHolder) {
        return _this._remove(propHolder);
      };
    })(this));
    this.currentProps = [];
    this.scrollTop = 0;
    this.guides = new GuidesManagerModel(this);
  }

  TimelineEditorModel.prototype.serialize = function() {
    var se;
    se = {
      scrollTop: this.scrollTop,
      guides: this.guides.serialize()
    };
    return se;
  };

  TimelineEditorModel.prototype._loadFrom = function(se) {
    if (se.scrollTop != null) {
      this.scrollTop = se.scrollTop | 0;
    }
    if (se.guides != null) {
      this.guides._loadFrom(se.guides);
    }
  };

  TimelineEditorModel.prototype._setScrollTopFromUser = function(scrollTop) {
    this.scrollTop = scrollTop | 0;
    this._reportLocalChange();
  };

  TimelineEditorModel.prototype._setScroll = function(scrollTop) {
    this._setScrollTopFromUser(scrollTop);
    return this._emit('scroll-change');
  };

  TimelineEditorModel.prototype.tick = function() {
    this.timeControl.tickOnSpot();
  };

  TimelineEditorModel.prototype._relist = function() {
    var newProps, propHolder, _i, _len;
    newProps = this.workspaces.getCurrentlyListedProps();
    while (this.currentProps.length > 0) {
      this._remove(this.currentProps[0]);
    }
    for (_i = 0, _len = newProps.length; _i < _len; _i++) {
      propHolder = newProps[_i];
      this._add(propHolder);
    }
  };

  TimelineEditorModel.prototype._add = function(propHolder) {
    this.currentProps.push(propHolder);
    this._emit('prop-add', propHolder);
  };

  TimelineEditorModel.prototype._remove = function(propHolder) {
    array.pluckOneItem(this.currentProps, propHolder);
    this._emit('prop-remove', propHolder);
  };

  return TimelineEditorModel;

})(_DynamicModel);

},{"../_DynamicModel":154,"./timelineEditorModel/GuidesManagerModel":181,"utila/scripts/js/lib/array":149}],176:[function(require,module,exports){
var WorkspaceManagerModel, WorkspaceModel, array, _DynamicModel,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

array = require('utila/scripts/js/lib/array');

WorkspaceModel = require('./workspaceManagerModel/WorkspaceModel');

_DynamicModel = require('../_DynamicModel');

module.exports = WorkspaceManagerModel = (function(_super) {
  __extends(WorkspaceManagerModel, _super);

  function WorkspaceManagerModel(editor) {
    this.editor = editor;
    this.rootModel = this.editor;
    this._serializedAddress = 'workspaces';
    WorkspaceManagerModel.__super__.constructor.apply(this, arguments);
    this._workspaces = [];
    this._propListingChangeListeners = {};
    this._active = null;
    this.onAnyEvent((function(_this) {
      return function() {
        return _this._reportLocalChange();
      };
    })(this));
  }

  WorkspaceManagerModel.prototype.serialize = function() {
    var se, workspaces, ws, _i, _len, _ref;
    se = {};
    se.workspaces = workspaces = [];
    _ref = this._workspaces;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      ws = _ref[_i];
      if (ws.name !== 'EMPTY') {
        workspaces.push(ws.serialize());
      }
    }
    se._activeWorkspaceName = '';
    if (this._active != null) {
      se._activeWorkspaceName = this._active.name;
    }
    return se;
  };

  WorkspaceManagerModel.prototype._loadFrom = function(se) {
    var ws, _i, _len, _ref;
    _ref = se.workspaces;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      ws = _ref[_i];
      if (ws.name === 'EMPTY') {
        continue;
      }
      this._constructWorkspaceAndAdd(ws);
    }
    if (se._activeWorkspaceName !== '') {
      this.get(se._activeWorkspaceName).activate();
    }
  };

  WorkspaceManagerModel.prototype.getAll = function() {
    return this._workspaces;
  };

  WorkspaceManagerModel.prototype._constructWorkspaceAndAdd = function(se) {
    var workspace;
    workspace = WorkspaceModel.constructFrom(se, this);
    this._setupListenersOnWorkspace(workspace);
    return this._addWorkspace(workspace);
  };

  WorkspaceManagerModel.prototype._makeWorkspace = function(name) {
    var workspace;
    workspace = new WorkspaceModel(this, name);
    this._setupListenersOnWorkspace(workspace);
    return workspace;
  };

  WorkspaceManagerModel.prototype._setupListenersOnWorkspace = function(workspace) {
    workspace.onAnyEvent((function(_this) {
      return function() {
        return _this._reportLocalChange();
      };
    })(this));
    workspace.on('new-prop', (function(_this) {
      return function(propHolder) {
        var cb, id, listeners, _i, _len;
        if (workspace === _this._active) {
          _this._emit('prop-add', propHolder);
          id = propHolder.id;
          listeners = _this._propListingChangeListeners[id];
          if (listeners == null) {
            return;
          }
          for (_i = 0, _len = listeners.length; _i < _len; _i++) {
            cb = listeners[_i];
            cb('add');
          }
        }
      };
    })(this));
    workspace.on('prop-remove', (function(_this) {
      return function(propHolder) {
        var cb, id, listeners, _i, _len;
        if (workspace === _this._active) {
          _this._emit('prop-remove', propHolder);
          id = propHolder.id;
          listeners = _this._propListingChangeListeners[id];
          if (listeners == null) {
            return;
          }
          for (_i = 0, _len = listeners.length; _i < _len; _i++) {
            cb = listeners[_i];
            cb('remove');
          }
        }
      };
    })(this));
    workspace.on('rename', (function(_this) {
      return function() {
        if (workspace === _this._active) {
          return _this._emit('active-workspace-change', workspace);
        }
      };
    })(this));
    workspace.on('remove', (function(_this) {
      return function() {};
    })(this));
  };

  WorkspaceManagerModel.prototype.get = function(name) {
    var workspace;
    workspace = this._getWorkspaceByName(name);
    if (workspace == null) {
      this._addWorkspace(workspace = this._makeWorkspace(name));
    }
    return workspace;
  };

  WorkspaceManagerModel.prototype._addWorkspace = function(workspace) {
    this._workspaces.push(workspace);
    this._emit('new-workspace', workspace);
    this._reportLocalChange();
  };

  WorkspaceManagerModel.prototype._getWorkspaceByName = function(name) {
    var workspace, _i, _len, _ref;
    name = String(name);
    if (name.length < 3) {
      throw Error("Wrong name '" + name + "' for a workspace");
    }
    _ref = this._workspaces;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      workspace = _ref[_i];
      if (workspace.name === name) {
        return workspace;
      }
    }
  };

  WorkspaceManagerModel.prototype._removeWorkspace = function(workspace) {
    array.pluckOneItem(this._workspaces, workspace);
    if (this._active === workspace) {
      this._workspaces[0].activate();
    }
  };

  WorkspaceManagerModel.prototype.getActiveWorkspace = function() {
    var empty;
    if (this._active == null) {
      if (this._workspaces.length !== 0) {
        this._workspaces[0].activate();
      } else {
        empty = this._makeEmptyWorkspace();
        empty.activate();
      }
    }
    return this._active;
  };

  WorkspaceManagerModel.prototype._makeEmptyWorkspace = function() {
    return this.get('EMPTY');
  };

  WorkspaceManagerModel.prototype.isPropListed = function(propModel) {
    var ws;
    ws = this.getActiveWorkspace();
    return ws.isPropListed(propModel);
  };

  WorkspaceManagerModel.prototype.onPropListingChange = function(prop, cb) {
    var id;
    id = prop.id;
    if (this._propListingChangeListeners[id] == null) {
      this._propListingChangeListeners[id] = [cb];
      return;
    }
    this._propListingChangeListeners[id].push(cb);
  };

  WorkspaceManagerModel.prototype.togglePropListing = function(prop) {
    this.getActiveWorkspace()._togglePropListing(prop);
  };

  WorkspaceManagerModel.prototype._activate = function(ws) {
    var active, cb, id, listeners, propModel, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref, _ref1;
    active = this._active;
    if (active === ws) {
      return;
    }
    if (active != null) {
      _ref = active.propHolders;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        propModel = _ref[_i];
        id = propModel.id;
        listeners = this._propListingChangeListeners[id];
        if (listeners == null) {
          continue;
        }
        for (_j = 0, _len1 = listeners.length; _j < _len1; _j++) {
          cb = listeners[_j];
          cb('remove');
        }
      }
    }
    this._active = ws;
    _ref1 = this._active.propHolders;
    for (_k = 0, _len2 = _ref1.length; _k < _len2; _k++) {
      propModel = _ref1[_k];
      id = propModel.id;
      listeners = this._propListingChangeListeners[id];
      if (listeners == null) {
        continue;
      }
      for (_l = 0, _len3 = listeners.length; _l < _len3; _l++) {
        cb = listeners[_l];
        cb('add');
      }
    }
    this._emit('active-workspace-change');
    this._reportLocalChange();
  };

  WorkspaceManagerModel.prototype.getCurrentlyListedProps = function() {
    return this.getActiveWorkspace().propHolders;
  };

  return WorkspaceManagerModel;

})(_DynamicModel);

},{"../_DynamicModel":154,"./workspaceManagerModel/WorkspaceModel":183,"utila/scripts/js/lib/array":149}],177:[function(require,module,exports){
var ConnectionToServer, io, wn, _Emitter,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

io = require('socket.io/node_modules/socket.io-client');

_Emitter = require('../../_Emitter');

wn = require('when');

module.exports = ConnectionToServer = (function(_super) {
  __extends(ConnectionToServer, _super);

  function ConnectionToServer(communicator) {
    this.communicator = communicator;
    this._getAuthResult = __bind(this._getAuthResult, this);
    this._sendAuthData = __bind(this._sendAuthData, this);
    ConnectionToServer.__super__.constructor.apply(this, arguments);
    this.clientId = -1;
    this.isAuthenticated = false;
    this.initiallyLoaded = false;
    this._setupSocket();
  }

  ConnectionToServer.prototype.ensureAuthentication = function() {
    var deferred, resolved;
    deferred = wn.defer();
    if (this.isAuthenticated) {
      deferred.resolve();
      return deferred.promise;
    }
    resolved = false;
    this.on('next-authentication', function(didAuthenticate) {
      if (resolved) {
        return;
      }
      resolved = true;
      if (didAuthenticate) {
        return deferred.resolve();
      } else {
        return deferred.reject();
      }
    });
    return deferred.promise;
  };

  ConnectionToServer.prototype.connect = function() {
    return this.ensureAuthentication();
  };

  ConnectionToServer.prototype._setupSocket = function() {
    this._socket = io.connect(this.communicator._server);
    return this._socket.on('server-asks:send-auth-data', this._sendAuthData);
  };

  ConnectionToServer.prototype._sendAuthData = function(clientId) {
    this.clientId = parseInt(clientId);
    if (this.communicator.editor.debug) {
      console.log('client id', this.clientId);
      console.log("authenticating with '" + this.communicator._password + "' in '" + this.communicator._namespaceName + "'");
    }
    return this._socket.emit('client-asks:get-auth-data', {
      namespace: this.communicator._namespaceName,
      password: this.communicator._password
    }, this._getAuthResult);
  };

  ConnectionToServer.prototype._getAuthResult = function(data) {
    if (data === 'accepted') {
      this.isAuthenticated = true;
      if (this.communicator.editor.debug) {
        console.log('auth accepted');
      }
    } else {
      this.isAuthenticated = false;
      console.error('auth failed: ', data);
    }
    this._emit('authentication', this.isAuthenticated);
    this._emit('next-authentication', this.isAuthenticated);
    return this.removeListeners('next-authentication');
  };

  ConnectionToServer.prototype.request = function(what, data) {
    return this.ensureAuthentication().then((function(_this) {
      return function() {
        return _this._request(what, data);
      };
    })(this));
  };

  ConnectionToServer.prototype._request = function(what, data) {
    var deferred;
    deferred = wn.defer();
    this._socket.emit('client-requests:' + what, data, function(receivedData) {
      return deferred.resolve(receivedData);
    });
    return deferred.promise;
  };

  return ConnectionToServer;

})(_Emitter);

},{"../../_Emitter":155,"socket.io/node_modules/socket.io-client":147,"when":150}],178:[function(require,module,exports){
var ActorModel, GroupModel;

ActorModel = require('./groupModel/ActorModel');

module.exports = GroupModel = (function() {
  function GroupModel(graph, name) {
    this.graph = graph;
    this.name = name;
    this.id = this.graph.editor.id + '-' + this.name;
    this.actors = {};
  }

  GroupModel.prototype.getActor = function(name) {
    if (this.actors[name] == null) {
      this.actors[name] = new ActorModel(this, name);
    }
    return this.actors[name];
  };

  return GroupModel;

})();

},{"./groupModel/ActorModel":179}],179:[function(require,module,exports){
var ActorModel, ActorPropModel;

ActorPropModel = require('./actorModel/ActorPropModel');

module.exports = ActorModel = (function() {
  function ActorModel(group, name) {
    this.group = group;
    this.name = name;
    this.graph = this.group.graph;
    this.id = this.group.id + '-' + this.name;
    this.timeline = this.group.graph.editor.timeline;
    this.props = {};
  }

  ActorModel.prototype.addPropOfArray = function(name, arrayName, arrayIndex) {
    var prop, propId, timelineProp;
    if (this.props[name] != null) {
      throw Error("prop with name '" + name + "' already exists in actor '" + this.id + "'");
    }
    propId = this.id + '-' + name;
    timelineProp = this.timeline.addPropOfArray(propId, arrayName, arrayIndex);
    this.props[name] = prop = new ActorPropModel(this, name, timelineProp);
    return prop;
  };

  ActorModel.prototype.addPropOfObject = function(name, objectName, setter, getter) {
    var prop, propId, timelineProp;
    if (this.props[name] != null) {
      throw Error("prop with name '" + name + "' already exists in actor '" + this.id + "'");
    }
    propId = this.id + '-' + name;
    timelineProp = this.timeline.addPropOfObject(propId, objectName, setter, getter);
    this.props[name] = prop = new ActorPropModel(this, name, timelineProp);
    return prop;
  };

  ActorModel.prototype.useProp = function(name, timelineProp) {
    if (this.props[name] != null) {
      throw Error("prop with name '" + name + "' already exists in actor '" + this.id + "'");
    }
    this.props[name] = timelineProp;
    return this;
  };

  return ActorModel;

})();

},{"./actorModel/ActorPropModel":180}],180:[function(require,module,exports){
var ActorPropModel;

module.exports = ActorPropModel = (function() {
  function ActorPropModel(actor, name, timelineProp) {
    this.actor = actor;
    this.name = name;
    this.timelineProp = timelineProp;
    this.id = this.actor.id + '-' + this.name;
    this.actor.graph._addActorProp(this.id, this);
  }

  return ActorPropModel;

})();

},{}],181:[function(require,module,exports){
var GuideModel, GuidesManagerModel, array, _DynamicModel,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_DynamicModel = require('../../_DynamicModel');

GuideModel = require('./guidesManagerModel/GuideModel');

array = require('utila/scripts/js/lib/array');

module.exports = GuidesManagerModel = (function(_super) {
  __extends(GuidesManagerModel, _super);

  function GuidesManagerModel(timelineEditor) {
    this.timelineEditor = timelineEditor;
    this.rootModel = this.timelineEditor.editor;
    this._serializedAddress = ['timelineEditor', 'guides'];
    GuidesManagerModel.__super__.constructor.apply(this, arguments);
    this._list = [];
  }

  GuidesManagerModel.prototype.serialize = function() {
    var g, list, se, _i, _len, _ref;
    se = {};
    se._list = list = [];
    _ref = this._list;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      g = _ref[_i];
      list.push(g.t);
    }
    return se;
  };

  GuidesManagerModel.prototype._loadFrom = function(se) {
    var list, t, _i, _len;
    if (!((se != null) && (se._list != null) && Array.isArray(se._list))) {
      return;
    }
    list = se._list;
    for (_i = 0, _len = list.length; _i < _len; _i++) {
      t = list[_i];
      this.add(t);
    }
  };

  GuidesManagerModel.prototype.add = function(t) {
    var g, index;
    index = this._getIndexOfItemBeforeOrAt(t);
    array.injectInIndex(this._list, index + 1, g = new GuideModel(this, t));
    this._emit('new-guide', g);
    this._reportLocalChange();
    return this;
  };

  GuidesManagerModel.prototype._remove = function(g) {
    array.pluckOneItem(this._list, g);
    return this._reportLocalChange();
  };

  GuidesManagerModel.prototype._getIndexOfItemBeforeOrAt = function(t) {
    var index, item, lastIndex, _i, _len, _ref;
    lastIndex = -1;
    _ref = this._list;
    for (index = _i = 0, _len = _ref.length; _i < _len; index = ++_i) {
      item = _ref[index];
      if (item.t > t) {
        break;
      }
      lastIndex = index;
    }
    return lastIndex;
  };

  GuidesManagerModel.prototype.toggle = function(t) {
    var index, item, nextItem;
    index = this._getIndexOfItemBeforeOrAt(t);
    if (index === -1) {
      this.add(t);
      return;
    }
    item = this._list[index];
    if (item.t >= t - 50) {
      item.remove();
      return;
    }
    nextItem = this._list[index + 1];
    if ((nextItem != null) && nextItem.t <= t + 50) {
      nextItem.remove();
      return;
    }
    this.add(t);
  };

  return GuidesManagerModel;

})(_DynamicModel);

},{"../../_DynamicModel":154,"./guidesManagerModel/GuideModel":182,"utila/scripts/js/lib/array":149}],182:[function(require,module,exports){
var GuideModel, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Emitter = require('../../../_Emitter');

module.exports = GuideModel = (function(_super) {
  __extends(GuideModel, _super);

  function GuideModel(guides, t) {
    this.guides = guides;
    this.t = t;
    GuideModel.__super__.constructor.apply(this, arguments);
  }

  GuideModel.prototype.remove = function() {
    this.guides._remove(this);
    this._emit('remove');
    this.guides = null;
  };

  return GuideModel;

})(_Emitter);

},{"../../../_Emitter":155}],183:[function(require,module,exports){
var ActorPropModel, WorkspaceModel, WorkspacePropHolderModel, array, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

ActorPropModel = require('../graphModel/groupModel/actorModel/ActorPropModel');

_Emitter = require('../../_Emitter');

array = require('utila/scripts/js/lib/array');

WorkspacePropHolderModel = require('./workspaceModel/WorkspacePropHolderModel');

module.exports = WorkspaceModel = (function(_super) {
  var self;

  __extends(WorkspaceModel, _super);

  self = WorkspaceModel;

  function WorkspaceModel(workspaceManager, name) {
    this.workspaceManager = workspaceManager;
    this.name = name;
    WorkspaceModel.__super__.constructor.apply(this, arguments);
    this.rootModel = this.workspaceManager.rootModel;
    this.propHolders = [];
  }

  WorkspaceModel.prototype.serialize = function() {
    var p, propHolders, se, _i, _len, _ref;
    se = {};
    se.name = this.name;
    se.propHolders = propHolders = [];
    _ref = this.propHolders;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      p = _ref[_i];
      propHolders.push(p.serialize());
    }
    return se;
  };

  WorkspaceModel.constructFrom = function(se, workspaceManager) {
    var propHolder, ws, _i, _len, _ref;
    ws = new self(workspaceManager, se.name);
    _ref = se.propHolders;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      propHolder = _ref[_i];
      ws._constructPropHolderAndAdd(propHolder);
    }
    return ws;
  };

  WorkspaceModel.prototype._constructPropHolderAndAdd = function(se) {
    var e, ph;
    try {
      ph = WorkspacePropHolderModel.constructFrom(se, this);
      return this._addPropHolder(ph);
    } catch (_error) {
      e = _error;
      console.warn("Couldn't construct a prop holder for", se, e);
    }
  };

  WorkspaceModel.prototype.rename = function(newName) {
    if (newName === this.name) {
      return;
    }
    if (this.workspaceManager._getWorkspaceByName(newName) != null) {
      throw Error("A workspace named '" + newName + "' already exists");
    }
    this.name = newName;
    this._emit('rename');
  };

  WorkspaceModel.prototype.remove = function() {
    this.workspaceManager._removeWorkspace(this);
    this._emit('remove');
    this.workspaceManager = null;
    this.name = 'REMOVED';
  };

  WorkspaceModel.prototype.addProp = function(actorPropModel) {
    var propHolder;
    if (!(actorPropModel instanceof ActorPropModel)) {
      throw Error("prop must be an instance of ActorPropModel");
    }
    if (this._getHolderPropById(actorPropModel.id)) {
      throw Error("Prop `" + prop.id + "` already exists in " + this.name);
    }
    this._addPropHolder(propHolder = new WorkspacePropHolderModel(this, actorPropModel));
    return propHolder;
  };

  WorkspaceModel.prototype._addPropHolder = function(propHolder) {
    this.propHolders.push(propHolder);
    propHolder.onAnyEvent((function(_this) {
      return function() {
        return _this._emit('something-changed');
      };
    })(this));
    return this._emit('new-prop', propHolder);
  };

  WorkspaceModel.prototype._getHolderPropById = function(id) {
    var prop, _i, _len, _ref;
    _ref = this.propHolders;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      prop = _ref[_i];
      if (prop.id === id) {
        return prop;
      }
    }
  };

  WorkspaceModel.prototype.activate = function() {
    this.workspaceManager._activate(this);
  };

  WorkspaceModel.prototype.isPropListed = function(prop) {
    return this._getHolderPropById(prop.id) != null;
  };

  WorkspaceModel.prototype.removeProp = function(prop) {
    var propHolder;
    propHolder = this._getHolderPropById(prop.id);
    if (propHolder == null) {
      throw Error("Prop `" + prop.id + "` is not listed in " + this.name);
    }
    array.pluckOneItem(this.propHolders, propHolder);
    this._emit('prop-remove', propHolder);
  };

  WorkspaceModel.prototype._togglePropListing = function(prop) {
    if (this.isPropListed(prop)) {
      this.removeProp(prop);
    } else {
      this.addProp(prop);
    }
  };

  WorkspaceModel.prototype._shiftPropUp = function(prop) {
    var currentHolder, index, ph, propHolderBefore, toAppend, _i, _len;
    currentHolder = this._getHolderPropById(prop.id);
    if (currentHolder == null) {
      throw Error("Prop `" + prop.id + "` is not listed in " + this.name);
    }
    index = this.propHolders.indexOf(currentHolder);
    if (index < 1) {
      return;
    }
    toAppend = [];
    propHolderBefore = this.propHolders[index - 1];
    toAppend.push(propHolderBefore);
    propHolderBefore.removeFromWorkspace();
    propHolderBefore.removeAllListeners();
    while (this.propHolders.length > index) {
      ph = this.propHolders[index];
      toAppend.push(ph);
      ph.removeFromWorkspace();
      ph.removeAllListeners();
    }
    for (_i = 0, _len = toAppend.length; _i < _len; _i++) {
      ph = toAppend[_i];
      this._addPropHolder(ph);
    }
  };

  WorkspaceModel.prototype._shiftPropDown = function(prop) {
    var currentHolder, index, ph, toAppend, _i, _len;
    currentHolder = this._getHolderPropById(prop.id);
    if (currentHolder == null) {
      throw Error("Prop `" + prop.id + "` is not listed in " + this.name);
    }
    index = this.propHolders.indexOf(currentHolder);
    if (index === this.propHolders.length - 1) {
      return;
    }
    toAppend = [];
    toAppend.push(currentHolder);
    currentHolder.removeFromWorkspace();
    currentHolder.removeAllListeners();
    while (this.propHolders.length > index + 1) {
      ph = this.propHolders[index];
      toAppend.push(ph);
      ph.removeFromWorkspace();
      ph.removeAllListeners();
    }
    for (_i = 0, _len = toAppend.length; _i < _len; _i++) {
      ph = toAppend[_i];
      this._addPropHolder(ph);
    }
  };

  return WorkspaceModel;

})(_Emitter);

},{"../../_Emitter":155,"../graphModel/groupModel/actorModel/ActorPropModel":180,"./workspaceModel/WorkspacePropHolderModel":184,"utila/scripts/js/lib/array":149}],184:[function(require,module,exports){
var WorkspacePropHolderModel, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

_Emitter = require('../../../_Emitter');

module.exports = WorkspacePropHolderModel = (function(_super) {
  var self;

  __extends(WorkspacePropHolderModel, _super);

  self = WorkspacePropHolderModel;

  function WorkspacePropHolderModel(workspace, actorProp) {
    this.workspace = workspace;
    this.actorProp = actorProp;
    WorkspacePropHolderModel.__super__.constructor.apply(this, arguments);
    this.rootModel = this.workspace.rootModel;
    this.id = this.actorProp.id;
    this._expanded = true;
    this._height = 80;
  }

  WorkspacePropHolderModel.prototype.serialize = function() {
    var se;
    se = {};
    se.id = this.id;
    se._expanded = this._expanded;
    se.actorPropId = this.actorProp.id;
    se._height = this._height;
    return se;
  };

  WorkspacePropHolderModel.constructFrom = function(se, workspace) {
    var actorProp, propHolder;
    actorProp = workspace.rootModel.graph.getActorPropById(se.actorPropId);
    propHolder = new self(workspace, actorProp);
    if (se._expanded != null) {
      propHolder.setExpansion(Boolean(se._expanded));
    }
    if (se._height != null) {
      propHolder.setHeight(parseInt(se._height));
    }
    return propHolder;
  };

  WorkspacePropHolderModel.prototype.isExpanded = function() {
    return this._expanded;
  };

  WorkspacePropHolderModel.prototype.setExpansion = function(newExpansion) {
    if (newExpansion === this._expanded) {
      return;
    }
    this._expanded = Boolean(newExpansion);
    return this._emit('expansion-toggle');
  };

  WorkspacePropHolderModel.prototype.toggleExpansion = function() {
    this._expanded = !this._expanded;
    this._emit('expansion-toggle');
    return this._expanded;
  };

  WorkspacePropHolderModel.prototype.getHeight = function() {
    return this._height;
  };

  WorkspacePropHolderModel.prototype.setHeight = function(newHeight) {
    if (newHeight === this._height) {
      return;
    }
    this._height = parseInt(newHeight) | 0;
    this._emit('height-change');
  };

  WorkspacePropHolderModel.prototype.removeFromWorkspace = function() {
    this.workspace.removeProp(this.actorProp);
    return this;
  };

  WorkspacePropHolderModel.prototype.shiftUp = function() {
    this.workspace._shiftPropUp(this.actorProp);
    return this;
  };

  WorkspacePropHolderModel.prototype.shiftDown = function() {
    this.workspace._shiftPropDown(this.actorProp);
    return this;
  };

  return WorkspacePropHolderModel;

})(_Emitter);

},{"../../../_Emitter":155}],185:[function(require,module,exports){
var ControlsView, Foxie;

Foxie = require('foxie');

module.exports = ControlsView = (function() {
  function ControlsView(editor) {
    this.editor = editor;
    this.rootView = this.editor;
    this.model = this.editor.model.timeControl;
    this._prepareNodes();
    this._prepareKeyboard();
    this.model.on('play-state-change', (function(_this) {
      return function() {
        return _this._updatePlayState();
      };
    })(this));
    this._curY = 0;
    this.mainBoxModel = this.editor.model.mainBox;
    this.mainBox = this.editor.mainBox;
    this._updatePosition();
    this.editor.model.mainBox.on('height-change', (function(_this) {
      return function() {
        return _this._updatePosition();
      };
    })(this));
    this.editor.model.mainBox.on('visibility-toggle', (function(_this) {
      return function() {
        return _this._updatePosition();
      };
    })(this));
    this._updatePlayState();
    this.audioModel = this.editor.model.audio;
    this.audioModel.on('ready-state-change', (function(_this) {
      return function() {
        return _this._updateReadyState();
      };
    })(this));
    this._updateReadyState();
  }

  ControlsView.prototype._updateReadyState = function() {
    if (this.audioModel.isReady()) {
      return this.playPauseNode.addClass('ready');
    } else {
      return this.playPauseNode.removeClass('ready');
    }
  };

  ControlsView.prototype._prepareNodes = function() {
    this.node = Foxie('.theatrejs-controls').trans(500);
    this.node.putIn(this.editor.node);
    this._prepareFullscreenNode();
    this._prepareJumpToPrevMarkerNode();
    this._preparePlayPauseNode();
    return this._prepareJumpToNextMarkerNode();
  };

  ControlsView.prototype._preparePlayPauseNode = function() {
    this.playPauseNode = Foxie('.theatrejs-controls-playPause');
    this.playPauseNode.putIn(this.node);
    return this.rootView.moosh.onClick(this.playPauseNode).onDone((function(_this) {
      return function() {
        return _this._togglePlayState();
      };
    })(this));
  };

  ControlsView.prototype._prepareFullscreenNode = function() {
    this.toggleFullscreenNode = Foxie('.theatrejs-controls-fullscreen');
    return this.toggleFullscreenNode.putIn(this.node);
  };

  ControlsView.prototype._prepareJumpToPrevMarkerNode = function() {
    this.jumpToPrevMarkerNode = Foxie('.theatrejs-controls-jumpToPrevMarker');
    this.jumpToPrevMarkerNode.putIn(this.node);
    return this.rootView.moosh.onClick(this.jumpToPrevMarkerNode).onDone((function(_this) {
      return function() {
        return _this.model.jumpToPrevMarker();
      };
    })(this));
  };

  ControlsView.prototype._prepareJumpToNextMarkerNode = function() {
    this.jumpToNextMarkerNode = Foxie('.theatrejs-controls-jumpToNextMarker');
    this.jumpToNextMarkerNode.putIn(this.node);
    return this.rootView.moosh.onClick(this.jumpToNextMarkerNode).onDone((function(_this) {
      return function() {
        return _this.model.jumpToNextMarker();
      };
    })(this));
  };

  ControlsView.prototype._prepareKeyboard = function() {
    this.rootView.kilid.on('space', (function(_this) {
      return function() {
        return _this._togglePlayState();
      };
    })(this));
    this.rootView.kilid.on('home', (function(_this) {
      return function() {
        return _this.model.jumpToFocusBeginning();
      };
    })(this));
    this.rootView.kilid.on('ctrl+home', (function(_this) {
      return function() {
        return _this.model.jumpToBeginning();
      };
    })(this));
    this.rootView.kilid.on('end', (function(_this) {
      return function() {
        return _this.model.jumpToFocusEnd();
      };
    })(this));
    this.rootView.kilid.on('ctrl+end', (function(_this) {
      return function() {
        return _this.model.jumpToEnd();
      };
    })(this));
    this.rootView.kilid.on('right', (function(_this) {
      return function() {
        return _this.model.seekBy(16);
      };
    })(this));
    this.rootView.kilid.on('left', (function(_this) {
      return function() {
        return _this.model.seekBy(-16);
      };
    })(this));
    this.rootView.kilid.on('shift+right', (function(_this) {
      return function() {
        return _this.model.seekBy(48);
      };
    })(this));
    this.rootView.kilid.on('shift+left', (function(_this) {
      return function() {
        return _this.model.seekBy(-48);
      };
    })(this));
    this.rootView.kilid.on('alt+right', (function(_this) {
      return function() {
        return _this.model.seekBy(8);
      };
    })(this));
    return this.rootView.kilid.on('alt+left', (function(_this) {
      return function() {
        return _this.model.seekBy(-8);
      };
    })(this));
  };

  ControlsView.prototype._updatePosition = function() {
    var newY;
    newY = -this.mainBox.getCurrentHeight() - 8;
    if (newY === this._curY) {
      return;
    }
    this._curY = newY;
    this.node.moveYTo(this._curY);
  };

  ControlsView.prototype._togglePlayState = function() {
    return this.model.togglePlayState();
  };

  ControlsView.prototype._updatePlayState = function() {
    if (this.model.isPlaying()) {
      this.playPauseNode.addClass('playing');
    } else {
      this.playPauseNode.removeClass('playing');
    }
  };

  return ControlsView;

})();

},{"foxie":111}],186:[function(require,module,exports){
var Foxie, GraphView;

Foxie = require('foxie');

module.exports = GraphView = (function() {
  function GraphView(editor) {
    this.editor = editor;
    this.rootView = this.editor;
    this.graphModel = this.editor.model.graph;
    this.workspacesModel = this.editor.model.workspaces;
    this.rootView.moosh = this.editor.moosh;
    this._showHideTimeout = null;
    this._prepareNode();
  }

  GraphView.prototype._prepareNode = function() {
    this.node = Foxie('div.theatrejs-graph');
  };

  GraphView.prototype.show = function() {
    if (this._showHideTimeout != null) {
      clearTimeout(this._showHideTimeout);
      this._showHideTimeout = null;
    }
    this.node.putIn(this.editor.node);
    this.node.addClass('visible');
    this.rootView.moosh.onClickOutside(this.node, (function(_this) {
      return function() {
        return _this.hide();
      };
    })(this));
  };

  GraphView.prototype.hide = function() {
    this.node.removeClass('visible');
    this._showHideTimeout = setTimeout((function(_this) {
      return function() {
        _this.node.remove();
        return _this._showHideTimeout = null;
      };
    })(this), 500);
  };

  GraphView.prototype.prepare = function() {
    var group, n, name, _fn, _ref;
    n = -1;
    _ref = this.graphModel.categories;
    _fn = (function(_this) {
      return function(group) {
        var actor, actorListEl, catEl, catNameEl, _ref1, _results;
        n++;
        catEl = Foxie('div.theatrejs-graph-group');
        catEl.putIn(_this.node);
        catNameEl = Foxie("h3.theatrejs-graph-group-name.opening-animation.n-" + n);
        catNameEl.innerHTML(group.name);
        catNameEl.putIn(catEl);
        actorListEl = Foxie('ul.theatrejs-graph-group-actor-list');
        actorListEl.putIn(catEl);
        _ref1 = group.actors;
        _results = [];
        for (name in _ref1) {
          actor = _ref1[name];
          _results.push((function(actor) {
            var actorEl, actorLink, prop, propsListEl, _ref2, _results1;
            n++;
            actorEl = Foxie('li.theatrejs-graph-group-actor');
            actorLink = Foxie("a.opening-animation.n-" + n);
            actorLink.innerHTML(actor.name);
            actorLink.putIn(actorEl);
            actorEl.putIn(actorListEl);
            propsListEl = Foxie('ul.theatrejs-graph-group-actor-propsList');
            propsListEl.putIn(actorEl);
            _ref2 = actor.props;
            _results1 = [];
            for (name in _ref2) {
              prop = _ref2[name];
              _results1.push((function(prop) {
                var propEl;
                propEl = Foxie('li');
                propEl.innerHTML(prop.name);
                propEl.putIn(propsListEl);
                if (!_this.workspacesModel.isPropListed(prop)) {
                  propEl.addClass('available');
                }
                _this.workspacesModel.onPropListingChange(prop, function(type) {
                  if (type === 'add') {
                    propEl.removeClass('available');
                  } else {
                    propEl.addClass('available');
                  }
                });
                return _this.rootView.moosh.onClick(propEl).onDone(function() {
                  _this.workspacesModel.togglePropListing(prop);
                });
              })(prop));
            }
            return _results1;
          })(actor));
        }
        return _results;
      };
    })(this);
    for (name in _ref) {
      group = _ref[name];
      _fn(group);
    }
  };

  return GraphView;

})();

},{"foxie":111}],187:[function(require,module,exports){
var Foxie, MainBoxView, SeekbarView, TimelineEditorView, WorkspaceButtonsView, WorkspaceListView, _Emitter,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

WorkspaceButtonsView = require('./mainBoxView/WorkspaceButtonsView');

WorkspaceListView = require('./mainBoxView/WorkspaceListView');

TimelineEditorView = require('./mainBoxView/TimelineEditorView');

SeekbarView = require('./mainBoxView/SeekbarView');

_Emitter = require('../_Emitter');

Foxie = require('foxie');

module.exports = MainBoxView = (function(_super) {
  __extends(MainBoxView, _super);

  function MainBoxView(editor) {
    this.editor = editor;
    this._recalculateSpace = __bind(this._recalculateSpace, this);
    MainBoxView.__super__.constructor.apply(this, arguments);
    this.rootView = this.editor;
    this.model = this.editor.model.mainBox;
    this._prepareNode();
    this.width = window.innerWidth - 8;
    setTimeout(this._recalculateSpace, 50);
    window.addEventListener('resize', this._recalculateSpace);
    this.timelineEditor = new TimelineEditorView(this);
    this.seekbar = new SeekbarView(this);
    this.workspaceList = new WorkspaceListView(this);
    this.workspaceButtons = new WorkspaceButtonsView(this);
    this._updateVertically();
    this._visible = true;
    this.model.on('height-change', (function(_this) {
      return function() {
        return _this._updateVertically();
      };
    })(this));
  }

  MainBoxView.prototype._prepareNode = function() {
    this.node = Foxie('.theatrejs-mainBox').moveZ(1).putIn(this.editor.node).trans(500);
    this.nodeResizeHandle = Foxie('.theatrejs-mainBox-resizeHandle').putIn(this.node);
    this.rootView.moosh.onDrag(this.nodeResizeHandle).onDrag((function(_this) {
      return function(e) {
        if (_this.model.isVisible()) {
          _this.model.setHeight(_this.model.height - e.relY);
        }
      };
    })(this));
    this.rootView.moosh.onClick(this.nodeResizeHandle).repeatedBy(2).onDone((function(_this) {
      return function() {
        return _this.model.toggleVisibility();
      };
    })(this));
    this.model.on('visibility-toggle', (function(_this) {
      return function() {
        _this._updateVisibility();
      };
    })(this));
    return this.rootView.kilid.on('alt+enter').onEnd((function(_this) {
      return function() {
        return _this.model.toggleVisibility();
      };
    })(this));
  };

  MainBoxView.prototype._updateVertically = function() {
    this.node.css('height', this.model.height + 'px');
    this._updateVisibility();
  };

  MainBoxView.prototype._recalculateSpace = function() {
    var newWidth;
    newWidth = this.node.node.clientWidth - 8;
    if (newWidth === this.width) {
      return;
    }
    this.width = newWidth;
    return this._emit('width-change');
  };

  MainBoxView.prototype.getCurrentHeight = function() {
    return this.model.height - (this.model.isVisible() ? 0 : this.model.height - 21);
  };

  MainBoxView.prototype._updateVisibility = function() {
    if (this._visible === this.model.isVisible()) {
      return;
    }
    this._visible = this.model.isVisible();
    if (this._visible) {
      this.editor.node.removeClass('hidden');
      this.node.moveYTo(0).setOpacity(1);
    } else {
      this.editor.node.addClass('hidden');
      this.node.moveYTo(this.model.height - 21);
    }
  };

  return MainBoxView;

})(_Emitter);

},{"../_Emitter":155,"./mainBoxView/SeekbarView":188,"./mainBoxView/TimelineEditorView":189,"./mainBoxView/WorkspaceButtonsView":190,"./mainBoxView/WorkspaceListView":191,"foxie":111}],188:[function(require,module,exports){
var Foxie, SeekbarView;

Foxie = require('foxie');

module.exports = SeekbarView = (function() {
  function SeekbarView(mainBox) {
    this.mainBox = mainBox;
    this.rootView = this.mainBox.rootView;
    this.model = this.mainBox.editor.model.timeControl;
    this.duration = this.model.duration;
    this.timelineEditor = this.mainBox.timelineEditor;
    this.model.on('duration-change', (function(_this) {
      return function() {
        return _this._updateDuration();
      };
    })(this));
    this._prepareNode();
    this._prepareGrid();
    this._prepareSeeker();
    this._prepareFocus();
    this._resetSpace();
    this.mainBox.on('width-change', (function(_this) {
      return function() {
        return _this._resetSpace();
      };
    })(this));
  }

  SeekbarView.prototype._prepareNode = function() {
    return this.node = Foxie('.theatrejs-seekbar').putIn(this.mainBox.node);
  };

  SeekbarView.prototype._prepareGrid = function() {
    var i, _i, _ref;
    this.grid = Foxie('.theatrejs-seekbar-timeGrid').putIn(this.mainBox.node);
    this.gridLegends = [];
    for (i = _i = 0, _ref = parseInt(screen.width / 75); 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
      this.gridLegends.push(Foxie('.theatrejs-seekbar-timeGrid-legend').putIn(this.grid));
    }
  };

  SeekbarView.prototype._redoTimeGrid = function() {
    var curX, focus, i, legend, w, _i, _len, _ref;
    focus = this.model.getFocusArea();
    _ref = this.gridLegends;
    for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
      legend = _ref[i];
      curX = i * 75 + 37.5;
      w = curX / this._width;
      w *= focus.duration;
      w += focus.from;
      w /= 1000;
      legend.node.innerHTML = w.toFixed(2);
    }
  };

  SeekbarView.prototype._prepareSeeker = function() {
    var initialSeekerPosition, wasPlaying;
    this.seeker = Foxie('.theatrejs-seekbar-seeker').moveZ(1).putIn(this.node);
    this.model.on('time-change', (function(_this) {
      return function() {
        return _this._updateT();
      };
    })(this));
    wasPlaying = false;
    initialSeekerPosition = 0;
    this.rootView.moosh.onDrag(this.seeker).onDown((function(_this) {
      return function() {
        _this.rootView.cursor.use(_this.seeker);
        wasPlaying = _this.model.isPlaying();
        if (wasPlaying) {
          _this.model.pause();
        }
        return initialSeekerPosition = _this.seeker.get('left');
      };
    })(this)).onUp((function(_this) {
      return function() {
        _this.rootView.cursor.free();
        if (wasPlaying) {
          return _this.model.play();
        }
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        return _this._dragSeekerToPos(e.absX + initialSeekerPosition);
      };
    })(this));
  };

  SeekbarView.prototype._prepareFocus = function() {
    this._prepareFocusLeft();
    this._prepareFocusRight();
    this._prepareFocusStrip();
    return this.model.on('focus-change', (function(_this) {
      return function() {
        if (_this._reactToFocusChangeAndDecideOnRepositioningElements()) {
          return _this._repositionExceptSeeker();
        } else {
          return _this._repositionElements();
        }
      };
    })(this));
  };

  SeekbarView.prototype._prepareFocusLeft = function() {
    this.focusLeftNode = Foxie('.theatrejs-seekbar-focus-left').moveZ(1).set('left', 0).putIn(this.node);
    return this.rootView.moosh.onDrag(this.focusLeftNode).onDown((function(_this) {
      return function() {
        return _this.rootView.cursor.use(_this.focusLeftNode);
      };
    })(this)).onUp((function(_this) {
      return function() {
        return _this.rootView.cursor.free();
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        return _this._dragFocusLeftInWindowSpace(e.relX);
      };
    })(this));
  };

  SeekbarView.prototype._prepareFocusRight = function() {
    this.focusRightNode = Foxie('.theatrejs-seekbar-focus-right').moveZ(1).set('left', 0).putIn(this.node);
    return this.rootView.moosh.onDrag(this.focusRightNode).onDown((function(_this) {
      return function() {
        return _this.rootView.cursor.use(_this.focusRightNode);
      };
    })(this)).onUp((function(_this) {
      return function() {
        return _this.rootView.cursor.free();
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        return _this._dragFocusRightInWindowSpace(e.relX);
      };
    })(this));
  };

  SeekbarView.prototype._prepareFocusStrip = function() {
    this.focusStripNode = Foxie('.theatrejs-seekbar-focus-strip').moveZ(1).css('width', '300px').putIn(this.node);
    return this.rootView.moosh.onDrag(this.focusStripNode).onDown((function(_this) {
      return function() {
        _this.focusStripNode.addClass('dragging');
        return _this.rootView.cursor.use(_this.focusStripNode);
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        return _this._dragFocusStripBy(e.relX);
      };
    })(this)).onUp((function(_this) {
      return function() {
        _this.focusStripNode.removeClass('dragging');
        return _this.rootView.cursor.free();
      };
    })(this));
  };

  SeekbarView.prototype._dragFocusStripBy = function(x) {
    var focus, newFrom, newTo, t;
    t = this.timelineEditor._unfocusedXToTime(x);
    focus = this.model.getFocusArea();
    newFrom = focus.from + t;
    if (newFrom < 0) {
      newFrom = 0;
    }
    newTo = newFrom + focus.duration;
    if (newTo > this.duration) {
      newTo = this.duration;
      newFrom = newTo - focus.duration;
    }
    this.model.changeFocusArea(newFrom, newTo);
  };

  SeekbarView.prototype._dragFocusBy = function(x) {
    var focus, newFrom, newTo, t;
    t = this.timelineEditor._XToTime(x);
    focus = this.model.getFocusArea();
    newFrom = focus.from + t;
    if (newFrom < 0) {
      newFrom = 0;
    }
    newTo = newFrom + focus.duration;
    if (newTo > this.duration) {
      newTo = this.duration;
      newFrom = newTo - focus.duration;
    }
    this.model.changeFocusArea(newFrom, newTo);
  };

  SeekbarView.prototype._dragFocusLeftInWindowSpace = function(x) {
    var curWinPos, focus, nextFrom, nextTo, nextWinPos;
    focus = this.model.getFocusArea();
    curWinPos = this.focusLeftNode.get('left');
    nextWinPos = curWinPos + x;
    nextFrom = this.timelineEditor._unfocusedXToTime(nextWinPos);
    if (nextFrom < 0) {
      nextFrom = 0;
    }
    nextTo = focus.to;
    if (nextTo - nextFrom < 1000) {
      nextTo = nextFrom + 1000;
    }
    if (nextTo > this.duration) {
      nextTo = this.duration;
    }
    this.model.changeFocusArea(nextFrom, nextTo);
    if (nextFrom > this.model.t) {
      this.model.tick(nextFrom);
    }
    if (nextTo < this.model.t) {
      this.model.tick(nextTo);
    }
  };

  SeekbarView.prototype._dragFocusRightInWindowSpace = function(x) {
    var curWinPos, focus, nextFrom, nextTo, nextWinPos;
    focus = this.model.getFocusArea();
    curWinPos = this.focusRightNode.get('left');
    nextWinPos = curWinPos + x;
    nextTo = this.timelineEditor._unfocusedXToTime(nextWinPos);
    if (nextTo > this.duration) {
      nextTo = this.duration;
    }
    if (nextTo < 1000) {
      nextTo = 1000;
    }
    nextFrom = focus.from;
    if (nextTo - nextFrom < 1000) {
      nextFrom = nextTo - 1000;
    }
    if (nextFrom < 0) {
      nextFrom = 0;
    }
    this.model.changeFocusArea(nextFrom, nextTo);
    if (this.model.t > nextTo) {
      this.model.tick(nextTo);
    }
    if (nextFrom > this.model.t) {
      this.model.tick(nextFrom);
    }
  };

  SeekbarView.prototype._resetSpace = function() {
    this._width = this.mainBox.width;
    return this._repositionElements();
  };

  SeekbarView.prototype._repositionElements = function() {
    this._repositionSeeker();
    this._repositionFocus();
    return this._redoTimeGrid();
  };

  SeekbarView.prototype._repositionExceptSeeker = function() {
    this._repositionFocus();
    return this._redoTimeGrid();
  };

  SeekbarView.prototype._updateT = function() {
    var focus, newFrom, newTo, shift, t;
    t = this.model.t;
    focus = this.model.getFocusArea();
    if (!((focus.from - 16 <= t && t <= focus.to))) {
      newFrom = t;
      newTo = newFrom + focus.duration;
      if (focus.to < t && newTo > this.duration) {
        shift = newTo - this.duration;
        newTo = this.duration;
        newFrom -= shift;
        if (newFrom < 0) {
          newFrom = 0;
        }
      }
      this.model.changeFocusArea(newFrom, newTo);
      return;
    }
    this._repositionSeeker();
  };

  SeekbarView.prototype._repositionSeeker = function() {
    var curSeekerPos;
    curSeekerPos = this.timelineEditor._timeToFocusedX(this.model.t);
    this.seeker.moveXTo(curSeekerPos).set('left', curSeekerPos);
  };

  SeekbarView.prototype._reactToFocusChangeAndDecideOnRepositioningElements = function() {
    var focus, t;
    t = this.model.t;
    focus = this.model.getFocusArea();
    if (t < focus.from) {
      this.model.tick(focus.from);
      return true;
    } else if (t > focus.to) {
      this.model.tick(focus.to);
      return true;
      return false;
    }
  };

  SeekbarView.prototype._dragSeekerToPos = function(toPos) {
    var focus, t;
    focus = this.model.getFocusArea();
    t = this.timelineEditor._XToFocusedTime(toPos);
    if (t < 0) {
      t = 0;
    }
    if (t > this.duration) {
      t = this.duration;
    }
    this.model.tick(t);
  };

  SeekbarView.prototype._repositionFocus = function() {
    var focus, left, right;
    focus = this.model.getFocusArea();
    left = this.timelineEditor._timeToUnfocusedX(focus.from);
    this.focusLeftNode.moveXTo(left).set('left', left);
    right = this.timelineEditor._timeToUnfocusedX(focus.from + focus.duration);
    this.focusRightNode.moveXTo(right).set('left', right);
    this.focusStripNode.moveXTo(left).css('width', (right - left) + 'px');
  };

  SeekbarView.prototype._updateDuration = function() {
    this.duration = this.model.duration;
    return this._repositionElements();
  };

  SeekbarView.prototype._seekToX = function(toPos) {
    var focus, t;
    focus = this.model.getFocusArea();
    t = this.timelineEditor._XToFocusedTime(toPos);
    if (t < 0) {
      t = 0;
    }
    if (t > this.duration) {
      t = this.duration;
    }
    this.model.tick(t);
  };

  SeekbarView.prototype._zoomFocus = function(zoomMult, x) {
    var focus, newDur, newDuration, newFrom, newLeftHalf, newRightHalf, newTo, oldLeftHalf, oldRightHalf, pivotInDur;
    focus = this.model.getFocusArea();
    pivotInDur = x / this._width;
    newDuration = focus.duration * zoomMult;
    if (newDuration > this.duration) {
      newFrom = 0;
      newTo = this.duration;
      this.model.changeFocusArea(newFrom, newTo);
      return;
    }
    if (newDuration < 1000) {
      zoomMult = 1000 / focus.duration;
      newDuration = 1000;
    }
    oldLeftHalf = pivotInDur * focus.duration;
    newLeftHalf = oldLeftHalf * zoomMult;
    newFrom = focus.from - (newLeftHalf - oldLeftHalf);
    oldRightHalf = (1 - pivotInDur) * focus.duration;
    newRightHalf = oldRightHalf * zoomMult;
    newTo = focus.to + (newRightHalf - oldRightHalf);
    if (newFrom < 0) {
      newFrom = 0;
    }
    if (newTo > this.duration) {
      newTo = this.duration;
    }
    newDur = newTo - newFrom;
    this.model.changeFocusArea(newFrom, newTo);
  };

  return SeekbarView;

})();

},{"foxie":111}],189:[function(require,module,exports){
var Foxie, GuidesManagerView, PropViewRepo, SelectionManager, TimelineEditorView, array;

Foxie = require('foxie');

array = require('utila/scripts/js/lib/array');

PropViewRepo = require('./timelineEditorView/PropViewRepo');

SelectionManager = require('./timelineEditorView/SelectionManager');

GuidesManagerView = require('./timelineEditorView/GuidesManagerView');

module.exports = TimelineEditorView = (function() {
  function TimelineEditorView(mainBox) {
    var timeControlModel;
    this.mainBox = mainBox;
    this.model = this.mainBox.editor.model.timelineEditor;
    this.rootView = this.mainBox.rootView;
    this.focusArea = this.model.focusArea;
    timeControlModel = this.mainBox.editor.model.timeControl;
    this.duration = timeControlModel.duration;
    this.selectionManager = new SelectionManager(this);
    timeControlModel.on('duration-change', (function(_this) {
      return function() {
        return _this.duration = timeControlModel.duration;
      };
    })(this));
    this.width = this.mainBox.width;
    this.mainBox.on('width-change', (function(_this) {
      return function() {
        return _this.width = _this.mainBox.width;
      };
    })(this));
    this.model.on('scroll-change', (function(_this) {
      return function() {
        return _this._updateScrollTopFromModel();
      };
    })(this));
    this._repo = new PropViewRepo(this);
    this._currentProps = [];
    this._prepareNode();
    this.guides = new GuidesManagerView(this);
    this._relayHorizontally();
    this._prepareListeners();
    this._firstPropAdded = false;
  }

  TimelineEditorView.prototype._prepareListeners = function() {
    this.mainBox.on('width-change', (function(_this) {
      return function() {
        return _this._relayHorizontally();
      };
    })(this));
    this.model.on('focus-change', (function(_this) {
      return function() {
        return _this._relayHorizontally();
      };
    })(this));
    this.model.on('prop-add', (function(_this) {
      return function(propHolder) {
        return _this._add(propHolder);
      };
    })(this));
    return this.model.on('prop-remove', (function(_this) {
      return function(propHolder) {
        return _this._remove(propHolder);
      };
    })(this));
  };

  TimelineEditorView.prototype._prepareNode = function() {
    this.node = Foxie('.theatrejs-timelineEditor').putIn(this.mainBox.node);
    this.node.node.addEventListener('scroll', (function(_this) {
      return function() {
        return _this.model._setScrollTopFromUser(_this.node.node.scrollTop);
      };
    })(this));
    this.rootView.moosh.onMiddleDrag(this.node).withNoKeys().onDown((function(_this) {
      return function() {
        _this.rootView.cursor.use('-webkit-grabbing');
        return _this.rootView.cursor.use('-moz-grabbing');
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        _this.mainBox.seekbar._dragFocusBy(-e.relX);
        return _this._dragScrollBy(-e.relY);
      };
    })(this)).onUp((function(_this) {
      return function() {
        return _this.rootView.cursor.free();
      };
    })(this));
    this.rootView.moosh.onClick(this.node).withNoKeys().onDone((function(_this) {
      return function(e) {
        return _this.mainBox.seekbar._seekToX(e.layerX);
      };
    })(this));
    this.rootView.moosh.onDrag(this.node).withNoKeys().onDown((function(_this) {
      return function() {
        return _this.rootView.cursor.use('ew-resize');
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        return _this.mainBox.seekbar._seekToX(e.layerX);
      };
    })(this)).onUp((function(_this) {
      return function() {
        return _this.rootView.cursor.free();
      };
    })(this));
    return this.rootView.moosh.onWheel(this.node).withKeys('shift').onWheel((function(_this) {
      return function(e) {
        return _this.mainBox.seekbar._zoomFocus(1 + (-e.delta / 120 / 8), e.layerX);
      };
    })(this));
  };

  TimelineEditorView.prototype._updateScrollTopFromModel = function() {
    return this.node.node.scrollTop = this.model.scrollTop | 0;
  };

  TimelineEditorView.prototype._dragScrollBy = function(amount) {
    return this.model._setScroll(this.model.scrollTop + amount);
  };

  TimelineEditorView.prototype._add = function(propHolder) {
    var propView;
    if (!this._firstPropAdded) {
      setTimeout((function(_this) {
        return function() {
          return _this._updateScrollTopFromModel();
        };
      })(this), 50);
      this._firstPropAdded = true;
    }
    propView = this._repo.getPropViewFor(propHolder);
    this._currentProps.push(propView);
    propView.attach();
  };

  TimelineEditorView.prototype._remove = function(propHolder) {
    var propView, propViewToRemove, _i, _len, _ref;
    _ref = this._currentProps;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      propView = _ref[_i];
      if (propView.id === propHolder.id) {
        propViewToRemove = propView;
      }
    }
    if (propViewToRemove == null) {
      throw Error("Couldn't find prop '" + propHolder.id + "' in the current props list");
    }
    array.pluckOneItem(this._currentProps, propViewToRemove);
    propViewToRemove.detach();
  };

  TimelineEditorView.prototype._relayHorizontally = function() {
    var prop, _i, _len, _ref;
    this.width = this.mainBox.width;
    this._widthToTimeRatio = this.width / this.focusArea.duration;
    _ref = this._currentProps;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      prop = _ref[_i];
      prop.relayHorizontally();
    }
    this.guides.relay();
  };

  TimelineEditorView.prototype._tick = function() {
    this.model.tick();
  };

  TimelineEditorView.prototype._XToTime = function(x) {
    return x / this._widthToTimeRatio;
  };

  TimelineEditorView.prototype._XToFocusedTime = function(x) {
    return this._XToTime(x) + this.focusArea.from;
  };

  TimelineEditorView.prototype._unfocusedXToTime = function(x) {
    return x / this.width * this.duration;
  };

  TimelineEditorView.prototype._timeToUnfocusedX = function(t) {
    return parseInt(this.width * (t / this.duration));
  };

  TimelineEditorView.prototype._timeToFocusedX = function(t) {
    return parseInt(this.width * (t - this.focusArea.from) / this.focusArea.duration);
  };

  TimelineEditorView.prototype._timeToX = function(t) {
    return t * this._widthToTimeRatio;
  };

  return TimelineEditorView;

})();

},{"./timelineEditorView/GuidesManagerView":192,"./timelineEditorView/PropViewRepo":194,"./timelineEditorView/SelectionManager":195,"foxie":111,"utila/scripts/js/lib/array":149}],190:[function(require,module,exports){
var Foxie, WorkspaceButtonsView;

Foxie = require('foxie');

module.exports = WorkspaceButtonsView = (function() {
  function WorkspaceButtonsView(mainBox) {
    this.mainBox = mainBox;
    this.rootView = this.mainBox.rootView;
    this.wsList = this.mainBox.workspaceList;
    this.wsList.on('show', (function(_this) {
      return function() {
        return _this.node.addClass('visible');
      };
    })(this));
    this.wsList.on('hide', (function(_this) {
      return function() {
        return _this.node.removeClass('visible');
      };
    })(this));
    this._prepareNode();
    this._prepareShowGraphButton();
    this._prepareActiveWorkspaceButton();
  }

  WorkspaceButtonsView.prototype._prepareNode = function() {
    this.node = Foxie('.theatrejs-workspaceButtons').putIn(this.mainBox.node);
  };

  WorkspaceButtonsView.prototype._prepareShowGraphButton = function() {
    var graph;
    this.showGraphButton = Foxie('.theatrejs-workspaceButtons-showGraph').putIn(this.node);
    graph = this.mainBox.editor.graph;
    this.rootView.moosh.onClick(this.showGraphButton).onDone((function(_this) {
      return function() {
        return graph.show();
      };
    })(this));
  };

  WorkspaceButtonsView.prototype._prepareActiveWorkspaceButton = function() {
    var activeWsName, workspaces;
    workspaces = this.mainBox.editor.model.workspaces;
    activeWsName = Foxie('span.theatrejs-workspaceButtons-activeWorkspaceName').innerHTML(workspaces.getActiveWorkspace().name).putIn(this.node);
    workspaces.on('active-workspace-change', (function(_this) {
      return function() {
        return activeWsName.innerHTML(workspaces.getActiveWorkspace().name);
      };
    })(this));
    this.rootView.moosh.onClick(activeWsName).onDone((function(_this) {
      return function() {
        return _this.wsList.show();
      };
    })(this));
  };

  return WorkspaceButtonsView;

})();

},{"foxie":111}],191:[function(require,module,exports){
var Foxie, WorkspaceListView, _Emitter,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Foxie = require('foxie');

_Emitter = require('../../_Emitter');

module.exports = WorkspaceListView = (function(_super) {
  __extends(WorkspaceListView, _super);

  function WorkspaceListView(mainBox) {
    this.mainBox = mainBox;
    WorkspaceListView.__super__.constructor.apply(this, arguments);
    this.rootView = this.mainBox.rootView;
    this.rootView.kilidScopeForEdit = this.rootView.kilid.getScope('workspace-list-view');
    this.node = Foxie('.theatrejs-workspaceList').putIn(this.mainBox.node);
    this.holder = Foxie('.theatrejs-workspaceList-holder').putIn(this.node);
    this.model = this.mainBox.editor.model.workspaces;
    this.model.on('new-workspace', (function(_this) {
      return function(ws) {
        return _this._recognizeNewWorkspace(ws);
      };
    })(this));
    this._initRename();
    this._initNewBtn();
  }

  WorkspaceListView.prototype._recognizeNewWorkspace = function(ws) {
    var wsNode;
    wsNode = new Foxie('.theatrejs-workspaceList-workspace').putIn(this.holder);
    wsNode.node.innerHTML = ws.name;
    this._attachCtrl(wsNode.node);
    ws.on('remove', (function(_this) {
      return function() {
        return wsNode.remove();
      };
    })(this));
    this.rootView.moosh.onClick(wsNode).withNoKeys().onDone((function(_this) {
      return function(e) {
        return ws.activate();
      };
    })(this));
    return this.rootView.moosh.onClick(wsNode).withKeys('ctrl').onDone((function(_this) {
      return function(e) {
        _this.rootView.moosh.ignore(wsNode);
        return _this._startEdit(wsNode, function() {
          _this.rootView.moosh.unignore(wsNode);
          if (wsNode.node.innerHTML.trim() === '') {
            return ws.remove();
          } else {
            return ws.rename(wsNode.node.innerHTML.trim());
          }
        }, function() {
          _this.rootView.moosh.unignore(wsNode);
          return wsNode.node.innerHTML = ws.name;
        });
      };
    })(this));
  };

  WorkspaceListView.prototype._attachCtrl = function(node) {
    this.rootView.moosh.onHover(node).withKeys('ctrl').onEnter((function(_this) {
      return function() {
        return node.classList.add('pre-edit');
      };
    })(this)).onLeave((function(_this) {
      return function() {
        return node.classList.remove('pre-edit');
      };
    })(this));
  };

  WorkspaceListView.prototype._initRename = function() {
    this.currentEdit = null;
    this.rootView.kilidScopeForEdit.on('enter').onEnd((function(_this) {
      return function(e) {
        return _this._storeEdit();
      };
    })(this));
    this.rootView.kilidScopeForEdit.on('esc').onEnd((function(_this) {
      return function(e) {
        return _this._discardEdit();
      };
    })(this));
    return this.rootView.kilidScopeForEdit.on('ctrl+delete').onEnd((function(_this) {
      return function(e) {
        _this.currentEdit.innerHTML = '';
        return _this._storeEdit();
      };
    })(this));
  };

  WorkspaceListView.prototype._startEdit = function(wsNode, cb, discard) {
    this.rootView.kilidScopeForEdit.activate();
    this.currentEditCallBack = cb;
    this.currentEditDiscardCallBack = discard;
    this.currentEdit = wsNode.node;
    this.currentText = this.currentEdit.innerHTML;
    this.currentEdit.contentEditable = true;
    this.currentEdit.classList.add('editing');
    return this.currentEdit.focus();
  };

  WorkspaceListView.prototype._storeEdit = function() {
    if (this.currentEdit == null) {
      return;
    }
    this.rootView.kilidScopeForEdit.deactivate();
    this.currentEdit.contentEditable = false;
    this.currentEdit.classList.remove('editing');
    this.currentEdit = null;
    if (this.currentEditCallBack) {
      this.currentEditCallBack();
      return this.currentEditCallBack = null;
    }
  };

  WorkspaceListView.prototype._discardEdit = function() {
    if (this.currentEdit == null) {
      return;
    }
    this.rootView.kilidScopeForEdit.deactivate();
    this.currentEdit.contentEditable = false;
    this.currentEdit.classList.remove('editing');
    this.currentEdit = null;
    if (this.currentEditDiscardCallBack) {
      this.currentEditDiscardCallBack();
      return this.currentEditDiscardCallBack = null;
    }
  };

  WorkspaceListView.prototype._initNewBtn = function() {
    this.newBtn = Foxie('.theatrejs-workspaceList-workspace').putIn(this.node);
    this.newBtn.node.innerHTML = '+';
    return this.rootView.moosh.onClick(this.newBtn).onDone((function(_this) {
      return function() {
        _this.newBtn.node.innerHTML = '';
        return _this._startEdit(_this.newBtn, function() {
          if (_this.newBtn.node.innerHTML !== '') {
            _this.model.get(_this.newBtn.node.innerHTML);
          }
          return _this.newBtn.node.innerHTML = '+';
        }, function() {
          return _this.newBtn.node.innerHTML = '+';
        });
      };
    })(this));
  };

  WorkspaceListView.prototype.show = function() {
    if (this.visible) {
      return;
    }
    this.node.addClass('visible');
    this.visible = true;
    this.rootView.moosh.onClickOutside(this.node, (function(_this) {
      return function() {
        return _this.hide();
      };
    })(this));
    return this._emit('show');
  };

  WorkspaceListView.prototype.hide = function() {
    if (this.visible) {
      this._storeEdit();
      this.node.removeClass('visible');
      this.visible = false;
    }
    this._emit('hide');
  };

  return WorkspaceListView;

})(_Emitter);

},{"../../_Emitter":155,"foxie":111}],192:[function(require,module,exports){
var Foxie, GuideView, GuidesManagerView, array;

Foxie = require('foxie');

array = require('utila/scripts/js/lib/array');

GuideView = require('./guidesManagerView/GuideView');

module.exports = GuidesManagerView = (function() {
  function GuidesManagerView(timelineEditor) {
    this.timelineEditor = timelineEditor;
    this.model = this.timelineEditor.model.guides;
    this.rootView = this.timelineEditor.rootView;
    this.timeControlModel = this.timelineEditor.mainBox.editor.model.timeControl;
    this._prepareNode();
    this._prepareGuides();
    this._list = [];
    this.rootView.kilid.on('ctrl+space', (function(_this) {
      return function() {
        return _this.model.toggle(_this.timeControlModel.t);
      };
    })(this));
  }

  GuidesManagerView.prototype._prepareNode = function() {
    return this.node = Foxie('.theatrejs-timelineEditor-guides').putIn(this.timelineEditor.node);
  };

  GuidesManagerView.prototype._prepareGuides = function() {
    var guideModel, _i, _len, _ref;
    _ref = this.model._list;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      guideModel = _ref[_i];
      this._add(guideModel);
    }
    this.model.on('new-guide', (function(_this) {
      return function(guideModel) {
        return _this._add(guideModel);
      };
    })(this));
  };

  GuidesManagerView.prototype._add = function(guideModel) {
    return this._list.push(new GuideView(this, guideModel));
  };

  GuidesManagerView.prototype.relay = function() {
    var guideView, _i, _len, _ref;
    _ref = this._list;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      guideView = _ref[_i];
      guideView.relay();
    }
  };

  GuidesManagerView.prototype._remove = function(guideView) {
    return array.pluckOneItem(this._list, guideView);
  };

  return GuidesManagerView;

})();

},{"./guidesManagerView/GuideView":196,"foxie":111,"utila/scripts/js/lib/array":149}],193:[function(require,module,exports){
var ConnectorView, Foxie, PointView, PropView, Selection, SvgArea, array;

Foxie = require('foxie');

array = require('utila/scripts/js/lib/array');

SvgArea = require('./propView/SvgArea');

Selection = require('./propView/Selection');

PointView = require('./propView/PointView');

ConnectorView = require('./propView/ConnectorView');

module.exports = PropView = (function() {
  function PropView(repo, propModel) {
    this.repo = repo;
    this.propModel = propModel;
    this.timelineEditor = this.repo.timelineEditor;
    this.rootView = this.timelineEditor.rootView;
    this.id = this.propModel.id;
    this.timelineProp = this.propModel.timelineProp;
    this.pacs = this.timelineProp.pacs;
    this.pacs.on('peak-and-bottom-change', (function(_this) {
      return function() {
        return _this._relayVertically();
      };
    })(this));
    this._items = [];
    this.rootView.moosh = this.repo.timelineEditor.mainBox.editor.moosh;
    this._expanded = null;
    this._propHolderModel = null;
    this._widthToTimeRatio = 0;
    this._heightToValueRatio = 0;
    this._lastPeak = 0;
    this._lastBottom = 0;
    this._height = 0;
    this._prepareNodes();
    this._prepareInteractions();
    this.selection = new Selection(this);
    this.svgArea = new SvgArea(this);
    this._prepareHypothericalConnector();
    this._preparePacs();
    setTimeout((function(_this) {
      return function() {
        _this._relayVertically();
        return _this.relayHorizontally();
      };
    })(this), 5);
  }

  PropView.prototype._setPropHolderModel = function(_propHolderModel) {
    this._propHolderModel = _propHolderModel;
    this._propHolderModel.removeAllListeners();
    this._propHolderModel.on('expansion-toggle', (function(_this) {
      return function() {
        return _this._updateExpansion();
      };
    })(this));
    this._updateExpansion();
    this._propHolderModel.on('height-change', (function(_this) {
      return function() {
        return _this._updateHeight();
      };
    })(this));
    return this._updateHeight();
  };

  PropView.prototype._prepareNodes = function() {
    this.node = Foxie('.theatrejs-timelineEditor-prop.shouldTransition');
    this.resizer = Foxie('.theatrejs-timelineEditor-prop-resizer').putIn(this.node);
    this._prepareInfoNodes();
    return this._preparePacsNodes();
  };

  PropView.prototype._prepareInteractions = function() {
    var top;
    top = parseInt(this.pacsNode.computedStyle('top')) || 0;
    this.rootView.moosh.onHover(this.node).withKeys('ctrl+shift').onEnter((function(_this) {
      return function(e) {
        _this.rootView.cursor.use('none');
        return _this.hypotheticalPointNode.moveXTo(e.layerX).moveYTo(e.layerY - top);
      };
    })(this)).onMove((function(_this) {
      return function(e) {
        var t, x;
        t = _this.timelineEditor._XToFocusedTime(e.layerX);
        x = _this.timelineEditor._timeToX(t);
        return _this.hypotheticalPointNode.moveXTo(x).moveYTo(e.layerY - top);
      };
    })(this)).onLeave((function(_this) {
      return function() {
        _this.rootView.cursor.free();
        return _this.hypotheticalPointNode.moveTo(-1000, -1000, 1);
      };
    })(this));
    this.rootView.moosh.onClick(this.node).withKeys('ctrl+shift').onUp((function(_this) {
      return function(e) {
        var t, val;
        t = _this.timelineEditor._XToFocusedTime(e.layerX);
        val = _this._YToVal(e.layerY - top);
        _this.pacs.addPoint(t, val, 100, val * 0.1, 100, val * 0.1);
        return _this.pacs.done();
      };
    })(this));
    this.hypotheticalPointNode = Foxie('.theatrejs-timelineEditor-prop-pacs-hypotheticalPoint').putIn(this.pacsNode).moveTo(-1000, -1000, 1);
    return this.rootView.moosh.onDrag(this.resizer).withNoKeys().onDown((function(_this) {
      return function(e) {
        if (!_this._propHolderModel.isExpanded()) {
          e.cancel();
          return;
        }
        return _this.node.removeClass('shouldTransition');
      };
    })(this)).onUp((function(_this) {
      return function() {
        _this.node.addClass('shouldTransition');
        return _this._relayVertically();
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        return _this._propHolderModel.setHeight(_this._propHolderModel.getHeight() + e.relY);
      };
    })(this));
  };

  PropView.prototype._prepareHypothericalConnector = function() {
    return this.hypotheticalConnector = Foxie('svg:path').putIn(this.svgArea.node).attr('stroke', '#999').attr('stroke-width', '3px').attr('fill', 'transparent');
  };

  PropView.prototype.hideHypotheticalConnector = function() {
    return this.hypotheticalConnector.attr('d', 'M 0 0');
  };

  PropView.prototype.drawHypotheticalConnector = function(fromT, fromVal, toT, toVal) {
    this.hypotheticalConnector.attr('d', ("M" + (this.timelineEditor._timeToX(fromT)) + " " + (this._valToY(fromVal)) + " L ") + ("" + (this.timelineEditor._timeToX(toT)) + " " + (this._valToY(toVal))));
  };

  PropView.prototype._prepareInfoNodes = function() {
    this.info = Foxie('.theatrejs-timelineEditor-prop-info').putIn(this.node);
    this.rootView.moosh.onClick(this.info).withNoKeys().onDone((function(_this) {
      return function(e) {
        e.preventDefault();
        return _this._propHolderModel.toggleExpansion();
      };
    })(this));
    this.rootView.moosh.onDrag(this.info).withNoKeys().onDrag((function(_this) {
      return function(e) {
        if (e.relX <= -20) {
          e.cancel();
          _this._propHolderModel.removeFromWorkspace();
        } else if (e.relY <= -20) {
          e.cancel();
          _this._propHolderModel.shiftUp();
        } else if (e.relY >= 20) {
          e.cancel();
          _this._propHolderModel.shiftDown();
        }
      };
    })(this));
    this.catName = Foxie('.theatrejs-timelineEditor-prop-info-catName').putIn(this.info);
    this.catName.node.innerHTML = this.propModel.actor.group.name;
    this.actorName = Foxie('.theatrejs-timelineEditor-prop-info-actorName').putIn(this.info);
    this.actorName.node.innerHTML = this.propModel.actor.name;
    this.propName = Foxie('.theatrejs-timelineEditor-prop-info-propName').putIn(this.info);
    return this.propName.node.innerHTML = this.propModel.name;
  };

  PropView.prototype._preparePacsNodes = function() {
    this.pacsContainer = Foxie('.theatrejs-timelineEditor-prop-pacsContainer').putIn(this.node);
    return this.pacsNode = Foxie('.theatrejs-timelineEditor-prop-pacs').putIn(this.pacsContainer);
  };

  PropView.prototype.attach = function() {
    this.selection.attach();
    this.node.putIn(this.timelineEditor.node);
  };

  PropView.prototype.detach = function() {
    this.selection.detach();
    this.node.remove();
  };

  PropView.prototype._updateExpansion = function() {
    var expanded;
    expanded = this._propHolderModel.isExpanded();
    if (expanded === this._expanded) {
      return;
    }
    this._expanded = expanded;
    if (this._expanded) {
      this.node.addClass('expanded').removeClass('not-expanded');
    } else {
      this.node.removeClass('expanded').addClass('not-expanded');
    }
  };

  PropView.prototype._updateHeight = function() {
    var nodeHeight;
    nodeHeight = this._propHolderModel.getHeight();
    if (nodeHeight - 40 === this._height) {
      return;
    }
    this._height = nodeHeight - 40;
    this.node.css('height', nodeHeight + 'px');
  };

  PropView.prototype.relayHorizontally = function() {
    var item, newRatio, _i, _len, _ref;
    newRatio = this.timelineEditor._widthToTimeRatio;
    if (newRatio !== this._widthToTimeRatio) {
      this._widthToTimeRatio = newRatio;
      this.svgArea.relayHorizontally();
      _ref = this._items;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        item = _ref[_i];
        item.relayHorizontally();
      }
      this.selection.relayHorizontally();
    }
    this._shiftViewToTime(this.timelineEditor.focusArea.from);
  };

  PropView.prototype._shiftViewToTime = function(t) {
    var newPos;
    newPos = this.timelineEditor._timeToX(t);
    this.pacsNode.moveXTo(-newPos);
  };

  PropView.prototype._relayVertically = function() {
    var item, newRatio, valDiff, _i, _len, _ref;
    valDiff = this.pacs.peak - this.pacs.bottom;
    newRatio = this._height / valDiff;
    if (this.pacs.peak === this._lastPeak && this.pacs.bottom === this._lastBottom && newRatio === this._heightToValueRatio) {
      return;
    }
    this._lastPeak = this.pacs.peak;
    this._lastBottom = this.pacs.bottom;
    this._heightToValueRatio = newRatio;
    this.svgArea.relayVertically();
    _ref = this._items;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      item.relayVertically();
    }
  };

  PropView.prototype._preparePacs = function() {
    var item, _i, _len, _ref;
    _ref = this.pacs.chronology;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      if (item.isPoint()) {
        this._addPoint(item);
      } else {
        this._addConnector(item);
      }
    }
    this.pacs.on('new-point', (function(_this) {
      return function(point) {
        _this._addPoint(point);
      };
    })(this));
    this.pacs.on('new-connector', (function(_this) {
      return function(connector) {
        _this._addConnector(connector);
      };
    })(this));
  };

  PropView.prototype._addPoint = function(point) {
    var pointView;
    pointView = new PointView(this, point);
    this._items.push(pointView);
  };

  PropView.prototype._addConnector = function(connector) {
    var connectorView;
    connectorView = new ConnectorView(this, connector);
    this._items.push(connectorView);
  };

  PropView.prototype._removeItem = function(item) {
    array.pluckOneItem(this._items, item);
  };

  PropView.prototype._tick = function() {
    this.timelineEditor._tick();
  };

  PropView.prototype._valToY = function(v) {
    return this._normalizeY(this._normalizeValue(v) * this._heightToValueRatio);
  };

  PropView.prototype._YToVal = function(y) {
    return this._unnormalizeValue(this._unnormalizeY(y) / this._heightToValueRatio);
  };

  PropView.prototype._normalizedValToY = function(v) {
    return -v * this._heightToValueRatio;
  };

  PropView.prototype._YToNormalizedVal = function(y) {
    return -y / this._heightToValueRatio;
  };

  PropView.prototype._normalizeValue = function(value) {
    return value - this.pacs.bottom;
  };

  PropView.prototype._unnormalizeValue = function(normalizedValue) {
    return normalizedValue + this.pacs.bottom;
  };

  PropView.prototype._normalizeY = function(y) {
    return this._height - y;
  };

  PropView.prototype._unnormalizeY = function(normalizedY) {
    return this._height - normalizedY;
  };

  return PropView;

})();

},{"./propView/ConnectorView":197,"./propView/PointView":198,"./propView/Selection":199,"./propView/SvgArea":200,"foxie":111,"utila/scripts/js/lib/array":149}],194:[function(require,module,exports){
var PropView, PropViewRepo;

PropView = require('./PropView');

module.exports = PropViewRepo = (function() {
  function PropViewRepo(timelineEditor) {
    this.timelineEditor = timelineEditor;
    this._propViews = {};
  }

  PropViewRepo.prototype.getPropViewFor = function(propHolderModel) {
    var id, propView;
    id = propHolderModel.id;
    propView = this._propViews[id];
    if (propView == null) {
      this._propViews[id] = propView = this._makePropViewFor(propHolderModel);
    }
    propView._setPropHolderModel(propHolderModel);
    return propView;
  };

  PropViewRepo.prototype._makePropViewFor = function(propHolderModel) {
    return new PropView(this, propHolderModel.actorProp);
  };

  return PropViewRepo;

})();

},{"./PropView":193}],195:[function(require,module,exports){
var SelectionManager, array,
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

array = require('utila/scripts/js/lib/array');

module.exports = SelectionManager = (function() {
  function SelectionManager(timelineEditor) {
    this.timelineEditor = timelineEditor;
    this.selections = [];
    this.group = [];
  }

  SelectionManager.prototype.include = function(s) {
    if (__indexOf.call(this.selections, s) < 0) {
      return this.selections.push(s);
    }
  };

  SelectionManager.prototype.exclude = function(s) {
    array.pluckOneItem(this.selections, s);
    array.pluckOneItem(this.group, s);
    return s._beOffGroup();
  };

  SelectionManager.prototype.closeGroup = function() {
    var s, _i, _len, _ref;
    _ref = this.group;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      s = _ref[_i];
      s._beOffGroup();
    }
    return this.group.length = 0;
  };

  SelectionManager.prototype.startGroup = function(firstSelection) {
    var s, _i, _len, _ref;
    this.closeGroup();
    firstSelection._beInGroup();
    this.group.push(firstSelection);
    _ref = this.selections;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      s = _ref[_i];
      if (s === firstSelection) {
        continue;
      }
      s._beInGroup(firstSelection);
      this.group.push(s);
    }
  };

  SelectionManager.prototype.takeOffGroup = function(s) {
    s._beOffGroup();
    array.pluckOneItem(this.group, s);
  };

  return SelectionManager;

})();

},{"utila/scripts/js/lib/array":149}],196:[function(require,module,exports){
var Foxie, GuideView;

Foxie = require('foxie');

module.exports = GuideView = (function() {
  function GuideView(guidesManager, model) {
    this.guidesManager = guidesManager;
    this.model = model;
    this.timelineEditor = this.guidesManager.timelineEditor;
    this._prepareNode();
    this.model.on('remove', (function(_this) {
      return function() {
        return _this._remove();
      };
    })(this));
  }

  GuideView.prototype._prepareNode = function() {
    this.node = Foxie('.theatrejs-timelineEditor-guides-guide').putIn(this.guidesManager.node);
    return this.relay();
  };

  GuideView.prototype.relay = function() {
    return this.node.moveXTo(this.timelineEditor._timeToFocusedX(this.model.t));
  };

  GuideView.prototype._remove = function() {
    this.node.quit();
    return this.guidesManager._remove(this);
  };

  return GuideView;

})();

},{"foxie":111}],197:[function(require,module,exports){
var ConnectorView, Foxie, _ItemView,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Foxie = require('foxie');

_ItemView = require('./_ItemView');

module.exports = ConnectorView = (function(_super) {
  __extends(ConnectorView, _super);

  function ConnectorView(prop, model) {
    this.prop = prop;
    this.model = model;
    ConnectorView.__super__.constructor.apply(this, arguments);
    this.timelineEditor = this.prop.timelineEditor;
    this.leftPoint = new Float32Array(2);
    this.rightPoint = new Float32Array(2);
    this.leftHandler = new Float32Array(2);
    this.rightHandler = new Float32Array(2);
    this.svgArea = this.prop.svgArea;
    this.pacs = this.model.pacs;
    this.model.on('remove', (function(_this) {
      return function() {
        return _this._remove();
      };
    })(this));
    this.model.on('bezier-change', (function(_this) {
      return function() {
        return _this.relay();
      };
    })(this));
    this._wasBadBezier = false;
    this._prepareNode();
  }

  ConnectorView.prototype._prepareNode = function() {
    this.node = Foxie('svg:path').putIn(this.svgArea.node).attr('stroke', '#367c89').attr('stroke-width', '4px').attr('fill', 'transparent');
    this.rootView.moosh.onHover(this.node).withKeys('ctrl').onEnter((function(_this) {
      return function() {
        return _this.node.attr('stroke', 'red');
      };
    })(this)).onLeave((function(_this) {
      return function() {
        return _this.node.attr('stroke', '#367c89');
      };
    })(this));
    this.rootView.moosh.onClick(this.node).withKeys('ctrl').onUp((function(_this) {
      return function() {
        _this.model.remove();
        _this.pacs.done();
        return _this.prop._tick();
      };
    })(this));
    return this.relayHorizontally();
  };

  ConnectorView.prototype.relayHorizontally = function() {
    return this.relay();
  };

  ConnectorView.prototype.relayVertically = function() {
    return this.relay();
  };

  ConnectorView.prototype.relay = function() {
    this.leftPoint[0] = this.timelineEditor._timeToX(this.model.leftT);
    this.leftPoint[1] = this.prop._valToY(this.model.leftValue);
    this.rightPoint[0] = this.timelineEditor._timeToX(this.model.rightT);
    this.rightPoint[1] = this.prop._valToY(this.model.rightValue);
    this.leftHandler[0] = this.timelineEditor._timeToX(this.model.leftT + this.model.leftHandler[0]);
    this.leftHandler[1] = this.prop._valToY(this.model.leftValue + this.model.leftHandler[1]);
    this.rightHandler[0] = this.timelineEditor._timeToX(this.model.rightT - this.model.rightHandler[0]);
    this.rightHandler[1] = this.prop._valToY(this.model.rightValue + this.model.rightHandler[1]);
    this._redrawCurve();
  };

  ConnectorView.prototype._redrawCurve = function() {
    this.node.attr('d', ("M" + this.leftPoint[0] + " " + this.leftPoint[1] + " C ") + ("" + this.leftHandler[0] + " " + this.leftHandler[1] + ", ") + ("" + this.rightHandler[0] + " " + this.rightHandler[1] + ", ") + ("" + this.rightPoint[0] + " " + this.rightPoint[1]));
    if (this.model.badBezier) {
      if (!this._wasBadBezier) {
        this.node.attr('stroke', 'red');
        this._wasBadBezier = true;
      }
    } else {
      if (this._wasBadBezier) {
        this.node.attr('stroke', '#367c89');
        this._wasBadBezier = false;
      }
    }
  };

  ConnectorView.prototype._remove = function() {
    this.rootView.moosh.forgetNode(this.node);
    this.node.quit();
    return ConnectorView.__super__._remove.apply(this, arguments);
  };

  return ConnectorView;

})(_ItemView);

},{"./_ItemView":201,"foxie":111}],198:[function(require,module,exports){
var Foxie, PointView, _ItemView,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Foxie = require('foxie');

_ItemView = require('./_ItemView');

module.exports = PointView = (function(_super) {
  __extends(PointView, _super);

  function PointView(prop, model) {
    this.prop = prop;
    this.model = model;
    PointView.__super__.constructor.apply(this, arguments);
    this.x = 0;
    this.y = 0;
    this.pacs = this.model.pacs;
    this.heightUsage = 0.7;
    this.svgArea = this.prop.svgArea;
    this.timelineEditor = this.prop.timelineEditor;
    this._active = false;
    this._lastValue = this.model.value;
    this._tempKilidScope = this.rootView.kilid.getTempScope();
    this._tempKilidScope.on('enter', (function(_this) {
      return function() {
        return _this._commitValueAndDeactivate();
      };
    })(this));
    this._tempKilidScope.on('esc', (function(_this) {
      return function() {
        return _this._discardValueAndDeactivate();
      };
    })(this));
    this._prepareNode();
    this._prepareHandlers();
    this._prepareValueInputNode();
    this.relayHorizontally();
    this.relayVertically();
    this.model.on('value-change', (function(_this) {
      return function() {
        return _this.relayVertically();
      };
    })(this));
    this.model.on('handler-change', (function(_this) {
      return function() {
        return _this._moveHandlers();
      };
    })(this));
    this.model.on('time-change', (function(_this) {
      return function() {
        return _this.relayHorizontally();
      };
    })(this));
    this.model.on('remove', (function(_this) {
      return function() {
        return _this._remove();
      };
    })(this));
  }

  PointView.prototype._prepareNode = function() {
    this.node = Foxie('.theatrejs-timelineEditor-prop-pacs-point').putIn(this.prop.pacsNode);
    this._prepareNodeActivationInteractions();
    this._prepareNodeRemovalInteractions();
    this._prepareNodeConnectionInteractions();
    return this._prepareNodeMoveInteractions();
  };

  PointView.prototype._prepareNodeActivationInteractions = function() {
    return this.rootView.moosh.onClick(this.node, (function(_this) {
      return function() {
        return _this._activate();
      };
    })(this)).withNoKeys();
  };

  PointView.prototype._prepareNodeRemovalInteractions = function() {
    this.rootView.moosh.onHover(this.node).withKeys('ctrl').onEnter((function(_this) {
      return function() {
        return _this.node.addClass('hint-remove');
      };
    })(this)).onLeave((function(_this) {
      return function() {
        return _this.node.removeClass('hint-remove');
      };
    })(this));
    return this.rootView.moosh.onClick(this.node).withKeys('ctrl').onUp((function(_this) {
      return function() {
        _this.model.remove();
        _this.pacs.done();
        return _this.prop._tick();
      };
    })(this));
  };

  PointView.prototype._prepareNodeConnectionInteractions = function() {
    var couldConnectToLeft, couldConnectToRight, sideToConnect;
    couldConnectToLeft = false;
    couldConnectToRight = false;
    sideToConnect = 0;
    return this.rootView.moosh.onDrag(this.node).withKeys('ctrl').onDown((function(_this) {
      return function() {
        couldConnectToLeft = _this.model.canConnectToLeft();
        couldConnectToRight = _this.model.canConnectToRight();
        return sideToConnect = 0;
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        sideToConnect = 0;
        if (e.absX < 0) {
          if (couldConnectToLeft) {
            _this._showHypotheticalConnectorToTheLeft();
            return sideToConnect = -1;
          } else {
            _this._hideHypothericalConnector();
            return _this.rootView.cursor.use('not-allowed');
          }
        } else if (e.absX > 0) {
          if (couldConnectToRight) {
            _this._showHypotheticalConnectorToTheRight();
            return sideToConnect = 1;
          } else {
            _this._hideHypothericalConnector();
            return _this.rootView.cursor.use('not-allowed');
          }
        }
      };
    })(this)).onUp((function(_this) {
      return function() {
        _this._hideHypothericalConnector();
        _this.rootView.cursor.free();
        if (sideToConnect === 1) {
          _this.model.connectToTheRight();
          _this.model.pacs.done();
        } else if (sideToConnect === -1) {
          _this.model.connectToTheLeft();
          _this.model.pacs.done();
        }
      };
    })(this));
  };

  PointView.prototype._prepareNodeMoveInteractions = function() {
    this.rootView.moosh.onDrag(this.node).withNoKeys().onDown((function(_this) {
      return function() {
        _this.node.addClass('moving');
        _this.rootView.cursor.use(_this.node);
        return _this._hideHandlers();
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        _this.node.moveX(e.relX);
        return _this.node.moveY(e.relY);
      };
    })(this)).onUp((function(_this) {
      return function(e) {
        var timeChange, valDiff;
        _this.node.removeClass('moving');
        _this.rootView.cursor.free();
        _this._showHandlers();
        timeChange = _this.timelineEditor._XToTime(e.absX);
        _this.model.setTime(_this.model.t + timeChange);
        valDiff = _this.prop._YToNormalizedVal(e.absY);
        _this.model.setValue(_this.model.value + valDiff);
        _this.pacs.done();
        return _this.prop._tick();
      };
    })(this)).onCancel((function(_this) {
      return function() {
        _this.relayHorizontally();
        _this.node.removeClass('moving');
        _this.rootView.cursor.free();
        return _this._showHandlers();
      };
    })(this));
    this._prepareNodeDragValueInteractions();
    return this._prepareNodeDragTimeInteractions();
  };

  PointView.prototype._prepareNodeDragValueInteractions = function() {
    this.rootView.moosh.onHover(this.node).withKeys('alt').onEnter((function(_this) {
      return function() {
        _this.node.addClass('mightChangeValue');
        return _this.rootView.cursor.use(_this.node);
      };
    })(this)).onLeave((function(_this) {
      return function() {
        _this.node.removeClass('mightChangeValue');
        return _this.rootView.cursor.free();
      };
    })(this));
    this.rootView.moosh.onDrag(this.node).withKeys('alt').onDown((function(_this) {
      return function() {
        return _this.rootView.cursor.use(_this.node);
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        var add;
        add = _this.prop._YToNormalizedVal(e.relY);
        _this.model.setValue(_this.model.value + add);
        return _this.prop._tick();
      };
    })(this)).onUp((function(_this) {
      return function() {
        _this.rootView.cursor.free();
        _this.pacs.done();
        return _this.prop._tick();
      };
    })(this));
  };

  PointView.prototype._prepareNodeDragTimeInteractions = function() {
    this.rootView.moosh.onHover(this.node).withKeys('shift').onEnter((function(_this) {
      return function() {
        return _this.node.addClass('mightChangeTime');
      };
    })(this)).onLeave((function(_this) {
      return function() {
        return _this.node.removeClass('mightChangeTime');
      };
    })(this));
    return this.rootView.moosh.onDrag(this.node).withKeys('shift').onDown((function(_this) {
      return function() {
        _this.node.addClass('changingTime');
        _this.rootView.cursor.use(_this.node);
        return _this._hideHandlers();
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        return _this.node.moveX(e.relX);
      };
    })(this)).onUp((function(_this) {
      return function(e) {
        var timeChange;
        timeChange = _this.timelineEditor._XToTime(e.absX);
        _this.model.setTime(_this.model.t + timeChange);
        _this.pacs.done();
        _this.prop._tick();
        _this.node.removeClass('changingTime');
        _this.rootView.cursor.free();
        return _this._showHandlers();
      };
    })(this)).onCancel((function(_this) {
      return function() {
        _this.relayHorizontally();
        _this.node.removeClass('changingTime');
        _this.rootView.cursor.free();
        return _this._showHandlers();
      };
    })(this));
  };

  PointView.prototype._hideHandlers = function() {
    this.leftHandler.setOpacity(0);
    this.rightHandler.setOpacity(0);
    this.leftHandlerLine.setOpacity(0);
    return this.rightHandlerLine.setOpacity(0);
  };

  PointView.prototype._showHandlers = function() {
    this.leftHandler.setOpacity(1);
    this.rightHandler.setOpacity(1);
    this.leftHandlerLine.setOpacity(1);
    return this.rightHandlerLine.setOpacity(1);
  };

  PointView.prototype._showHypotheticalConnectorToTheLeft = function() {
    var leftPoint;
    leftPoint = this.model.getLeftPoint();
    return this.prop.drawHypotheticalConnector(this.model.t, this.model.value, leftPoint.t, leftPoint.value);
  };

  PointView.prototype._showHypotheticalConnectorToTheRight = function() {
    var rightPoint;
    rightPoint = this.model.getRightPoint();
    return this.prop.drawHypotheticalConnector(this.model.t, this.model.value, rightPoint.t, rightPoint.value);
  };

  PointView.prototype._hideHypothericalConnector = function() {
    return this.prop.hideHypotheticalConnector();
  };

  PointView.prototype._moveNode = function() {
    this.node.moveXTo(this.x);
    this.node.moveYTo(this.y);
  };

  PointView.prototype._prepareHandlers = function() {
    this.leftHandler = Foxie('.theatrejs-timelineEditor-prop-pacs-point-handler.left').putIn(this.node);
    this.leftHandlerLine = Foxie('svg:path').putIn(this.svgArea.node).attr('stroke', '#272727').attr('stroke-width', '1px').attr('fill', 'transparent');
    this.rightHandlerLine = Foxie('svg:path').putIn(this.svgArea.node).attr('stroke', '#272727').attr('stroke-width', '1px').attr('fill', 'transparent');
    this.rightHandler = Foxie('.theatrejs-timelineEditor-prop-pacs-point-handler.right').putIn(this.node);
    this._setupDragForRightHandler();
    return this._setupDragForLeftHandler();
  };

  PointView.prototype._setupDragForRightHandler = function() {
    var nextX, nextY, startX, startY;
    startX = startY = nextX = nextY = 0;
    this.rootView.moosh.onDrag(this.rightHandler).onDown((function(_this) {
      return function() {
        startX = _this.rightHandler.getMovement().x;
        return startY = _this.rightHandler.getMovement().y;
      };
    })(this)).onUp((function(_this) {
      return function() {
        return _this.pacs.done();
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        var nextT, nextVal;
        nextX = startX + e.absX;
        nextY = startY + e.absY;
        if (nextX < 0) {
          nextX = 0;
        }
        nextT = _this.timelineEditor._XToTime(nextX);
        nextVal = _this.prop._YToNormalizedVal(nextY);
        _this.model.setRightHandler(nextT, nextVal);
        return _this.prop._tick();
      };
    })(this));
  };

  PointView.prototype._setupDragForLeftHandler = function() {
    var nextX, nextY, startX, startY;
    startX = startY = nextX = nextY = 0;
    this.rootView.moosh.onDrag(this.leftHandler).onDown((function(_this) {
      return function() {
        startX = -_this.leftHandler.getMovement().x;
        return startY = _this.leftHandler.getMovement().y;
      };
    })(this)).onUp((function(_this) {
      return function() {
        return _this.pacs.done();
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        var nextT, nextVal;
        nextX = startX - e.absX;
        nextY = startY + e.absY;
        if (nextX < 0) {
          nextX = 0;
        }
        nextT = _this.timelineEditor._XToTime(nextX);
        nextVal = _this.prop._YToNormalizedVal(nextY);
        _this.model.setLeftHandler(nextT, nextVal);
        return _this.prop._tick();
      };
    })(this));
  };

  PointView.prototype._moveHandlers = function() {
    this.leftHandler.moveXTo(this.timelineEditor._timeToX(-this.model.leftHandler[0]));
    this.leftHandler.moveYTo(this.prop._normalizedValToY(this.model.leftHandler[1]));
    this.rightHandler.moveXTo(this.timelineEditor._timeToX(this.model.rightHandler[0]));
    this.rightHandler.moveYTo(this.prop._normalizedValToY(this.model.rightHandler[1]));
    this.leftHandlerLine.attr('d', ("M" + this.x + " " + this.y + " L ") + ("" + (this.timelineEditor._timeToX(this.model.t - this.model.leftHandler[0])) + " " + (this.prop._valToY(this.model.value + this.model.leftHandler[1]))));
    return this.rightHandlerLine.attr('d', ("M" + this.x + " " + this.y + " L ") + ("" + (this.timelineEditor._timeToX(this.model.t + this.model.rightHandler[0])) + " " + (this.prop._valToY(this.model.value + this.model.rightHandler[1]))));
  };

  PointView.prototype._prepareValueInputNode = function() {
    this.valueContainer = Foxie('.theatrejs-timelineEditor-prop-pacs-point-valueContainer').putIn(this.node);
    this.valueInput = Foxie('input').putIn(this.valueContainer);
    return this.valueInput.node.addEventListener('keyup', (function(_this) {
      return function() {
        if (_this._active) {
          return _this._setValue(_this.valueInput.node.value);
        }
      };
    })(this));
  };

  PointView.prototype._moveValueContainer = function() {
    if (this.y > 30) {
      this.valueContainer.removeClass('hang');
    } else {
      this.valueContainer.addClass('hang');
    }
  };

  PointView.prototype._setValue = function(newVal) {
    newVal = Number(newVal);
    if (!Number.isFinite(newVal)) {
      return;
    }
    this.model.setValue(newVal);
    this.pacs.done();
    this.prop._tick();
  };

  PointView.prototype.relayHorizontally = function() {
    this.x = this.timelineEditor._timeToX(this.model.t);
    this._moveNode();
    this._moveHandlers();
  };

  PointView.prototype.relayVertically = function() {
    this.y = this.prop._valToY(this.model.value);
    this._moveNode();
    this._moveValueContainer();
    this._moveHandlers();
  };

  PointView.prototype._remove = function() {
    this.rootView.moosh.forgetNode(this.node);
    this.rootView.moosh.forgetNode(this.leftHandler);
    this.rootView.moosh.forgetNode(this.rightHandler);
    this.node.quit();
    this.leftHandler.quit();
    this.leftHandlerLine.quit();
    this.rightHandler.quit();
    this.rightHandlerLine.quit();
    return PointView.__super__._remove.apply(this, arguments);
  };

  PointView.prototype._activate = function() {
    if (this._active) {
      return;
    }
    this._active = true;
    this.valueInput.node.value = parseFloat(parseFloat(this.model.value).toFixed(3));
    this.node.addClass('active');
    this.valueInput.node.focus();
    this.rootView.moosh.ignore(this.valueInput);
    this._tempKilidScope.activate();
    this._lastValue = this.model.value;
    this.rootView.moosh.onClickOutside(this.node, (function(_this) {
      return function() {
        return _this._commitValueAndDeactivate();
      };
    })(this));
  };

  PointView.prototype._deactivate = function() {
    this._active = false;
    this.node.removeClass('active');
    this._tempKilidScope.deactivate();
    this.rootView.moosh.discardClickOutside(this.node);
    this.rootView.moosh.unignore(this.valueInput);
  };

  PointView.prototype._commitValueAndDeactivate = function() {
    this._setValue(this.valueInput.node.value);
    this._deactivate();
  };

  PointView.prototype._discardValueAndDeactivate = function() {
    this._setValue(this._lastValue);
    this._deactivate();
  };

  return PointView;

})(_ItemView);

},{"./_ItemView":201,"foxie":111}],199:[function(require,module,exports){
var Foxie, Selection,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Foxie = require('foxie');

module.exports = Selection = (function() {
  function Selection(prop) {
    this.prop = prop;
    this._toggleGrouping = __bind(this._toggleGrouping, this);
    this.rootView = this.prop.rootView;
    this.timelineEditor = this.prop.timelineEditor;
    this.manager = this.timelineEditor.selectionManager;
    this._inGroup = false;
    this._selecting = false;
    this._fromTime = 0;
    this._toTime = 0;
    this._fromX = 0;
    this._toX = 0;
    this._selected = false;
    this._pacSelection = null;
    this._prepareNode();
    this._prepareHollow();
    this._prepareInteractions();
  }

  Selection.prototype.attach = function() {
    return this.manager.include(this);
  };

  Selection.prototype.detach = function() {
    this._inGroup = false;
    return this.manager.exclude(this);
  };

  Selection.prototype.relayHorizontally = function() {
    if (!this._selected) {
      return;
    }
    return this._updateEl();
  };

  Selection.prototype._prepareNode = function() {
    this.node = Foxie('.theatrejs-timelineEditor-prop-selection').putIn(this.prop.pacsNode).moveX(-5000);
    this.leftEdge = Foxie('.theatrejs-timelineEditor-prop-selection-leftEdge').putIn(this.node);
    return this.rightEdge = Foxie('.theatrejs-timelineEditor-prop-selection-rightEdge').putIn(this.node);
  };

  Selection.prototype._prepareHollow = function() {
    return this.hollow = Foxie('.theatrejs-timelineEditor-prop-selection-hollow').putIn(this.prop.pacsNode).moveYTo(-5000);
  };

  Selection.prototype._prepareInteractions = function() {
    this._prepareSelectInteraction();
    this._prepareDeselectInteraction();
    this._prepareShiftSelectionInteractions();
    return this._prepareModifySelectionInteractions();
  };

  Selection.prototype._prepareDeselectInteraction = function() {
    return this._deselectListener = this.rootView.moosh.onClick(this.prop.node).withNoKeys().disable().onUp((function(_this) {
      return function() {
        return _this._deselect();
      };
    })(this));
  };

  Selection.prototype._prepareSelectInteraction = function() {
    var start;
    start = 0;
    return this.rootView.moosh.onDrag(this.prop.node).withKeys('shift').onDown((function(_this) {
      return function(e) {
        start = e.layerX;
        _this._deselect();
        _this._startSelecting();
        _this._selectByLocalX(start, start);
        return _this.rootView.cursor.use('ew-resize');
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        if (e.layerX > start) {
          return _this._selectByLocalX(start, e.layerX);
        } else {
          return _this._selectByLocalX(e.layerX, start);
        }
      };
    })(this)).onUp((function(_this) {
      return function() {
        _this._endSelecting();
        return _this.rootView.cursor.free();
      };
    })(this)).onCancel((function(_this) {
      return function() {
        _this._endSelecting();
        _this._hide();
        return _this.rootView.cursor.free();
      };
    })(this));
  };

  Selection.prototype._prepareModifySelectionInteractions = function() {
    var lastFromX, lastToX;
    lastFromX = 0;
    lastToX = 0;
    this.rootView.moosh.onDrag(this.leftEdge).onDown((function(_this) {
      return function() {
        lastFromX = _this._fromX + 1;
        lastToX = _this._toX - 1;
        _this._startSelecting();
        return _this.rootView.cursor.use('ew-resize');
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        if (lastFromX + e.absX <= lastToX) {
          return _this._selectByX(lastFromX + e.absX, lastToX);
        } else {
          return _this._selectByX(lastToX, lastFromX + e.absX);
        }
      };
    })(this)).onUp((function(_this) {
      return function() {
        _this._endSelecting();
        return _this.rootView.cursor.free();
      };
    })(this));
    this.rootView.moosh.onDrag(this.rightEdge).onDown((function(_this) {
      return function() {
        lastFromX = _this._fromX + 1;
        lastToX = _this._toX - 1;
        _this._startSelecting();
        return _this.rootView.cursor.use('ew-resize');
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        if (lastToX + e.absX >= lastFromX) {
          return _this._selectByX(lastFromX, lastToX + e.absX);
        } else {
          return _this._selectByX(lastToX + e.absX, lastFromX);
        }
      };
    })(this)).onUp((function(_this) {
      return function() {
        _this._endSelecting();
        return _this.rootView.cursor.free();
      };
    })(this));
    this.rootView.moosh.onClick(this.leftEdge).repeatedBy(2).onDone((function(_this) {
      return function() {
        _this._selectByTime(0, _this._toTime);
        return _this._endSelecting();
      };
    })(this));
    this.rootView.moosh.onClick(this.rightEdge).repeatedBy(2).onDone((function(_this) {
      return function() {
        _this._selectByTime(_this._fromTime, _this.prop.pacs.timeline.duration);
        return _this._endSelecting();
      };
    })(this));
    this.rootView.moosh.onClick(this.node).repeatedBy(2).withNoKeys().onDone((function(_this) {
      return function() {
        _this._selectByTime(_this._pacSelection.realFrom, _this._pacSelection.realTo);
        return _this._endSelecting();
      };
    })(this));
    return this.rootView.moosh.onClick(this.node).repeatedBy(2).withKeys('ctrl').onDone((function(_this) {
      return function() {
        return _this._toggleGrouping();
      };
    })(this));
  };

  Selection.prototype._startSelecting = function() {
    this._selecting = true;
    this._pacSelection = null;
    return this._show();
  };

  Selection.prototype._endSelecting = function(applyToGroup) {
    var s, _i, _len, _ref;
    if (applyToGroup == null) {
      applyToGroup = true;
    }
    this._selecting = false;
    this._selected = true;
    this._pacSelection = this.prop.pacs.getSelection(this._fromTime, this._toTime);
    this._updateEl();
    if (applyToGroup && this._inGroup) {
      _ref = this.manager.group;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        s = _ref[_i];
        if (s === this) {
          continue;
        }
        s._endSelecting(false);
      }
    }
  };

  Selection.prototype._selectByLocalX = function(localFromX, localToX) {
    return this._selectByTime(this.timelineEditor._XToFocusedTime(localFromX), this.timelineEditor._XToFocusedTime(localToX));
  };

  Selection.prototype._selectByX = function(fromX, toX) {
    return this._selectByTime(this.timelineEditor._XToTime(fromX), this.timelineEditor._XToTime(toX));
  };

  Selection.prototype._selectByTime = function(_fromTime, _toTime, applyToGroup) {
    var s, _i, _len, _ref;
    this._fromTime = _fromTime;
    this._toTime = _toTime;
    if (applyToGroup == null) {
      applyToGroup = true;
    }
    this._updateEl();
    if (applyToGroup && this._inGroup) {
      _ref = this.manager.group;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        s = _ref[_i];
        if (s === this) {
          continue;
        }
        s._selectByTime(this._fromTime, this._toTime, false);
      }
    }
  };

  Selection.prototype._updateEl = function() {
    if ((this._pacSelection != null) && this._pacSelection.empty) {
      this.node.addClass('empty');
    } else {
      this.node.removeClass('empty');
    }
    if (this._inGroup) {
      this.node.addClass('inGroup');
    } else {
      this.node.removeClass('inGroup');
    }
    this._fromX = this.timelineEditor._timeToX(this._fromTime) - 1;
    this._toX = this.timelineEditor._timeToX(this._toTime) + 1;
    return this.node.moveXTo(this._fromX).css('width', parseInt(this._toX - this._fromX) + 'px');
  };

  Selection.prototype._deselect = function(applyToGroup) {
    var s, _i, _len, _ref;
    if (applyToGroup == null) {
      applyToGroup = true;
    }
    this._selected = false;
    this._pacSelection = null;
    this._hide();
    if (applyToGroup && this._inGroup) {
      _ref = this.manager.group;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        s = _ref[_i];
        if (s === this) {
          continue;
        }
        s._deselect(false);
      }
      this.manager.closeGroup();
    }
  };

  Selection.prototype._hide = function() {
    this.node.moveYTo(-5000);
    if (this._deselectListener.enabled) {
      return this._deselectListener.disable();
    }
  };

  Selection.prototype._show = function() {
    this.node.moveYTo(0);
    if (!this._deselectListener.enabled) {
      return this._deselectListener.enable();
    }
  };

  Selection.prototype._showHollow = function() {
    return this.hollow.moveYTo(0);
  };

  Selection.prototype._hideHollow = function() {
    return this.hollow.moveYTo(-5000);
  };

  Selection.prototype._resizeHollow = function() {
    return this.hollow.css('width', parseInt(this._toX - this._fromX) + 'px');
  };

  Selection.prototype._updateHollow = function(fromX, toX) {
    return this.hollow.moveXTo(fromX);
  };

  Selection.prototype._prepareShiftSelectionInteractions = function() {
    var firstDrag;
    firstDrag = true;
    return this.rootView.moosh.onDrag(this.node).withNoKeys().onDown((function(_this) {
      return function(e) {
        return firstDrag = true;
      };
    })(this)).onDrag((function(_this) {
      return function(e) {
        if (firstDrag) {
          _this._startShifting();
          firstDrag = false;
        }
        return _this._shift(e.absX);
      };
    })(this)).onUp((function(_this) {
      return function() {
        return _this._endShifting();
      };
    })(this)).onCancel((function(_this) {
      return function() {
        return _this._cancelShifting();
      };
    })(this));
  };

  Selection.prototype._startShifting = function(applyToGroup) {
    var s, _i, _len, _ref;
    if (applyToGroup == null) {
      applyToGroup = true;
    }
    this._couldShift = true;
    this.rootView.cursor.use('move');
    this._resizeHollow();
    this._showHollow();
    this.node.addClass('moving');
    if (applyToGroup && this._inGroup) {
      _ref = this.manager.group;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        s = _ref[_i];
        if (s === this) {
          continue;
        }
        s._startShifting(false);
      }
    }
  };

  Selection.prototype._canShift = function(delta) {
    return this._pacSelection.canMoveBy(delta);
  };

  Selection.prototype._shift = function(xDelta, applyToGroup) {
    var s, _i, _j, _len, _len1, _ref, _ref1;
    if (applyToGroup == null) {
      applyToGroup = true;
    }
    this._updateHollow(this._fromX + xDelta, this._toX + xDelta);
    this._lastDelta = this.timelineEditor._XToTime(xDelta);
    if (applyToGroup) {
      this._couldShift = this._canShift(this._lastDelta);
      if (this._inGroup) {
        _ref = this.manager.group;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          s = _ref[_i];
          if (s === this) {
            continue;
          }
          if (s._canShift(this._lastDelta) === false) {
            this._couldShift = false;
          }
        }
        _ref1 = this.manager.group;
        for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
          s = _ref1[_j];
          s._couldShift = this._couldShift;
          s._shift(xDelta, false);
        }
      }
    }
    if (this._couldShift) {
      this.hollow.removeClass('bad');
    } else {
      this.hollow.addClass('bad');
    }
  };

  Selection.prototype._endShifting = function(applyToGroup) {
    var s, _i, _len, _ref;
    if (applyToGroup == null) {
      applyToGroup = true;
    }
    this.rootView.cursor.free();
    this._hideHollow();
    this.node.removeClass('moving');
    if (this._couldShift) {
      this._moveSelection(this._lastDelta, false);
    }
    if (applyToGroup && this._inGroup) {
      _ref = this.manager.group;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        s = _ref[_i];
        if (s === this) {
          continue;
        }
        s._endShifting(false);
      }
    }
  };

  Selection.prototype._cancelShifting = function(applyToGroup) {
    var s, _i, _len, _ref;
    if (applyToGroup == null) {
      applyToGroup = true;
    }
    this.rootView.cursor.free();
    this._hideHollow();
    this.node.removeClass('moving');
    if (applyToGroup && this._inGroup) {
      _ref = this.manager.group;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        s = _ref[_i];
        if (s === this) {
          continue;
        }
        s._cancelShifting(false);
      }
    }
  };

  Selection.prototype._toggleGrouping = function() {
    if (this._inGroup) {
      this.manager.takeOffGroup(this);
    } else {
      this.manager.startGroup(this);
    }
    return this._updateEl();
  };

  Selection.prototype._beInGroup = function(copyFrom) {
    if (copyFrom != null) {
      this._deselect();
      this._startSelecting();
      this._selectByTime(copyFrom._fromTime, copyFrom._toTime);
      this._endSelecting(false);
    }
    this._inGroup = true;
    return this._updateEl();
  };

  Selection.prototype._beOffGroup = function() {
    this._inGroup = false;
    return this._updateEl();
  };

  Selection.prototype._moveSelection = function(delta, applyToGroup) {
    var s, _i, _len, _ref;
    if (applyToGroup == null) {
      applyToGroup = true;
    }
    this._pacSelection.moveBy(delta);
    this._fromTime += delta;
    this._toTime += delta;
    this.prop.pacs.done();
    this._endSelecting(false);
    if (applyToGroup && this._inGroup) {
      _ref = this.manager.group;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        s = _ref[_i];
        if (s === this) {
          continue;
        }
        s._moveSelection(delta, false);
      }
    }
  };

  return Selection;

})();

},{"foxie":111}],200:[function(require,module,exports){
var Foxie, SvgArea;

Foxie = require('foxie');

module.exports = SvgArea = (function() {
  function SvgArea(prop) {
    this.prop = prop;
    this.height = 0;
    this.width = 0;
    this._prepareNode();
    this.prop.pacs.on('duration-change', (function(_this) {
      return function() {
        return _this.relayHorizontally();
      };
    })(this));
    return;
  }

  SvgArea.prototype._prepareNode = function() {
    this.node = Foxie('svg:svg.theatrejs-timelineEditor-prop-pacs-svgArea').putIn(this.prop.pacsNode);
  };

  SvgArea.prototype.relayVertically = function() {
    if (this.prop._height === this.height) {
      return;
    }
    this.height = this.prop._height;
    this.node.attr('height', this.height + 'px');
  };

  SvgArea.prototype.relayHorizontally = function() {
    var newWidth;
    newWidth = this.prop.pacs.chronologyLength * this.prop._widthToTimeRatio;
    if (newWidth < this.width) {
      return;
    }
    this.width = newWidth * 1.5;
    this.node.attr('width', this.width + 'px');
  };

  return SvgArea;

})();

},{"foxie":111}],201:[function(require,module,exports){
var _ItemView;

module.exports = _ItemView = (function() {
  function _ItemView() {
    this.rootView = this.prop.rootView;
  }

  _ItemView.prototype._remove = function() {
    this.prop._removeItem(this);
  };

  return _ItemView;

})();

},{}],202:[function(require,module,exports){
var CursorControl, Foxie;

Foxie = require('foxie');

module.exports = CursorControl = (function() {
  function CursorControl(rootNode) {
    this.rootNode = rootNode != null ? rootNode : document.body;
  }

  CursorControl.prototype.use = function(nodeOrString) {
    var node;
    if (typeof nodeOrString === 'string') {
      this._useString(nodeOrString);
    } else {
      node = nodeOrString;
      if (node.node != null) {
        node = node.node;
      }
      if (!(node instanceof Element)) {
        throw Error("node must be a foxie instance or an html element");
      }
      this._useString(getComputedStyle(node).cursor);
    }
    return this;
  };

  CursorControl.prototype.free = function() {
    this.rootNode.style.cursor = '';
  };

  CursorControl.prototype._useString = function(s) {
    this.rootNode.style.cursor = s;
  };

  return CursorControl;

})();

},{"foxie":111}],203:[function(require,module,exports){
module.exports.throttle = function(fn, time) {
  var lastArgs, pend, pending, run, timer;
  if (time == null) {
    time = 1000;
  }
  pending = false;
  timer = null;
  lastArgs = null;
  pend = function() {
    if (pending) {
      clearTimeout(timer);
    }
    timer = setTimeout(run, time);
    return pending = true;
  };
  run = function() {
    pending = false;
    return fn.apply(null, lastArgs);
  };
  return function() {
    lastArgs = arguments;
    pend();
  };
};

},{}],204:[function(require,module,exports){
var Emitter, array;

array = require('./array');

module.exports = Emitter = (function() {
  function Emitter() {
    this._listeners = {};
    this._listenersForAnyEvent = [];
    this._disabledEmitters = {};
  }

  Emitter.prototype.on = function(eventName, listener) {
    if (this._listeners[eventName] == null) {
      this._listeners[eventName] = [];
    }
    this._listeners[eventName].push(listener);
    return this;
  };

  Emitter.prototype.once = function(eventName, listener) {
    var cb, ran;
    ran = false;
    cb = (function(_this) {
      return function() {
        if (ran) {
          return;
        }
        ran = true;
        listener();
        return setTimeout(function() {
          return _this.removeEvent(eventName, cb);
        }, 0);
      };
    })(this);
    this.on(eventName, cb);
    return this;
  };

  Emitter.prototype.onAnyEvent = function(listener) {
    this._listenersForAnyEvent.push(listener);
    return this;
  };

  Emitter.prototype.removeEvent = function(eventName, listener) {
    if (this._listeners[eventName] == null) {
      return this;
    }
    array.pluckOneItem(this._listeners[eventName], listener);
    return this;
  };

  Emitter.prototype.removeListeners = function(eventName) {
    if (this._listeners[eventName] == null) {
      return this;
    }
    this._listeners[eventName].length = 0;
    return this;
  };

  Emitter.prototype.removeAllListeners = function() {
    var listeners, name, _ref;
    _ref = this._listeners;
    for (name in _ref) {
      listeners = _ref[name];
      listeners.length = 0;
    }
    return this;
  };

  Emitter.prototype._emit = function(eventName, data) {
    var listener, _i, _j, _len, _len1, _ref, _ref1;
    _ref = this._listenersForAnyEvent;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      listener = _ref[_i];
      listener.call(this, data, eventName);
    }
    if (this._listeners[eventName] == null) {
      return;
    }
    _ref1 = this._listeners[eventName];
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      listener = _ref1[_j];
      listener.call(this, data);
    }
  };

  Emitter.prototype._throttleEmitterMethod = function(fnName, time) {
    var lastCallArgs, originalFn, pend, pending, runIt, timer;
    if (time == null) {
      time = 1000;
    }
    originalFn = this[fnName];
    if (typeof originalFn !== 'function') {
      throw Error("this class does not have a method called '" + fnName + "'");
    }
    lastCallArgs = null;
    pending = false;
    timer = null;
    this[fnName] = (function(_this) {
      return function() {
        lastCallArgs = arguments;
        return pend();
      };
    })(this);
    pend = (function(_this) {
      return function() {
        if (pending) {
          clearTimeout(timer);
        }
        timer = setTimeout(runIt, time);
        return pending = true;
      };
    })(this);
    return runIt = (function(_this) {
      return function() {
        pending = false;
        return originalFn.apply(_this, lastCallArgs);
      };
    })(this);
  };

  Emitter.prototype._disableEmitter = function(fnName) {
    if (this._disabledEmitters[fnName] != null) {
      throw Error("" + fnName + " is already a disabled emitter");
    }
    this._disabledEmitters[fnName] = this[fnName];
    return this[fnName] = function() {};
  };

  Emitter.prototype._enableEmitter = function(fnName) {
    var fn;
    fn = this._disabledEmitters[fnName];
    if (fn == null) {
      throw Error("" + fnName + " is not a disabled emitter");
    }
    this[fnName] = fn;
    return delete this._disabledEmitters[fnName];
  };

  return Emitter;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW1pdHRlci5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcbGliXFxFbWl0dGVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLGNBQUE7O0FFQUEsS0VBQSxHRUFRLE9FQUEsQ0VBUSxTRUFSLENBQVIsQ0FBQTs7QUVFQSxNRUFNLENFQUMsT0VBUCxHRUF1QjtBRUVULEVFQUEsaUJFQUEsR0VBQTtBRUVaLElFQUEsSUVBQyxDRUFBLFVFQUQsR0VBYyxFRUFkLENFQUE7QUVBQSxJRUVBLElFQUMsQ0VBQSxxQkVBRCxHRUF5QixFRUZ6QixDRUFBO0FFQUEsSUVJQSxJRUFDLENFQUEsaUJFQUQsR0VBcUIsRUVKckIsQ0VGWTtFRUFBLENFQWI7O0FFQUEsb0JFUUEsRUVBQSxHRUFJLFNFQUMsU0VBRCxFRUFZLFFFQVosR0VBQTtBRUVILElFQUEsSUVBTyxrQ0VBUDtBRUVDLE1FQUEsSUVBQyxDRUFBLFVFQVcsQ0VBQSxTRUFBLENFQVosR0VBeUIsRUVBekIsQ0VGRDtLRUFBO0FFQUEsSUVJQSxJRUFDLENFQUEsVUVBVyxDRUFBLFNFQUEsQ0VBVSxDRUFDLElFQXZCLENFQTRCLFFFQTVCLENFSkEsQ0VBQTtXRU1BLEtFUkc7RUVBQSxDRVJKLENFQUE7O0FFQUEsb0JFa0JBLElFQUEsR0VBTSxTRUFDLFNFQUQsRUVBWSxRRUFaLEdFQUE7QUVFTCxRRUFBLE9FQUE7QUVBQSxJRUFBLEdFQUEsR0VBTSxLRUFOLENFQUE7QUVBQSxJRUVBLEVFQUEsR0VBSyxDRUFBLFNFQUEsS0VBQSxHRUFBO2FFQUEsU0VBQSxHRUFBO0FFRUosUUVBQSxJRUFVLEdFQVY7QUVBQSxnQkVBQSxDRUFBO1NFQUE7QUVBQSxRRUVBLEdFQUEsR0VBTSxJRUZOLENFQUE7QUVBQSxRRUlHLFFFQUgsQ0VBQSxDRUpBLENFQUE7ZUVNQSxVRUFBLENFQVcsU0VBQSxHRUFBO2lCRUVWLEtFQUMsQ0VBQSxXRUFELENFQWEsU0VBYixFRUF3QixFRUF4QixFRUZVO1FFQUEsQ0VBWCxFRUlFLENFSkYsRUVSSTtNRUFBLEVFQUE7SUVBQSxDRUFBLENFQUEsQ0VBQSxJRUFBLENFRkwsQ0VBQTtBRUFBLElFZ0JBLElFQUMsQ0VBQSxFRUFELENFQUksU0VBSixFRUFlLEVFQWYsQ0VoQkEsQ0VBQTtXRWtCQSxLRXBCSztFRUFBLENFbEJOLENFQUE7O0FFQUEsb0JFd0NBLFVFQUEsR0VBWSxTRUFDLFFFQUQsR0VBQTtBRUVYLElFQUEsSUVBQyxDRUFBLHFCRUFxQixDRUFDLElFQXZCLENFQTRCLFFFQTVCLENFQUEsQ0VBQTtXRUVBLEtFSlc7RUVBQSxDRXhDWixDRUFBOztBRUFBLG9CRThDQSxXRUFBLEdFQWEsU0VBQyxTRUFELEVFQVksUUVBWixHRUFBO0FFRVosSUVBQSxJRUFnQixrQ0VBaEI7QUVBQSxhRUFPLElFQVAsQ0VBQTtLRUFBO0FFQUEsSUVFQSxLRUFLLENFQUMsWUVBTixDRUFtQixJRUFDLENFQUEsVUVBVyxDRUFBLFNFQUEsQ0VBL0IsRUVBMkMsUUVBM0MsQ0VGQSxDRUFBO1dFSUEsS0VOWTtFRUFBLENFOUNiLENFQUE7O0FFQUEsb0JFc0RBLGVFQUEsR0VBaUIsU0VBQyxTRUFELEdFQUE7QUVFaEIsSUVBQSxJRUFnQixrQ0VBaEI7QUVBQSxhRUFPLElFQVAsQ0VBQTtLRUFBO0FFQUEsSUVFQSxJRUFDLENFQUEsVUVBVyxDRUFBLFNFQUEsQ0VBVSxDRUFDLE1FQXZCLEdFQWdDLENFRmhDLENFQUE7V0VJQSxLRU5nQjtFRUFBLENFdERqQixDRUFBOztBRUFBLG9CRThEQSxrQkVBQSxHRUFvQixTRUFBLEdFQUE7QUVFbkIsUUVBQSxxQkVBQTtBRUFBO0FFQUEsU0VBQSxZRUFBOzZCRUFBO0FFRUMsTUVBQSxTRUFTLENFQUMsTUVBVixHRUFtQixDRUFuQixDRUZEO0FFQUEsS0VBQTtXRUlBLEtFTm1CO0VFQUEsQ0U5RHBCLENFQUE7O0FFQUEsb0JFc0VBLEtFQUEsR0VBTyxTRUFDLFNFQUQsRUVBWSxJRUFaLEdFQUE7QUVFTixRRUFBLDBDRUFBO0FFQUE7QUVBQSxTRUFBLDJDRUFBOzBCRUFBO0FFRUMsTUVBQSxRRUFRLENFQUMsSUVBVCxDRUFjLElFQWQsRUVBaUIsSUVBakIsRUVBdUIsU0VBdkIsQ0VBQSxDRUZEO0FFQUEsS0VBQTtBRUlBLElFQUEsSUVBYyxrQ0VBZDtBRUFBLFlFQUEsQ0VBQTtLRUpBO0FFTUE7QUVBQSxTRUFBLDhDRUFBOzJCRUFBO0FFRUMsTUVBQSxRRUFRLENFQUMsSUVBVCxDRUFjLElFQWQsRUVBaUIsSUVBakIsQ0VBQSxDRUZEO0FFQUEsS0VSTTtFRUFBLENFdEVQLENFQUE7O0FFQUEsb0JFc0ZBLHNCRUFBLEdFQXdCLFNFQUMsTUVBRCxFRUFTLElFQVQsR0VBQTtBRUV2QixRRUFBLHFERUFBOztNRUZnQyxPRUFPO0tFRXZDO0FFQUEsSUVBQSxVRUFBLEdFQWEsSUVBRSxDRUFBLE1FQUEsQ0VBZixDRUFBO0FFRUEsSUVBQSxJRUFHLE1FQUEsQ0VBTyxVRUFQLEtFQXVCLFVFQTFCO0FFRUMsWUVBTSxLRUFBLENFQU8sNENFQUEsR0VBMkMsTUVBM0MsR0VBbUQsR0VBMUQsQ0VBTixDRUZEO0tFRkE7QUVBQSxJRU1BLFlFQUEsR0VBZSxJRU5mLENFQUE7QUVBQSxJRU9BLE9FQUEsR0VBVSxLRVBWLENFQUE7QUVBQSxJRVFBLEtFQUEsR0VBUSxJRVJSLENFQUE7QUVBQSxJRVVBLElFQUUsQ0VBQSxNRUFBLENFQUYsR0VBWSxDRUFBLFNFQUEsS0VBQSxHRUFBO2FFQUEsU0VBQSxHRUFBO0FFRVgsUUVBQSxZRUFBLEdFQWUsU0VBZixDRUFBO2VFRUcsSUVBSCxDRUFBLEVFSlc7TUVBQSxFRUFBO0lFQUEsQ0VBQSxDRUFBLENFQUEsSUVBQSxDRVZaLENFQUE7QUVBQSxJRWdCQSxJRUFBLEdFQU8sQ0VBQSxTRUFBLEtFQUEsR0VBQTthRUFBLFNFQUEsR0VBQTtBRUVOLFFFQUEsSUVBRyxPRUFIO0FFRUMsVUVBQSxZRUFBLENFQWEsS0VBYixDRUFBLENFRkQ7U0VBQTtBRUFBLFFFSUEsS0VBQSxHRUFRLFVFQUEsQ0VBVyxLRUFYLEVFQWtCLElFQWxCLENFSlIsQ0VBQTtlRU1BLE9FQUEsR0VBVSxLRVJKO01FQUEsRUVBQTtJRUFBLENFQUEsQ0VBQSxDRUFBLElFQUEsQ0VoQlAsQ0VBQTtXRTBCQSxLRUFBLEdFQVEsQ0VBQSxTRUFBLEtFQUEsR0VBQTthRUFBLFNFQUEsR0VBQTtBRUVQLFFFQUEsT0VBQSxHRUFVLEtFQVYsQ0VBQTtlRUVBLFVFQVUsQ0VBQyxLRUFYLENFQWlCLEtFQWpCLEVFQW9CLFlFQXBCLEVFSk87TUVBQSxFRUFBO0lFQUEsQ0VBQSxDRUFBLENFQUEsSUVBQSxFRTVCZTtFRUFBLENFdEZ4QixDRUFBOztBRUFBLG9CRXdIQSxlRUFBLEdFQWlCLFNFQUMsTUVBRCxHRUFBO0FFRWhCLElFQUEsSUVBRyxzQ0VBSDtBRUVDLFlFQU0sS0VBQSxDRUFNLEVFQUEsR0VBRSxNRUFGLEdFQVUsZ0NFQWhCLENFQU4sQ0VGRDtLRUFBO0FFQUEsSUVJQSxJRUFDLENFQUEsaUJFQWtCLENFQUEsTUVBQSxDRUFuQixHRUE2QixJRUFFLENFQUEsTUVBQSxDRUovQixDRUFBO1dFTUEsSUVBRSxDRUFBLE1FQUEsQ0VBRixHRUFZLFNFQUEsR0VBQSxFRVJJO0VFQUEsQ0V4SGpCLENFQUE7O0FFQUEsb0JFa0lBLGNFQUEsR0VBZ0IsU0VBQyxNRUFELEdFQUE7QUVFZixRRUFBLEVFQUE7QUVBQSxJRUFBLEVFQUEsR0VBSyxJRUFDLENFQUEsaUJFQWtCLENFQUEsTUVBQSxDRUF4QixDRUFBO0FFRUEsSUVBQSxJRUFPLFVFQVA7QUVFQyxZRUFNLEtFQUEsQ0VBTSxFRUFBLEdFQUUsTUVBRixHRUFVLDRCRUFoQixDRUFOLENFRkQ7S0VGQTtBRUFBLElFTUEsSUVBRSxDRUFBLE1FQUEsQ0VBRixHRUFZLEVFTlosQ0VBQTtXRVFBLE1FQUEsQ0VBTyxJRUFDLENFQUEsaUJFQWtCLENFQUEsTUVBQSxFRVZYO0VFQUEsQ0VsSWhCLENFQUE7O2lCRUFBOztJQUpELENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGFycmF5ID1cblxuXHQjIyNcblx0VHJpZXMgdG8gdHVybiBhbnl0aGluZyBpbnRvIGFuIGFycmF5LlxuXHQjIyNcblx0ZnJvbTogKHIpIC0+XG5cblx0XHRBcnJheTo6c2xpY2UuY2FsbCByXG5cblx0IyMjXG5cdENsb25lIG9mIGFuIGFycmF5LiBQcm9wZXJ0aWVzIHdpbGwgYmUgc2hhbGxvdyBjb3BpZXMuXG5cdCMjI1xuXHRzaW1wbGVDbG9uZTogKGEpIC0+XG5cblx0XHRhLnNsaWNlIDBcblxuXHRzaGFsbG93RXF1YWw6IChhMSwgYTIpIC0+XG5cblx0XHRyZXR1cm4gbm8gdW5sZXNzIEFycmF5LmlzQXJyYXkoYTEpIGFuZCBBcnJheS5pc0FycmF5KGEyKSBhbmQgYTEubGVuZ3RoIGlzIGEyLmxlbmd0aFxuXG5cdFx0Zm9yIHZhbCwgaSBpbiBhMVxuXG5cdFx0XHRyZXR1cm4gbm8gdW5sZXNzIGEyW2ldIGlzIHZhbFxuXG5cdFx0eWVzXG5cblx0cGx1Y2s6IChhLCBpKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBpbmRleCA+IGlcblxuXHRcdFx0XHRhW2luZGV4IC0gMV0gPSBhW2luZGV4XVxuXG5cdFx0YS5sZW5ndGggPSBhLmxlbmd0aCAtIDFcblxuXHRcdGFcblxuXHRwbHVja0l0ZW06IChhLCBpdGVtKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblxuXHRcdHJlbW92ZWQgPSAwXG5cblx0XHRmb3IgdmFsdWUsIGluZGV4IGluIGFcblxuXHRcdFx0aWYgdmFsdWUgaXMgaXRlbVxuXG5cdFx0XHRcdHJlbW92ZWQrK1xuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGlmIHJlbW92ZWQgaXNudCAwXG5cblx0XHRcdFx0YVtpbmRleCAtIHJlbW92ZWRdID0gYVtpbmRleF1cblxuXHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSByZW1vdmVkIGlmIHJlbW92ZWQgPiAwXG5cblx0XHRhXG5cblx0cGx1Y2tPbmVJdGVtOiAoYSwgaXRlbSkgLT5cblxuXHRcdHJldHVybiBhIGlmIGEubGVuZ3RoIDwgMVxuXG5cdFx0cmVhY2hlZCA9IG5vXG5cblx0XHRmb3IgdmFsdWUsIGluZGV4IGluIGFcblxuXHRcdFx0aWYgbm90IHJlYWNoZWRcblxuXHRcdFx0XHRpZiB2YWx1ZSBpcyBpdGVtXG5cblx0XHRcdFx0XHRyZWFjaGVkID0geWVzXG5cblx0XHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRlbHNlXG5cblx0XHRcdFx0YVtpbmRleCAtIDFdID0gYVtpbmRleF1cblxuXHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSAxIGlmIHJlYWNoZWRcblxuXHRcdGFcblxuXHRwbHVja0J5Q2FsbGJhY2s6IChhLCBjYikgLT5cblxuXHRcdHJldHVybiBhIGlmIGEubGVuZ3RoIDwgMVxuXG5cdFx0cmVtb3ZlZCA9IDBcblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBjYiB2YWx1ZSwgaW5kZXhcblxuXHRcdFx0XHRyZW1vdmVkKytcblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRpZiByZW1vdmVkIGlzbnQgMFxuXG5cdFx0XHRcdGFbaW5kZXggLSByZW1vdmVkXSA9IGFbaW5kZXhdXG5cblx0XHRpZiByZW1vdmVkID4gMFxuXG5cdFx0XHRhLmxlbmd0aCA9IGEubGVuZ3RoIC0gcmVtb3ZlZFxuXG5cdFx0YVxuXG5cdHBsdWNrTXVsdGlwbGU6IChhcnJheSwgaW5kZXhlc1RvUmVtb3ZlKSAtPlxuXG5cdFx0cmV0dXJuIGFycmF5IGlmIGFycmF5Lmxlbmd0aCA8IDFcblxuXHRcdHJlbW92ZWRTb0ZhciA9IDBcblxuXHRcdGluZGV4ZXNUb1JlbW92ZS5zb3J0KClcblxuXHRcdGZvciBpIGluIGluZGV4ZXNUb1JlbW92ZVxuXG5cdFx0XHRAcGx1Y2sgYXJyYXksIGkgLSByZW1vdmVkU29GYXJcblxuXHRcdFx0cmVtb3ZlZFNvRmFyKytcblxuXHRcdGFycmF5XG5cblx0aW5qZWN0QnlDYWxsYmFjazogKGEsIHRvSW5qZWN0LCBzaG91bGRJbmplY3QpIC0+XG5cblx0XHR2YWxBID0gbnVsbFxuXG5cdFx0dmFsQiA9IG51bGxcblxuXHRcdGxlbiA9IGEubGVuZ3RoXG5cblx0XHRpZiBsZW4gPCAxXG5cblx0XHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0XHRyZXR1cm4gYVxuXG5cblx0XHRmb3IgdmFsLCBpIGluIGFcblxuXHRcdFx0dmFsQSA9IHZhbEJcblxuXHRcdFx0dmFsQiA9IHZhbFxuXG5cdFx0XHRpZiBzaG91bGRJbmplY3QgdmFsQSwgdmFsQiwgdG9JbmplY3RcblxuXHRcdFx0XHRyZXR1cm4gYS5zcGxpY2UgaSwgMCwgdG9JbmplY3RcblxuXHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0YVxuXG5cdGluamVjdEluSW5kZXg6IChhLCBpbmRleCwgdG9JbmplY3QpIC0+XG5cblx0XHRsZW4gPSBhLmxlbmd0aFxuXG5cdFx0aSA9IGluZGV4XG5cblx0XHRpZiBsZW4gPCAxXG5cblx0XHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0XHRyZXR1cm4gYVxuXG5cdFx0dG9QdXQgPSB0b0luamVjdFxuXG5cdFx0dG9QdXROZXh0ID0gbnVsbFxuXG5cdFx0YGZvcig7IGkgPD0gbGVuOyBpKyspe1xuXG5cdFx0XHR0b1B1dE5leHQgPSBhW2ldO1xuXG5cdFx0XHRhW2ldID0gdG9QdXQ7XG5cblx0XHRcdHRvUHV0ID0gdG9QdXROZXh0O1xuXG5cdFx0fWBcblxuXHRcdCMgYVtpXSA9IHRvUHV0XG5cblx0XHRudWxsIiwibW9kdWxlLmV4cG9ydHMgPSBjbGFzc2ljID0ge31cblxuIyBMaXR0bGUgaGVscGVyIGZvciBtaXhpbnMgZnJvbSBDb2ZmZWVTY3JpcHQgRkFRLFxuIyBjb3VydGVzeSBvZiBTZXRoYXVydXMgKGh0dHA6Ly9naXRodWIuY29tL3NldGhhdXJ1cylcbmNsYXNzaWMuaW1wbGVtZW50ID0gKG1peGlucy4uLiwgY2xhc3NSZWZlcmVuY2UpIC0+XG5cblx0Zm9yIG1peGluIGluIG1peGluc1xuXG5cdFx0Y2xhc3NQcm90byA9IGNsYXNzUmVmZXJlbmNlOjpcblxuXHRcdGZvciBtZW1iZXIgb2YgbWl4aW46OlxuXG5cdFx0XHR1bmxlc3MgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBjbGFzc1Byb3RvLCBtZW1iZXJcblxuXHRcdFx0XHRkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBtaXhpbjo6LCBtZW1iZXJcblxuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkgY2xhc3NQcm90bywgbWVtYmVyLCBkZXNjXG5cblx0Y2xhc3NSZWZlcmVuY2VcblxuY2xhc3NpYy5taXggPSAobWl4aW5zLi4uLCBjbGFzc1JlZmVyZW5jZSkgLT5cblxuXHRjbGFzc1Byb3RvID0gY2xhc3NSZWZlcmVuY2U6OlxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5DbG9uZXJzID0gW11cblxuXHRjbGFzc1JlZmVyZW5jZS5fX2FwcGx5Q2xvbmVyc0ZvciA9IChpbnN0YW5jZSwgYXJncyA9IG51bGwpIC0+XG5cblx0XHRmb3IgY2xvbmVyIGluIGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5DbG9uZXJzXG5cblx0XHRcdGNsb25lci5hcHBseSBpbnN0YW5jZSwgYXJnc1xuXG5cdFx0cmV0dXJuXG5cblx0Y2xhc3NSZWZlcmVuY2UuX19taXhpbkluaXRpYWxpemVycyA9IFtdXG5cblx0Y2xhc3NSZWZlcmVuY2UuX19pbml0TWl4aW5zRm9yID0gKGluc3RhbmNlLCBhcmdzID0gbnVsbCkgLT5cblxuXHRcdGZvciBpbml0aWFsaXplciBpbiBjbGFzc1JlZmVyZW5jZS5fX21peGluSW5pdGlhbGl6ZXJzXG5cblx0XHRcdGluaXRpYWxpemVyLmFwcGx5IGluc3RhbmNlLCBhcmdzXG5cblx0XHRyZXR1cm5cblxuXHRjbGFzc1JlZmVyZW5jZS5fX21peGluUXVpdHRlcnMgPSBbXVxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fYXBwbHlRdWl0dGVyc0ZvciA9IChpbnN0YW5jZSwgYXJncyA9IG51bGwpIC0+XG5cblx0XHRmb3IgcXVpdHRlciBpbiBjbGFzc1JlZmVyZW5jZS5fX21peGluUXVpdHRlcnNcblxuXHRcdFx0cXVpdHRlci5hcHBseSBpbnN0YW5jZSwgYXJnc1xuXG5cdFx0cmV0dXJuXG5cblx0Zm9yIG1peGluIGluIG1peGluc1xuXG5cdFx0dW5sZXNzIG1peGluLmNvbnN0cnVjdG9yIGluc3RhbmNlb2YgRnVuY3Rpb25cblxuXHRcdFx0dGhyb3cgRXJyb3IgXCJNaXhpbiBzaG91bGQgYmUgYSBmdW5jdGlvblwiXG5cblx0XHRmb3IgbWVtYmVyIG9mIG1peGluOjpcblxuXHRcdFx0aWYgbWVtYmVyLnN1YnN0cigwLCAxMSkgaXMgJ19faW5pdE1peGluJ1xuXG5cdFx0XHRcdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5Jbml0aWFsaXplcnMucHVzaCBtaXhpbjo6W21lbWJlcl1cblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRlbHNlIGlmIG1lbWJlci5zdWJzdHIoMCwgMTEpIGlzICdfX2Nsb25lckZvcidcblxuXHRcdFx0XHRjbGFzc1JlZmVyZW5jZS5fX21peGluQ2xvbmVycy5wdXNoIG1peGluOjpbbWVtYmVyXVxuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGVsc2UgaWYgbWVtYmVyLnN1YnN0cigwLCAxMikgaXMgJ19fcXVpdHRlckZvcidcblxuXHRcdFx0XHRjbGFzc1JlZmVyZW5jZS5fX21peGluUXVpdHRlcnMucHVzaCBtaXhpbjo6W21lbWJlcl1cblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHR1bmxlc3MgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBjbGFzc1Byb3RvLCBtZW1iZXJcblxuXHRcdFx0XHRkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBtaXhpbjo6LCBtZW1iZXJcblxuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkgY2xhc3NQcm90bywgbWVtYmVyLCBkZXNjXG5cblx0Y2xhc3NSZWZlcmVuY2UiLCJhcnJheSA9IHJlcXVpcmUgJy4vYXJyYXknXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEVtaXR0ZXJcclxuXHJcblx0Y29uc3RydWN0b3I6IC0+XHJcblxyXG5cdFx0QF9saXN0ZW5lcnMgPSB7fVxyXG5cclxuXHRcdEBfbGlzdGVuZXJzRm9yQW55RXZlbnQgPSBbXVxyXG5cclxuXHRcdEBfZGlzYWJsZWRFbWl0dGVycyA9IHt9XHJcblxyXG5cdG9uOiAoZXZlbnROYW1lLCBsaXN0ZW5lcikgLT5cclxuXHJcblx0XHR1bmxlc3MgQF9saXN0ZW5lcnNbZXZlbnROYW1lXT9cclxuXHJcblx0XHRcdEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXVxyXG5cclxuXHRcdEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0ucHVzaCBsaXN0ZW5lclxyXG5cclxuXHRcdEBcclxuXHJcblx0b25jZTogKGV2ZW50TmFtZSwgbGlzdGVuZXIpIC0+XHJcblxyXG5cdFx0cmFuID0gbm9cclxuXHJcblx0XHRjYiA9ID0+XHJcblxyXG5cdFx0XHRyZXR1cm4gaWYgcmFuXHJcblxyXG5cdFx0XHRyYW4gPSB5ZXNcclxuXHJcblx0XHRcdGRvIGxpc3RlbmVyXHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0ID0+XHJcblxyXG5cdFx0XHRcdEByZW1vdmVFdmVudCBldmVudE5hbWUsIGNiXHJcblxyXG5cdFx0XHQsIDBcclxuXHJcblx0XHRAb24gZXZlbnROYW1lLCBjYlxyXG5cclxuXHRcdEBcclxuXHJcblx0b25BbnlFdmVudDogKGxpc3RlbmVyKSAtPlxyXG5cclxuXHRcdEBfbGlzdGVuZXJzRm9yQW55RXZlbnQucHVzaCBsaXN0ZW5lclxyXG5cclxuXHRcdEBcclxuXHJcblx0cmVtb3ZlRXZlbnQ6IChldmVudE5hbWUsIGxpc3RlbmVyKSAtPlxyXG5cclxuXHRcdHJldHVybiBAIHVubGVzcyBAX2xpc3RlbmVyc1tldmVudE5hbWVdP1xyXG5cclxuXHRcdGFycmF5LnBsdWNrT25lSXRlbSBAX2xpc3RlbmVyc1tldmVudE5hbWVdLCBsaXN0ZW5lclxyXG5cclxuXHRcdEBcclxuXHJcblx0cmVtb3ZlTGlzdGVuZXJzOiAoZXZlbnROYW1lKSAtPlxyXG5cclxuXHRcdHJldHVybiBAIHVubGVzcyBAX2xpc3RlbmVyc1tldmVudE5hbWVdP1xyXG5cclxuXHRcdEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0ubGVuZ3RoID0gMFxyXG5cclxuXHRcdEBcclxuXHJcblx0cmVtb3ZlQWxsTGlzdGVuZXJzOiAtPlxyXG5cclxuXHRcdGZvciBuYW1lLCBsaXN0ZW5lcnMgb2YgQF9saXN0ZW5lcnNcclxuXHJcblx0XHRcdGxpc3RlbmVycy5sZW5ndGggPSAwXHJcblxyXG5cdFx0QFxyXG5cclxuXHRfZW1pdDogKGV2ZW50TmFtZSwgZGF0YSkgLT5cclxuXHJcblx0XHRmb3IgbGlzdGVuZXIgaW4gQF9saXN0ZW5lcnNGb3JBbnlFdmVudFxyXG5cclxuXHRcdFx0bGlzdGVuZXIuY2FsbCBALCBkYXRhLCBldmVudE5hbWVcclxuXHJcblx0XHRyZXR1cm4gdW5sZXNzIEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0/XHJcblxyXG5cdFx0Zm9yIGxpc3RlbmVyIGluIEBfbGlzdGVuZXJzW2V2ZW50TmFtZV1cclxuXHJcblx0XHRcdGxpc3RlbmVyLmNhbGwgQCwgZGF0YVxyXG5cclxuXHRcdHJldHVyblxyXG5cclxuXHQjIHRoaXMgbWFrZXMgc3VyZSB0aGF0IGFsbCB0aGUgY2FsbHMgdG8gdGhpcyBjbGFzcydzIG1ldGhvZCAnZm5OYW1lJ1xyXG5cdCMgYXJlIHRocm90dGxlZFxyXG5cdF90aHJvdHRsZUVtaXR0ZXJNZXRob2Q6IChmbk5hbWUsIHRpbWUgPSAxMDAwKSAtPlxyXG5cclxuXHRcdG9yaWdpbmFsRm4gPSBAW2ZuTmFtZV1cclxuXHJcblx0XHRpZiB0eXBlb2Ygb3JpZ2luYWxGbiBpc250ICdmdW5jdGlvbidcclxuXHJcblx0XHRcdHRocm93IEVycm9yIFwidGhpcyBjbGFzcyBkb2VzIG5vdCBoYXZlIGEgbWV0aG9kIGNhbGxlZCAnI3tmbk5hbWV9J1wiXHJcblxyXG5cdFx0bGFzdENhbGxBcmdzID0gbnVsbFxyXG5cdFx0cGVuZGluZyA9IG5vXHJcblx0XHR0aW1lciA9IG51bGxcclxuXHJcblx0XHRAW2ZuTmFtZV0gPSA9PlxyXG5cclxuXHRcdFx0bGFzdENhbGxBcmdzID0gYXJndW1lbnRzXHJcblxyXG5cdFx0XHRkbyBwZW5kXHJcblxyXG5cdFx0cGVuZCA9ID0+XHJcblxyXG5cdFx0XHRpZiBwZW5kaW5nXHJcblxyXG5cdFx0XHRcdGNsZWFyVGltZW91dCB0aW1lclxyXG5cclxuXHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0IHJ1bkl0LCB0aW1lXHJcblxyXG5cdFx0XHRwZW5kaW5nID0geWVzXHJcblxyXG5cdFx0cnVuSXQgPSA9PlxyXG5cclxuXHRcdFx0cGVuZGluZyA9IG5vXHJcblxyXG5cdFx0XHRvcmlnaW5hbEZuLmFwcGx5IEAsIGxhc3RDYWxsQXJnc1xyXG5cclxuXHRfZGlzYWJsZUVtaXR0ZXI6IChmbk5hbWUpIC0+XHJcblxyXG5cdFx0aWYgQF9kaXNhYmxlZEVtaXR0ZXJzW2ZuTmFtZV0/XHJcblxyXG5cdFx0XHR0aHJvdyBFcnJvciBcIiN7Zm5OYW1lfSBpcyBhbHJlYWR5IGEgZGlzYWJsZWQgZW1pdHRlclwiXHJcblxyXG5cdFx0QF9kaXNhYmxlZEVtaXR0ZXJzW2ZuTmFtZV0gPSBAW2ZuTmFtZV1cclxuXHJcblx0XHRAW2ZuTmFtZV0gPSAtPlxyXG5cclxuXHRfZW5hYmxlRW1pdHRlcjogKGZuTmFtZSkgLT5cclxuXHJcblx0XHRmbiA9IEBfZGlzYWJsZWRFbWl0dGVyc1tmbk5hbWVdXHJcblxyXG5cdFx0dW5sZXNzIGZuP1xyXG5cclxuXHRcdFx0dGhyb3cgRXJyb3IgXCIje2ZuTmFtZX0gaXMgbm90IGEgZGlzYWJsZWQgZW1pdHRlclwiXHJcblxyXG5cdFx0QFtmbk5hbWVdID0gZm5cclxuXHJcblx0XHRkZWxldGUgQF9kaXNhYmxlZEVtaXR0ZXJzW2ZuTmFtZV0iXX0=
},{"./array":206}],205:[function(require,module,exports){
var common;

module.exports = common = {

  /*
  	Checks to see if o is an object, and it isn't an instance
  	of some class.
   */
  isBareObject: function(o) {
    if ((o != null) && o.constructor === Object) {
      return true;
    }
    return false;
  },

  /*
  	Returns type of an object, including:
  	undefined, null, string, number, array,
  	arguments, element, textnode, whitespace, and object
   */
  typeOf: function(item) {
    var _ref;
    if (item === null) {
      return 'null';
    }
    if (typeof item !== 'object') {
      return typeof item;
    }
    if (Array.isArray(item)) {
      return 'array';
    }
    if (item.nodeName) {
      if (item.nodeType === 1) {
        return 'element';
      }
      if (item.nodeType === 3) {
        return (_ref = /\S/.test(item.nodeValue)) != null ? _ref : {
          'textnode': 'whitespace'
        };
      }
    } else if (typeof item.length === 'number') {
      if (item.callee) {
        return 'arguments';
      }
    }
    return typeof item;
  },
  clone: function(item, includePrototype) {
    if (includePrototype == null) {
      includePrototype = false;
    }
    switch (common.typeOf(item)) {
      case 'array':
        return common._cloneArray(item, includePrototype);
      case 'object':
        return common._cloneObject(item, includePrototype);
      default:
        return item;
    }
  },

  /*
  	Deep clone of an object.
  	From MooTools
   */
  _cloneObject: function(o, includePrototype) {
    var clone, key;
    if (includePrototype == null) {
      includePrototype = false;
    }
    if (common.isBareObject(o)) {
      clone = {};
      for (key in o) {
        clone[key] = common.clone(o[key], includePrototype);
      }
      return clone;
    } else {
      if (!includePrototype) {
        return o;
      }
      if (o instanceof Function) {
        return o;
      }
      clone = Object.create(o.constructor.prototype);
      for (key in o) {
        if (o.hasOwnProperty(key)) {
          clone[key] = common.clone(o[key], includePrototype);
        }
      }
      return clone;
    }
  },

  /*
  	Deep clone of an array.
  	From MooTools
   */
  _cloneArray: function(a, includePrototype) {
    var clone, i;
    if (includePrototype == null) {
      includePrototype = false;
    }
    i = a.length;
    clone = new Array(i);
    while (i--) {
      clone[i] = common.clone(a[i], includePrototype);
    }
    return clone;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX2NvbW1vbi5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcbGliXFxfY29tbW9uLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLE1BQUE7O0FNQUEsTU1BTSxDTUFDLE9NQVAsR01BaUIsTU1BQSxHTUVoQjtBTUFBO0FNQUE7OztLTUFBO0FNQUEsRU1JQSxZTUFBLEVNQWMsU01BQyxDTUFELEdNQUE7QU1FYixJTUFBLElNQUcsV01BQSxJTUFPLENNQUMsQ01BQyxXTUFGLEtNQWlCLE1NQTNCO0FNRUMsYU1BTyxJTUFQLENNRkQ7S01BQTtXTUlBLE1NTmE7RU1BQSxDTUpkO0FNWUE7QU1BQTs7OztLTVpBO0FNQUEsRU1pQkEsTU1BQSxFTUFRLFNNQUMsSU1BRCxHTUFBO0FNRVAsUU1BQSxJTUFBO0FNQUEsSU1BQSxJTUFpQixJTUFBLEtNQVEsSU1BekI7QU1BQSxhTUFPLE1NQVAsQ01BQTtLTUFBO0FNRUEsSU1BQSxJTUFzQixNTUFBLENNQU8sSU1BUCxLTUFpQixRTUF2QztBTUFBLGFNQU8sTU1BQSxDTUFPLElNQWQsQ01BQTtLTUZBO0FNSUEsSU1BQSxJTUFrQixLTUFLLENNQUMsT01BTixDTUFjLElNQWQsQ01BbEI7QU1BQSxhTUFPLE9NQVAsQ01BQTtLTUpBO0FNUUEsSU1BQSxJTUFHLElNQUksQ01BQyxRTUFSO0FNRUMsTU1BQSxJTUFHLElNQUksQ01BQyxRTUFMLEtNQWlCLENNQXBCO0FNQTJCLGVNQU8sU01BUCxDTUEzQjtPTUFBO0FNQ0EsTU1BQSxJTUFHLElNQUksQ01BQyxRTUFMLEtNQWlCLENNQXBCO0FNQTJCLG1FTUFxQztBTUFBLFVNQUEsVU1BQSxFTUFhLFlNQWI7U01BckMsQ01BM0I7T01IRDtLTUFBLE1NS0ssSU1BRyxNTUFBLENNQU8sSU1BSSxDTUFDLE1NQVosS01Bc0IsUU1BekI7QU1FSixNTUFBLElNQUcsSU1BSSxDTUFDLE1NQVI7QU1Bb0IsZU1BTyxXTUFQLENNQXBCO09NRkk7S01iTDtBTWlCQSxXTUFPLE1NQUEsQ01BTyxJTUFkLENNbkJPO0VNQUEsQ01qQlI7QU1BQSxFTXdDQSxLTUFBLEVNQU8sU01BQyxJTUFELEVNQU8sZ0JNQVAsR01BQTs7TU1BTyxtQk1BbUI7S01FaEM7QU1BQSxZTUFPLE1NQU0sQ01BQyxNTUFQLENNQWMsSU1BZCxDTUFQO0FNQUEsV01FTSxPTUZOO0FNRW1CLGVNQU8sTU1BTSxDTUFDLFdNQVAsQ01BbUIsSU1BbkIsRU1BeUIsZ0JNQXpCLENNQVAsQ01GbkI7QU1BQSxXTUlNLFFNSk47QU1Jb0IsZU1BTyxNTUFNLENNQUMsWU1BUCxDTUFvQixJTUFwQixFTUEwQixnQk1BMUIsQ01BUCxDTUpwQjtBTUFBO0FNTU0sZU1BTyxJTUFQLENNTk47QU1BQSxLTUZNO0VNQUEsQ014Q1A7QU1rREE7QU1BQTs7O0tNbERBO0FNQUEsRU1zREEsWU1BQSxFTUFjLFNNQUMsQ01BRCxFTUFJLGdCTUFKLEdNQUE7QU1FYixRTUFBLFVNQUE7O01NRmlCLG1CTUFtQjtLTUVwQztBTUFBLElNQUEsSU1BRyxNTUFNLENNQUMsWU1BUCxDTUFvQixDTUFwQixDTUFIO0FNRUMsTU1BQSxLTUFBLEdNQVEsRU1BUixDTUFBO0FNRUEsV01BQSxRTUFBLEdNQUE7QU1FQyxRTUFBLEtNQU0sQ01BQSxHTUFBLENNQU4sR01BYSxNTUFNLENNQUMsS01BUCxDTUFhLENNQUUsQ01BQSxHTUFBLENNQWYsRU1BcUIsZ0JNQXJCLENNQWIsQ01GRDtBTUFBLE9NRkE7QU1NQSxhTUFPLEtNQVAsQ01SRDtLTUFBLE1NQUE7QU1ZQyxNTUFBLElNQUEsQ01BZ0IsZ0JNQWhCO0FNQUEsZU1BTyxDTUFQLENNQUE7T01BQTtBTUVBLE1NQUEsSU1BWSxDTUFBLFlNQWEsUU1BekI7QU1BQSxlTUFPLENNQVAsQ01BQTtPTUZBO0FNQUEsTU1JQSxLTUFBLEdNQVEsTU1BTSxDTUFDLE1NQVAsQ01BYyxDTUFDLENNQUMsV01BVyxDTUFDLFNNQTVCLENNSlIsQ01BQTtBTU1BLFdNQUEsUU1BQSxHTUFBO0FNRUMsUU1BQSxJTUFHLENNQUMsQ01BQyxjTUFGLENNQWlCLEdNQWpCLENNQUg7QU1FQyxVTUFBLEtNQU0sQ01BQSxHTUFBLENNQU4sR01BYSxNTUFNLENNQUMsS01BUCxDTUFhLENNQUUsQ01BQSxHTUFBLENNQWYsRU1BcUIsZ0JNQXJCLENNQWIsQ01GRDtTTUZEO0FNQUEsT01OQTthTVlBLE1NeEJEO0tNRmE7RU1BQSxDTXREZDtBTWtGQTtBTUFBOzs7S01sRkE7QU1BQSxFTXNGQSxXTUFBLEVNQWEsU01BQyxDTUFELEVNQUksZ0JNQUosR01BQTtBTUVaLFFNQUEsUU1BQTs7TU1GZ0IsbUJNQW1CO0tNRW5DO0FNQUEsSU1BQSxDTUFBLEdNQUksQ01BQyxDTUFDLE1NQU4sQ01BQTtBTUFBLElNRUEsS01BQSxHTUFZLElNQUEsS01BQSxDTUFNLENNQU4sQ01GWixDTUFBO0FNSUEsV01BTSxDTUFBLEVNQU4sR01BQTtBTUVDLE1NQUEsS01BTSxDTUFBLENNQUEsQ01BTixHTUFXLE1NQU0sQ01BQyxLTUFQLENNQWEsQ01BRSxDTUFBLENNQUEsQ01BZixFTUFtQixnQk1BbkIsQ01BWCxDTUZEO0lNQUEsQ01KQTtXTVFBLE1NVlk7RU1BQSxDTXRGYjtDQUZELENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGFycmF5ID1cblxuXHQjIyNcblx0VHJpZXMgdG8gdHVybiBhbnl0aGluZyBpbnRvIGFuIGFycmF5LlxuXHQjIyNcblx0ZnJvbTogKHIpIC0+XG5cblx0XHRBcnJheTo6c2xpY2UuY2FsbCByXG5cblx0IyMjXG5cdENsb25lIG9mIGFuIGFycmF5LiBQcm9wZXJ0aWVzIHdpbGwgYmUgc2hhbGxvdyBjb3BpZXMuXG5cdCMjI1xuXHRzaW1wbGVDbG9uZTogKGEpIC0+XG5cblx0XHRhLnNsaWNlIDBcblxuXHRzaGFsbG93RXF1YWw6IChhMSwgYTIpIC0+XG5cblx0XHRyZXR1cm4gbm8gdW5sZXNzIEFycmF5LmlzQXJyYXkoYTEpIGFuZCBBcnJheS5pc0FycmF5KGEyKSBhbmQgYTEubGVuZ3RoIGlzIGEyLmxlbmd0aFxuXG5cdFx0Zm9yIHZhbCwgaSBpbiBhMVxuXG5cdFx0XHRyZXR1cm4gbm8gdW5sZXNzIGEyW2ldIGlzIHZhbFxuXG5cdFx0eWVzXG5cblx0cGx1Y2s6IChhLCBpKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBpbmRleCA+IGlcblxuXHRcdFx0XHRhW2luZGV4IC0gMV0gPSBhW2luZGV4XVxuXG5cdFx0YS5sZW5ndGggPSBhLmxlbmd0aCAtIDFcblxuXHRcdGFcblxuXHRwbHVja0l0ZW06IChhLCBpdGVtKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblxuXHRcdHJlbW92ZWQgPSAwXG5cblx0XHRmb3IgdmFsdWUsIGluZGV4IGluIGFcblxuXHRcdFx0aWYgdmFsdWUgaXMgaXRlbVxuXG5cdFx0XHRcdHJlbW92ZWQrK1xuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGlmIHJlbW92ZWQgaXNudCAwXG5cblx0XHRcdFx0YVtpbmRleCAtIHJlbW92ZWRdID0gYVtpbmRleF1cblxuXHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSByZW1vdmVkIGlmIHJlbW92ZWQgPiAwXG5cblx0XHRhXG5cblx0cGx1Y2tPbmVJdGVtOiAoYSwgaXRlbSkgLT5cblxuXHRcdHJldHVybiBhIGlmIGEubGVuZ3RoIDwgMVxuXG5cdFx0cmVhY2hlZCA9IG5vXG5cblx0XHRmb3IgdmFsdWUsIGluZGV4IGluIGFcblxuXHRcdFx0aWYgbm90IHJlYWNoZWRcblxuXHRcdFx0XHRpZiB2YWx1ZSBpcyBpdGVtXG5cblx0XHRcdFx0XHRyZWFjaGVkID0geWVzXG5cblx0XHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRlbHNlXG5cblx0XHRcdFx0YVtpbmRleCAtIDFdID0gYVtpbmRleF1cblxuXHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSAxIGlmIHJlYWNoZWRcblxuXHRcdGFcblxuXHRwbHVja0J5Q2FsbGJhY2s6IChhLCBjYikgLT5cblxuXHRcdHJldHVybiBhIGlmIGEubGVuZ3RoIDwgMVxuXG5cdFx0cmVtb3ZlZCA9IDBcblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBjYiB2YWx1ZSwgaW5kZXhcblxuXHRcdFx0XHRyZW1vdmVkKytcblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRpZiByZW1vdmVkIGlzbnQgMFxuXG5cdFx0XHRcdGFbaW5kZXggLSByZW1vdmVkXSA9IGFbaW5kZXhdXG5cblx0XHRpZiByZW1vdmVkID4gMFxuXG5cdFx0XHRhLmxlbmd0aCA9IGEubGVuZ3RoIC0gcmVtb3ZlZFxuXG5cdFx0YVxuXG5cdHBsdWNrTXVsdGlwbGU6IChhcnJheSwgaW5kZXhlc1RvUmVtb3ZlKSAtPlxuXG5cdFx0cmV0dXJuIGFycmF5IGlmIGFycmF5Lmxlbmd0aCA8IDFcblxuXHRcdHJlbW92ZWRTb0ZhciA9IDBcblxuXHRcdGluZGV4ZXNUb1JlbW92ZS5zb3J0KClcblxuXHRcdGZvciBpIGluIGluZGV4ZXNUb1JlbW92ZVxuXG5cdFx0XHRAcGx1Y2sgYXJyYXksIGkgLSByZW1vdmVkU29GYXJcblxuXHRcdFx0cmVtb3ZlZFNvRmFyKytcblxuXHRcdGFycmF5XG5cblx0aW5qZWN0QnlDYWxsYmFjazogKGEsIHRvSW5qZWN0LCBzaG91bGRJbmplY3QpIC0+XG5cblx0XHR2YWxBID0gbnVsbFxuXG5cdFx0dmFsQiA9IG51bGxcblxuXHRcdGxlbiA9IGEubGVuZ3RoXG5cblx0XHRpZiBsZW4gPCAxXG5cblx0XHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0XHRyZXR1cm4gYVxuXG5cblx0XHRmb3IgdmFsLCBpIGluIGFcblxuXHRcdFx0dmFsQSA9IHZhbEJcblxuXHRcdFx0dmFsQiA9IHZhbFxuXG5cdFx0XHRpZiBzaG91bGRJbmplY3QgdmFsQSwgdmFsQiwgdG9JbmplY3RcblxuXHRcdFx0XHRyZXR1cm4gYS5zcGxpY2UgaSwgMCwgdG9JbmplY3RcblxuXHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0YVxuXG5cdGluamVjdEluSW5kZXg6IChhLCBpbmRleCwgdG9JbmplY3QpIC0+XG5cblx0XHRsZW4gPSBhLmxlbmd0aFxuXG5cdFx0aSA9IGluZGV4XG5cblx0XHRpZiBsZW4gPCAxXG5cblx0XHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0XHRyZXR1cm4gYVxuXG5cdFx0dG9QdXQgPSB0b0luamVjdFxuXG5cdFx0dG9QdXROZXh0ID0gbnVsbFxuXG5cdFx0YGZvcig7IGkgPD0gbGVuOyBpKyspe1xuXG5cdFx0XHR0b1B1dE5leHQgPSBhW2ldO1xuXG5cdFx0XHRhW2ldID0gdG9QdXQ7XG5cblx0XHRcdHRvUHV0ID0gdG9QdXROZXh0O1xuXG5cdFx0fWBcblxuXHRcdCMgYVtpXSA9IHRvUHV0XG5cblx0XHRudWxsIiwibW9kdWxlLmV4cG9ydHMgPSBjbGFzc2ljID0ge31cblxuIyBMaXR0bGUgaGVscGVyIGZvciBtaXhpbnMgZnJvbSBDb2ZmZWVTY3JpcHQgRkFRLFxuIyBjb3VydGVzeSBvZiBTZXRoYXVydXMgKGh0dHA6Ly9naXRodWIuY29tL3NldGhhdXJ1cylcbmNsYXNzaWMuaW1wbGVtZW50ID0gKG1peGlucy4uLiwgY2xhc3NSZWZlcmVuY2UpIC0+XG5cblx0Zm9yIG1peGluIGluIG1peGluc1xuXG5cdFx0Y2xhc3NQcm90byA9IGNsYXNzUmVmZXJlbmNlOjpcblxuXHRcdGZvciBtZW1iZXIgb2YgbWl4aW46OlxuXG5cdFx0XHR1bmxlc3MgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBjbGFzc1Byb3RvLCBtZW1iZXJcblxuXHRcdFx0XHRkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBtaXhpbjo6LCBtZW1iZXJcblxuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkgY2xhc3NQcm90bywgbWVtYmVyLCBkZXNjXG5cblx0Y2xhc3NSZWZlcmVuY2VcblxuY2xhc3NpYy5taXggPSAobWl4aW5zLi4uLCBjbGFzc1JlZmVyZW5jZSkgLT5cblxuXHRjbGFzc1Byb3RvID0gY2xhc3NSZWZlcmVuY2U6OlxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5DbG9uZXJzID0gW11cblxuXHRjbGFzc1JlZmVyZW5jZS5fX2FwcGx5Q2xvbmVyc0ZvciA9IChpbnN0YW5jZSwgYXJncyA9IG51bGwpIC0+XG5cblx0XHRmb3IgY2xvbmVyIGluIGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5DbG9uZXJzXG5cblx0XHRcdGNsb25lci5hcHBseSBpbnN0YW5jZSwgYXJnc1xuXG5cdFx0cmV0dXJuXG5cblx0Y2xhc3NSZWZlcmVuY2UuX19taXhpbkluaXRpYWxpemVycyA9IFtdXG5cblx0Y2xhc3NSZWZlcmVuY2UuX19pbml0TWl4aW5zRm9yID0gKGluc3RhbmNlLCBhcmdzID0gbnVsbCkgLT5cblxuXHRcdGZvciBpbml0aWFsaXplciBpbiBjbGFzc1JlZmVyZW5jZS5fX21peGluSW5pdGlhbGl6ZXJzXG5cblx0XHRcdGluaXRpYWxpemVyLmFwcGx5IGluc3RhbmNlLCBhcmdzXG5cblx0XHRyZXR1cm5cblxuXHRjbGFzc1JlZmVyZW5jZS5fX21peGluUXVpdHRlcnMgPSBbXVxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fYXBwbHlRdWl0dGVyc0ZvciA9IChpbnN0YW5jZSwgYXJncyA9IG51bGwpIC0+XG5cblx0XHRmb3IgcXVpdHRlciBpbiBjbGFzc1JlZmVyZW5jZS5fX21peGluUXVpdHRlcnNcblxuXHRcdFx0cXVpdHRlci5hcHBseSBpbnN0YW5jZSwgYXJnc1xuXG5cdFx0cmV0dXJuXG5cblx0Zm9yIG1peGluIGluIG1peGluc1xuXG5cdFx0dW5sZXNzIG1peGluLmNvbnN0cnVjdG9yIGluc3RhbmNlb2YgRnVuY3Rpb25cblxuXHRcdFx0dGhyb3cgRXJyb3IgXCJNaXhpbiBzaG91bGQgYmUgYSBmdW5jdGlvblwiXG5cblx0XHRmb3IgbWVtYmVyIG9mIG1peGluOjpcblxuXHRcdFx0aWYgbWVtYmVyLnN1YnN0cigwLCAxMSkgaXMgJ19faW5pdE1peGluJ1xuXG5cdFx0XHRcdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5Jbml0aWFsaXplcnMucHVzaCBtaXhpbjo6W21lbWJlcl1cblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRlbHNlIGlmIG1lbWJlci5zdWJzdHIoMCwgMTEpIGlzICdfX2Nsb25lckZvcidcblxuXHRcdFx0XHRjbGFzc1JlZmVyZW5jZS5fX21peGluQ2xvbmVycy5wdXNoIG1peGluOjpbbWVtYmVyXVxuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGVsc2UgaWYgbWVtYmVyLnN1YnN0cigwLCAxMikgaXMgJ19fcXVpdHRlckZvcidcblxuXHRcdFx0XHRjbGFzc1JlZmVyZW5jZS5fX21peGluUXVpdHRlcnMucHVzaCBtaXhpbjo6W21lbWJlcl1cblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHR1bmxlc3MgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBjbGFzc1Byb3RvLCBtZW1iZXJcblxuXHRcdFx0XHRkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBtaXhpbjo6LCBtZW1iZXJcblxuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkgY2xhc3NQcm90bywgbWVtYmVyLCBkZXNjXG5cblx0Y2xhc3NSZWZlcmVuY2UiLCJhcnJheSA9IHJlcXVpcmUgJy4vYXJyYXknXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEVtaXR0ZXJcclxuXHJcblx0Y29uc3RydWN0b3I6IC0+XHJcblxyXG5cdFx0QF9saXN0ZW5lcnMgPSB7fVxyXG5cclxuXHRcdEBfbGlzdGVuZXJzRm9yQW55RXZlbnQgPSBbXVxyXG5cclxuXHRcdEBfZGlzYWJsZWRFbWl0dGVycyA9IHt9XHJcblxyXG5cdG9uOiAoZXZlbnROYW1lLCBsaXN0ZW5lcikgLT5cclxuXHJcblx0XHR1bmxlc3MgQF9saXN0ZW5lcnNbZXZlbnROYW1lXT9cclxuXHJcblx0XHRcdEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXVxyXG5cclxuXHRcdEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0ucHVzaCBsaXN0ZW5lclxyXG5cclxuXHRcdEBcclxuXHJcblx0b25jZTogKGV2ZW50TmFtZSwgbGlzdGVuZXIpIC0+XHJcblxyXG5cdFx0cmFuID0gbm9cclxuXHJcblx0XHRjYiA9ID0+XHJcblxyXG5cdFx0XHRyZXR1cm4gaWYgcmFuXHJcblxyXG5cdFx0XHRyYW4gPSB5ZXNcclxuXHJcblx0XHRcdGRvIGxpc3RlbmVyXHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0ID0+XHJcblxyXG5cdFx0XHRcdEByZW1vdmVFdmVudCBldmVudE5hbWUsIGNiXHJcblxyXG5cdFx0XHQsIDBcclxuXHJcblx0XHRAb24gZXZlbnROYW1lLCBjYlxyXG5cclxuXHRcdEBcclxuXHJcblx0b25BbnlFdmVudDogKGxpc3RlbmVyKSAtPlxyXG5cclxuXHRcdEBfbGlzdGVuZXJzRm9yQW55RXZlbnQucHVzaCBsaXN0ZW5lclxyXG5cclxuXHRcdEBcclxuXHJcblx0cmVtb3ZlRXZlbnQ6IChldmVudE5hbWUsIGxpc3RlbmVyKSAtPlxyXG5cclxuXHRcdHJldHVybiBAIHVubGVzcyBAX2xpc3RlbmVyc1tldmVudE5hbWVdP1xyXG5cclxuXHRcdGFycmF5LnBsdWNrT25lSXRlbSBAX2xpc3RlbmVyc1tldmVudE5hbWVdLCBsaXN0ZW5lclxyXG5cclxuXHRcdEBcclxuXHJcblx0cmVtb3ZlTGlzdGVuZXJzOiAoZXZlbnROYW1lKSAtPlxyXG5cclxuXHRcdHJldHVybiBAIHVubGVzcyBAX2xpc3RlbmVyc1tldmVudE5hbWVdP1xyXG5cclxuXHRcdEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0ubGVuZ3RoID0gMFxyXG5cclxuXHRcdEBcclxuXHJcblx0cmVtb3ZlQWxsTGlzdGVuZXJzOiAtPlxyXG5cclxuXHRcdGZvciBuYW1lLCBsaXN0ZW5lcnMgb2YgQF9saXN0ZW5lcnNcclxuXHJcblx0XHRcdGxpc3RlbmVycy5sZW5ndGggPSAwXHJcblxyXG5cdFx0QFxyXG5cclxuXHRfZW1pdDogKGV2ZW50TmFtZSwgZGF0YSkgLT5cclxuXHJcblx0XHRmb3IgbGlzdGVuZXIgaW4gQF9saXN0ZW5lcnNGb3JBbnlFdmVudFxyXG5cclxuXHRcdFx0bGlzdGVuZXIuY2FsbCBALCBkYXRhLCBldmVudE5hbWVcclxuXHJcblx0XHRyZXR1cm4gdW5sZXNzIEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0/XHJcblxyXG5cdFx0Zm9yIGxpc3RlbmVyIGluIEBfbGlzdGVuZXJzW2V2ZW50TmFtZV1cclxuXHJcblx0XHRcdGxpc3RlbmVyLmNhbGwgQCwgZGF0YVxyXG5cclxuXHRcdHJldHVyblxyXG5cclxuXHQjIHRoaXMgbWFrZXMgc3VyZSB0aGF0IGFsbCB0aGUgY2FsbHMgdG8gdGhpcyBjbGFzcydzIG1ldGhvZCAnZm5OYW1lJ1xyXG5cdCMgYXJlIHRocm90dGxlZFxyXG5cdF90aHJvdHRsZUVtaXR0ZXJNZXRob2Q6IChmbk5hbWUsIHRpbWUgPSAxMDAwKSAtPlxyXG5cclxuXHRcdG9yaWdpbmFsRm4gPSBAW2ZuTmFtZV1cclxuXHJcblx0XHRpZiB0eXBlb2Ygb3JpZ2luYWxGbiBpc250ICdmdW5jdGlvbidcclxuXHJcblx0XHRcdHRocm93IEVycm9yIFwidGhpcyBjbGFzcyBkb2VzIG5vdCBoYXZlIGEgbWV0aG9kIGNhbGxlZCAnI3tmbk5hbWV9J1wiXHJcblxyXG5cdFx0bGFzdENhbGxBcmdzID0gbnVsbFxyXG5cdFx0cGVuZGluZyA9IG5vXHJcblx0XHR0aW1lciA9IG51bGxcclxuXHJcblx0XHRAW2ZuTmFtZV0gPSA9PlxyXG5cclxuXHRcdFx0bGFzdENhbGxBcmdzID0gYXJndW1lbnRzXHJcblxyXG5cdFx0XHRkbyBwZW5kXHJcblxyXG5cdFx0cGVuZCA9ID0+XHJcblxyXG5cdFx0XHRpZiBwZW5kaW5nXHJcblxyXG5cdFx0XHRcdGNsZWFyVGltZW91dCB0aW1lclxyXG5cclxuXHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0IHJ1bkl0LCB0aW1lXHJcblxyXG5cdFx0XHRwZW5kaW5nID0geWVzXHJcblxyXG5cdFx0cnVuSXQgPSA9PlxyXG5cclxuXHRcdFx0cGVuZGluZyA9IG5vXHJcblxyXG5cdFx0XHRvcmlnaW5hbEZuLmFwcGx5IEAsIGxhc3RDYWxsQXJnc1xyXG5cclxuXHRfZGlzYWJsZUVtaXR0ZXI6IChmbk5hbWUpIC0+XHJcblxyXG5cdFx0aWYgQF9kaXNhYmxlZEVtaXR0ZXJzW2ZuTmFtZV0/XHJcblxyXG5cdFx0XHR0aHJvdyBFcnJvciBcIiN7Zm5OYW1lfSBpcyBhbHJlYWR5IGEgZGlzYWJsZWQgZW1pdHRlclwiXHJcblxyXG5cdFx0QF9kaXNhYmxlZEVtaXR0ZXJzW2ZuTmFtZV0gPSBAW2ZuTmFtZV1cclxuXHJcblx0XHRAW2ZuTmFtZV0gPSAtPlxyXG5cclxuXHRfZW5hYmxlRW1pdHRlcjogKGZuTmFtZSkgLT5cclxuXHJcblx0XHRmbiA9IEBfZGlzYWJsZWRFbWl0dGVyc1tmbk5hbWVdXHJcblxyXG5cdFx0dW5sZXNzIGZuP1xyXG5cclxuXHRcdFx0dGhyb3cgRXJyb3IgXCIje2ZuTmFtZX0gaXMgbm90IGEgZGlzYWJsZWQgZW1pdHRlclwiXHJcblxyXG5cdFx0QFtmbk5hbWVdID0gZm5cclxuXHJcblx0XHRkZWxldGUgQF9kaXNhYmxlZEVtaXR0ZXJzW2ZuTmFtZV0iLCJfY29tbW9uID0gcmVxdWlyZSAnLi9fY29tbW9uJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9iamVjdCA9XG5cblx0aXNCYXJlT2JqZWN0OiBfY29tbW9uLmlzQmFyZU9iamVjdC5iaW5kIF9jb21tb25cblxuXHQjIyNcblx0aWYgb2JqZWN0IGlzIGFuIGluc3RhbmNlIG9mIGEgY2xhc3Ncblx0IyMjXG5cdGlzSW5zdGFuY2U6ICh3aGF0KSAtPlxuXG5cdFx0bm90IEBpc0JhcmVPYmplY3Qgd2hhdFxuXG5cdCMjI1xuXHRBbGlhcyB0byBfY29tbW9uLnR5cGVPZlxuXHQjIyNcblx0dHlwZU9mOiBfY29tbW9uLnR5cGVPZi5iaW5kIF9jb21tb25cblxuXHQjIyNcblx0QWxpYXMgdG8gX2NvbW1vbi5jbG9uZVxuXHQjIyNcblx0Y2xvbmU6IF9jb21tb24uY2xvbmUuYmluZCBfY29tbW9uXG5cblx0IyMjXG5cdEVtcHRpZXMgYW4gb2JqZWN0IG9mIGl0cyBwcm9wZXJ0aWVzLlxuXHQjIyNcblx0ZW1wdHk6IChvKSAtPlxuXG5cdFx0Zm9yIHByb3Agb2Ygb1xuXG5cdFx0XHRkZWxldGUgb1twcm9wXSBpZiBvLmhhc093blByb3BlcnR5IHByb3BcblxuXHRcdG9cblxuXHQjIyNcblx0RW1wdGllcyBhbiBvYmplY3QuIERvZXNuJ3QgY2hlY2sgZm9yIGhhc093blByb3BlcnR5LCBzbyBpdCdzIGEgdGlueVxuXHRiaXQgZmFzdGVyLiBVc2UgaXQgZm9yIHBsYWluIG9iamVjdHMuXG5cdCMjI1xuXHRmYXN0RW1wdHk6IChvKSAtPlxuXG5cdFx0ZGVsZXRlIG9bcHJvcGVydHldIGZvciBwcm9wZXJ0eSBvZiBvXG5cblx0XHRvXG5cblx0IyMjXG5cdE92ZXJyaWRlcyB2YWx1ZXMgZm9tciBgbmV3VmFsdWVzYCBvbiBgYmFzZWAsIGFzIGxvbmcgYXMgdGhleVxuXHRhbHJlYWR5IGV4aXN0IGluIGJhc2UuXG5cdCMjI1xuXHRvdmVycmlkZU9udG86IChiYXNlLCBuZXdWYWx1ZXMpIC0+XG5cblx0XHRyZXR1cm4gYmFzZSBpZiBub3QgQGlzQmFyZU9iamVjdChuZXdWYWx1ZXMpIG9yIG5vdCBAaXNCYXJlT2JqZWN0KGJhc2UpXG5cblx0XHRmb3Iga2V5LCBvbGRWYWwgb2YgYmFzZVxuXG5cdFx0XHRuZXdWYWwgPSBuZXdWYWx1ZXNba2V5XVxuXG5cdFx0XHRjb250aW51ZSBpZiBuZXdWYWwgaXMgdW5kZWZpbmVkXG5cblx0XHRcdGlmIHR5cGVvZiBuZXdWYWwgaXNudCAnb2JqZWN0JyBvciBAaXNJbnN0YW5jZSBuZXdWYWxcblxuXHRcdFx0XHRiYXNlW2tleV0gPSBAY2xvbmUgbmV3VmFsXG5cblx0XHRcdCMgbmV3VmFsIGlzIGEgcGxhaW4gb2JqZWN0XG5cdFx0XHRlbHNlXG5cblx0XHRcdFx0aWYgdHlwZW9mIG9sZFZhbCBpc250ICdvYmplY3QnIG9yIEBpc0luc3RhbmNlIG9sZFZhbFxuXG5cdFx0XHRcdFx0YmFzZVtrZXldID0gQGNsb25lIG5ld1ZhbFxuXG5cdFx0XHRcdGVsc2VcblxuXHRcdFx0XHRcdEBvdmVycmlkZU9udG8gb2xkVmFsLCBuZXdWYWxcblx0XHRiYXNlXG5cblx0IyMjXG5cdFRha2VzIGEgY2xvbmUgb2YgJ2Jhc2UnIGFuZCBydW5zICNvdmVycmlkZU9udG8gb24gaXRcblx0IyMjXG5cdG92ZXJyaWRlOiAoYmFzZSwgbmV3VmFsdWVzKSAtPlxuXG5cdFx0QG92ZXJyaWRlT250byBAY2xvbmUoYmFzZSksIG5ld1ZhbHVlc1xuXG5cdGFwcGVuZDogKGJhc2UsIHRvQXBwZW5kKSAtPlxuXG5cdFx0QGFwcGVuZE9udG8gQGNsb25lKGJhc2UpLCB0b0FwcGVuZFxuXG5cdCMgRGVlcCBhcHBlbmRzIHZhbHVlcyBmcm9tIGB0b0FwcGVuZGAgdG8gYGJhc2VgXG5cdGFwcGVuZE9udG86IChiYXNlLCB0b0FwcGVuZCkgLT5cblxuXHRcdHJldHVybiBiYXNlIGlmIG5vdCBAaXNCYXJlT2JqZWN0KHRvQXBwZW5kKSBvciBub3QgQGlzQmFyZU9iamVjdChiYXNlKVxuXG5cdFx0Zm9yIG93biBrZXksIG5ld1ZhbCBvZiB0b0FwcGVuZFxuXG5cdFx0XHRjb250aW51ZSB1bmxlc3MgbmV3VmFsIGlzbnQgdW5kZWZpbmVkXG5cblx0XHRcdGlmIHR5cGVvZiBuZXdWYWwgaXNudCAnb2JqZWN0JyBvciBAaXNJbnN0YW5jZSBuZXdWYWxcblxuXHRcdFx0XHRiYXNlW2tleV0gPSBuZXdWYWxcblxuXHRcdFx0ZWxzZVxuXG5cdFx0XHRcdCMgbmV3VmFsIGlzIGEgYmFyZSBvYmplY3RcblxuXHRcdFx0XHRvbGRWYWwgPSBiYXNlW2tleV1cblxuXHRcdFx0XHRpZiB0eXBlb2Ygb2xkVmFsIGlzbnQgJ29iamVjdCcgb3IgQGlzSW5zdGFuY2Ugb2xkVmFsXG5cblx0XHRcdFx0XHRiYXNlW2tleV0gPSBAY2xvbmUgbmV3VmFsXG5cblx0XHRcdFx0ZWxzZVxuXG5cdFx0XHRcdFx0QGFwcGVuZE9udG8gb2xkVmFsLCBuZXdWYWxcblxuXHRcdGJhc2VcblxuXHQjIEdyb3Vwc1xuXHRncm91cFByb3BzOiAob2JqLCBncm91cHMpIC0+XG5cblx0XHRncm91cGVkID0ge31cblxuXHRcdGZvciBuYW1lLCBkZWZzIG9mIGdyb3Vwc1xuXG5cdFx0XHRncm91cGVkW25hbWVdID0ge31cblxuXHRcdGdyb3VwZWRbJ3Jlc3QnXSA9IHt9XG5cblx0XHRgdG9wOiAvL2Bcblx0XHRmb3Iga2V5LCB2YWwgb2Ygb2JqXG5cblx0XHRcdHNob3VsZEFkZCA9IG5vXG5cblx0XHRcdGZvciBuYW1lLCBkZWZzIG9mIGdyb3Vwc1xuXG5cdFx0XHRcdHVubGVzcyBBcnJheS5pc0FycmF5IGRlZnNcblxuXHRcdFx0XHRcdGRlZnMgPSBbZGVmc11cblxuXHRcdFx0XHRmb3IgZGVmIGluIGRlZnNcblxuXHRcdFx0XHRcdGlmIHR5cGVvZiBkZWYgaXMgJ3N0cmluZydcblxuXHRcdFx0XHRcdFx0aWYga2V5IGlzIGRlZlxuXG5cdFx0XHRcdFx0XHRcdHNob3VsZEFkZCA9IHllc1xuXG5cdFx0XHRcdFx0ZWxzZSBpZiBkZWYgaW5zdGFuY2VvZiBSZWdFeHBcblxuXHRcdFx0XHRcdFx0aWYgZGVmLnRlc3Qga2V5XG5cblx0XHRcdFx0XHRcdFx0c2hvdWxkQWRkID0geWVzXG5cblx0XHRcdFx0XHRlbHNlIGlmIGRlZiBpbnN0YW5jZW9mIEZ1bmN0aW9uXG5cblx0XHRcdFx0XHRcdGlmIGRlZiBrZXlcblxuXHRcdFx0XHRcdFx0XHRzaG91bGRBZGQgPSB5ZXNcblxuXHRcdFx0XHRcdGVsc2VcblxuXHRcdFx0XHRcdFx0dGhyb3cgRXJyb3IgJ0dyb3VwIGRlZmluaXRpb25zIG11c3QgZWl0aGVyXG5cdFx0XHRcdFx0XHRiZSBzdHJpbmdzLCByZWdleGVzLCBvciBmdW5jdGlvbnMuJ1xuXG5cdFx0XHRcdFx0aWYgc2hvdWxkQWRkXG5cblx0XHRcdFx0XHRcdGdyb3VwZWRbbmFtZV1ba2V5XSA9IHZhbFxuXG5cdFx0XHRcdFx0XHRgY29udGludWUgdG9wYFxuXG5cdFx0XHRncm91cGVkWydyZXN0J11ba2V5XSA9IHZhbFxuXG5cdFx0Z3JvdXBlZCIsIm1vZHVsZS5leHBvcnRzID1cclxuXHJcblx0IyBwYWRzIGEgbnVtYmVyIHdpdGggbGVhZGluZyB6ZXJvZXNcclxuXHQjXHJcblx0IyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMDA3Mzc4OC82MDc5OTdcclxuXHRwYWQ6IChuLCB3aWR0aCwgeiA9ICcwJykgLT5cclxuXHJcblx0XHRuID0gbiArICcnXHJcblxyXG5cdFx0aWYgbi5sZW5ndGggPj0gd2lkdGhcclxuXHJcblx0XHRcdG5cclxuXHJcblx0XHRlbHNlXHJcblxyXG5cdFx0XHRuZXcgQXJyYXkod2lkdGggLSBuLmxlbmd0aCArIDEpLmpvaW4oeikgKyBuIiwibW9kdWxlLmV4cG9ydHMgPSB1dGlsYSA9XG5cblx0YXJyYXk6IHJlcXVpcmUgJy4vYXJyYXknXG5cdGNsYXNzaWM6IHJlcXVpcmUgJy4vY2xhc3NpYydcblx0b2JqZWN0OiByZXF1aXJlICcuL29iamVjdCdcblx0c3RyaW5nOiByZXF1aXJlICcuL3N0cmluZydcblx0RW1pdHRlcjogcmVxdWlyZSAnLi9FbWl0dGVyJyIsIm1vZHVsZS5leHBvcnRzID0gY29tbW9uID1cblxuXHQjIyNcblx0Q2hlY2tzIHRvIHNlZSBpZiBvIGlzIGFuIG9iamVjdCwgYW5kIGl0IGlzbid0IGFuIGluc3RhbmNlXG5cdG9mIHNvbWUgY2xhc3MuXG5cdCMjI1xuXHRpc0JhcmVPYmplY3Q6IChvKSAtPlxuXG5cdFx0aWYgbz8gYW5kIG8uY29uc3RydWN0b3IgaXMgT2JqZWN0XG5cblx0XHRcdHJldHVybiB0cnVlXG5cblx0XHRmYWxzZVxuXG5cdCMjI1xuXHRSZXR1cm5zIHR5cGUgb2YgYW4gb2JqZWN0LCBpbmNsdWRpbmc6XG5cdHVuZGVmaW5lZCwgbnVsbCwgc3RyaW5nLCBudW1iZXIsIGFycmF5LFxuXHRhcmd1bWVudHMsIGVsZW1lbnQsIHRleHRub2RlLCB3aGl0ZXNwYWNlLCBhbmQgb2JqZWN0XG5cdCMjI1xuXHR0eXBlT2Y6IChpdGVtKSAtPlxuXG5cdFx0cmV0dXJuICdudWxsJyBpZiBpdGVtIGlzIG51bGxcblxuXHRcdHJldHVybiB0eXBlb2YgaXRlbSBpZiB0eXBlb2YgaXRlbSBpc250ICdvYmplY3QnXG5cblx0XHRyZXR1cm4gJ2FycmF5JyBpZiBBcnJheS5pc0FycmF5IGl0ZW1cblxuXHRcdCMgRnJvbSBNb29Ub29sc1xuXHRcdCMgLSBkbyB3ZSBldmVuIG5lZWQgdGhpcz9cblx0XHRpZiBpdGVtLm5vZGVOYW1lXG5cblx0XHRcdGlmIGl0ZW0ubm9kZVR5cGUgaXMgMSB0aGVuIHJldHVybiAnZWxlbWVudCdcblx0XHRcdGlmIGl0ZW0ubm9kZVR5cGUgaXMgMyB0aGVuIHJldHVybiAoL1xcUy8pLnRlc3QoaXRlbS5ub2RlVmFsdWUpID8gJ3RleHRub2RlJyA6ICd3aGl0ZXNwYWNlJ1xuXG5cdFx0ZWxzZSBpZiB0eXBlb2YgaXRlbS5sZW5ndGggaXMgJ251bWJlcidcblxuXHRcdFx0aWYgaXRlbS5jYWxsZWUgdGhlbiByZXR1cm4gJ2FyZ3VtZW50cydcblxuXHRcdHJldHVybiB0eXBlb2YgaXRlbVxuXG5cdCMgRGVlcCBjbG9uZSBvZiBhbnkgdmFyaWFibGUuXG5cdCMgRnJvbSBNb29Ub29sc1xuXHRjbG9uZTogKGl0ZW0sIGluY2x1ZGVQcm90b3R5cGUgPSBmYWxzZSkgLT5cblxuXHRcdHN3aXRjaCBjb21tb24udHlwZU9mIGl0ZW1cblxuXHRcdFx0d2hlbiAnYXJyYXknIHRoZW4gcmV0dXJuIGNvbW1vbi5fY2xvbmVBcnJheSBpdGVtLCBpbmNsdWRlUHJvdG90eXBlXG5cblx0XHRcdHdoZW4gJ29iamVjdCcgdGhlbiByZXR1cm4gY29tbW9uLl9jbG9uZU9iamVjdCBpdGVtLCBpbmNsdWRlUHJvdG90eXBlXG5cblx0XHRcdGVsc2UgcmV0dXJuIGl0ZW1cblxuXHQjIyNcblx0RGVlcCBjbG9uZSBvZiBhbiBvYmplY3QuXG5cdEZyb20gTW9vVG9vbHNcblx0IyMjXG5cdF9jbG9uZU9iamVjdDogKG8sIGluY2x1ZGVQcm90b3R5cGUgPSBmYWxzZSkgLT5cblxuXHRcdGlmIGNvbW1vbi5pc0JhcmVPYmplY3Qgb1xuXG5cdFx0XHRjbG9uZSA9IHt9XG5cblx0XHRcdGZvciBrZXkgb2Ygb1xuXG5cdFx0XHRcdGNsb25lW2tleV0gPSBjb21tb24uY2xvbmUgb1trZXldLCBpbmNsdWRlUHJvdG90eXBlXG5cblx0XHRcdHJldHVybiBjbG9uZVxuXG5cdFx0ZWxzZVxuXG5cdFx0XHRyZXR1cm4gbyB1bmxlc3MgaW5jbHVkZVByb3RvdHlwZVxuXG5cdFx0XHRyZXR1cm4gbyBpZiBvIGluc3RhbmNlb2YgRnVuY3Rpb25cblxuXHRcdFx0Y2xvbmUgPSBPYmplY3QuY3JlYXRlIG8uY29uc3RydWN0b3IucHJvdG90eXBlXG5cblx0XHRcdGZvciBrZXkgb2Ygb1xuXG5cdFx0XHRcdGlmIG8uaGFzT3duUHJvcGVydHkga2V5XG5cblx0XHRcdFx0XHRjbG9uZVtrZXldID0gY29tbW9uLmNsb25lIG9ba2V5XSwgaW5jbHVkZVByb3RvdHlwZVxuXG5cdFx0XHRjbG9uZVxuXG5cdCMjI1xuXHREZWVwIGNsb25lIG9mIGFuIGFycmF5LlxuXHRGcm9tIE1vb1Rvb2xzXG5cdCMjI1xuXHRfY2xvbmVBcnJheTogKGEsIGluY2x1ZGVQcm90b3R5cGUgPSBmYWxzZSkgLT5cblxuXHRcdGkgPSBhLmxlbmd0aFxuXG5cdFx0Y2xvbmUgPSBuZXcgQXJyYXkgaVxuXG5cdFx0d2hpbGUgaS0tXG5cblx0XHRcdGNsb25lW2ldID0gY29tbW9uLmNsb25lIGFbaV0sIGluY2x1ZGVQcm90b3R5cGVcblxuXHRcdGNsb25lIl19
},{}],206:[function(require,module,exports){
module.exports=require(4)
},{}],207:[function(require,module,exports){
var object, _common,
  __hasProp = {}.hasOwnProperty;

_common = require('./_common');

module.exports = object = {
  isBareObject: _common.isBareObject.bind(_common),

  /*
  	if object is an instance of a class
   */
  isInstance: function(what) {
    return !this.isBareObject(what);
  },

  /*
  	Alias to _common.typeOf
   */
  typeOf: _common.typeOf.bind(_common),

  /*
  	Alias to _common.clone
   */
  clone: _common.clone.bind(_common),

  /*
  	Empties an object of its properties.
   */
  empty: function(o) {
    var prop;
    for (prop in o) {
      if (o.hasOwnProperty(prop)) {
        delete o[prop];
      }
    }
    return o;
  },

  /*
  	Empties an object. Doesn't check for hasOwnProperty, so it's a tiny
  	bit faster. Use it for plain objects.
   */
  fastEmpty: function(o) {
    var property;
    for (property in o) {
      delete o[property];
    }
    return o;
  },

  /*
  	Overrides values fomr `newValues` on `base`, as long as they
  	already exist in base.
   */
  overrideOnto: function(base, newValues) {
    var key, newVal, oldVal;
    if (!this.isBareObject(newValues) || !this.isBareObject(base)) {
      return base;
    }
    for (key in base) {
      oldVal = base[key];
      newVal = newValues[key];
      if (newVal === void 0) {
        continue;
      }
      if (typeof newVal !== 'object' || this.isInstance(newVal)) {
        base[key] = this.clone(newVal);
      } else {
        if (typeof oldVal !== 'object' || this.isInstance(oldVal)) {
          base[key] = this.clone(newVal);
        } else {
          this.overrideOnto(oldVal, newVal);
        }
      }
    }
    return base;
  },

  /*
  	Takes a clone of 'base' and runs #overrideOnto on it
   */
  override: function(base, newValues) {
    return this.overrideOnto(this.clone(base), newValues);
  },
  append: function(base, toAppend) {
    return this.appendOnto(this.clone(base), toAppend);
  },
  appendOnto: function(base, toAppend) {
    var key, newVal, oldVal;
    if (!this.isBareObject(toAppend) || !this.isBareObject(base)) {
      return base;
    }
    for (key in toAppend) {
      if (!__hasProp.call(toAppend, key)) continue;
      newVal = toAppend[key];
      if (newVal === void 0) {
        continue;
      }
      if (typeof newVal !== 'object' || this.isInstance(newVal)) {
        base[key] = newVal;
      } else {
        oldVal = base[key];
        if (typeof oldVal !== 'object' || this.isInstance(oldVal)) {
          base[key] = this.clone(newVal);
        } else {
          this.appendOnto(oldVal, newVal);
        }
      }
    }
    return base;
  },
  groupProps: function(obj, groups) {
    var def, defs, grouped, key, name, shouldAdd, val, _i, _len;
    grouped = {};
    for (name in groups) {
      defs = groups[name];
      grouped[name] = {};
    }
    grouped['rest'] = {};
    top: //;
    for (key in obj) {
      val = obj[key];
      shouldAdd = false;
      for (name in groups) {
        defs = groups[name];
        if (!Array.isArray(defs)) {
          defs = [defs];
        }
        for (_i = 0, _len = defs.length; _i < _len; _i++) {
          def = defs[_i];
          if (typeof def === 'string') {
            if (key === def) {
              shouldAdd = true;
            }
          } else if (def instanceof RegExp) {
            if (def.test(key)) {
              shouldAdd = true;
            }
          } else if (def instanceof Function) {
            if (def(key)) {
              shouldAdd = true;
            }
          } else {
            throw Error('Group definitions must either be strings, regexes, or functions.');
          }
          if (shouldAdd) {
            grouped[name][key] = val;
            continue top;
          }
        }
      }
      grouped['rest'][key] = val;
    }
    return grouped;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2JqZWN0LmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxsaWJcXG9iamVjdC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxlQUFBO0VBQUEsNkJBQUE7O0FHQUEsT0dBQSxHR0FVLE9HQUEsQ0dBUSxXR0FSLENBQVYsQ0FBQTs7QUdFQSxNR0FNLENHQUMsT0dBUCxHR0FpQixNR0FBLEdHRWhCO0FHQUEsRUdBQSxZR0FBLEVHQWMsT0dBTyxDR0FDLFlHQVksQ0dBQyxJR0FyQixDR0EwQixPR0ExQixDR0FkO0FHRUE7QUdBQTs7S0dGQTtBR0FBLEVHS0EsVUdBQSxFR0FZLFNHQUMsSUdBRCxHR0FBO1dHRVgsQ0dBSSxJR0FDLENHQUEsWUdBRCxDR0FjLElHQWQsRUdGTztFR0FBLENHTFo7QUdTQTtBR0FBOztLR1RBO0FHQUEsRUdZQSxNR0FBLEVHQVEsT0dBTyxDR0FDLE1HQU0sQ0dBQyxJR0FmLENHQW9CLE9HQXBCLENHWlI7QUdjQTtBR0FBOztLR2RBO0FHQUEsRUdpQkEsS0dBQSxFR0FPLE9HQU8sQ0dBQyxLR0FLLENHQUMsSUdBZCxDR0FtQixPR0FuQixDR2pCUDtBR21CQTtBR0FBOztLR25CQTtBR0FBLEVHc0JBLEtHQUEsRUdBTyxTR0FDLENHQUQsR0dBQTtBR0VOLFFHQUEsSUdBQTtBR0FBLFNHQUEsU0dBQSxHR0FBO0FHRUMsTUdBQSxJR0FrQixDR0FDLENHQUMsY0dBRixDR0FpQixJR0FqQixDR0FsQjtBR0FBLFFHQUEsTUdBQSxDR0FPLENHQUUsQ0dBQSxJR0FBLENHQVQsQ0dBQTtPR0ZEO0FHQUEsS0dBQTtXR0lBLEVHTk07RUdBQSxDR3RCUDtBRzhCQTtBR0FBOzs7S0c5QkE7QUdBQSxFR2tDQSxTR0FBLEVHQVcsU0dBQyxDR0FELEdHQUE7QUdFVixRR0FBLFFHQUE7QUdBQSxTR0FBLGFHQUEsR0dBQTtBR0FBLE1HQUEsTUdBQSxDR0FPLENHQUUsQ0dBQSxRR0FBLENHQVQsQ0dBQTtBR0FBLEtHQUE7V0dFQSxFR0pVO0VHQUEsQ0dsQ1g7QUd3Q0E7QUdBQTs7O0tHeENBO0FHQUEsRUc0Q0EsWUdBQSxFR0FjLFNHQUMsSUdBRCxFR0FPLFNHQVAsR0dBQTtBR0ViLFFHQUEsbUJHQUE7QUdBQSxJR0FBLElHQWUsQ0dBSSxJR0FDLENHQUEsWUdBRCxDR0FjLFNHQWQsQ0dBSixJR0FnQyxDR0FJLElHQUMsQ0dBQSxZR0FELENHQWMsSUdBZCxDR0FuRDtBR0FBLGFHQU8sSUdBUCxDR0FBO0tHQUE7QUdFQSxTR0FBLFdHQUE7eUJHQUE7QUdFQyxNR0FBLE1HQUEsR0dBUyxTR0FVLENHQUEsR0dBQSxDR0FuQixDR0FBO0FHRUEsTUdBQSxJR0FZLE1HQUEsS0dBVSxNR0F0QjtBR0FBLGlCR0FBO09HRkE7QUdJQSxNR0FBLElHQUcsTUdBQSxDR0FPLE1HQVAsS0dBbUIsUUdBbkIsSUdBK0IsSUdBQyxDR0FBLFVHQUQsQ0dBWSxNR0FaLENHQWxDO0FHRUMsUUdBQSxJR0FLLENHQUEsR0dBQSxDR0FMLEdHQVksSUdBQyxDR0FBLEtHQUQsQ0dBTyxNR0FQLENHQVosQ0dGRDtPR0FBLE1HQUE7QUdPQyxRR0FBLElHQUcsTUdBQSxDR0FPLE1HQVAsS0dBbUIsUUdBbkIsSUdBK0IsSUdBQyxDR0FBLFVHQUQsQ0dBWSxNR0FaLENHQWxDO0FHRUMsVUdBQSxJR0FLLENHQUEsR0dBQSxDR0FMLEdHQVksSUdBQyxDR0FBLEtHQUQsQ0dBTyxNR0FQLENHQVosQ0dGRDtTR0FBLE1HQUE7QUdNQyxVR0FBLElHQUMsQ0dBQSxZR0FELENHQWMsTUdBZCxFR0FzQixNR0F0QixDR0FBLENHTkQ7U0dQRDtPR05EO0FHQUEsS0dGQTtXR3NCQSxLR3hCYTtFR0FBLENHNUNkO0FHc0VBO0FHQUE7O0tHdEVBO0FHQUEsRUd5RUEsUUdBQSxFR0FVLFNHQUMsSUdBRCxFR0FPLFNHQVAsR0dBQTtXR0VULElHQUMsQ0dBQSxZR0FELENHQWMsSUdBQyxDR0FBLEtHQUQsQ0dBTyxJR0FQLENHQWQsRUdBNEIsU0dBNUIsRUdGUztFR0FBLENHekVWO0FHQUEsRUc2RUEsTUdBQSxFR0FRLFNHQUMsSUdBRCxFR0FPLFFHQVAsR0dBQTtXR0VQLElHQUMsQ0dBQSxVR0FELENHQVksSUdBQyxDR0FBLEtHQUQsQ0dBTyxJR0FQLENHQVosRUdBMEIsUUdBMUIsRUdGTztFR0FBLENHN0VSO0FHQUEsRUdrRkEsVUdBQSxFR0FZLFNHQUMsSUdBRCxFR0FPLFFHQVAsR0dBQTtBR0VYLFFHQUEsbUJHQUE7QUdBQSxJR0FBLElHQWUsQ0dBSSxJR0FDLENHQUEsWUdBRCxDR0FjLFFHQWQsQ0dBSixJR0ErQixDR0FJLElHQUMsQ0dBQSxZR0FELENHQWMsSUdBZCxDR0FsRDtBR0FBLGFHQU8sSUdBUCxDR0FBO0tHQUE7QUdFQSxTR0FBLGVHQUE7OzZCR0FBO0FHRUMsTUdBQSxJR0FnQixNR0FBLEtHQVksTUdBNUI7QUdBQSxpQkdBQTtPR0FBO0FHRUEsTUdBQSxJR0FHLE1HQUEsQ0dBTyxNR0FQLEtHQW1CLFFHQW5CLElHQStCLElHQUMsQ0dBQSxVR0FELENHQVksTUdBWixDR0FsQztBR0VDLFFHQUEsSUdBSyxDR0FBLEdHQUEsQ0dBTCxHR0FZLE1HQVosQ0dGRDtPR0FBLE1HQUE7QUdRQyxRR0FBLE1HQUEsR0dBUyxJR0FLLENHQUEsR0dBQSxDR0FkLENHQUE7QUdFQSxRR0FBLElHQUcsTUdBQSxDR0FPLE1HQVAsS0dBbUIsUUdBbkIsSUdBK0IsSUdBQyxDR0FBLFVHQUQsQ0dBWSxNR0FaLENHQWxDO0FHRUMsVUdBQSxJR0FLLENHQUEsR0dBQSxDR0FMLEdHQVksSUdBQyxDR0FBLEtHQUQsQ0dBTyxNR0FQLENHQVosQ0dGRDtTR0FBLE1HQUE7QUdNQyxVR0FBLElHQUMsQ0dBQSxVR0FELENHQVksTUdBWixFR0FvQixNR0FwQixDR0FBLENHTkQ7U0dWRDtPR0pEO0FHQUEsS0dGQTtXR3dCQSxLRzFCVztFR0FBLENHbEZaO0FHQUEsRUcrR0EsVUdBQSxFR0FZLFNHQUMsR0dBRCxFR0FNLE1HQU4sR0dBQTtBR0VYLFFHQUEsdURHQUE7QUdBQSxJR0FBLE9HQUEsR0dBVSxFR0FWLENHQUE7QUdFQSxTR0FBLGNHQUE7MEJHQUE7QUdFQyxNR0FBLE9HQVEsQ0dBQSxJR0FBLENHQVIsR0dBZ0IsRUdBaEIsQ0dGRDtBR0FBLEtHRkE7QUdBQSxJR01BLE9HQVEsQ0dBQSxNR0FBLENHQVIsR0dBa0IsRUdObEIsQ0dBQTtBR0FBLElHUUEsT0dSQSxDR0FBO0FHU0EsU0dBQSxVR0FBO3FCR0FBO0FHRUMsTUdBQSxTR0FBLEdHQVksS0dBWixDR0FBO0FHRUEsV0dBQSxjR0FBOzRCR0FBO0FHRUMsUUdBQSxJR0FBLENHQU8sS0dBSyxDR0FDLE9HQU4sQ0dBYyxJR0FkLENHQVA7QUdFQyxVR0FBLElHQUEsR0dBTyxDR0FDLElHQUQsQ0dBUCxDR0ZEO1NHQUE7QUdJQSxhR0FBLDJDR0FBO3lCR0FBO0FHRUMsVUdBQSxJR0FHLE1HQUEsQ0dBTyxHR0FQLEtHQWMsUUdBakI7QUdFQyxZR0FBLElHQUcsR0dBQSxLR0FPLEdHQVY7QUdFQyxjR0FBLFNHQUEsR0dBWSxJR0FaLENHRkQ7YUdGRDtXR0FBLE1HTUssSUdBRyxHR0FBLFlHQWUsTUdBbEI7QUdFSixZR0FBLElHQUcsR0dBRyxDR0FDLElHQUosQ0dBUyxHR0FULENHQUg7QUdFQyxjR0FBLFNHQUEsR0dBWSxJR0FaLENHRkQ7YUdGSTtXR0FBLE1HTUEsSUdBRyxHR0FBLFlHQWUsUUdBbEI7QUdFSixZR0FBLElHQUcsR0dBQSxDR0FJLEdHQUosQ0dBSDtBR0VDLGNHQUEsU0dBQSxHR0FZLElHQVosQ0dGRDthR0ZJO1dHQUEsTUdBQTtBR1FKLGtCR0FNLEtHQUEsQ0dBTSxrRUdBTixDR0FOLENHUkk7V0daTDtBR3VCQSxVR0FBLElHQUcsU0dBSDtBR0VDLFlHQUEsT0dBUSxDR0FBLElHQUEsQ0dBTSxDR0FBLEdHQUEsQ0dBZCxHR0FxQixHR0FyQixDR0FBO0FHQUEsWUdFQSxZR0ZBLENHRkQ7V0d6QkQ7QUdBQSxTR05EO0FHQUEsT0dGQTtBR0FBLE1HdUNBLE9HQVEsQ0dBQSxNR0FBLENHQVEsQ0dBQSxHR0FBLENHQWhCLEdHQXVCLEdHdkN2QixDR0ZEO0FHQUEsS0dUQTtXR29EQSxRR3REVztFR0FBLENHL0daO0NBSkQsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gYXJyYXkgPVxuXG5cdCMjI1xuXHRUcmllcyB0byB0dXJuIGFueXRoaW5nIGludG8gYW4gYXJyYXkuXG5cdCMjI1xuXHRmcm9tOiAocikgLT5cblxuXHRcdEFycmF5OjpzbGljZS5jYWxsIHJcblxuXHQjIyNcblx0Q2xvbmUgb2YgYW4gYXJyYXkuIFByb3BlcnRpZXMgd2lsbCBiZSBzaGFsbG93IGNvcGllcy5cblx0IyMjXG5cdHNpbXBsZUNsb25lOiAoYSkgLT5cblxuXHRcdGEuc2xpY2UgMFxuXG5cdHNoYWxsb3dFcXVhbDogKGExLCBhMikgLT5cblxuXHRcdHJldHVybiBubyB1bmxlc3MgQXJyYXkuaXNBcnJheShhMSkgYW5kIEFycmF5LmlzQXJyYXkoYTIpIGFuZCBhMS5sZW5ndGggaXMgYTIubGVuZ3RoXG5cblx0XHRmb3IgdmFsLCBpIGluIGExXG5cblx0XHRcdHJldHVybiBubyB1bmxlc3MgYTJbaV0gaXMgdmFsXG5cblx0XHR5ZXNcblxuXHRwbHVjazogKGEsIGkpIC0+XG5cblx0XHRyZXR1cm4gYSBpZiBhLmxlbmd0aCA8IDFcblxuXG5cdFx0Zm9yIHZhbHVlLCBpbmRleCBpbiBhXG5cblx0XHRcdGlmIGluZGV4ID4gaVxuXG5cdFx0XHRcdGFbaW5kZXggLSAxXSA9IGFbaW5kZXhdXG5cblx0XHRhLmxlbmd0aCA9IGEubGVuZ3RoIC0gMVxuXG5cdFx0YVxuXG5cdHBsdWNrSXRlbTogKGEsIGl0ZW0pIC0+XG5cblx0XHRyZXR1cm4gYSBpZiBhLmxlbmd0aCA8IDFcblxuXG5cdFx0cmVtb3ZlZCA9IDBcblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiB2YWx1ZSBpcyBpdGVtXG5cblx0XHRcdFx0cmVtb3ZlZCsrXG5cblx0XHRcdFx0Y29udGludWVcblxuXHRcdFx0aWYgcmVtb3ZlZCBpc250IDBcblxuXHRcdFx0XHRhW2luZGV4IC0gcmVtb3ZlZF0gPSBhW2luZGV4XVxuXG5cdFx0YS5sZW5ndGggPSBhLmxlbmd0aCAtIHJlbW92ZWQgaWYgcmVtb3ZlZCA+IDBcblxuXHRcdGFcblxuXHRwbHVja09uZUl0ZW06IChhLCBpdGVtKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblx0XHRyZWFjaGVkID0gbm9cblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBub3QgcmVhY2hlZFxuXG5cdFx0XHRcdGlmIHZhbHVlIGlzIGl0ZW1cblxuXHRcdFx0XHRcdHJlYWNoZWQgPSB5ZXNcblxuXHRcdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGVsc2VcblxuXHRcdFx0XHRhW2luZGV4IC0gMV0gPSBhW2luZGV4XVxuXG5cdFx0YS5sZW5ndGggPSBhLmxlbmd0aCAtIDEgaWYgcmVhY2hlZFxuXG5cdFx0YVxuXG5cdHBsdWNrQnlDYWxsYmFjazogKGEsIGNiKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblx0XHRyZW1vdmVkID0gMFxuXG5cdFx0Zm9yIHZhbHVlLCBpbmRleCBpbiBhXG5cblx0XHRcdGlmIGNiIHZhbHVlLCBpbmRleFxuXG5cdFx0XHRcdHJlbW92ZWQrK1xuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGlmIHJlbW92ZWQgaXNudCAwXG5cblx0XHRcdFx0YVtpbmRleCAtIHJlbW92ZWRdID0gYVtpbmRleF1cblxuXHRcdGlmIHJlbW92ZWQgPiAwXG5cblx0XHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSByZW1vdmVkXG5cblx0XHRhXG5cblx0cGx1Y2tNdWx0aXBsZTogKGFycmF5LCBpbmRleGVzVG9SZW1vdmUpIC0+XG5cblx0XHRyZXR1cm4gYXJyYXkgaWYgYXJyYXkubGVuZ3RoIDwgMVxuXG5cdFx0cmVtb3ZlZFNvRmFyID0gMFxuXG5cdFx0aW5kZXhlc1RvUmVtb3ZlLnNvcnQoKVxuXG5cdFx0Zm9yIGkgaW4gaW5kZXhlc1RvUmVtb3ZlXG5cblx0XHRcdEBwbHVjayBhcnJheSwgaSAtIHJlbW92ZWRTb0ZhclxuXG5cdFx0XHRyZW1vdmVkU29GYXIrK1xuXG5cdFx0YXJyYXlcblxuXHRpbmplY3RCeUNhbGxiYWNrOiAoYSwgdG9JbmplY3QsIHNob3VsZEluamVjdCkgLT5cblxuXHRcdHZhbEEgPSBudWxsXG5cblx0XHR2YWxCID0gbnVsbFxuXG5cdFx0bGVuID0gYS5sZW5ndGhcblxuXHRcdGlmIGxlbiA8IDFcblxuXHRcdFx0YS5wdXNoIHRvSW5qZWN0XG5cblx0XHRcdHJldHVybiBhXG5cblxuXHRcdGZvciB2YWwsIGkgaW4gYVxuXG5cdFx0XHR2YWxBID0gdmFsQlxuXG5cdFx0XHR2YWxCID0gdmFsXG5cblx0XHRcdGlmIHNob3VsZEluamVjdCB2YWxBLCB2YWxCLCB0b0luamVjdFxuXG5cdFx0XHRcdHJldHVybiBhLnNwbGljZSBpLCAwLCB0b0luamVjdFxuXG5cdFx0YS5wdXNoIHRvSW5qZWN0XG5cblx0XHRhXG5cblx0aW5qZWN0SW5JbmRleDogKGEsIGluZGV4LCB0b0luamVjdCkgLT5cblxuXHRcdGxlbiA9IGEubGVuZ3RoXG5cblx0XHRpID0gaW5kZXhcblxuXHRcdGlmIGxlbiA8IDFcblxuXHRcdFx0YS5wdXNoIHRvSW5qZWN0XG5cblx0XHRcdHJldHVybiBhXG5cblx0XHR0b1B1dCA9IHRvSW5qZWN0XG5cblx0XHR0b1B1dE5leHQgPSBudWxsXG5cblx0XHRgZm9yKDsgaSA8PSBsZW47IGkrKyl7XG5cblx0XHRcdHRvUHV0TmV4dCA9IGFbaV07XG5cblx0XHRcdGFbaV0gPSB0b1B1dDtcblxuXHRcdFx0dG9QdXQgPSB0b1B1dE5leHQ7XG5cblx0XHR9YFxuXG5cdFx0IyBhW2ldID0gdG9QdXRcblxuXHRcdG51bGwiLCJtb2R1bGUuZXhwb3J0cyA9IGNsYXNzaWMgPSB7fVxuXG4jIExpdHRsZSBoZWxwZXIgZm9yIG1peGlucyBmcm9tIENvZmZlZVNjcmlwdCBGQVEsXG4jIGNvdXJ0ZXN5IG9mIFNldGhhdXJ1cyAoaHR0cDovL2dpdGh1Yi5jb20vc2V0aGF1cnVzKVxuY2xhc3NpYy5pbXBsZW1lbnQgPSAobWl4aW5zLi4uLCBjbGFzc1JlZmVyZW5jZSkgLT5cblxuXHRmb3IgbWl4aW4gaW4gbWl4aW5zXG5cblx0XHRjbGFzc1Byb3RvID0gY2xhc3NSZWZlcmVuY2U6OlxuXG5cdFx0Zm9yIG1lbWJlciBvZiBtaXhpbjo6XG5cblx0XHRcdHVubGVzcyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIGNsYXNzUHJvdG8sIG1lbWJlclxuXG5cdFx0XHRcdGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIG1peGluOjosIG1lbWJlclxuXG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBjbGFzc1Byb3RvLCBtZW1iZXIsIGRlc2NcblxuXHRjbGFzc1JlZmVyZW5jZVxuXG5jbGFzc2ljLm1peCA9IChtaXhpbnMuLi4sIGNsYXNzUmVmZXJlbmNlKSAtPlxuXG5cdGNsYXNzUHJvdG8gPSBjbGFzc1JlZmVyZW5jZTo6XG5cblx0Y2xhc3NSZWZlcmVuY2UuX19taXhpbkNsb25lcnMgPSBbXVxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fYXBwbHlDbG9uZXJzRm9yID0gKGluc3RhbmNlLCBhcmdzID0gbnVsbCkgLT5cblxuXHRcdGZvciBjbG9uZXIgaW4gY2xhc3NSZWZlcmVuY2UuX19taXhpbkNsb25lcnNcblxuXHRcdFx0Y2xvbmVyLmFwcGx5IGluc3RhbmNlLCBhcmdzXG5cblx0XHRyZXR1cm5cblxuXHRjbGFzc1JlZmVyZW5jZS5fX21peGluSW5pdGlhbGl6ZXJzID0gW11cblxuXHRjbGFzc1JlZmVyZW5jZS5fX2luaXRNaXhpbnNGb3IgPSAoaW5zdGFuY2UsIGFyZ3MgPSBudWxsKSAtPlxuXG5cdFx0Zm9yIGluaXRpYWxpemVyIGluIGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5Jbml0aWFsaXplcnNcblxuXHRcdFx0aW5pdGlhbGl6ZXIuYXBwbHkgaW5zdGFuY2UsIGFyZ3NcblxuXHRcdHJldHVyblxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5RdWl0dGVycyA9IFtdXG5cblx0Y2xhc3NSZWZlcmVuY2UuX19hcHBseVF1aXR0ZXJzRm9yID0gKGluc3RhbmNlLCBhcmdzID0gbnVsbCkgLT5cblxuXHRcdGZvciBxdWl0dGVyIGluIGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5RdWl0dGVyc1xuXG5cdFx0XHRxdWl0dGVyLmFwcGx5IGluc3RhbmNlLCBhcmdzXG5cblx0XHRyZXR1cm5cblxuXHRmb3IgbWl4aW4gaW4gbWl4aW5zXG5cblx0XHR1bmxlc3MgbWl4aW4uY29uc3RydWN0b3IgaW5zdGFuY2VvZiBGdW5jdGlvblxuXG5cdFx0XHR0aHJvdyBFcnJvciBcIk1peGluIHNob3VsZCBiZSBhIGZ1bmN0aW9uXCJcblxuXHRcdGZvciBtZW1iZXIgb2YgbWl4aW46OlxuXG5cdFx0XHRpZiBtZW1iZXIuc3Vic3RyKDAsIDExKSBpcyAnX19pbml0TWl4aW4nXG5cblx0XHRcdFx0Y2xhc3NSZWZlcmVuY2UuX19taXhpbkluaXRpYWxpemVycy5wdXNoIG1peGluOjpbbWVtYmVyXVxuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGVsc2UgaWYgbWVtYmVyLnN1YnN0cigwLCAxMSkgaXMgJ19fY2xvbmVyRm9yJ1xuXG5cdFx0XHRcdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5DbG9uZXJzLnB1c2ggbWl4aW46OlttZW1iZXJdXG5cblx0XHRcdFx0Y29udGludWVcblxuXHRcdFx0ZWxzZSBpZiBtZW1iZXIuc3Vic3RyKDAsIDEyKSBpcyAnX19xdWl0dGVyRm9yJ1xuXG5cdFx0XHRcdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5RdWl0dGVycy5wdXNoIG1peGluOjpbbWVtYmVyXVxuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdHVubGVzcyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIGNsYXNzUHJvdG8sIG1lbWJlclxuXG5cdFx0XHRcdGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIG1peGluOjosIG1lbWJlclxuXG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBjbGFzc1Byb3RvLCBtZW1iZXIsIGRlc2NcblxuXHRjbGFzc1JlZmVyZW5jZSIsImFycmF5ID0gcmVxdWlyZSAnLi9hcnJheSdcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgRW1pdHRlclxyXG5cclxuXHRjb25zdHJ1Y3RvcjogLT5cclxuXHJcblx0XHRAX2xpc3RlbmVycyA9IHt9XHJcblxyXG5cdFx0QF9saXN0ZW5lcnNGb3JBbnlFdmVudCA9IFtdXHJcblxyXG5cdFx0QF9kaXNhYmxlZEVtaXR0ZXJzID0ge31cclxuXHJcblx0b246IChldmVudE5hbWUsIGxpc3RlbmVyKSAtPlxyXG5cclxuXHRcdHVubGVzcyBAX2xpc3RlbmVyc1tldmVudE5hbWVdP1xyXG5cclxuXHRcdFx0QF9saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdXHJcblxyXG5cdFx0QF9saXN0ZW5lcnNbZXZlbnROYW1lXS5wdXNoIGxpc3RlbmVyXHJcblxyXG5cdFx0QFxyXG5cclxuXHRvbmNlOiAoZXZlbnROYW1lLCBsaXN0ZW5lcikgLT5cclxuXHJcblx0XHRyYW4gPSBub1xyXG5cclxuXHRcdGNiID0gPT5cclxuXHJcblx0XHRcdHJldHVybiBpZiByYW5cclxuXHJcblx0XHRcdHJhbiA9IHllc1xyXG5cclxuXHRcdFx0ZG8gbGlzdGVuZXJcclxuXHJcblx0XHRcdHNldFRpbWVvdXQgPT5cclxuXHJcblx0XHRcdFx0QHJlbW92ZUV2ZW50IGV2ZW50TmFtZSwgY2JcclxuXHJcblx0XHRcdCwgMFxyXG5cclxuXHRcdEBvbiBldmVudE5hbWUsIGNiXHJcblxyXG5cdFx0QFxyXG5cclxuXHRvbkFueUV2ZW50OiAobGlzdGVuZXIpIC0+XHJcblxyXG5cdFx0QF9saXN0ZW5lcnNGb3JBbnlFdmVudC5wdXNoIGxpc3RlbmVyXHJcblxyXG5cdFx0QFxyXG5cclxuXHRyZW1vdmVFdmVudDogKGV2ZW50TmFtZSwgbGlzdGVuZXIpIC0+XHJcblxyXG5cdFx0cmV0dXJuIEAgdW5sZXNzIEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0/XHJcblxyXG5cdFx0YXJyYXkucGx1Y2tPbmVJdGVtIEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0sIGxpc3RlbmVyXHJcblxyXG5cdFx0QFxyXG5cclxuXHRyZW1vdmVMaXN0ZW5lcnM6IChldmVudE5hbWUpIC0+XHJcblxyXG5cdFx0cmV0dXJuIEAgdW5sZXNzIEBfbGlzdGVuZXJzW2V2ZW50TmFtZV0/XHJcblxyXG5cdFx0QF9saXN0ZW5lcnNbZXZlbnROYW1lXS5sZW5ndGggPSAwXHJcblxyXG5cdFx0QFxyXG5cclxuXHRyZW1vdmVBbGxMaXN0ZW5lcnM6IC0+XHJcblxyXG5cdFx0Zm9yIG5hbWUsIGxpc3RlbmVycyBvZiBAX2xpc3RlbmVyc1xyXG5cclxuXHRcdFx0bGlzdGVuZXJzLmxlbmd0aCA9IDBcclxuXHJcblx0XHRAXHJcblxyXG5cdF9lbWl0OiAoZXZlbnROYW1lLCBkYXRhKSAtPlxyXG5cclxuXHRcdGZvciBsaXN0ZW5lciBpbiBAX2xpc3RlbmVyc0ZvckFueUV2ZW50XHJcblxyXG5cdFx0XHRsaXN0ZW5lci5jYWxsIEAsIGRhdGEsIGV2ZW50TmFtZVxyXG5cclxuXHRcdHJldHVybiB1bmxlc3MgQF9saXN0ZW5lcnNbZXZlbnROYW1lXT9cclxuXHJcblx0XHRmb3IgbGlzdGVuZXIgaW4gQF9saXN0ZW5lcnNbZXZlbnROYW1lXVxyXG5cclxuXHRcdFx0bGlzdGVuZXIuY2FsbCBALCBkYXRhXHJcblxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdCMgdGhpcyBtYWtlcyBzdXJlIHRoYXQgYWxsIHRoZSBjYWxscyB0byB0aGlzIGNsYXNzJ3MgbWV0aG9kICdmbk5hbWUnXHJcblx0IyBhcmUgdGhyb3R0bGVkXHJcblx0X3Rocm90dGxlRW1pdHRlck1ldGhvZDogKGZuTmFtZSwgdGltZSA9IDEwMDApIC0+XHJcblxyXG5cdFx0b3JpZ2luYWxGbiA9IEBbZm5OYW1lXVxyXG5cclxuXHRcdGlmIHR5cGVvZiBvcmlnaW5hbEZuIGlzbnQgJ2Z1bmN0aW9uJ1xyXG5cclxuXHRcdFx0dGhyb3cgRXJyb3IgXCJ0aGlzIGNsYXNzIGRvZXMgbm90IGhhdmUgYSBtZXRob2QgY2FsbGVkICcje2ZuTmFtZX0nXCJcclxuXHJcblx0XHRsYXN0Q2FsbEFyZ3MgPSBudWxsXHJcblx0XHRwZW5kaW5nID0gbm9cclxuXHRcdHRpbWVyID0gbnVsbFxyXG5cclxuXHRcdEBbZm5OYW1lXSA9ID0+XHJcblxyXG5cdFx0XHRsYXN0Q2FsbEFyZ3MgPSBhcmd1bWVudHNcclxuXHJcblx0XHRcdGRvIHBlbmRcclxuXHJcblx0XHRwZW5kID0gPT5cclxuXHJcblx0XHRcdGlmIHBlbmRpbmdcclxuXHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0IHRpbWVyXHJcblxyXG5cdFx0XHR0aW1lciA9IHNldFRpbWVvdXQgcnVuSXQsIHRpbWVcclxuXHJcblx0XHRcdHBlbmRpbmcgPSB5ZXNcclxuXHJcblx0XHRydW5JdCA9ID0+XHJcblxyXG5cdFx0XHRwZW5kaW5nID0gbm9cclxuXHJcblx0XHRcdG9yaWdpbmFsRm4uYXBwbHkgQCwgbGFzdENhbGxBcmdzXHJcblxyXG5cdF9kaXNhYmxlRW1pdHRlcjogKGZuTmFtZSkgLT5cclxuXHJcblx0XHRpZiBAX2Rpc2FibGVkRW1pdHRlcnNbZm5OYW1lXT9cclxuXHJcblx0XHRcdHRocm93IEVycm9yIFwiI3tmbk5hbWV9IGlzIGFscmVhZHkgYSBkaXNhYmxlZCBlbWl0dGVyXCJcclxuXHJcblx0XHRAX2Rpc2FibGVkRW1pdHRlcnNbZm5OYW1lXSA9IEBbZm5OYW1lXVxyXG5cclxuXHRcdEBbZm5OYW1lXSA9IC0+XHJcblxyXG5cdF9lbmFibGVFbWl0dGVyOiAoZm5OYW1lKSAtPlxyXG5cclxuXHRcdGZuID0gQF9kaXNhYmxlZEVtaXR0ZXJzW2ZuTmFtZV1cclxuXHJcblx0XHR1bmxlc3MgZm4/XHJcblxyXG5cdFx0XHR0aHJvdyBFcnJvciBcIiN7Zm5OYW1lfSBpcyBub3QgYSBkaXNhYmxlZCBlbWl0dGVyXCJcclxuXHJcblx0XHRAW2ZuTmFtZV0gPSBmblxyXG5cclxuXHRcdGRlbGV0ZSBAX2Rpc2FibGVkRW1pdHRlcnNbZm5OYW1lXSIsIl9jb21tb24gPSByZXF1aXJlICcuL19jb21tb24nXG5cbm1vZHVsZS5leHBvcnRzID0gb2JqZWN0ID1cblxuXHRpc0JhcmVPYmplY3Q6IF9jb21tb24uaXNCYXJlT2JqZWN0LmJpbmQgX2NvbW1vblxuXG5cdCMjI1xuXHRpZiBvYmplY3QgaXMgYW4gaW5zdGFuY2Ugb2YgYSBjbGFzc1xuXHQjIyNcblx0aXNJbnN0YW5jZTogKHdoYXQpIC0+XG5cblx0XHRub3QgQGlzQmFyZU9iamVjdCB3aGF0XG5cblx0IyMjXG5cdEFsaWFzIHRvIF9jb21tb24udHlwZU9mXG5cdCMjI1xuXHR0eXBlT2Y6IF9jb21tb24udHlwZU9mLmJpbmQgX2NvbW1vblxuXG5cdCMjI1xuXHRBbGlhcyB0byBfY29tbW9uLmNsb25lXG5cdCMjI1xuXHRjbG9uZTogX2NvbW1vbi5jbG9uZS5iaW5kIF9jb21tb25cblxuXHQjIyNcblx0RW1wdGllcyBhbiBvYmplY3Qgb2YgaXRzIHByb3BlcnRpZXMuXG5cdCMjI1xuXHRlbXB0eTogKG8pIC0+XG5cblx0XHRmb3IgcHJvcCBvZiBvXG5cblx0XHRcdGRlbGV0ZSBvW3Byb3BdIGlmIG8uaGFzT3duUHJvcGVydHkgcHJvcFxuXG5cdFx0b1xuXG5cdCMjI1xuXHRFbXB0aWVzIGFuIG9iamVjdC4gRG9lc24ndCBjaGVjayBmb3IgaGFzT3duUHJvcGVydHksIHNvIGl0J3MgYSB0aW55XG5cdGJpdCBmYXN0ZXIuIFVzZSBpdCBmb3IgcGxhaW4gb2JqZWN0cy5cblx0IyMjXG5cdGZhc3RFbXB0eTogKG8pIC0+XG5cblx0XHRkZWxldGUgb1twcm9wZXJ0eV0gZm9yIHByb3BlcnR5IG9mIG9cblxuXHRcdG9cblxuXHQjIyNcblx0T3ZlcnJpZGVzIHZhbHVlcyBmb21yIGBuZXdWYWx1ZXNgIG9uIGBiYXNlYCwgYXMgbG9uZyBhcyB0aGV5XG5cdGFscmVhZHkgZXhpc3QgaW4gYmFzZS5cblx0IyMjXG5cdG92ZXJyaWRlT250bzogKGJhc2UsIG5ld1ZhbHVlcykgLT5cblxuXHRcdHJldHVybiBiYXNlIGlmIG5vdCBAaXNCYXJlT2JqZWN0KG5ld1ZhbHVlcykgb3Igbm90IEBpc0JhcmVPYmplY3QoYmFzZSlcblxuXHRcdGZvciBrZXksIG9sZFZhbCBvZiBiYXNlXG5cblx0XHRcdG5ld1ZhbCA9IG5ld1ZhbHVlc1trZXldXG5cblx0XHRcdGNvbnRpbnVlIGlmIG5ld1ZhbCBpcyB1bmRlZmluZWRcblxuXHRcdFx0aWYgdHlwZW9mIG5ld1ZhbCBpc250ICdvYmplY3QnIG9yIEBpc0luc3RhbmNlIG5ld1ZhbFxuXG5cdFx0XHRcdGJhc2Vba2V5XSA9IEBjbG9uZSBuZXdWYWxcblxuXHRcdFx0IyBuZXdWYWwgaXMgYSBwbGFpbiBvYmplY3Rcblx0XHRcdGVsc2VcblxuXHRcdFx0XHRpZiB0eXBlb2Ygb2xkVmFsIGlzbnQgJ29iamVjdCcgb3IgQGlzSW5zdGFuY2Ugb2xkVmFsXG5cblx0XHRcdFx0XHRiYXNlW2tleV0gPSBAY2xvbmUgbmV3VmFsXG5cblx0XHRcdFx0ZWxzZVxuXG5cdFx0XHRcdFx0QG92ZXJyaWRlT250byBvbGRWYWwsIG5ld1ZhbFxuXHRcdGJhc2VcblxuXHQjIyNcblx0VGFrZXMgYSBjbG9uZSBvZiAnYmFzZScgYW5kIHJ1bnMgI292ZXJyaWRlT250byBvbiBpdFxuXHQjIyNcblx0b3ZlcnJpZGU6IChiYXNlLCBuZXdWYWx1ZXMpIC0+XG5cblx0XHRAb3ZlcnJpZGVPbnRvIEBjbG9uZShiYXNlKSwgbmV3VmFsdWVzXG5cblx0YXBwZW5kOiAoYmFzZSwgdG9BcHBlbmQpIC0+XG5cblx0XHRAYXBwZW5kT250byBAY2xvbmUoYmFzZSksIHRvQXBwZW5kXG5cblx0IyBEZWVwIGFwcGVuZHMgdmFsdWVzIGZyb20gYHRvQXBwZW5kYCB0byBgYmFzZWBcblx0YXBwZW5kT250bzogKGJhc2UsIHRvQXBwZW5kKSAtPlxuXG5cdFx0cmV0dXJuIGJhc2UgaWYgbm90IEBpc0JhcmVPYmplY3QodG9BcHBlbmQpIG9yIG5vdCBAaXNCYXJlT2JqZWN0KGJhc2UpXG5cblx0XHRmb3Igb3duIGtleSwgbmV3VmFsIG9mIHRvQXBwZW5kXG5cblx0XHRcdGNvbnRpbnVlIHVubGVzcyBuZXdWYWwgaXNudCB1bmRlZmluZWRcblxuXHRcdFx0aWYgdHlwZW9mIG5ld1ZhbCBpc250ICdvYmplY3QnIG9yIEBpc0luc3RhbmNlIG5ld1ZhbFxuXG5cdFx0XHRcdGJhc2Vba2V5XSA9IG5ld1ZhbFxuXG5cdFx0XHRlbHNlXG5cblx0XHRcdFx0IyBuZXdWYWwgaXMgYSBiYXJlIG9iamVjdFxuXG5cdFx0XHRcdG9sZFZhbCA9IGJhc2Vba2V5XVxuXG5cdFx0XHRcdGlmIHR5cGVvZiBvbGRWYWwgaXNudCAnb2JqZWN0JyBvciBAaXNJbnN0YW5jZSBvbGRWYWxcblxuXHRcdFx0XHRcdGJhc2Vba2V5XSA9IEBjbG9uZSBuZXdWYWxcblxuXHRcdFx0XHRlbHNlXG5cblx0XHRcdFx0XHRAYXBwZW5kT250byBvbGRWYWwsIG5ld1ZhbFxuXG5cdFx0YmFzZVxuXG5cdCMgR3JvdXBzXG5cdGdyb3VwUHJvcHM6IChvYmosIGdyb3VwcykgLT5cblxuXHRcdGdyb3VwZWQgPSB7fVxuXG5cdFx0Zm9yIG5hbWUsIGRlZnMgb2YgZ3JvdXBzXG5cblx0XHRcdGdyb3VwZWRbbmFtZV0gPSB7fVxuXG5cdFx0Z3JvdXBlZFsncmVzdCddID0ge31cblxuXHRcdGB0b3A6IC8vYFxuXHRcdGZvciBrZXksIHZhbCBvZiBvYmpcblxuXHRcdFx0c2hvdWxkQWRkID0gbm9cblxuXHRcdFx0Zm9yIG5hbWUsIGRlZnMgb2YgZ3JvdXBzXG5cblx0XHRcdFx0dW5sZXNzIEFycmF5LmlzQXJyYXkgZGVmc1xuXG5cdFx0XHRcdFx0ZGVmcyA9IFtkZWZzXVxuXG5cdFx0XHRcdGZvciBkZWYgaW4gZGVmc1xuXG5cdFx0XHRcdFx0aWYgdHlwZW9mIGRlZiBpcyAnc3RyaW5nJ1xuXG5cdFx0XHRcdFx0XHRpZiBrZXkgaXMgZGVmXG5cblx0XHRcdFx0XHRcdFx0c2hvdWxkQWRkID0geWVzXG5cblx0XHRcdFx0XHRlbHNlIGlmIGRlZiBpbnN0YW5jZW9mIFJlZ0V4cFxuXG5cdFx0XHRcdFx0XHRpZiBkZWYudGVzdCBrZXlcblxuXHRcdFx0XHRcdFx0XHRzaG91bGRBZGQgPSB5ZXNcblxuXHRcdFx0XHRcdGVsc2UgaWYgZGVmIGluc3RhbmNlb2YgRnVuY3Rpb25cblxuXHRcdFx0XHRcdFx0aWYgZGVmIGtleVxuXG5cdFx0XHRcdFx0XHRcdHNob3VsZEFkZCA9IHllc1xuXG5cdFx0XHRcdFx0ZWxzZVxuXG5cdFx0XHRcdFx0XHR0aHJvdyBFcnJvciAnR3JvdXAgZGVmaW5pdGlvbnMgbXVzdCBlaXRoZXJcblx0XHRcdFx0XHRcdGJlIHN0cmluZ3MsIHJlZ2V4ZXMsIG9yIGZ1bmN0aW9ucy4nXG5cblx0XHRcdFx0XHRpZiBzaG91bGRBZGRcblxuXHRcdFx0XHRcdFx0Z3JvdXBlZFtuYW1lXVtrZXldID0gdmFsXG5cblx0XHRcdFx0XHRcdGBjb250aW51ZSB0b3BgXG5cblx0XHRcdGdyb3VwZWRbJ3Jlc3QnXVtrZXldID0gdmFsXG5cblx0XHRncm91cGVkIl19
},{"./_common":205}],208:[function(require,module,exports){
var EditingFilm, EditingTheatre, Film, Grids, Kilid, WysihwygManager,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Film = require('./Film');

Kilid = require('kilid');

Grids = require('./editingFilm/Grids');

EditingTheatre = require('./editingFilm/EditingTheatre');

WysihwygManager = require('./editingFilm/WysihwygManager');

module.exports = EditingFilm = (function(_super) {
  __extends(EditingFilm, _super);

  function EditingFilm() {
    EditingFilm.__super__.constructor.apply(this, arguments);
    this.kilid = (new Kilid).getRootScope();
    this.theatre = new EditingTheatre(this);
    this.moosh = this.theatre.view.moosh;
    this.grids = new Grids(this);
    this.wysihwyg = new WysihwygManager(this);
    this.kilid.on('ctrl+\\', function() {
      return document.body.classList.toggle('debug');
    });
  }

  EditingFilm.prototype.run = function() {
    this.theatre.model.run();
    return this;
  };

  return EditingFilm;

})(Film);

},{"./Film":209,"./editingFilm/EditingTheatre":210,"./editingFilm/Grids":211,"./editingFilm/WysihwygManager":212,"kilid":57}],209:[function(require,module,exports){
var Display, Film, HallowText, object,
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

Display = require('./film/Display');

HallowText = require('./tools/HallowText');

object = require('utila/scripts/js/lib/object');

module.exports = Film = (function() {
  var self;

  function Film(options) {
    if (options == null) {
      options = {};
    }
    this.options = self._getDefaultOptions();
    this.id = this.options.id;
    object.overrideOnto(this.options, options);
    this._initRaf();
    this.display = new Display(this);
    this.sets = {};
  }

  Film.prototype._initRaf = function() {
    var frame, listeners;
    listeners = this._listeners = [];
    return requestAnimationFrame(frame = function(t) {
      var listener, _i, _len;
      for (_i = 0, _len = listeners.length; _i < _len; _i++) {
        listener = listeners[_i];
        listener(t);
      }
      return requestAnimationFrame(frame);
    });
  };

  Film.prototype.tick = function(listener) {
    return this._listeners.push(listener);
  };

  Film.prototype.addSet = function(set) {
    var id;
    id = set.id;
    if (this.sets[id] != null) {
      throw Error("Set '" + id + "' already exists");
    }
    this.sets[id] = set;
    return this;
  };

  Film.prototype._setupDomEl = function(groupName, actorName, el, props) {
    var actor, hallowActor, hallowText, hallowTextObjectName, objName, shouldAccountForProps;
    objName = String(groupName + ' ' + actorName).replace(/\s+/g, '-').toLowerCase();
    actor = this.theatre.model.graph.getGroup(groupName).getActor(actorName);
    this.theatre.timeline.addObject(objName, el);
    shouldAccountForProps = Array.isArray(props) && props.length > 0;
    if (!shouldAccountForProps || __indexOf.call(props, 'opacity') >= 0) {
      actor.addPropOfObject('Opacity', objName, 'opacity', 1);
    }
    if (!shouldAccountForProps || __indexOf.call(props, 'rotation') >= 0) {
      actor.addPropOfObject('Rotation X', objName, 'rotateX', 0);
      actor.addPropOfObject('Rotation Y', objName, 'rotateY', 0);
      actor.addPropOfObject('Rotation Z', objName, 'rotateZ', 0);
    }
    if (!shouldAccountForProps || __indexOf.call(props, 'translation') >= 0) {
      actor.addPropOfObject('X', objName, 'x', 0);
      actor.addPropOfObject('Y', objName, 'y', 0);
      actor.addPropOfObject('Z', objName, 'z', 0);
    }
    if (!shouldAccountForProps || __indexOf.call(props, 'localTranslation') >= 0) {
      actor.addPropOfObject('Local X', objName, 'localX', 0);
      actor.addPropOfObject('Local Y', objName, 'localY', 0);
      actor.addPropOfObject('Local Z', objName, 'localZ', 0);
    }
    if (!shouldAccountForProps || __indexOf.call(props, 'transformOrigin') >= 0) {
      actor.addPropOfObject('Transform Origin X', objName, 'transformOriginX', 0);
      actor.addPropOfObject('Transform Origin Y', objName, 'transformOriginY', 0);
      actor.addPropOfObject('Transform Origin Z', objName, 'transformOriginZ', 0);
    }
    if (!shouldAccountForProps || __indexOf.call(props, 'scale') >= 0) {
      actor.addPropOfObject('Scale X', objName, 'scaleX', 1);
      actor.addPropOfObject('Scale Y', objName, 'scaleY', 1);
      actor.addPropOfObject('Scale Z', objName, 'scaleZ', 1);
    }
    if (__indexOf.call(props, 'skew') >= 0) {
      actor.addPropOfObject('Skew X', objName, 'skewX', 0);
      actor.addPropOfObject('Skew Y', objName, 'skewY', 0);
    }
    if (!shouldAccountForProps || __indexOf.call(props, 'dims') >= 0) {
      actor.addPropOfObject('Width', objName, 'width', 0);
      actor.addPropOfObject('Height', objName, 'height', 0);
    }
    if (__indexOf.call(props, 'hallowText') >= 0) {
      hallowText = new HallowText(el, 5);
      hallowTextObjectName = objName + '-hallowText';
      this.theatre.timeline.addObject(hallowTextObjectName, hallowText);
      hallowActor = this.theatre.model.graph.getGroup(groupName).getActor(actorName + ' - HallowText');
      hallowActor.addPropOfObject('Base Radius', hallowTextObjectName, 'setBaseRadius', 0);
      hallowActor.addPropOfObject('Max Motion Radius', hallowTextObjectName, 'setMaxMotionRadius', 10);
      hallowActor.addPropOfObject('Samples', hallowTextObjectName, 'setSamples', 5);
      hallowActor.addPropOfObject('Velocity X', hallowTextObjectName, 'setVelocityX', 0);
      hallowActor.addPropOfObject('Velocity Y', hallowTextObjectName, 'setVelocityY', 0);
    }
    if (__indexOf.call(props, 'wysihwyg') >= 0) {
      this.wysihwyg.control(el, {
        main: actor
      });
    }
    return actor;
  };

  Film._getDefaultOptions = function() {
    return {
      id: 'no-id',
      lane: 'no-lane',
      debug: false,
      aspectRatio: 1.85,
      port: 6543,
      pass: 'no pass'
    };
  };

  self = Film;

  return Film;

})();

},{"./film/Display":213,"./tools/HallowText":218,"utila/scripts/js/lib/object":207}],210:[function(require,module,exports){
var DynamicTimeline, EditingTheatre, EditorModel, EditorView,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

EditorModel = require('theatrejs/scripts/js/lib/EditorModel');

EditorView = require('theatrejs/scripts/js/lib/EditorView');

DynamicTimeline = require('theatrejs/scripts/js/lib/DynamicTimeline');

module.exports = EditingTheatre = (function() {
  function EditingTheatre(film) {
    var mainBox;
    this.film = film;
    this._resetAirbox = __bind(this._resetAirbox, this);
    this._toggleDisplayFittingMethod = __bind(this._toggleDisplayFittingMethod, this);
    this.timeline = new DynamicTimeline(60);
    this.model = new EditorModel(this.film.id, this.timeline, this.film.options.debug === true);
    this.view = new EditorView(this.model, document.body);
    mainBox = this.model.mainBox;
    mainBox.toggleVisibility();
    mainBox.on('visibility-toggle', this._resetAirbox);
    mainBox.on('height-change', this._resetAirbox);
    this.film.tick(this.view.tick);
    this.model.communicateWith('http://localhost:' + this.film.options.port, this.film.options.lane, this.film.options.pass);
    this.pieceBoundriesEventController = this.timeline.addEventController('Piece Boundries');
    this.film.kilid.on('ctrl+shift+=', this._toggleDisplayFittingMethod);
    this._fitDisplayWithMainBox = true;
    if (this._retrieve('fitDisplayWithMainBox') === 'no') {
      this._toggleDisplayFittingMethod();
    }
  }

  EditingTheatre.prototype._toggleDisplayFittingMethod = function() {
    this._fitDisplayWithMainBox = !this._fitDisplayWithMainBox;
    this._memorize('fitDisplayWithMainBox', this._fitDisplayWithMainBox ? 'yes' : 'no');
    return this._resetAirbox();
  };

  EditingTheatre.prototype._resetAirbox = function() {
    if (!this._fitDisplayWithMainBox) {
      this.film.display.airBox.chipAwayFromBottom(0);
      return;
    }
    if (this.model.mainBox._isVisible) {
      return this.film.display.airBox.chipAwayFromBottom(this.model.mainBox.height);
    } else {
      return this.film.display.airBox.chipAwayFromBottom(0);
    }
  };

  EditingTheatre.prototype._memorize = function(key, val) {
    return window.localStorage.setItem(this.film.id + '-editingTheatre-' + key, val);
  };

  EditingTheatre.prototype._retrieve = function(key) {
    return window.localStorage.getItem(this.film.id + '-editingTheatre-' + key);
  };

  return EditingTheatre;

})();

},{"theatrejs/scripts/js/lib/DynamicTimeline":151,"theatrejs/scripts/js/lib/EditorModel":152,"theatrejs/scripts/js/lib/EditorView":153}],211:[function(require,module,exports){
var El, Griddly, Grids,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Griddly = require('../tools/Griddly');

El = require('stupid-dom-interface');

module.exports = Grids = (function() {
  var self;

  function Grids(film) {
    this.film = film;
    this.toggle = __bind(this.toggle, this);
    this.overlay = null;
    this.showing = false;
    this.film.kilid.on('ctrl+;', this.toggle);
    if (this._retrieve() === 'yes') {
      this.show();
    }
    window.g = this.toggle.bind(this);
  }

  Grids.prototype._memorize = function(val) {
    return window.localStorage.setItem(this.film.id + '-grid-showing', val);
  };

  Grids.prototype._retrieve = function() {
    return window.localStorage.getItem(this.film.id + '-grid-showing');
  };

  Grids.prototype.show = function() {
    if (this.overlay == null) {
      this._makeOverlay();
    }
    this.overlay.addClass('visible');
    this.showing = true;
    return this._memorize('yes');
  };

  Grids.prototype.hide = function() {
    this.overlay.removeClass('visible');
    this.showing = false;
    return this._memorize('no');
  };

  Grids.prototype.toggle = function() {
    if (this.showing) {
      return this.hide();
    } else {
      return this.show();
    }
  };

  Grids.prototype._makeOverlay = function() {
    var g, url;
    this.overlay = El('#view-gridOverlay').inside(this.film.display.viewEl);
    g = new Griddly({
      width: this.film.display.width,
      height: this.film.display.height,
      horizontalSpacing: '70 10',
      verticalSpacing: '38 10',
      color: [0.1, 0.1, 0.1, 0.9]
    });
    url = g.getUrl();
    self.addStylesheetRules({
      '#view-gridOverlay': {
        'background-image': 'url(' + url + ')'
      }
    });
  };

  Grids.addStylesheetRules = function(rules) {
    var propImportant, propName, propStr, propVal, props, s, selector, styleEl;
    styleEl = document.createElement('style');
    document.head.appendChild(styleEl);
    s = styleEl.sheet;
    for (selector in rules) {
      props = rules[selector];
      propStr = '';
      for (propName in props) {
        propVal = props[propName];
        propImportant = '';
        if (propVal[1] === true) {
          propVal = propVal[0];
          propImportant = ' !important';
        }
        propStr += propName + ':' + propVal + propImportant + ';\n';
        s.insertRule(selector + '{' + propStr + '}', s.cssRules.length);
      }
    }
  };

  self = Grids;

  return Grids;

})();

},{"../tools/Griddly":217,"stupid-dom-interface":63}],212:[function(require,module,exports){
var El, WysihwygManager;

El = require('stupid-dom-interface');

module.exports = WysihwygManager = (function() {
  function WysihwygManager(film) {
    this.film = film;
    this.moosh = this.film.moosh;
    this.kilid = this.film.kilid;
    this.timeline = this.film.theatre.model.timeline;
    this.el = null;
    this.actors = null;
    this._prepareDash();
    this._setupKilid();
    this._setupMoosh();
  }

  WysihwygManager.prototype._prepareDash = function() {
    return this.dash = El('#wysihwyg-dash');
  };

  WysihwygManager.prototype._setupKilid = function() {
    this.kilid.on('ctrl+d', (function(_this) {
      return function() {
        return _this.relinquish();
      };
    })(this));
    this.kilid.on('x+right', (function(_this) {
      return function() {
        return _this._adjust('X', 10);
      };
    })(this));
    this.kilid.on('x+alt+right', (function(_this) {
      return function() {
        return _this._adjust('X', 1);
      };
    })(this));
    this.kilid.on('x+ctrl+right', (function(_this) {
      return function() {
        return _this._adjust('X', 100);
      };
    })(this));
    this.kilid.on('x+left', (function(_this) {
      return function() {
        return _this._adjust('X', -10);
      };
    })(this));
    this.kilid.on('x+alt+left', (function(_this) {
      return function() {
        return _this._adjust('X', -1);
      };
    })(this));
    this.kilid.on('x+ctrl+left', (function(_this) {
      return function() {
        return _this._adjust('X', -100);
      };
    })(this));
    this.kilid.on('x+down', (function(_this) {
      return function() {
        return _this._adjust('Y', 10);
      };
    })(this));
    this.kilid.on('x+alt+down', (function(_this) {
      return function() {
        return _this._adjust('Y', 1);
      };
    })(this));
    this.kilid.on('x+ctrl+down', (function(_this) {
      return function() {
        return _this._adjust('Y', 100);
      };
    })(this));
    this.kilid.on('x+up', (function(_this) {
      return function() {
        return _this._adjust('Y', -10);
      };
    })(this));
    this.kilid.on('x+alt+up', (function(_this) {
      return function() {
        return _this._adjust('Y', -1);
      };
    })(this));
    this.kilid.on('x+ctrl+up', (function(_this) {
      return function() {
        return _this._adjust('Y', -100);
      };
    })(this));
    this.kilid.on('z+down', (function(_this) {
      return function() {
        return _this._adjust('Z', 10);
      };
    })(this));
    this.kilid.on('z+alt+down', (function(_this) {
      return function() {
        return _this._adjust('Z', 1);
      };
    })(this));
    this.kilid.on('z+ctrl+down', (function(_this) {
      return function() {
        return _this._adjust('Z', 100);
      };
    })(this));
    this.kilid.on('z+up', (function(_this) {
      return function() {
        return _this._adjust('Z', -10);
      };
    })(this));
    this.kilid.on('z+alt+up', (function(_this) {
      return function() {
        return _this._adjust('Z', -1);
      };
    })(this));
    this.kilid.on('z+ctrl+up', (function(_this) {
      return function() {
        return _this._adjust('Z', -100);
      };
    })(this));
    this.kilid.on('e+right', (function(_this) {
      return function() {
        return _this._adjust('Rotation Z', 10);
      };
    })(this));
    this.kilid.on('e+alt+right', (function(_this) {
      return function() {
        return _this._adjust('Rotation Z', 1);
      };
    })(this));
    this.kilid.on('e+ctrl+right', (function(_this) {
      return function() {
        return _this._adjust('Rotation Z', 100);
      };
    })(this));
    this.kilid.on('e+left', (function(_this) {
      return function() {
        return _this._adjust('Rotation Z', -10);
      };
    })(this));
    this.kilid.on('e+alt+left', (function(_this) {
      return function() {
        return _this._adjust('Rotation Z', -1);
      };
    })(this));
    this.kilid.on('e+ctrl+left', (function(_this) {
      return function() {
        return _this._adjust('Rotation Z', -100);
      };
    })(this));
    this.kilid.on('q+right', (function(_this) {
      return function() {
        return _this._adjust('Rotation Y', 10);
      };
    })(this));
    this.kilid.on('q+alt+right', (function(_this) {
      return function() {
        return _this._adjust('Rotation Y', 1);
      };
    })(this));
    this.kilid.on('q+ctrl+right', (function(_this) {
      return function() {
        return _this._adjust('Rotation Y', 100);
      };
    })(this));
    this.kilid.on('q+left', (function(_this) {
      return function() {
        return _this._adjust('Rotation Y', -10);
      };
    })(this));
    this.kilid.on('q+alt+left', (function(_this) {
      return function() {
        return _this._adjust('Rotation Y', -1);
      };
    })(this));
    this.kilid.on('q+ctrl+left', (function(_this) {
      return function() {
        return _this._adjust('Rotation Y', -100);
      };
    })(this));
    this.kilid.on('q+up', (function(_this) {
      return function() {
        return _this._adjust('Rotation X', 10);
      };
    })(this));
    this.kilid.on('q+alt+up', (function(_this) {
      return function() {
        return _this._adjust('Rotation X', 1);
      };
    })(this));
    this.kilid.on('q+ctrl+up', (function(_this) {
      return function() {
        return _this._adjust('Rotation X', 100);
      };
    })(this));
    this.kilid.on('q+down', (function(_this) {
      return function() {
        return _this._adjust('Rotation X', -10);
      };
    })(this));
    this.kilid.on('q+alt+down', (function(_this) {
      return function() {
        return _this._adjust('Rotation X', -1);
      };
    })(this));
    this.kilid.on('q+ctrl+down', (function(_this) {
      return function() {
        return _this._adjust('Rotation X', -100);
      };
    })(this));
    this.kilid.on('`+up', (function(_this) {
      return function() {
        return _this._adjust('Opacity', 0.1);
      };
    })(this));
    this.kilid.on('`+alt+up', (function(_this) {
      return function() {
        return _this._adjust('Opacity', 0.01);
      };
    })(this));
    this.kilid.on('`+ctrl+up', (function(_this) {
      return function() {
        return _this._adjust('Opacity', 0.2);
      };
    })(this));
    this.kilid.on('`+down', (function(_this) {
      return function() {
        return _this._adjust('Opacity', -0.1);
      };
    })(this));
    this.kilid.on('`+alt+down', (function(_this) {
      return function() {
        return _this._adjust('Opacity', -0.01);
      };
    })(this));
    this.kilid.on('`+ctrl+down', (function(_this) {
      return function() {
        return _this._adjust('Opacity', -0.2);
      };
    })(this));
    this.kilid.on('w+up', (function(_this) {
      return function() {
        return _this._adjust('Scale Y', 0.1);
      };
    })(this));
    this.kilid.on('w+alt+up', (function(_this) {
      return function() {
        return _this._adjust('Scale Y', 0.01);
      };
    })(this));
    this.kilid.on('w+ctrl+up', (function(_this) {
      return function() {
        return _this._adjust('Scale Y', 0.2);
      };
    })(this));
    this.kilid.on('w+down', (function(_this) {
      return function() {
        return _this._adjust('Scale Y', -0.1);
      };
    })(this));
    this.kilid.on('w+alt+down', (function(_this) {
      return function() {
        return _this._adjust('Scale Y', -0.01);
      };
    })(this));
    this.kilid.on('w+ctrl+down', (function(_this) {
      return function() {
        return _this._adjust('Scale Y', -0.2);
      };
    })(this));
    this.kilid.on('w+right', (function(_this) {
      return function() {
        return _this._adjust('Scale X', 0.1);
      };
    })(this));
    this.kilid.on('w+alt+right', (function(_this) {
      return function() {
        return _this._adjust('Scale X', 0.01);
      };
    })(this));
    this.kilid.on('w+ctrl+right', (function(_this) {
      return function() {
        return _this._adjust('Scale X', 0.2);
      };
    })(this));
    this.kilid.on('w+left', (function(_this) {
      return function() {
        return _this._adjust('Scale X', -0.1);
      };
    })(this));
    this.kilid.on('w+alt+left', (function(_this) {
      return function() {
        return _this._adjust('Scale X', -0.01);
      };
    })(this));
    this.kilid.on('w+ctrl+left', (function(_this) {
      return function() {
        return _this._adjust('Scale X', -0.2);
      };
    })(this));
    this.kilid.on('s+up', (function(_this) {
      return function() {
        _this._adjust('Scale Y', 0.1);
        return _this._adjust('Scale X', 0.1);
      };
    })(this));
    this.kilid.on('s+alt+up', (function(_this) {
      return function() {
        _this._adjust('Scale Y', 0.01);
        return _this._adjust('Scale X', 0.01);
      };
    })(this));
    this.kilid.on('s+ctrl+up', (function(_this) {
      return function() {
        _this._adjust('Scale Y', 0.2);
        return _this._adjust('Scale X', 0.2);
      };
    })(this));
    this.kilid.on('s+down', (function(_this) {
      return function() {
        _this._adjust('Scale Y', -0.1);
        return _this._adjust('Scale X', -0.1);
      };
    })(this));
    this.kilid.on('s+alt+down', (function(_this) {
      return function() {
        _this._adjust('Scale Y', -0.01);
        return _this._adjust('Scale X', -0.01);
      };
    })(this));
    return this.kilid.on('s+ctrl+down', (function(_this) {
      return function() {
        _this._adjust('Scale Y', -0.2);
        return _this._adjust('Scale X', -0.2);
      };
    })(this));
  };

  WysihwygManager.prototype._setupMoosh = function() {
    this.moosh.onDrag(this.dash).withKeys('x').onDrag((function(_this) {
      return function(e) {
        _this._adjust('X', e.relX);
        return _this._adjust('Y', e.relY);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('x').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        _this._set('X', 0);
        return _this._set('Y', 0);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('x+shift').onDrag((function(_this) {
      return function(e) {
        return _this._adjust('X', e.relX);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('x+shift').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        return _this._set('X', 0);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('x+alt').onDrag((function(_this) {
      return function(e) {
        return _this._adjust('Y', e.relY);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('x+alt').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        return _this._set('Y', 0);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('z').onDrag((function(_this) {
      return function(e) {
        return _this._adjust('Z', e.relY);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('z').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        return _this._set('Z', 0);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('e').onDrag((function(_this) {
      return function(e) {
        return _this._adjust('Rotation Z', e.relY);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('e').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        return _this._set('Rotation Z', 0);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('q').onDrag((function(_this) {
      return function(e) {
        _this._adjust('Rotation Y', e.relX);
        return _this._adjust('Rotation X', -e.relY);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('q').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        _this._set('Rotation Y', 0);
        return _this._set('Rotation X', 0);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('q+shift').onDrag((function(_this) {
      return function(e) {
        return _this._adjust('Rotation Y', e.relX);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('q+shift').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        return _this._set('Rotation Y', 0);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('q+alt').onDrag((function(_this) {
      return function(e) {
        return _this._adjust('Rotation X', -e.relY);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('q+alt').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        return _this._set('Rotation X', 0);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('`').onDrag((function(_this) {
      return function(e) {
        return _this._adjust('Opacity', -e.relY / 300);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('`').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        return _this._set('Opacity', 1);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('s').onDrag((function(_this) {
      return function(e) {
        _this._adjust('Scale X', -e.relY / 100);
        return _this._adjust('Scale Y', -e.relY / 100);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('s').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        _this._set('Scale X', 1);
        return _this._set('Scale Y', 1);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('w').onDrag((function(_this) {
      return function(e) {
        _this._adjust('Scale X', e.relX / 100);
        return _this._adjust('Scale Y', -e.relY / 100);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('w').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        _this._set('Scale X', 1);
        return _this._set('Scale Y', 1);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('w+shift').onDrag((function(_this) {
      return function(e) {
        return _this._adjust('Scale X', e.relX / 100);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('w+shift').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        return _this._set('Scale X', 1);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('w+alt').onDrag((function(_this) {
      return function(e) {
        return _this._adjust('Scale Y', -e.relY / 100);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('w+alt').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        return _this._set('Scale Y', 1);
      };
    })(this));
    this.moosh.onDrag(this.dash).withKeys('r').onDrag((function(_this) {
      return function(e) {
        _this._adjust('Skew X', e.relX / 10);
        return _this._adjust('Skew Y', -e.relY / 10);
      };
    })(this));
    this.moosh.onClick(this.dash).withKeys('r').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        _this._set('Skew X', 0);
        return _this._set('Skew Y', 0);
      };
    })(this));
    return this.moosh.onClick(this.dash).withKeys('f').repeatedBy(2).onDone((function(_this) {
      return function(e) {
        _this._set('Skew X', 0);
        _this._set('Skew Y', 0);
        _this._set('Scale X', 1);
        _this._set('Scale Y', 1);
        _this._set('Rotation X', 0);
        _this._set('Rotation Y', 0);
        _this._set('Rotation Z', 0);
        _this._set('X', 0);
        _this._set('Y', 0);
        return _this._set('Z', 0);
      };
    })(this));
  };

  WysihwygManager.prototype.control = function(el, actors) {
    this.moosh.onClick(el, (function(_this) {
      return function() {
        return _this._takeControl(el, actors);
      };
    })(this));
  };

  WysihwygManager.prototype._takeControl = function(el, actors) {
    this.relinquish();
    this.el = el;
    this.actors = actors;
    return this.dash.inside(this.el);
  };

  WysihwygManager.prototype._adjust = function(propName, amount, actorName) {
    if (actorName == null) {
      actorName = 'main';
    }
    return this.__set(propName, amount, actorName, true);
  };

  WysihwygManager.prototype._set = function(propName, amount, actorName) {
    if (actorName == null) {
      actorName = 'main';
    }
    return this.__set(propName, amount, actorName, false);
  };

  WysihwygManager.prototype.__set = function(propName, amount, actorName, adjust) {
    var point, prop;
    if (actorName == null) {
      actorName = 'main';
    }
    prop = this.actors[actorName].props[propName];
    if (prop == null) {
      return;
    }
    point = prop.timelineProp.pacs.getOrMakePointOnOrInVicinity(this.timeline.t, 16);
    if (adjust) {
      point.setValue(point.value + amount);
    } else {
      point.setValue(amount);
    }
    point.pacs.done();
    return this.timeline.tick(this.timeline.t);
  };

  WysihwygManager.prototype.relinquish = function() {
    if (this.el == null) {
      return;
    }
    this.dash.detach();
  };

  return WysihwygManager;

})();


/*

`	Opacity

X	Movement X/Y (shift: X, Alt: Y)
Z	Movement Z

Q	Rotation X/Y (shift: X, Alt: Y)
E	Rotation Z

S	Scale Both Synchronized
W	Scale Both Separately

R Skew
 */

},{"stupid-dom-interface":63}],213:[function(require,module,exports){
var AirBox, Display, El;

AirBox = require('../tools/AirBox');

El = require('stupid-dom-interface');

module.exports = Display = (function() {
  function Display(film) {
    this.film = film;
    this.aspectRatio = this.film.options.aspectRatio;
    this.airBox = new AirBox(this.aspectRatio);
    this.el = El('#display').inside(document.body);
    this.width = this.airBox.width;
    this.height = this.airBox.height;
    this.viewEl = El('#view').width(this.airBox.width).height(this.airBox.height).inside(display);
    this.stageLayerEl = El('#stageLayer').inside(this.viewEl);
    this.bgLayer = El('#bgLayer').inside(this.viewEl);
    this.stageEl = El('#stage').perspective(800).inside(this.stageLayerEl);
    this.airBox.on('transform-change', (function(_this) {
      return function() {
        _this.viewEl.scale(_this.airBox.scale).x(_this.airBox.x).y(_this.airBox.y);
      };
    })(this));
  }

  return Display;

})();

},{"../tools/AirBox":216,"stupid-dom-interface":63}],214:[function(require,module,exports){
var El, Set;

El = require('stupid-dom-interface');

module.exports = Set = (function() {
  function Set(film, id) {
    this.film = film;
    this.id = id;
    this._pieceBoundriesEventControllerTypesCount = 0;
  }

  Set.prototype._setupDomEl = function() {
    return this.film._setupDomEl.apply(this.film, arguments);
  };

  Set.prototype._makeEl = function(s) {
    return El(s);
  };

  Set.prototype._onTime = function(t, cb) {
    var typeId;
    typeId = this.id + (this._pieceBoundriesEventControllerTypesCount++);
    this.film.theatre.pieceBoundriesEventController.defineType(typeId, {
      fn: function(forward, last, supposedT, currentT, args) {
        cb(forward);
      }
    });
    return this.film.theatre.pieceBoundriesEventController.events.add(typeId, t);
  };

  return Set;

})();

},{"stupid-dom-interface":63}],215:[function(require,module,exports){
module.exports = {
  EditingFilm: require('./EditingFilm'),
  Set: require('./film/Set')
};

},{"./EditingFilm":208,"./film/Set":214}],216:[function(require,module,exports){
var AirBox, Emitter,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Emitter = require('utila/scripts/js/lib/Emitter');

module.exports = AirBox = (function(_super) {
  __extends(AirBox, _super);

  function AirBox(ratio) {
    this.ratio = ratio;
    this._recalculateTransform = __bind(this._recalculateTransform, this);
    AirBox.__super__.constructor.apply(this, arguments);
    this.width = 0;
    this.height = 0;
    this.scale = 1;
    this.x = 0;
    this.y = 0;
    this._chipAways = new Uint16Array(4);
    this._calculateDims();
    window.addEventListener('resize', this._recalculateTransform);
    setTimeout(this._recalculateTransform, 0);
  }

  AirBox.prototype.chipAwayFromTop = function(amount) {
    this._chipAways[0] = amount;
    return this._recalculateTransform();
  };

  AirBox.prototype.chipAwayFromRight = function(amount) {
    this._chipAways[1] = amount;
    return this._recalculateTransform();
  };

  AirBox.prototype.chipAwayFromBottom = function(amount) {
    this._chipAways[2] = amount;
    return this._recalculateTransform();
  };

  AirBox.prototype.chipAwayFromLeft = function(amount) {
    this._chipAways[3] = amount;
    return this._recalculateTransform();
  };

  AirBox.prototype._calculateDims = function() {
    var height, screenRatio, width, _ref;
    _ref = window.screen, width = _ref.width, height = _ref.height;
    screenRatio = width / height;
    if (this.ratio >= screenRatio) {
      this.width = width;
      return this.height = width / this.ratio;
    } else {
      this.height = height;
      return this.width = this.height * this.ratio;
    }
  };

  AirBox.prototype._recalculateTransform = function() {
    var hScale, innerHeight, innerWidth, scale, wScale;
    innerWidth = window.innerWidth, innerHeight = window.innerHeight;
    innerWidth -= this._chipAways[1] + this._chipAways[3];
    innerHeight -= this._chipAways[0] + this._chipAways[2];
    wScale = innerWidth / this.width;
    hScale = innerHeight / this.height;
    scale = Math.min(wScale, hScale);
    this.scale = scale;
    this.x = this._chipAways[3] + (innerWidth - this.width) / 2.0;
    this.y = this._chipAways[0] + (innerHeight - this.height) / 2.0;
    return this._emit('transform-change');
  };

  return AirBox;

})(Emitter);

},{"utila/scripts/js/lib/Emitter":204}],217:[function(require,module,exports){
var Gila, Griddly, fragSource, object, rectangleVx, vertSource;

Gila = require('gila');

object = require('utila/scripts/js/lib/object');

module.exports = Griddly = (function() {
  var self;

  function Griddly(options) {
    this._url = null;
    this.options = self.getDefaultOptions();
    object.overrideOnto(this.options, options);
    this._draw();
  }

  Griddly.prototype._draw = function() {
    var canvas, frag, vert;
    canvas = document.createElement('canvas');
    canvas.width = this.options.width;
    canvas.height = this.options.height;
    this.gila = new Gila(canvas, true);
    this.gila.setClearColor(0, 0, 0, 0);
    this.gila.clear();
    vert = this.gila.getVertexShader('v', vertSource);
    frag = this.gila.getFragmentShader('f', fragSource);
    this.program = this.gila.getProgram(vert, frag);
    this.gila.blending.enable();
    this.gila.blend.src.srcAlpha().dst.oneMinusSrcAlpha().update();
    this.program.activate();
    this.gila.makeArrayBuffer().staticData(rectangleVx);
    this.program.attr('vx').enable().readAsFloat(2, false, 8, 0);
    this.program.uniform('2f', 'dims').set(this.options.width, this.options.height);
    this.program.uniform('4f', 'color').fromArray(new Float32Array(this.options.color));
    this._drawGrids();
    return this._url = this.gila.canvas.toDataURL();
  };

  Griddly.prototype._drawGrids = function() {
    this._drawHorizontalGrid();
    return this._drawVerticalGrid();
  };

  Griddly.prototype._drawHorizontalGrid = function() {
    this.program.uniform('1i', 'direction').set(1);
    return this._drawLines(this.options.horizontalSpacing);
  };

  Griddly.prototype._drawVerticalGrid = function() {
    this.program.uniform('1i', 'direction').set(0);
    return this._drawLines(this.options.verticalSpacing);
  };

  Griddly.prototype._drawLines = function(str) {
    var lines, num, offset, stride, _i, _j, _len, _len1, _ref;
    stride = 0;
    offset = 0;
    lines = [];
    _ref = str.split(/\s+/);
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      num = _ref[_i];
      num = parseInt(num);
      offset += num;
      lines.push(offset);
    }
    stride = offset;
    this.program.uniform('1f', 'stride').set(stride);
    for (_j = 0, _len1 = lines.length; _j < _len1; _j++) {
      offset = lines[_j];
      this.program.uniform('1f', 'offset').set(offset);
      this.gila.drawTriangles(0, 6);
    }
  };

  Griddly.prototype.getUrl = function() {
    return this._url;
  };

  Griddly.prototype.applyTo = function(el) {
    el.css('background-image', 'url(' + this.getUrl() + '), ' + el.computedStyle('background-image'));
    return this;
  };

  Griddly.getDefaultOptions = function() {
    return {
      width: 0,
      height: 0,
      horizontalSpacing: '10 30',
      verticalSpacing: '10 50',
      color: [1, 1, 1, 1]
    };
  };

  self = Griddly;

  return Griddly;

})();

rectangleVx = new Float32Array([-1, -1, -1, 1, 1, -1, 1, -1, -1, 1, 1, 1]);

vertSource = "attribute vec2 vx;\nvarying vec2 vTexCoord;\n\nvoid main() {\n	gl_Position = vec4(vx, 0.0, 1.0);\n	vTexCoord = vx / 2.0 + 0.5;\n}";

fragSource = "precision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform vec2 dims;\n\nuniform int direction;\nconst int HORIZONTAL = int(0);\nconst int VERTICAL = int(1);\n\nuniform float stride;\nuniform float offset;\n\nuniform vec4 color;\n\nvoid main() {\n\n	float pos, curOffset;\n\n	if (direction == VERTICAL) {\n		pos = dims.x * vTexCoord.x;\n\n		curOffset = mod(pos, stride);\n\n	} else {\n\n		pos = dims.y * (1.0 - vTexCoord.y);\n\n		curOffset = mod(pos, stride);\n	}\n\n	if (curOffset >= (offset - 1.0) && curOffset <= offset) {\n		gl_FragColor = color;\n	}\n\n}\n";

},{"gila":5,"utila/scripts/js/lib/object":207}],218:[function(require,module,exports){
var HallowText;

module.exports = HallowText = (function() {
  function HallowText(el, _samples) {
    this.el = el;
    this._samples = _samples != null ? _samples : 1;
    this.el.set('hallow-text', this);
    this._baseRadius = 0;
    this._maxMotionRadius = 10;
    this._currentMotionRadius = 0;
    this._colorPrepend = "";
    this._color = new Uint8Array(3);
    this._velocity = new Float32Array(2);
    this.setColor(255, 255, 255);
  }

  HallowText.prototype.setSamples = function(n) {
    this._samples = n | 0;
  };

  HallowText.prototype.setColor = function(r, g, b) {
    this._color[0] = r;
    this._color[1] = g;
    this._color[2] = b;
    this.el._style.color = "rgba(" + this._color[0] + ", " + this._color[1] + ", " + this._color[2] + ", 0)";
    this._colorPrepend = "rgba(" + this._color[0] + ", " + this._color[1] + ", " + this._color[2] + ", ";
    return this._apply();
  };

  HallowText.prototype.setBaseRadius = function(b) {
    this._baseRadius = +b;
    return this._apply();
  };

  HallowText.prototype.setMaxMotionRadius = function(b) {
    this._maxMotionRadius = +b;
    return this._apply();
  };

  HallowText.prototype.setVelocityX = function(amount) {
    var vel;
    this._velocity[0] = -amount;
    vel = Math.sqrt(Math.pow(this._velocity[0], 2) + Math.pow(this._velocity[1], 2));
    this._currentMotionRadius = Math.min(vel, this._maxMotionRadius / 1.5);
    return this._apply();
  };

  HallowText.prototype.setVelocityY = function(amount) {
    var vel;
    this._velocity[1] = -amount;
    vel = Math.sqrt(Math.pow(this._velocity[0], 2) + Math.pow(this._velocity[1], 2));
    this._currentMotionRadius = Math.min(vel, this._maxMotionRadius / 1.5);
    return this._apply();
  };

  HallowText.prototype._apply = function() {
    var i, opacity, opacityProg, prog, shadow, _i, _ref;
    shadow = "";
    for (i = _i = 0, _ref = this._samples; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
      prog = i / this._samples;
      if (i !== 0) {
        shadow += ", ";
      }
      opacityProg = 0.1 + prog * 0.9;
      opacityProg = Math.sin(opacityProg * Math.PI / 2);
      opacity = 1.0 - opacityProg;
      prog = 1 - Math.cos(prog * Math.PI / 2);
      shadow += "" + this._colorPrepend + " " + opacity + ") " + (prog * this._velocity[0]) + "px " + (prog * this._velocity[1]) + "px " + (this._baseRadius + this._currentMotionRadius) + "px";
    }
    return this.el._style.textShadow = shadow;
  };

  return HallowText;

})();

},{}],219:[function(require,module,exports){
var EditingFilm, film, setupBigBlackHorse;

EditingFilm = require('tiny-filmmaking-studio').EditingFilm;

setupBigBlackHorse = require('./lanes/bigBlackHorse');

film = new EditingFilm({
  id: 'template',
  lane: 'bigBlackHorse',
  pass: 'qwerty',
  aspectRatio: 1.85,
  port: 6543
});

setupBigBlackHorse(film);

film.run();

},{"./lanes/bigBlackHorse":220,"tiny-filmmaking-studio":215}],220:[function(require,module,exports){
var OpeningTitlesSet;

OpeningTitlesSet = require('../sets/OpeningTitlesSet');

module.exports = function(film) {
  return film.addSet(new OpeningTitlesSet(film));
};

},{"../sets/OpeningTitlesSet":221}],221:[function(require,module,exports){
var OpeningTitlesSet, Set,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Set = require('tiny-filmmaking-studio').Set;

module.exports = OpeningTitlesSet = (function(_super) {
  __extends(OpeningTitlesSet, _super);

  function OpeningTitlesSet() {
    var aact, bigBlackHorse, container, greyBg;
    OpeningTitlesSet.__super__.constructor.apply(this, arguments);
    this.id = 'openingTitles';
    greyBg = this._makeEl('#openingTitles-greyBg.bg').inside(this.film.display.bgLayer);
    container = this._makeEl('#openingTitles-container.container').inside(this.film.display.stageEl);
    bigBlackHorse = this._makeEl('.title').inside(container).html('Big Black Horse').css({
      fontSize: 72
    });
    this._setupDomEl('Opening Titles', 'Big Black Horse', bigBlackHorse, ['translation', 'rotation', 'opacity', 'scale', 'skew', 'wysihwyg']);
    aact = this._makeEl('.title').inside(container).html('And A Cherry Tree').css({
      fontSize: 36
    });
    this._setupDomEl('Opening Titles', 'And a Cherry Tree', aact, ['translation', 'rotation', 'opacity', 'scale', 'skew', 'wysihwyg']);
  }

  return OpeningTitlesSet;

})(Set);

},{"tiny-filmmaking-studio":215}]},{},[219])
(219)
});
;